Return-Path: <qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org>
X-Original-To: lists+qemu-devel@lfdr.de
Delivered-To: lists+qemu-devel@lfdr.de
Received: from lists.gnu.org (lists.gnu.org [209.51.188.17])
	by mail.lfdr.de (Postfix) with ESMTPS id 0AAE46AD6D6
	for <lists+qemu-devel@lfdr.de>; Tue,  7 Mar 2023 06:36:37 +0100 (CET)
Received: from localhost ([::1] helo=lists1p.gnu.org)
	by lists.gnu.org with esmtp (Exim 4.90_1)
	(envelope-from <qemu-devel-bounces@nongnu.org>)
	id 1pZPyd-0006na-3p; Tue, 07 Mar 2023 00:35:07 -0500
Received: from eggs.gnu.org ([2001:470:142:3::10])
 by lists.gnu.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256)
 (Exim 4.90_1) (envelope-from <tsimpson@qualcomm.com>)
 id 1pZPyO-0006XQ-Dm
 for qemu-devel@nongnu.org; Tue, 07 Mar 2023 00:34:53 -0500
Received: from mx0b-0031df01.pphosted.com ([205.220.180.131])
 by eggs.gnu.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256)
 (Exim 4.90_1) (envelope-from <tsimpson@qualcomm.com>)
 id 1pZPyK-0006ZV-2V
 for qemu-devel@nongnu.org; Tue, 07 Mar 2023 00:34:51 -0500
Received: from pps.filterd (m0279872.ppops.net [127.0.0.1])
 by mx0a-0031df01.pphosted.com (8.17.1.19/8.17.1.19) with ESMTP id
 3271dQMB031893; Tue, 7 Mar 2023 05:34:47 GMT
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=quicinc.com;
 h=from : to : cc :
 subject : date : message-id : in-reply-to : references : mime-version :
 content-type : content-transfer-encoding; s=qcppdkim1;
 bh=y2EB+xJJPFdF8aeb2H4PingDe1yx/BiCo7toncoKbaw=;
 b=LHmRdW2eMFB+m6Rq+EmL6RlTXblzlsgi/V1Asl01tCb54YC3FehZWIixg5IXEtCTNG2A
 2pGyNYVlrrA3cIwpjbKJoGPaGof/ibje6qsQBLk3NMIfF9ukGTXgCI4t58VsX2WfWi76
 DRGcj1bLZzJE1jao3jcjoclsc9Gw1cSksb+q89dirvkRoXZf8SGfYFmW6hmsT1a4/i2g
 D1pHLbwVpK/Ltw73vZ4glT9cS74YIDBCd6+wgKFaXpYx4gt9E8XGIX39XE4TUheoPlrE
 6vC3EXcgPP6rDr/sETQ9Uqm7hnB0QB20h/qPPWNxJ5A0Tl8kwYA3fdtwPoAL4KiCQmRk fQ== 
Received: from nalasppmta01.qualcomm.com (Global_NAT1.qualcomm.com
 [129.46.96.20])
 by mx0a-0031df01.pphosted.com (PPS) with ESMTPS id 3p5usx0exw-1
 (version=TLSv1.2 cipher=ECDHE-RSA-AES256-GCM-SHA384 bits=256 verify=NOT);
 Tue, 07 Mar 2023 05:34:46 +0000
Received: from pps.filterd (NALASPPMTA01.qualcomm.com [127.0.0.1])
 by NALASPPMTA01.qualcomm.com (8.17.1.5/8.17.1.5) with ESMTP id 3275Yiml000571; 
 Tue, 7 Mar 2023 05:34:45 GMT
Received: from pps.reinject (localhost [127.0.0.1])
 by NALASPPMTA01.qualcomm.com (PPS) with ESMTPS id 3p4fhbm8nt-1
 (version=TLSv1.2 cipher=ECDHE-RSA-AES256-GCM-SHA384 bits=256 verify=NOT);
 Tue, 07 Mar 2023 05:34:45 +0000
Received: from NALASPPMTA01.qualcomm.com (NALASPPMTA01.qualcomm.com
 [127.0.0.1])
 by pps.reinject (8.17.1.5/8.17.1.5) with ESMTP id 3275YiMw000539;
 Tue, 7 Mar 2023 05:34:44 GMT
Received: from hu-devc-sd-u20-a-1.qualcomm.com (hu-tsimpson-lv.qualcomm.com
 [10.47.204.221])
 by NALASPPMTA01.qualcomm.com (PPS) with ESMTPS id 3275Yh6b000528
 (version=TLSv1.2 cipher=ECDHE-RSA-AES256-GCM-SHA384 bits=256 verify=NOT);
 Tue, 07 Mar 2023 05:34:44 +0000
Received: by hu-devc-sd-u20-a-1.qualcomm.com (Postfix, from userid 47164)
 id ACD5BA89; Mon,  6 Mar 2023 21:34:42 -0800 (PST)
From: Taylor Simpson <tsimpson@quicinc.com>
To: qemu-devel@nongnu.org
Cc: tsimpson@quicinc.com, richard.henderson@linaro.org, philmd@linaro.org,
 peter.maydell@linaro.org, bcain@quicinc.com, quic_mathbern@quicinc.com,
 stefanha@redhat.com, ale@rev.ng, anjo@rev.ng
Subject: [PULL 16/17] Hexagon (target/hexagon) Reduce manipulation of
 slot_cancelled
Date: Mon,  6 Mar 2023 21:34:37 -0800
Message-Id: <20230307053438.2416629-17-tsimpson@quicinc.com>
X-Mailer: git-send-email 2.25.1
In-Reply-To: <20230307053438.2416629-1-tsimpson@quicinc.com>
References: <20230307053438.2416629-1-tsimpson@quicinc.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
X-QCInternal: smtphost
X-QCInternal: smtphost
X-Proofpoint-Virus-Version: vendor=nai engine=6200 definitions=5800
 signatures=585085
X-Proofpoint-Virus-Version: vendor=nai engine=6200 definitions=5800
 signatures=585085
X-Proofpoint-ORIG-GUID: yiuxAhgI8zqW-jP_x7wGPMHHKdQkKlFD
X-Proofpoint-GUID: yiuxAhgI8zqW-jP_x7wGPMHHKdQkKlFD
X-Proofpoint-Virus-Version: vendor=baseguard
 engine=ICAP:2.0.219,Aquarius:18.0.942,Hydra:6.0.573,FMLib:17.11.170.22
 definitions=2023-03-06_14,2023-03-06_01,2023-02-09_01
X-Proofpoint-Spam-Details: rule=outbound_notspam policy=outbound score=0
 malwarescore=0 spamscore=0
 clxscore=1015 priorityscore=1501 mlxscore=0 bulkscore=0 impostorscore=0
 phishscore=0 adultscore=0 mlxlogscore=359 suspectscore=0
 lowpriorityscore=0 classifier=spam adjust=0 reason=mlx scancount=1
 engine=8.12.0-2212070000 definitions=main-2303070049
Received-SPF: pass client-ip=205.220.180.131;
 envelope-from=tsimpson@qualcomm.com; helo=mx0b-0031df01.pphosted.com
X-Spam_score_int: -17
X-Spam_score: -1.8
X-Spam_bar: -
X-Spam_report: (-1.8 / 5.0 requ) BAYES_00=-1.9, DKIM_SIGNED=0.1,
 DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1, HEADER_FROM_DIFFERENT_DOMAINS=0.25,
 SPF_HELO_NONE=0.001, SPF_PASS=-0.001 autolearn=no autolearn_force=no
X-Spam_action: no action
X-BeenThere: qemu-devel@nongnu.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: <qemu-devel.nongnu.org>
List-Unsubscribe: <https://lists.nongnu.org/mailman/options/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=unsubscribe>
List-Archive: <https://lists.nongnu.org/archive/html/qemu-devel>
List-Post: <mailto:qemu-devel@nongnu.org>
List-Help: <mailto:qemu-devel-request@nongnu.org?subject=help>
List-Subscribe: <https://lists.nongnu.org/mailman/listinfo/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=subscribe>
Errors-To: qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org
Sender: qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org

V2Ugb25seSBuZWVkIHRvIHRyYWNrIHNsb3QgZm9yIHByZWRpY2F0ZWQgc3RvcmVzIGFuZCBwcmVk
aWNhdGVkIEhWWAppbnN0cnVjdGlvbnMuCgpBZGQgYXJndW1lbnRzIHRvIHRoZSBwcm9iZSBoZWxw
ZXIgZnVuY3Rpb25zIHRvIGluZGljYXRlIGlmIHRoZSBzbG90CmlzIHByZWRpY2F0ZWQuCgpIZXJl
IGlzIGEgc2ltcGxlIGV4YW1wbGUgb2YgdGhlIGRpZmZlcmVuY2VzIGluIHRoZSBUQ0cgY29kZSBn
ZW5lcmF0ZWQ6CgpJTjoKMHgwMDQwMDA5NDogIDB4ZjkwMGMxMDIgeyAgICAgICBpZiAoUDApIFIy
ID0gYW5kKFIwLFIxKSB9CgpCRUZPUkUKIC0tLS0gMDA0MDAwOTQKIG1vdl9pMzIgc2xvdF9jYW5j
ZWxsZWQsJDB4MAogbW92X2kzMiBuZXdfcjIscjIKIGFuZF9pMzIgdG1wMCxwMCwkMHgxCiBicmNv
bmRfaTMyIHRtcDAsJDB4MCxlcSwkTDEKIGFuZF9pMzIgdG1wMCxyMCxyMQogbW92X2kzMiBuZXdf
cjIsdG1wMAogYnIgJEwyCiBzZXRfbGFiZWwgJEwxCiBvcl9pMzIgc2xvdF9jYW5jZWxsZWQsc2xv
dF9jYW5jZWxsZWQsJDB4OAogc2V0X2xhYmVsICRMMgogbW92X2kzMiByMixuZXdfcjIKCkFGVEVS
CiAtLS0tIDAwNDAwMDk0CiBtb3ZfaTMyIG5ld19yMixyMgogYW5kX2kzMiB0bXAwLHAwLCQweDEK
IGJyY29uZF9pMzIgdG1wMCwkMHgwLGVxLCRMMQogYW5kX2kzMiB0bXAwLHIwLHIxCiBtb3ZfaTMy
IG5ld19yMix0bXAwCiBiciAkTDIKIHNldF9sYWJlbCAkTDEKIHNldF9sYWJlbCAkTDIKIG1vdl9p
MzIgcjIsbmV3X3IyCgpTaWduZWQtb2ZmLWJ5OiBUYXlsb3IgU2ltcHNvbiA8dHNpbXBzb25AcXVp
Y2luYy5jb20+ClJldmlld2VkLWJ5OiBBbnRvbiBKb2hhbnNzb24gPGFuam9AcmV2Lm5nPgpNZXNz
YWdlLUlkOiA8MjAyMzAzMDcwMjU4MjguMTYxMjgwOS0xNC10c2ltcHNvbkBxdWljaW5jLmNvbT4K
LS0tCiB0YXJnZXQvaGV4YWdvbi9tYWNyb3MuaCAgICAgICAgICAgICAgICAgICAgIHwgIDIgKy0K
IHRhcmdldC9oZXhhZ29uL29wX2hlbHBlci5oICAgICAgICAgICAgICAgICAgfCAgMyArLQogdGFy
Z2V0L2hleGFnb24vdHJhbnNsYXRlLmggICAgICAgICAgICAgICAgICB8IDEwICsrKysrCiB0YXJn
ZXQvaGV4YWdvbi9pZGVmLXBhcnNlci9wYXJzZXItaGVscGVycy5jIHwgIDEgLQogdGFyZ2V0L2hl
eGFnb24vb3BfaGVscGVyLmMgICAgICAgICAgICAgICAgICB8IDMyICsrKysrKysrLS0tLS0tLS0K
IHRhcmdldC9oZXhhZ29uL3RyYW5zbGF0ZS5jICAgICAgICAgICAgICAgICAgfCA0MiArKysrKysr
KysrKysrKysrKystLS0KIHRhcmdldC9oZXhhZ29uL2lkZWYtcGFyc2VyL2lkZWYtcGFyc2VyLmxl
eCAgfCAgNCArLQogdGFyZ2V0L2hleGFnb24vaWRlZi1wYXJzZXIvaWRlZi1wYXJzZXIueSAgICB8
ICA3ICsrLS0KIDggZmlsZXMgY2hhbmdlZCwgNzEgaW5zZXJ0aW9ucygrKSwgMzAgZGVsZXRpb25z
KC0pCgpkaWZmIC0tZ2l0IGEvdGFyZ2V0L2hleGFnb24vbWFjcm9zLmggYi90YXJnZXQvaGV4YWdv
bi9tYWNyb3MuaAppbmRleCAxZmE2MDU3ZDI3Li40ODJhOWM3ODdmIDEwMDY0NAotLS0gYS90YXJn
ZXQvaGV4YWdvbi9tYWNyb3MuaAorKysgYi90YXJnZXQvaGV4YWdvbi9tYWNyb3MuaApAQCAtMjA1
LDcgKzIwNSw3IEBAIHN0YXRpYyBpbmxpbmUgdm9pZCBnZW5fY2FuY2VsKHVpbnQzMl90IHNsb3Qp
CiAKICNkZWZpbmUgQ0FOQ0VMIGdlbl9jYW5jZWwoc2xvdCk7CiAjZWxzZQotI2RlZmluZSBDQU5D
RUwgY2FuY2VsX3Nsb3QoZW52LCBzbG90KQorI2RlZmluZSBDQU5DRUwgZG8geyB9IHdoaWxlICgw
KQogI2VuZGlmCiAKICNkZWZpbmUgTE9BRF9DQU5DRUwoRUEpIGRvIHsgQ0FOQ0VMOyB9IHdoaWxl
ICgwKQpkaWZmIC0tZ2l0IGEvdGFyZ2V0L2hleGFnb24vb3BfaGVscGVyLmggYi90YXJnZXQvaGV4
YWdvbi9vcF9oZWxwZXIuaAppbmRleCAwMjM0N2VkZWU4Li4zNGIzYTUzOTc1IDEwMDY0NAotLS0g
YS90YXJnZXQvaGV4YWdvbi9vcF9oZWxwZXIuaAorKysgYi90YXJnZXQvaGV4YWdvbi9vcF9oZWxw
ZXIuaApAQCAtMSw1ICsxLDUgQEAKIC8qCi0gKiAgQ29weXJpZ2h0KGMpIDIwMTktMjAyMSBRdWFs
Y29tbSBJbm5vdmF0aW9uIENlbnRlciwgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLgorICogIENv
cHlyaWdodChjKSAyMDE5LTIwMjMgUXVhbGNvbW0gSW5ub3ZhdGlvbiBDZW50ZXIsIEluYy4gQWxs
IFJpZ2h0cyBSZXNlcnZlZC4KICAqCiAgKiAgVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU7
IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnkKICAqICBpdCB1bmRlciB0aGUg
dGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieQpA
QCAtMTksNyArMTksNiBAQAogI2RlZmluZSBIRVhBR09OX09QX0hFTFBFUl9ICiAKIC8qIE1pc2Mg
ZnVuY3Rpb25zICovCi12b2lkIGNhbmNlbF9zbG90KENQVUhleGFnb25TdGF0ZSAqZW52LCB1aW50
MzJfdCBzbG90KTsKIHZvaWQgd3JpdGVfbmV3X3BjKENQVUhleGFnb25TdGF0ZSAqZW52LCBib29s
IHBrdF9oYXNfbXVsdGlfY29mLCB0YXJnZXRfdWxvbmcgYWRkcik7CiAKIHVpbnQ4X3QgbWVtX2xv
YWQxKENQVUhleGFnb25TdGF0ZSAqZW52LCB1aW50MzJfdCBzbG90LCB0YXJnZXRfdWxvbmcgdmFk
ZHIpOwpkaWZmIC0tZ2l0IGEvdGFyZ2V0L2hleGFnb24vdHJhbnNsYXRlLmggYi90YXJnZXQvaGV4
YWdvbi90cmFuc2xhdGUuaAppbmRleCA3NjVmMmM2YTIyLi42ZTU5YTkwYzQxIDEwMDY0NAotLS0g
YS90YXJnZXQvaGV4YWdvbi90cmFuc2xhdGUuaAorKysgYi90YXJnZXQvaGV4YWdvbi90cmFuc2xh
dGUuaApAQCAtMTcyLDQgKzE3MiwxNCBAQCBleHRlcm4gVENHdiBoZXhfdnN0b3JlX3BlbmRpbmdb
VlNUT1JFU19NQVhdOwogCiBib29sIGlzX2dhdGhlcl9zdG9yZV9pbnNuKERpc2FzQ29udGV4dCAq
Y3R4KTsKIHZvaWQgcHJvY2Vzc19zdG9yZShEaXNhc0NvbnRleHQgKmN0eCwgaW50IHNsb3RfbnVt
KTsKKworRklFTEQoUFJPQkVfUEtUX1NDQUxBUl9TVE9SRV9TMCwgTU1VX0lEWCwgICAgICAgMCwg
MikKK0ZJRUxEKFBST0JFX1BLVF9TQ0FMQVJfU1RPUkVfUzAsIElTX1BSRURJQ0FURUQsIDIsIDEp
CisKK0ZJRUxEKFBST0JFX1BLVF9TQ0FMQVJfSFZYX1NUT1JFUywgSEFTX1NUMCwgICAgICAgIDAs
IDEpCitGSUVMRChQUk9CRV9QS1RfU0NBTEFSX0hWWF9TVE9SRVMsIEhBU19TVDEsICAgICAgICAx
LCAxKQorRklFTEQoUFJPQkVfUEtUX1NDQUxBUl9IVlhfU1RPUkVTLCBIQVNfSFZYX1NUT1JFUywg
MiwgMSkKK0ZJRUxEKFBST0JFX1BLVF9TQ0FMQVJfSFZYX1NUT1JFUywgUzBfSVNfUFJFRCwgICAg
IDMsIDEpCitGSUVMRChQUk9CRV9QS1RfU0NBTEFSX0hWWF9TVE9SRVMsIFMxX0lTX1BSRUQsICAg
ICA0LCAxKQorCiAjZW5kaWYKZGlmZiAtLWdpdCBhL3RhcmdldC9oZXhhZ29uL2lkZWYtcGFyc2Vy
L3BhcnNlci1oZWxwZXJzLmMgYi90YXJnZXQvaGV4YWdvbi9pZGVmLXBhcnNlci9wYXJzZXItaGVs
cGVycy5jCmluZGV4IDk3MjBlZjRhZDEuLjE4Y2RlNmExYmUgMTAwNjQ0Ci0tLSBhL3RhcmdldC9o
ZXhhZ29uL2lkZWYtcGFyc2VyL3BhcnNlci1oZWxwZXJzLmMKKysrIGIvdGFyZ2V0L2hleGFnb24v
aWRlZi1wYXJzZXIvcGFyc2VyLWhlbHBlcnMuYwpAQCAtMTcyNyw3ICsxNzI3LDYgQEAgdm9pZCBn
ZW5fY2FuY2VsKENvbnRleHQgKmMsIFlZTFRZUEUgKmxvY3ApCiAKIHZvaWQgZ2VuX2xvYWRfY2Fu
Y2VsKENvbnRleHQgKmMsIFlZTFRZUEUgKmxvY3ApCiB7Ci0gICAgZ2VuX2NhbmNlbChjLCBsb2Nw
KTsKICAgICBPVVQoYywgbG9jcCwgImlmIChpbnNuLT5zbG90ID09IDAgJiYgcGt0LT5wa3RfaGFz
X3N0b3JlX3MxKSB7XG4iKTsKICAgICBPVVQoYywgbG9jcCwgImN0eC0+czFfc3RvcmVfcHJvY2Vz
c2VkID0gZmFsc2U7XG4iKTsKICAgICBPVVQoYywgbG9jcCwgInByb2Nlc3Nfc3RvcmUoY3R4LCAx
KTtcbiIpOwpkaWZmIC0tZ2l0IGEvdGFyZ2V0L2hleGFnb24vb3BfaGVscGVyLmMgYi90YXJnZXQv
aGV4YWdvbi9vcF9oZWxwZXIuYwppbmRleCA5NDI1OTQxYzY5Li5jOWExNTYwMzBlIDEwMDY0NAot
LS0gYS90YXJnZXQvaGV4YWdvbi9vcF9oZWxwZXIuYworKysgYi90YXJnZXQvaGV4YWdvbi9vcF9o
ZWxwZXIuYwpAQCAtMzAsNiArMzAsNyBAQAogI2luY2x1ZGUgIm1tdmVjL21tdmVjLmgiCiAjaW5j
bHVkZSAibW12ZWMvbWFjcm9zLmgiCiAjaW5jbHVkZSAib3BfaGVscGVyLmgiCisjaW5jbHVkZSAi
dHJhbnNsYXRlLmgiCiAKICNkZWZpbmUgU0ZfQklBUyAgICAgICAgMTI3CiAjZGVmaW5lIFNGX01B
TlRCSVRTICAgIDIzCkBAIC00MTUsOSArNDE2LDEwIEBAIGludDMyX3QgSEVMUEVSKHZhY3NoX3By
ZWQpKENQVUhleGFnb25TdGF0ZSAqZW52LAogICAgIHJldHVybiBQZVY7CiB9CiAKLXN0YXRpYyB2
b2lkIHByb2JlX3N0b3JlKENQVUhleGFnb25TdGF0ZSAqZW52LCBpbnQgc2xvdCwgaW50IG1tdV9p
ZHgpCitzdGF0aWMgdm9pZCBwcm9iZV9zdG9yZShDUFVIZXhhZ29uU3RhdGUgKmVudiwgaW50IHNs
b3QsIGludCBtbXVfaWR4LAorICAgICAgICAgICAgICAgICAgICAgICAgYm9vbCBpc19wcmVkaWNh
dGVkKQogewotICAgIGlmICghKGVudi0+c2xvdF9jYW5jZWxsZWQgJiAoMSA8PCBzbG90KSkpIHsK
KyAgICBpZiAoIWlzX3ByZWRpY2F0ZWQgfHwgIShlbnYtPnNsb3RfY2FuY2VsbGVkICYgKDEgPDwg
c2xvdCkpKSB7CiAgICAgICAgIHNpemUxdV90IHdpZHRoID0gZW52LT5tZW1fbG9nX3N0b3Jlc1tz
bG90XS53aWR0aDsKICAgICAgICAgdGFyZ2V0X3Vsb25nIHZhID0gZW52LT5tZW1fbG9nX3N0b3Jl
c1tzbG90XS52YTsKICAgICAgICAgdWludHB0cl90IHJhID0gR0VUUEMoKTsKQEAgLTQzNyw5ICs0
MzksMTIgQEAgdm9pZCBIRUxQRVIocHJvYmVfbm9zaHVmX2xvYWQpKENQVUhleGFnb25TdGF0ZSAq
ZW52LCB0YXJnZXRfdWxvbmcgdmEsCiB9CiAKIC8qIENhbGxlZCBkdXJpbmcgcGFja2V0IGNvbW1p
dCB3aGVuIHRoZXJlIGFyZSB0d28gc2NhbGFyIHN0b3JlcyAqLwotdm9pZCBIRUxQRVIocHJvYmVf
cGt0X3NjYWxhcl9zdG9yZV9zMCkoQ1BVSGV4YWdvblN0YXRlICplbnYsIGludCBtbXVfaWR4KQor
dm9pZCBIRUxQRVIocHJvYmVfcGt0X3NjYWxhcl9zdG9yZV9zMCkoQ1BVSGV4YWdvblN0YXRlICpl
bnYsIGludCBhcmdzKQogewotICAgIHByb2JlX3N0b3JlKGVudiwgMCwgbW11X2lkeCk7CisgICAg
aW50IG1tdV9pZHggPSBGSUVMRF9FWDMyKGFyZ3MsIFBST0JFX1BLVF9TQ0FMQVJfU1RPUkVfUzAs
IE1NVV9JRFgpOworICAgIGJvb2wgaXNfcHJlZGljYXRlZCA9CisgICAgICAgIEZJRUxEX0VYMzIo
YXJncywgUFJPQkVfUEtUX1NDQUxBUl9TVE9SRV9TMCwgSVNfUFJFRElDQVRFRCk7CisgICAgcHJv
YmVfc3RvcmUoZW52LCAwLCBtbXVfaWR4LCBpc19wcmVkaWNhdGVkKTsKIH0KIAogdm9pZCBIRUxQ
RVIocHJvYmVfaHZ4X3N0b3JlcykoQ1BVSGV4YWdvblN0YXRlICplbnYsIGludCBtbXVfaWR4KQpA
QCAtNDg2LDE1ICs0OTEsMTggQEAgdm9pZCBIRUxQRVIocHJvYmVfaHZ4X3N0b3JlcykoQ1BVSGV4
YWdvblN0YXRlICplbnYsIGludCBtbXVfaWR4KQogdm9pZCBIRUxQRVIocHJvYmVfcGt0X3NjYWxh
cl9odnhfc3RvcmVzKShDUFVIZXhhZ29uU3RhdGUgKmVudiwgaW50IG1hc2ssCiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludCBtbXVfaWR4KQogewotICAgIGJvb2wg
aGFzX3N0MCAgICAgICAgPSAobWFzayA+PiAwKSAmIDE7Ci0gICAgYm9vbCBoYXNfc3QxICAgICAg
ICA9IChtYXNrID4+IDEpICYgMTsKLSAgICBib29sIGhhc19odnhfc3RvcmVzID0gKG1hc2sgPj4g
MikgJiAxOworICAgIGJvb2wgaGFzX3N0MCA9IEZJRUxEX0VYMzIobWFzaywgUFJPQkVfUEtUX1ND
QUxBUl9IVlhfU1RPUkVTLCBIQVNfU1QwKTsKKyAgICBib29sIGhhc19zdDEgPSBGSUVMRF9FWDMy
KG1hc2ssIFBST0JFX1BLVF9TQ0FMQVJfSFZYX1NUT1JFUywgSEFTX1NUMSk7CisgICAgYm9vbCBo
YXNfaHZ4X3N0b3JlcyA9CisgICAgICAgIEZJRUxEX0VYMzIobWFzaywgUFJPQkVfUEtUX1NDQUxB
Ul9IVlhfU1RPUkVTLCBIQVNfSFZYX1NUT1JFUyk7CisgICAgYm9vbCBzMF9pc19wcmVkID0gRklF
TERfRVgzMihtYXNrLCBQUk9CRV9QS1RfU0NBTEFSX0hWWF9TVE9SRVMsIFMwX0lTX1BSRUQpOwor
ICAgIGJvb2wgczFfaXNfcHJlZCA9IEZJRUxEX0VYMzIobWFzaywgUFJPQkVfUEtUX1NDQUxBUl9I
VlhfU1RPUkVTLCBTMV9JU19QUkVEKTsKIAogICAgIGlmIChoYXNfc3QwKSB7Ci0gICAgICAgIHBy
b2JlX3N0b3JlKGVudiwgMCwgbW11X2lkeCk7CisgICAgICAgIHByb2JlX3N0b3JlKGVudiwgMCwg
bW11X2lkeCwgczBfaXNfcHJlZCk7CiAgICAgfQogICAgIGlmIChoYXNfc3QxKSB7Ci0gICAgICAg
IHByb2JlX3N0b3JlKGVudiwgMSwgbW11X2lkeCk7CisgICAgICAgIHByb2JlX3N0b3JlKGVudiwg
MSwgbW11X2lkeCwgczFfaXNfcHJlZCk7CiAgICAgfQogICAgIGlmIChoYXNfaHZ4X3N0b3Jlcykg
ewogICAgICAgICBIRUxQRVIocHJvYmVfaHZ4X3N0b3JlcykoZW52LCBtbXVfaWR4KTsKQEAgLTE0
NDQsMTIgKzE0NTIsNiBAQCB2b2lkIEhFTFBFUih2d2hpc3QxMjhxbSkoQ1BVSGV4YWdvblN0YXRl
ICplbnYsIGludDMyX3QgdWlWKQogICAgIH0KIH0KIAotdm9pZCBjYW5jZWxfc2xvdChDUFVIZXhh
Z29uU3RhdGUgKmVudiwgdWludDMyX3Qgc2xvdCkKLXsKLSAgICBIRVhfREVCVUdfTE9HKCJTbG90
ICVkIGNhbmNlbGxlZFxuIiwgc2xvdCk7Ci0gICAgZW52LT5zbG90X2NhbmNlbGxlZCB8PSAoMSA8
PCBzbG90KTsKLX0KLQogLyogVGhlc2UgbWFjcm9zIGNhbiBiZSByZWZlcmVuY2VkIGluIHRoZSBn
ZW5lcmF0ZWQgaGVscGVyIGZ1bmN0aW9ucyAqLwogI2RlZmluZSB3YXJuKC4uLikgLyogTm90aGlu
ZyAqLwogI2RlZmluZSBmYXRhbCguLi4pIGdfYXNzZXJ0X25vdF9yZWFjaGVkKCk7CmRpZmYgLS1n
aXQgYS90YXJnZXQvaGV4YWdvbi90cmFuc2xhdGUuYyBiL3RhcmdldC9oZXhhZ29uL3RyYW5zbGF0
ZS5jCmluZGV4IDQ5M2JjNzVkMjcuLjFlM2E3NmFlY2UgMTAwNjQ0Ci0tLSBhL3RhcmdldC9oZXhh
Z29uL3RyYW5zbGF0ZS5jCisrKyBiL3RhcmdldC9oZXhhZ29uL3RyYW5zbGF0ZS5jCkBAIC0yNDgs
NyArMjQ4LDE2IEBAIHN0YXRpYyBib29sIGNoZWNrX2Zvcl9hdHRyaWIoUGFja2V0ICpwa3QsIGlu
dCBhdHRyaWIpCiAKIHN0YXRpYyBib29sIG5lZWRfc2xvdF9jYW5jZWxsZWQoUGFja2V0ICpwa3Qp
CiB7Ci0gICAgcmV0dXJuIGNoZWNrX2Zvcl9hdHRyaWIocGt0LCBBX0NPTkRFWEVDKTsKKyAgICAv
KiBXZSBvbmx5IG5lZWQgc2xvdF9jYW5jZWxsZWQgZm9yIGNvbmRpdGlvbmFsIHN0b3JlIGFuZCBI
VlggaW5zdHJ1Y3Rpb25zICovCisgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBwa3QtPm51bV9pbnNu
czsgaSsrKSB7CisgICAgICAgIHVpbnQxNl90IG9wY29kZSA9IHBrdC0+aW5zbltpXS5vcGNvZGU7
CisgICAgICAgIGlmIChHRVRfQVRUUklCKG9wY29kZSwgQV9DT05ERVhFQykgJiYKKyAgICAgICAg
ICAgIChHRVRfQVRUUklCKG9wY29kZSwgQV9TVE9SRSkgfHwKKyAgICAgICAgICAgICBHRVRfQVRU
UklCKG9wY29kZSwgQV9DVkkpKSkgeworICAgICAgICAgICAgcmV0dXJuIHRydWU7CisgICAgICAg
IH0KKyAgICB9CisgICAgcmV0dXJuIGZhbHNlOwogfQogCiBzdGF0aWMgYm9vbCBuZWVkX3ByZWRf
d3JpdHRlbihQYWNrZXQgKnBrdCkKQEAgLTg0NSwxMyArODU0LDI3IEBAIHN0YXRpYyB2b2lkIGdl
bl9jb21taXRfcGFja2V0KERpc2FzQ29udGV4dCAqY3R4KQogICAgICAgICAgICAgVENHdiBtYXNr
X3RjZ3Y7CiAKICAgICAgICAgICAgIGlmIChoYXNfc3RvcmVfczApIHsKLSAgICAgICAgICAgICAg
ICBtYXNrIHw9ICgxIDw8IDApOworICAgICAgICAgICAgICAgIG1hc2sgPQorICAgICAgICAgICAg
ICAgICAgICBGSUVMRF9EUDMyKG1hc2ssIFBST0JFX1BLVF9TQ0FMQVJfSFZYX1NUT1JFUywgSEFT
X1NUMCwgMSk7CiAgICAgICAgICAgICB9CiAgICAgICAgICAgICBpZiAoaGFzX3N0b3JlX3MxKSB7
Ci0gICAgICAgICAgICAgICAgbWFzayB8PSAoMSA8PCAxKTsKKyAgICAgICAgICAgICAgICBtYXNr
ID0KKyAgICAgICAgICAgICAgICAgICAgRklFTERfRFAzMihtYXNrLCBQUk9CRV9QS1RfU0NBTEFS
X0hWWF9TVE9SRVMsIEhBU19TVDEsIDEpOwogICAgICAgICAgICAgfQogICAgICAgICAgICAgaWYg
KGhhc19odnhfc3RvcmUpIHsKLSAgICAgICAgICAgICAgICBtYXNrIHw9ICgxIDw8IDIpOworICAg
ICAgICAgICAgICAgIG1hc2sgPQorICAgICAgICAgICAgICAgICAgICBGSUVMRF9EUDMyKG1hc2ss
IFBST0JFX1BLVF9TQ0FMQVJfSFZYX1NUT1JFUywKKyAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBIQVNfSFZYX1NUT1JFUywgMSk7CisgICAgICAgICAgICB9CisgICAgICAgICAgICBpZiAo
aGFzX3N0b3JlX3MwICYmIHNsb3RfaXNfcHJlZGljYXRlZChwa3QsIDApKSB7CisgICAgICAgICAg
ICAgICAgbWFzayA9CisgICAgICAgICAgICAgICAgICAgIEZJRUxEX0RQMzIobWFzaywgUFJPQkVf
UEtUX1NDQUxBUl9IVlhfU1RPUkVTLAorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFMw
X0lTX1BSRUQsIDEpOworICAgICAgICAgICAgfQorICAgICAgICAgICAgaWYgKGhhc19zdG9yZV9z
MSAmJiBzbG90X2lzX3ByZWRpY2F0ZWQocGt0LCAxKSkgeworICAgICAgICAgICAgICAgIG1hc2sg
PQorICAgICAgICAgICAgICAgICAgICBGSUVMRF9EUDMyKG1hc2ssIFBST0JFX1BLVF9TQ0FMQVJf
SFZYX1NUT1JFUywKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTMV9JU19QUkVELCAx
KTsKICAgICAgICAgICAgIH0KICAgICAgICAgICAgIG1hc2tfdGNndiA9IHRjZ19jb25zdGFudF90
bChtYXNrKTsKICAgICAgICAgICAgIGdlbl9oZWxwZXJfcHJvYmVfcGt0X3NjYWxhcl9odnhfc3Rv
cmVzKGNwdV9lbnYsIG1hc2tfdGNndiwgbWVtX2lkeCk7CkBAIC04NjEsOCArODg0LDE1IEBAIHN0
YXRpYyB2b2lkIGdlbl9jb21taXRfcGFja2V0KERpc2FzQ29udGV4dCAqY3R4KQogICAgICAgICAg
KiBwcm9jZXNzX3N0b3JlX2xvZyB3aWxsIGV4ZWN1dGUgdGhlIHNsb3QgMSBzdG9yZSBmaXJzdCwK
ICAgICAgICAgICogc28gd2Ugb25seSBoYXZlIHRvIHByb2JlIHRoZSBzdG9yZSBpbiBzbG90IDAK
ICAgICAgICAgICovCi0gICAgICAgIFRDR3YgbWVtX2lkeCA9IHRjZ19jb25zdGFudF90bChjdHgt
Pm1lbV9pZHgpOwotICAgICAgICBnZW5faGVscGVyX3Byb2JlX3BrdF9zY2FsYXJfc3RvcmVfczAo
Y3B1X2VudiwgbWVtX2lkeCk7CisgICAgICAgIGludCBhcmdzID0gMDsKKyAgICAgICAgYXJncyA9
CisgICAgICAgICAgICBGSUVMRF9EUDMyKGFyZ3MsIFBST0JFX1BLVF9TQ0FMQVJfU1RPUkVfUzAs
IE1NVV9JRFgsIGN0eC0+bWVtX2lkeCk7CisgICAgICAgIGlmIChzbG90X2lzX3ByZWRpY2F0ZWQo
cGt0LCAwKSkgeworICAgICAgICAgICAgYXJncyA9CisgICAgICAgICAgICAgICAgRklFTERfRFAz
MihhcmdzLCBQUk9CRV9QS1RfU0NBTEFSX1NUT1JFX1MwLCBJU19QUkVESUNBVEVELCAxKTsKKyAg
ICAgICAgfQorICAgICAgICBUQ0d2IGFyZ3NfdGNndiA9IHRjZ19jb25zdGFudF90bChhcmdzKTsK
KyAgICAgICAgZ2VuX2hlbHBlcl9wcm9iZV9wa3Rfc2NhbGFyX3N0b3JlX3MwKGNwdV9lbnYsIGFy
Z3NfdGNndik7CiAgICAgfQogCiAgICAgcHJvY2Vzc19zdG9yZV9sb2coY3R4KTsKZGlmZiAtLWdp
dCBhL3RhcmdldC9oZXhhZ29uL2lkZWYtcGFyc2VyL2lkZWYtcGFyc2VyLmxleCBiL3RhcmdldC9o
ZXhhZ29uL2lkZWYtcGFyc2VyL2lkZWYtcGFyc2VyLmxleAppbmRleCAyNjU4ZDlmYjJlLi41ZWI4
YWM1YTgwIDEwMDY0NAotLS0gYS90YXJnZXQvaGV4YWdvbi9pZGVmLXBhcnNlci9pZGVmLXBhcnNl
ci5sZXgKKysrIGIvdGFyZ2V0L2hleGFnb24vaWRlZi1wYXJzZXIvaWRlZi1wYXJzZXIubGV4CkBA
IC01LDcgKzUsNyBAQAogCiAlewogLyoKLSAqICBDb3B5cmlnaHQoYykgMjAxOS0yMDIyIHJldi5u
ZyBMYWJzIFNybC4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KKyAqICBDb3B5cmlnaHQoYykgMjAxOS0y
MDIzIHJldi5uZyBMYWJzIFNybC4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICAqCiAgKiAgVGhpcyBw
cm9ncmFtIGlzIGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBt
b2RpZnkKICAqICBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBM
aWNlbnNlIGFzIHB1Ymxpc2hlZCBieQpAQCAtMzEyLDcgKzMxMiw3IEBAIFNUUklOR19MSVQgICAg
ICAgICAgICAgICBcIihcXC58W14iXFxdKSpcIgogImZSRUFEX1BDKCkiICAgICAgICAgICAgIHsg
cmV0dXJuIFBDOyB9CiAiVVNSLkxQQ0ZHIiAgICAgICAgICAgICAgeyByZXR1cm4gTFBDRkc7IH0K
ICJMT0FEX0NBTkNFTChFQSkiICAgICAgICB7IHJldHVybiBMT0FEX0NBTkNFTDsgfQotIlNUT1JF
X0NBTkNFTChFQSkiICAgICAgIHwKKyJTVE9SRV9DQU5DRUwoRUEpIiAgICAgICB7IHJldHVybiBT
VE9SRV9DQU5DRUw7IH0KICJDQU5DRUwiICAgICAgICAgICAgICAgICB7IHJldHVybiBDQU5DRUw7
IH0KICJOIntMT1dFUl9JRH0iTiIgICAgICAgICB7IHl5bHZhbC0+cnZhbHVlLnR5cGUgPSBSRUdJ
U1RFUl9BUkc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5eWx2YWwtPnJ2YWx1ZS5yZWcu
dHlwZSA9IERPVE5FVzsKZGlmZiAtLWdpdCBhL3RhcmdldC9oZXhhZ29uL2lkZWYtcGFyc2VyL2lk
ZWYtcGFyc2VyLnkgYi90YXJnZXQvaGV4YWdvbi9pZGVmLXBhcnNlci9pZGVmLXBhcnNlci55Cmlu
ZGV4IGQ3YjIxOTliNzQuLjdkMDU3NzNiNjcgMTAwNjQ0Ci0tLSBhL3RhcmdldC9oZXhhZ29uL2lk
ZWYtcGFyc2VyL2lkZWYtcGFyc2VyLnkKKysrIGIvdGFyZ2V0L2hleGFnb24vaWRlZi1wYXJzZXIv
aWRlZi1wYXJzZXIueQpAQCAtMSw2ICsxLDYgQEAKICV7CiAvKgotICogIENvcHlyaWdodChjKSAy
MDE5LTIwMjIgcmV2Lm5nIExhYnMgU3JsLiBBbGwgUmlnaHRzIFJlc2VydmVkLgorICogIENvcHly
aWdodChjKSAyMDE5LTIwMjMgcmV2Lm5nIExhYnMgU3JsLiBBbGwgUmlnaHRzIFJlc2VydmVkLgog
ICoKICAqICBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3
aWxsIGJlIHVzZWZ1bCwKICAqICBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZl
biB0aGUgaW1wbGllZCB3YXJyYW50eSBvZgpAQCAtNTMsNyArNTMsNyBAQAogJXRva2VuIEFCUyBD
Uk9VTkQgUk9VTkQgQ0lSQ0FERCBDT1VOVE9ORVMgSU5DIERFQyBBTkRBIE9SQSBYT1JBIFBMVVNQ
TFVTIEFTTAogJXRva2VuIEFTUiBMU1IgRVEgTkVRIExURSBHVEUgTUlOIE1BWCBBTkRMIEZPUiBJ
Q0lSQyBJRiBNVU4gRlNDUiBGQ0hLIFNYVAogJXRva2VuIFpYVCBDT05TVEVYVCBMT0NOVCBCUkVW
IFNJR04gTE9BRCBTVE9SRSBQQyBMUENGRwotJXRva2VuIExPQURfQ0FOQ0VMIENBTkNFTCBJREVO
VElUWSBST1RMIElOU0JJVFMgU0VUQklUUyBFWFRSQU5HRQorJXRva2VuIExPQURfQ0FOQ0VMIFNU
T1JFX0NBTkNFTCBDQU5DRUwgSURFTlRJVFkgUk9UTCBJTlNCSVRTIFNFVEJJVFMgRVhUUkFOR0UK
ICV0b2tlbiBDQVNUNF84VSBGQUlMIENBUlJZX0ZST01fQUREIEFERFNBVDY0IExTQk5FVwogJXRv
a2VuIFRZUEVfU0laRV9UIFRZUEVfSU5UIFRZUEVfU0lHTkVEIFRZUEVfVU5TSUdORUQgVFlQRV9M
T05HCiAKQEAgLTQxMiwxMCArNDEyLDExIEBAIGNhbmNlbF9zdGF0ZW1lbnQgOiBMT0FEX0NBTkNF
TAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgZ2VuX2xvYWRf
Y2FuY2VsKGMsICZAMSk7CiAgICAgICAgICAgICAgICAgICAgfQotICAgICAgICAgICAgICAgICB8
IENBTkNFTAorICAgICAgICAgICAgICAgICB8IFNUT1JFX0NBTkNFTAogICAgICAgICAgICAgICAg
ICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgZ2VuX2NhbmNlbChjLCAmQDEpOwogICAgICAg
ICAgICAgICAgICAgIH0KKyAgICAgICAgICAgICAgICAgfCBDQU5DRUwKICAgICAgICAgICAgICAg
ICAgOwogCiBpZl9zdGF0ZW1lbnQgOiBpZl9zdG10Ci0tIAoyLjI1LjEKCg==

