Return-Path: <qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org>
X-Original-To: lists+qemu-devel@lfdr.de
Delivered-To: lists+qemu-devel@lfdr.de
Received: from lists.gnu.org (lists.gnu.org [209.51.188.17])
	by mail.lfdr.de (Postfix) with ESMTPS id 7FB273F8D42
	for <lists+qemu-devel@lfdr.de>; Thu, 26 Aug 2021 19:45:01 +0200 (CEST)
Received: from localhost ([::1]:35894 helo=lists1p.gnu.org)
	by lists.gnu.org with esmtp (Exim 4.90_1)
	(envelope-from <qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org>)
	id 1mJJQy-0003tk-8d
	for lists+qemu-devel@lfdr.de; Thu, 26 Aug 2021 13:45:00 -0400
Received: from eggs.gnu.org ([2001:470:142:3::10]:52086)
 by lists.gnu.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256)
 (Exim 4.90_1) (envelope-from <tsimpson@qualcomm.com>)
 id 1mJJId-000434-Lr
 for qemu-devel@nongnu.org; Thu, 26 Aug 2021 13:36:23 -0400
Received: from alexa-out-sd-01.qualcomm.com ([199.106.114.38]:54743)
 by eggs.gnu.org with esmtps (TLS1.2:RSA_AES_256_CBC_SHA1:256)
 (Exim 4.90_1) (envelope-from <tsimpson@qualcomm.com>)
 id 1mJJIa-00059Z-Et
 for qemu-devel@nongnu.org; Thu, 26 Aug 2021 13:36:23 -0400
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=quicinc.com; i=@quicinc.com; q=dns/txt; s=qcdkim;
 t=1629999380; x=1661535380;
 h=from:to:cc:subject:date:message-id:in-reply-to:
 references:mime-version:content-transfer-encoding;
 bh=Au3MFF/8UXFYqoqVo/yhxGjZFXdN3pMgHYLPMkDl/PU=;
 b=p856bG2UUaZ7XCqZ6ogik/L3bIqgCiLD9AisnHGhP70BT7j5aGCIKieK
 IIZFjbjX4H3Dzlz+kIjdx7UOYnqw1NDCJ7i7ceuLeZJxnax4ubbncYRrg
 AC1HlPjwT5xe/EAWB8eu2VOs2L6gF55Nf7TUMGgpdcc+W7HC1Upw0/iIt k=;
Received: from unknown (HELO ironmsg02-sd.qualcomm.com) ([10.53.140.142])
 by alexa-out-sd-01.qualcomm.com with ESMTP; 26 Aug 2021 10:36:14 -0700
X-QCInternal: smtphost
Received: from vu-tsimpson-aus.qualcomm.com (HELO
 vu-tsimpson1-aus.qualcomm.com) ([10.222.150.1])
 by ironmsg02-sd.qualcomm.com with ESMTP; 26 Aug 2021 10:36:13 -0700
Received: by vu-tsimpson1-aus.qualcomm.com (Postfix, from userid 47164)
 id 5DB5811BB; Thu, 26 Aug 2021 12:36:13 -0500 (CDT)
From: Taylor Simpson <tsimpson@quicinc.com>
To: qemu-devel@nongnu.org
Subject: [PATCH v2 02/30] Hexagon HVX (target/hexagon) add Hexagon Vector
 eXtensions (HVX) to core
Date: Thu, 26 Aug 2021 12:35:30 -0500
Message-Id: <1629999358-25304-3-git-send-email-tsimpson@quicinc.com>
X-Mailer: git-send-email 2.7.4
In-Reply-To: <1629999358-25304-1-git-send-email-tsimpson@quicinc.com>
References: <1629999358-25304-1-git-send-email-tsimpson@quicinc.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Received-SPF: pass client-ip=199.106.114.38;
 envelope-from=tsimpson@qualcomm.com; helo=alexa-out-sd-01.qualcomm.com
X-Spam_score_int: -21
X-Spam_score: -2.2
X-Spam_bar: --
X-Spam_report: (-2.2 / 5.0 requ) DKIM_SIGNED=0.1, DKIM_VALID=-0.1,
 DKIM_VALID_AU=-0.1, HEADER_FROM_DIFFERENT_DOMAINS=0.249,
 RCVD_IN_DNSWL_MED=-2.3, SPF_HELO_NONE=0.001,
 SPF_PASS=-0.001 autolearn=ham autolearn_force=no
X-Spam_action: no action
X-BeenThere: qemu-devel@nongnu.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: <qemu-devel.nongnu.org>
List-Unsubscribe: <https://lists.nongnu.org/mailman/options/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=unsubscribe>
List-Archive: <https://lists.nongnu.org/archive/html/qemu-devel>
List-Post: <mailto:qemu-devel@nongnu.org>
List-Help: <mailto:qemu-devel-request@nongnu.org?subject=help>
List-Subscribe: <https://lists.nongnu.org/mailman/listinfo/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=subscribe>
Cc: ale@rev.ng, bcain@quicinc.com, tsimpson@quicinc.com,
 richard.henderson@linaro.org, f4bug@amsat.org
Errors-To: qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org
Sender: "Qemu-devel" <qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org>

SFZYIGlzIGEgc2V0IG9mIHdpZGUgdmVjdG9yIGluc3RydWN0aW9ucy4gIE1hY2hpbmUgc3RhdGUg
aW5jbHVkZXMKICAgIHZlY3RvciByZWdpc3RlcnMgKFZSZWdzKQogICAgdmVjdG9yIHByZWRpY2F0
ZSByZWdpc3RlcnMgKFFSZWdzKQogICAgdGVtcG9yYXJ5IHJlZ2lzdGVycyBmb3IgaW50ZXJtZWRp
YXRlIHZhbHVlcwogICAgc3RvcmUgYnVmZmVyIChtYXNrZWQgc3RvcmVzIGFuZCBzY2F0dGVyL2dh
dGhlcikKClNpZ25lZC1vZmYtYnk6IFRheWxvciBTaW1wc29uIDx0c2ltcHNvbkBxdWljaW5jLmNv
bT4KLS0tCiB0YXJnZXQvaGV4YWdvbi9jcHUuaCAgICAgICAgICAgIHwgMzcgKysrKysrKysrKysr
KysrKystCiB0YXJnZXQvaGV4YWdvbi9oZXhfYXJjaF90eXBlcy5oIHwgIDUgKysrCiB0YXJnZXQv
aGV4YWdvbi9pbnNuLmggICAgICAgICAgIHwgIDMgKysKIHRhcmdldC9oZXhhZ29uL2ludGVybmFs
LmggICAgICAgfCAgMyArKwogdGFyZ2V0L2hleGFnb24vbW12ZWMvbW12ZWMuaCAgICB8IDgzICsr
KysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrCiB0YXJnZXQvaGV4YWdvbi9j
cHUuYyAgICAgICAgICAgIHwgNzggKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysr
LS0KIDYgZmlsZXMgY2hhbmdlZCwgMjAzIGluc2VydGlvbnMoKyksIDYgZGVsZXRpb25zKC0pCiBj
cmVhdGUgbW9kZSAxMDA2NDQgdGFyZ2V0L2hleGFnb24vbW12ZWMvbW12ZWMuaAoKZGlmZiAtLWdp
dCBhL3RhcmdldC9oZXhhZ29uL2NwdS5oIGIvdGFyZ2V0L2hleGFnb24vY3B1LmgKaW5kZXggMjg1
NWRkMy4uNmNkMjEzMSAxMDA2NDQKLS0tIGEvdGFyZ2V0L2hleGFnb24vY3B1LmgKKysrIGIvdGFy
Z2V0L2hleGFnb24vY3B1LmgKQEAgLTI2LDYgKzI2LDcgQEAgdHlwZWRlZiBzdHJ1Y3QgQ1BVSGV4
YWdvblN0YXRlIENQVUhleGFnb25TdGF0ZTsKICNpbmNsdWRlICJxZW11LWNvbW1vbi5oIgogI2lu
Y2x1ZGUgImV4ZWMvY3B1LWRlZnMuaCIKICNpbmNsdWRlICJoZXhfcmVncy5oIgorI2luY2x1ZGUg
Im1tdmVjL21tdmVjLmgiCiAKICNkZWZpbmUgTlVNX1BSRUdTIDQKICNkZWZpbmUgVE9UQUxfUEVS
X1RIUkVBRF9SRUdTIDY0CkBAIC0zNCw2ICszNSw3IEBAIHR5cGVkZWYgc3RydWN0IENQVUhleGFn
b25TdGF0ZSBDUFVIZXhhZ29uU3RhdGU7CiAjZGVmaW5lIFNUT1JFU19NQVggMgogI2RlZmluZSBS
RUdfV1JJVEVTX01BWCAzMgogI2RlZmluZSBQUkVEX1dSSVRFU19NQVggNSAgICAgICAgICAgICAg
ICAgICAvKiA0IGluc25zICsgZW5kbG9vcCAqLworI2RlZmluZSBWU1RPUkVTX01BWCAyCiAKICNk
ZWZpbmUgVFlQRV9IRVhBR09OX0NQVSAiaGV4YWdvbi1jcHUiCiAKQEAgLTUyLDYgKzU0LDEzIEBA
IHR5cGVkZWYgc3RydWN0IHsKICAgICB1aW50NjRfdCBkYXRhNjQ7CiB9IE1lbUxvZzsKIAordHlw
ZWRlZiBzdHJ1Y3QgeworICAgIHRhcmdldF91bG9uZyB2YTsKKyAgICBpbnQgc2l6ZTsKKyAgICBE
RUNMQVJFX0JJVE1BUChtYXNrLCBNQVhfVkVDX1NJWkVfQllURVMgLyA4KSBRRU1VX0FMSUdORUQo
MTYpOworICAgIE1NVmVjdG9yIGRhdGEgUUVNVV9BTElHTkVEKDE2KTsKK30gVlN0b3JlTG9nOwor
CiAjZGVmaW5lIEVYRUNfU1RBVFVTX09LICAgICAgICAgIDB4MDAwMAogI2RlZmluZSBFWEVDX1NU
QVRVU19TVE9QICAgICAgICAweDAwMDIKICNkZWZpbmUgRVhFQ19TVEFUVVNfUkVQTEFZICAgICAg
MHgwMDEwCkBAIC02NCw2ICs3Myw5IEBAIHR5cGVkZWYgc3RydWN0IHsKICNkZWZpbmUgQ0xFQVJf
RVhDRVBUSU9OICAgICAgICAgKGVudi0+c3RhdHVzICY9ICh+RVhFQ19TVEFUVVNfRVhDRVBUSU9O
KSkKICNkZWZpbmUgU0VUX0VYQ0VQVElPTiAgICAgICAgICAgKGVudi0+c3RhdHVzIHw9IEVYRUNf
U1RBVFVTX0VYQ0VQVElPTikKIAorLyogTWF4aW11bSBudW1iZXIgb2YgdmVjdG9yIHRlbXBzIGlu
IGEgcGFja2V0ICovCisjZGVmaW5lIFZFQ1RPUl9URU1QU19NQVggICAgICAgICAgICA4CisKIHN0
cnVjdCBDUFVIZXhhZ29uU3RhdGUgewogICAgIHRhcmdldF91bG9uZyBncHJbVE9UQUxfUEVSX1RI
UkVBRF9SRUdTXTsKICAgICB0YXJnZXRfdWxvbmcgcHJlZFtOVU1fUFJFR1NdOwpAQCAtOTcsOCAr
MTA5LDI5IEBAIHN0cnVjdCBDUFVIZXhhZ29uU3RhdGUgewogICAgIHRhcmdldF91bG9uZyBsbHNj
X3ZhbDsKICAgICB1aW50NjRfdCAgICAgbGxzY192YWxfaTY0OwogCi0gICAgdGFyZ2V0X3Vsb25n
IGlzX2dhdGhlcl9zdG9yZV9pbnNuOwotICAgIHRhcmdldF91bG9uZyBnYXRoZXJfaXNzdWVkOwor
ICAgIE1NVmVjdG9yIFZSZWdzW05VTV9WUkVHU10gUUVNVV9BTElHTkVEKDE2KTsKKyAgICBNTVZl
Y3RvciBmdXR1cmVfVlJlZ3NbVkVDVE9SX1RFTVBTX01BWF0gUUVNVV9BTElHTkVEKDE2KTsKKyAg
ICBNTVZlY3RvciB0bXBfVlJlZ3NbVkVDVE9SX1RFTVBTX01BWF0gUUVNVV9BTElHTkVEKDE2KTsK
KworICAgIFZSZWdNYXNrIFZSZWdzX3VwZGF0ZWRfdG1wOworICAgIFZSZWdNYXNrIFZSZWdzX3Vw
ZGF0ZWQ7CisgICAgVlJlZ01hc2sgVlJlZ3Nfc2VsZWN0OworCisgICAgTU1RUmVnIFFSZWdzW05V
TV9RUkVHU10gUUVNVV9BTElHTkVEKDE2KTsKKyAgICBNTVFSZWcgZnV0dXJlX1FSZWdzW05VTV9R
UkVHU10gUUVNVV9BTElHTkVEKDE2KTsKKyAgICBRUmVnTWFzayBRUmVnc191cGRhdGVkOworCisg
ICAgLyogVGVtcG9yYXJpZXMgdXNlZCB3aXRoaW4gaW5zdHJ1Y3Rpb25zICovCisgICAgTU1WZWN0
b3JQYWlyIFZ1dVYgUUVNVV9BTElHTkVEKDE2KTsKKyAgICBNTVZlY3RvclBhaXIgVnZ2ViBRRU1V
X0FMSUdORUQoMTYpOworICAgIE1NVmVjdG9yUGFpciBWeHhWIFFFTVVfQUxJR05FRCgxNik7Cisg
ICAgTU1WZWN0b3IgICAgIHZ0bXAgUUVNVV9BTElHTkVEKDE2KTsKKyAgICBNTVFSZWcgICAgICAg
cXRtcCBRRU1VX0FMSUdORUQoMTYpOworCisgICAgVlN0b3JlTG9nIHZzdG9yZVtWU1RPUkVTX01B
WF07CisgICAgdGFyZ2V0X3Vsb25nIHZzdG9yZV9wZW5kaW5nW1ZTVE9SRVNfTUFYXTsKKyAgICBi
b29sIHZ0Y21fcGVuZGluZzsKKyAgICBWVENNU3RvcmVMb2cgdnRjbV9sb2c7CiB9OwogCiAjZGVm
aW5lIEhFWEFHT05fQ1BVX0NMQVNTKGtsYXNzKSBcCmRpZmYgLS1naXQgYS90YXJnZXQvaGV4YWdv
bi9oZXhfYXJjaF90eXBlcy5oIGIvdGFyZ2V0L2hleGFnb24vaGV4X2FyY2hfdHlwZXMuaAppbmRl
eCBkNzIxZTFmLi43OGFkNjA3IDEwMDY0NAotLS0gYS90YXJnZXQvaGV4YWdvbi9oZXhfYXJjaF90
eXBlcy5oCisrKyBiL3RhcmdldC9oZXhhZ29uL2hleF9hcmNoX3R5cGVzLmgKQEAgLTE5LDYgKzE5
LDcgQEAKICNkZWZpbmUgSEVYQUdPTl9BUkNIX1RZUEVTX0gKIAogI2luY2x1ZGUgInFlbXUvb3Nk
ZXAuaCIKKyNpbmNsdWRlICJtbXZlYy9tbXZlYy5oIgogI2luY2x1ZGUgInFlbXUvaW50MTI4Lmgi
CiAKIC8qCkBAIC0zNSw0ICszNiw4IEBAIHR5cGVkZWYgdWludDY0X3QgICAgc2l6ZTh1X3Q7CiB0
eXBlZGVmIGludDY0X3QgICAgIHNpemU4c190OwogdHlwZWRlZiBJbnQxMjggICAgICBzaXplMTZz
X3Q7CiAKK3R5cGVkZWYgTU1WZWN0b3IgICAgICAgICAgbW12ZWN0b3JfdDsKK3R5cGVkZWYgTU1W
ZWN0b3JQYWlyICAgICAgbW12ZWN0b3JfcGFpcl90OwordHlwZWRlZiBNTVFSZWcgICAgICAgICAg
ICBtbXFyZXRfdDsKKwogI2VuZGlmCmRpZmYgLS1naXQgYS90YXJnZXQvaGV4YWdvbi9pbnNuLmgg
Yi90YXJnZXQvaGV4YWdvbi9pbnNuLmgKaW5kZXggMmUzNDU5MS4uYWEyNjM4OSAxMDA2NDQKLS0t
IGEvdGFyZ2V0L2hleGFnb24vaW5zbi5oCisrKyBiL3RhcmdldC9oZXhhZ29uL2luc24uaApAQCAt
NjcsNiArNjcsOSBAQCBzdHJ1Y3QgUGFja2V0IHsKICAgICBib29sIHBrdF9oYXNfc3RvcmVfczA7
CiAgICAgYm9vbCBwa3RfaGFzX3N0b3JlX3MxOwogCisgICAgYm9vbCBwa3RfaGFzX2h2eDsKKyAg
ICBJbnNuICp2aGlzdF9pbnNuOworCiAgICAgSW5zbiBpbnNuW0lOU1RSVUNUSU9OU19NQVhdOwog
fTsKIApkaWZmIC0tZ2l0IGEvdGFyZ2V0L2hleGFnb24vaW50ZXJuYWwuaCBiL3RhcmdldC9oZXhh
Z29uL2ludGVybmFsLmgKaW5kZXggNmIyMGFmZi4uODJhYzMwNCAxMDA2NDQKLS0tIGEvdGFyZ2V0
L2hleGFnb24vaW50ZXJuYWwuaAorKysgYi90YXJnZXQvaGV4YWdvbi9pbnRlcm5hbC5oCkBAIC0z
MSw2ICszMSw5IEBACiAKIGludCBoZXhhZ29uX2dkYl9yZWFkX3JlZ2lzdGVyKENQVVN0YXRlICpj
cHUsIEdCeXRlQXJyYXkgKmJ1ZiwgaW50IHJlZyk7CiBpbnQgaGV4YWdvbl9nZGJfd3JpdGVfcmVn
aXN0ZXIoQ1BVU3RhdGUgKmNwdSwgdWludDhfdCAqYnVmLCBpbnQgcmVnKTsKKwordm9pZCBoZXhh
Z29uX2RlYnVnX3ZyZWcoQ1BVSGV4YWdvblN0YXRlICplbnYsIGludCByZWdudW0pOwordm9pZCBo
ZXhhZ29uX2RlYnVnX3FyZWcoQ1BVSGV4YWdvblN0YXRlICplbnYsIGludCByZWdudW0pOwogdm9p
ZCBoZXhhZ29uX2RlYnVnKENQVUhleGFnb25TdGF0ZSAqZW52KTsKIAogZXh0ZXJuIGNvbnN0IGNo
YXIgKiBjb25zdCBoZXhhZ29uX3JlZ25hbWVzW1RPVEFMX1BFUl9USFJFQURfUkVHU107CmRpZmYg
LS1naXQgYS90YXJnZXQvaGV4YWdvbi9tbXZlYy9tbXZlYy5oIGIvdGFyZ2V0L2hleGFnb24vbW12
ZWMvbW12ZWMuaApuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwLi42MTk2YzUyCi0t
LSAvZGV2L251bGwKKysrIGIvdGFyZ2V0L2hleGFnb24vbW12ZWMvbW12ZWMuaApAQCAtMCwwICsx
LDgzIEBACisvKgorICogIENvcHlyaWdodChjKSAyMDE5LTIwMjEgUXVhbGNvbW0gSW5ub3ZhdGlv
biBDZW50ZXIsIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KKyAqCisgKiAgVGhpcyBwcm9ncmFt
IGlzIGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnkK
KyAqICBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNl
IGFzIHB1Ymxpc2hlZCBieQorICogIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb247IGVpdGhl
ciB2ZXJzaW9uIDIgb2YgdGhlIExpY2Vuc2UsIG9yCisgKiAgKGF0IHlvdXIgb3B0aW9uKSBhbnkg
bGF0ZXIgdmVyc2lvbi4KKyAqCisgKiAgVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRo
ZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsCisgKiAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJB
TlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2YKKyAqICBNRVJDSEFOVEFC
SUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlCisgKiAg
R05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy4KKyAqCisgKiAgWW91
IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExp
Y2Vuc2UKKyAqICBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbTsgaWYgbm90LCBzZWUgPGh0dHA6Ly93
d3cuZ251Lm9yZy9saWNlbnNlcy8+LgorICovCisKKyNpZm5kZWYgSEVYQUdPTl9NTVZFQ19ICisj
ZGVmaW5lIEhFWEFHT05fTU1WRUNfSAorCisjZGVmaW5lIE1BWF9WRUNfU0laRV9MT0dCWVRFUyA3
CisjZGVmaW5lIE1BWF9WRUNfU0laRV9CWVRFUyAgKDEgPDwgTUFYX1ZFQ19TSVpFX0xPR0JZVEVT
KQorCisjZGVmaW5lIE5VTV9WUkVHUyAgICAgICAgICAgMzIKKyNkZWZpbmUgTlVNX1FSRUdTICAg
ICAgICAgICA0CisKK3R5cGVkZWYgdWludDMyX3QgVlJlZ01hc2s7IC8qIGF0IGxlYXN0IE5VTV9W
UkVHUyBiaXRzICovCit0eXBlZGVmIHVpbnQzMl90IFFSZWdNYXNrOyAvKiBhdCBsZWFzdCBOVU1f
UVJFR1MgYml0cyAqLworCisjZGVmaW5lIFZFQ1RPUl9TSVpFX0JZVEUgICAgKGZWRUNTSVpFKCkp
CisKK3R5cGVkZWYgdW5pb24geworICAgIHVpbnQ2NF90IHVkW01BWF9WRUNfU0laRV9CWVRFUyAv
IDhdOworICAgIGludDY0X3QgICBkW01BWF9WRUNfU0laRV9CWVRFUyAvIDhdOworICAgIHVpbnQz
Ml90IHV3W01BWF9WRUNfU0laRV9CWVRFUyAvIDRdOworICAgIGludDMyX3QgICB3W01BWF9WRUNf
U0laRV9CWVRFUyAvIDRdOworICAgIHVpbnQxNl90IHVoW01BWF9WRUNfU0laRV9CWVRFUyAvIDJd
OworICAgIGludDE2X3QgICBoW01BWF9WRUNfU0laRV9CWVRFUyAvIDJdOworICAgIHVpbnQ4X3Qg
IHViW01BWF9WRUNfU0laRV9CWVRFUyAvIDFdOworICAgIGludDhfdCAgICBiW01BWF9WRUNfU0la
RV9CWVRFUyAvIDFdOworfSBNTVZlY3RvcjsKKwordHlwZWRlZiB1bmlvbiB7CisgICAgdWludDY0
X3QgdWRbMiAqIE1BWF9WRUNfU0laRV9CWVRFUyAvIDhdOworICAgIGludDY0X3QgICBkWzIgKiBN
QVhfVkVDX1NJWkVfQllURVMgLyA4XTsKKyAgICB1aW50MzJfdCB1d1syICogTUFYX1ZFQ19TSVpF
X0JZVEVTIC8gNF07CisgICAgaW50MzJfdCAgIHdbMiAqIE1BWF9WRUNfU0laRV9CWVRFUyAvIDRd
OworICAgIHVpbnQxNl90IHVoWzIgKiBNQVhfVkVDX1NJWkVfQllURVMgLyAyXTsKKyAgICBpbnQx
Nl90ICAgaFsyICogTUFYX1ZFQ19TSVpFX0JZVEVTIC8gMl07CisgICAgdWludDhfdCAgdWJbMiAq
IE1BWF9WRUNfU0laRV9CWVRFUyAvIDFdOworICAgIGludDhfdCAgICBiWzIgKiBNQVhfVkVDX1NJ
WkVfQllURVMgLyAxXTsKKyAgICBNTVZlY3RvciB2WzJdOworfSBNTVZlY3RvclBhaXI7CisKK3R5
cGVkZWYgdW5pb24geworICAgIHVpbnQ2NF90IHVkW01BWF9WRUNfU0laRV9CWVRFUyAvIDggLyA4
XTsKKyAgICBpbnQ2NF90ICAgZFtNQVhfVkVDX1NJWkVfQllURVMgLyA4IC8gOF07CisgICAgdWlu
dDMyX3QgdXdbTUFYX1ZFQ19TSVpFX0JZVEVTIC8gNCAvIDhdOworICAgIGludDMyX3QgICB3W01B
WF9WRUNfU0laRV9CWVRFUyAvIDQgLyA4XTsKKyAgICB1aW50MTZfdCB1aFtNQVhfVkVDX1NJWkVf
QllURVMgLyAyIC8gOF07CisgICAgaW50MTZfdCAgIGhbTUFYX1ZFQ19TSVpFX0JZVEVTIC8gMiAv
IDhdOworICAgIHVpbnQ4X3QgIHViW01BWF9WRUNfU0laRV9CWVRFUyAvIDEgLyA4XTsKKyAgICBp
bnQ4X3QgICAgYltNQVhfVkVDX1NJWkVfQllURVMgLyAxIC8gOF07Cit9IE1NUVJlZzsKKwordHlw
ZWRlZiBzdHJ1Y3QgeworICAgIE1NVmVjdG9yIGRhdGE7CisgICAgREVDTEFSRV9CSVRNQVAobWFz
aywgTUFYX1ZFQ19TSVpFX0JZVEVTKTsKKyAgICBpbnQgc2l6ZTsKKyAgICB0YXJnZXRfdWxvbmcg
dmFbTUFYX1ZFQ19TSVpFX0JZVEVTXTsKKyAgICBib29sIG9wOworICAgIGludCBvcF9zaXplOwor
fSBWVENNU3RvcmVMb2c7CisKKworLyogVHlwZXMgb2YgdmVjdG9yIHJlZ2lzdGVyIGFzc2lnbm1l
bnQgKi8KK3R5cGVkZWYgZW51bSB7CisgICAgRVhUX0RGTCwgICAgICAvKiBEZWZhdWx0ICovCisg
ICAgRVhUX05FVywgICAgICAvKiBOZXcgLSB2YWx1ZSB1c2VkIGluIHRoZSBzYW1lIHBhY2tldCAq
LworICAgIEVYVF9UTVAgICAgICAgLyogVGVtcCAtIHZhbHVlIHVzZWQgYnV0IG5vdCBzdG9yZWQg
dG8gcmVnaXN0ZXIgKi8KK30gVlJlZ1dyaXRlVHlwZTsKKworI2VuZGlmCmRpZmYgLS1naXQgYS90
YXJnZXQvaGV4YWdvbi9jcHUuYyBiL3RhcmdldC9oZXhhZ29uL2NwdS5jCmluZGV4IDMzMzgzNjUu
Ljk4OWJkNzYgMTAwNjQ0Ci0tLSBhL3RhcmdldC9oZXhhZ29uL2NwdS5jCisrKyBiL3RhcmdldC9o
ZXhhZ29uL2NwdS5jCkBAIC0xMTMsNyArMTEzLDY2IEBAIHN0YXRpYyB2b2lkIHByaW50X3JlZyhG
SUxFICpmLCBDUFVIZXhhZ29uU3RhdGUgKmVudiwgaW50IHJlZ251bSkKICAgICAgICAgICAgICAg
ICAgaGV4YWdvbl9yZWduYW1lc1tyZWdudW1dLCB2YWx1ZSk7CiB9CiAKLXN0YXRpYyB2b2lkIGhl
eGFnb25fZHVtcChDUFVIZXhhZ29uU3RhdGUgKmVudiwgRklMRSAqZikKK3N0YXRpYyB2b2lkIHBy
aW50X3ZyZWcoRklMRSAqZiwgQ1BVSGV4YWdvblN0YXRlICplbnYsIGludCByZWdudW0sCisgICAg
ICAgICAgICAgICAgICAgICAgIGJvb2wgc2tpcF9pZl96ZXJvKQoreworICAgIGlmIChza2lwX2lm
X3plcm8pIHsKKyAgICAgICAgYm9vbCBub256ZXJvX2ZvdW5kID0gZmFsc2U7CisgICAgICAgIGZv
ciAoaW50IGkgPSAwOyBpIDwgTUFYX1ZFQ19TSVpFX0JZVEVTOyBpKyspIHsKKyAgICAgICAgICAg
IGlmIChlbnYtPlZSZWdzW3JlZ251bV0udWJbaV0gIT0gMCkgeworICAgICAgICAgICAgICAgIG5v
bnplcm9fZm91bmQgPSB0cnVlOworICAgICAgICAgICAgICAgIGJyZWFrOworICAgICAgICAgICAg
fQorICAgICAgICB9CisgICAgICAgIGlmICghbm9uemVyb19mb3VuZCkgeworICAgICAgICAgICAg
cmV0dXJuOworICAgICAgICB9CisgICAgfQorCisgICAgcWVtdV9mcHJpbnRmKGYsICIgIHYlZCA9
ICggIiwgcmVnbnVtKTsKKyAgICBxZW11X2ZwcmludGYoZiwgIjB4JTAyeCIsIGVudi0+VlJlZ3Nb
cmVnbnVtXS51YltNQVhfVkVDX1NJWkVfQllURVMgLSAxXSk7CisgICAgZm9yIChpbnQgaSA9IE1B
WF9WRUNfU0laRV9CWVRFUyAtIDI7IGkgPj0gMDsgaS0tKSB7CisgICAgICAgIHFlbXVfZnByaW50
ZihmLCAiLCAweCUwMngiLCBlbnYtPlZSZWdzW3JlZ251bV0udWJbaV0pOworICAgIH0KKyAgICBx
ZW11X2ZwcmludGYoZiwgIiApXG4iKTsKK30KKwordm9pZCBoZXhhZ29uX2RlYnVnX3ZyZWcoQ1BV
SGV4YWdvblN0YXRlICplbnYsIGludCByZWdudW0pCit7CisgICAgcHJpbnRfdnJlZyhzdGRvdXQs
IGVudiwgcmVnbnVtLCBmYWxzZSk7Cit9CisKK3N0YXRpYyB2b2lkIHByaW50X3FyZWcoRklMRSAq
ZiwgQ1BVSGV4YWdvblN0YXRlICplbnYsIGludCByZWdudW0sCisgICAgICAgICAgICAgICAgICAg
ICAgIGJvb2wgc2tpcF9pZl96ZXJvKQoreworICAgIGlmIChza2lwX2lmX3plcm8pIHsKKyAgICAg
ICAgYm9vbCBub256ZXJvX2ZvdW5kID0gZmFsc2U7CisgICAgICAgIGZvciAoaW50IGkgPSAwOyBp
IDwgTUFYX1ZFQ19TSVpFX0JZVEVTIC8gODsgaSsrKSB7CisgICAgICAgICAgICBpZiAoZW52LT5R
UmVnc1tyZWdudW1dLnViW2ldICE9IDApIHsKKyAgICAgICAgICAgICAgICBub256ZXJvX2ZvdW5k
ID0gdHJ1ZTsKKyAgICAgICAgICAgICAgICBicmVhazsKKyAgICAgICAgICAgIH0KKyAgICAgICAg
fQorICAgICAgICBpZiAoIW5vbnplcm9fZm91bmQpIHsKKyAgICAgICAgICAgIHJldHVybjsKKyAg
ICAgICAgfQorICAgIH0KKworICAgIHFlbXVfZnByaW50ZihmLCAiICBxJWQgPSAoICIsIHJlZ251
bSk7CisgICAgcWVtdV9mcHJpbnRmKGYsICIweCUwMngiLAorICAgICAgICAgICAgICAgICBlbnYt
PlFSZWdzW3JlZ251bV0udWJbTUFYX1ZFQ19TSVpFX0JZVEVTIC8gOCAtIDFdKTsKKyAgICBmb3Ig
KGludCBpID0gTUFYX1ZFQ19TSVpFX0JZVEVTIC8gOCAtIDI7IGkgPj0gMDsgaS0tKSB7CisgICAg
ICAgIHFlbXVfZnByaW50ZihmLCAiLCAweCUwMngiLCBlbnYtPlFSZWdzW3JlZ251bV0udWJbaV0p
OworICAgIH0KKyAgICBxZW11X2ZwcmludGYoZiwgIiApXG4iKTsKK30KKwordm9pZCBoZXhhZ29u
X2RlYnVnX3FyZWcoQ1BVSGV4YWdvblN0YXRlICplbnYsIGludCByZWdudW0pCit7CisgICAgcHJp
bnRfcXJlZyhzdGRvdXQsIGVudiwgcmVnbnVtLCBmYWxzZSk7Cit9CisKK3N0YXRpYyB2b2lkIGhl
eGFnb25fZHVtcChDUFVIZXhhZ29uU3RhdGUgKmVudiwgRklMRSAqZiwgaW50IGZsYWdzKQogewog
ICAgIEhleGFnb25DUFUgKmNwdSA9IGVudl9hcmNoY3B1KGVudik7CiAKQEAgLTE1OSw2ICsyMTgs
MTcgQEAgc3RhdGljIHZvaWQgaGV4YWdvbl9kdW1wKENQVUhleGFnb25TdGF0ZSAqZW52LCBGSUxF
ICpmKQogICAgIHByaW50X3JlZyhmLCBlbnYsIEhFWF9SRUdfQ1MxKTsKICNlbmRpZgogICAgIHFl
bXVfZnByaW50ZihmLCAifVxuIik7CisKKyAgICBpZiAoZmxhZ3MgJiBDUFVfRFVNUF9GUFUpIHsK
KyAgICAgICAgcWVtdV9mcHJpbnRmKGYsICJWZWN0b3IgUmVnaXN0ZXJzID0ge1xuIik7CisgICAg
ICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTlVNX1ZSRUdTOyBpKyspIHsKKyAgICAgICAgICAgIHBy
aW50X3ZyZWcoZiwgZW52LCBpLCB0cnVlKTsKKyAgICAgICAgfQorICAgICAgICBmb3IgKGludCBp
ID0gMDsgaSA8IE5VTV9RUkVHUzsgaSsrKSB7CisgICAgICAgICAgICBwcmludF9xcmVnKGYsIGVu
diwgaSwgdHJ1ZSk7CisgICAgICAgIH0KKyAgICAgICAgcWVtdV9mcHJpbnRmKGYsICJ9XG4iKTsK
KyAgICB9CiB9CiAKIHN0YXRpYyB2b2lkIGhleGFnb25fZHVtcF9zdGF0ZShDUFVTdGF0ZSAqY3Ms
IEZJTEUgKmYsIGludCBmbGFncykKQEAgLTE2NiwxMiArMjM2LDEyIEBAIHN0YXRpYyB2b2lkIGhl
eGFnb25fZHVtcF9zdGF0ZShDUFVTdGF0ZSAqY3MsIEZJTEUgKmYsIGludCBmbGFncykKICAgICBI
ZXhhZ29uQ1BVICpjcHUgPSBIRVhBR09OX0NQVShjcyk7CiAgICAgQ1BVSGV4YWdvblN0YXRlICpl
bnYgPSAmY3B1LT5lbnY7CiAKLSAgICBoZXhhZ29uX2R1bXAoZW52LCBmKTsKKyAgICBoZXhhZ29u
X2R1bXAoZW52LCBmLCBmbGFncyk7CiB9CiAKIHZvaWQgaGV4YWdvbl9kZWJ1ZyhDUFVIZXhhZ29u
U3RhdGUgKmVudikKIHsKLSAgICBoZXhhZ29uX2R1bXAoZW52LCBzdGRvdXQpOworICAgIGhleGFn
b25fZHVtcChlbnYsIHN0ZG91dCwgQ1BVX0RVTVBfRlBVKTsKIH0KIAogc3RhdGljIHZvaWQgaGV4
YWdvbl9jcHVfc2V0X3BjKENQVVN0YXRlICpjcywgdmFkZHIgdmFsdWUpCkBAIC0yOTIsNyArMzYy
LDcgQEAgc3RhdGljIHZvaWQgaGV4YWdvbl9jcHVfY2xhc3NfaW5pdChPYmplY3RDbGFzcyAqYywg
dm9pZCAqZGF0YSkKICAgICBjYy0+c2V0X3BjID0gaGV4YWdvbl9jcHVfc2V0X3BjOwogICAgIGNj
LT5nZGJfcmVhZF9yZWdpc3RlciA9IGhleGFnb25fZ2RiX3JlYWRfcmVnaXN0ZXI7CiAgICAgY2Mt
PmdkYl93cml0ZV9yZWdpc3RlciA9IGhleGFnb25fZ2RiX3dyaXRlX3JlZ2lzdGVyOwotICAgIGNj
LT5nZGJfbnVtX2NvcmVfcmVncyA9IFRPVEFMX1BFUl9USFJFQURfUkVHUzsKKyAgICBjYy0+Z2Ri
X251bV9jb3JlX3JlZ3MgPSBUT1RBTF9QRVJfVEhSRUFEX1JFR1MgKyBOVU1fVlJFR1MgKyBOVU1f
UVJFR1M7CiAgICAgY2MtPmdkYl9zdG9wX2JlZm9yZV93YXRjaHBvaW50ID0gdHJ1ZTsKICAgICBj
Yy0+ZGlzYXNfc2V0X2luZm8gPSBoZXhhZ29uX2NwdV9kaXNhc19zZXRfaW5mbzsKICAgICBjYy0+
dGNnX29wcyA9ICZoZXhhZ29uX3RjZ19vcHM7Ci0tIAoyLjcuNAoK

