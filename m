Return-Path: <qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org>
X-Original-To: lists+qemu-devel@lfdr.de
Delivered-To: lists+qemu-devel@lfdr.de
Received: from lists.gnu.org (lists.gnu.org [209.51.188.17])
	by mail.lfdr.de (Postfix) with ESMTPS id 51AD76839D1
	for <lists+qemu-devel@lfdr.de>; Tue, 31 Jan 2023 23:58:41 +0100 (CET)
Received: from localhost ([::1] helo=lists1p.gnu.org)
	by lists.gnu.org with esmtp (Exim 4.90_1)
	(envelope-from <qemu-devel-bounces@nongnu.org>)
	id 1pMzYw-0000nh-P5; Tue, 31 Jan 2023 17:57:14 -0500
Received: from eggs.gnu.org ([2001:470:142:3::10])
 by lists.gnu.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256)
 (Exim 4.90_1) (envelope-from <tsimpson@qualcomm.com>)
 id 1pMzYm-0000g4-E1
 for qemu-devel@nongnu.org; Tue, 31 Jan 2023 17:57:05 -0500
Received: from mx0b-0031df01.pphosted.com ([205.220.180.131])
 by eggs.gnu.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256)
 (Exim 4.90_1) (envelope-from <tsimpson@qualcomm.com>)
 id 1pMzYg-0003tb-OO
 for qemu-devel@nongnu.org; Tue, 31 Jan 2023 17:57:03 -0500
Received: from pps.filterd (m0279870.ppops.net [127.0.0.1])
 by mx0a-0031df01.pphosted.com (8.17.1.19/8.17.1.19) with ESMTP id
 30VLv509026868; Tue, 31 Jan 2023 22:56:56 GMT
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=quicinc.com;
 h=from : to : cc :
 subject : date : message-id : in-reply-to : references : mime-version :
 content-type : content-transfer-encoding; s=qcppdkim1;
 bh=9jVaT8I+UBdpJKNRzEVsc0quuuAapeoqGkwwrErPeZo=;
 b=GI0Yy7UgEd1qDH5zo0nN9s4DplMpnyHmu587WEHOAMeyKkKm+YEKJZvVRSGzdFU8tlIn
 zNrTTH12tY/28QXsiq0Hy8db/7yAGLRn7y5+UXy/eSTI3VjUjnfuEx3xkdDHEEuY+YBL
 Gxgxfzvj4IAIn8ZFmiiHWZjX6u+RToCU+U+eePT++zhhUCEFxSYa8W/1fjUrQ6Ht3Gps
 bcMrgG+X5fydqY7h6KWV3X8Dck3bC611+0teAmPEPmDg3gasEXk6GeX4S11s4apVt01z
 tJhUFxyKwkK+5SxgvZAWvYnyt8JTMgj3U9voNovb4ayC303KKFbQnyRUxWtLTq+gn2jg PQ== 
Received: from nalasppmta04.qualcomm.com (Global_NAT1.qualcomm.com
 [129.46.96.20])
 by mx0a-0031df01.pphosted.com (PPS) with ESMTPS id 3neua9agr8-1
 (version=TLSv1.2 cipher=ECDHE-RSA-AES256-GCM-SHA384 bits=256 verify=NOT);
 Tue, 31 Jan 2023 22:56:55 +0000
Received: from pps.filterd (NALASPPMTA04.qualcomm.com [127.0.0.1])
 by NALASPPMTA04.qualcomm.com (8.17.1.5/8.17.1.5) with ESMTP id 30VMusxH026087; 
 Tue, 31 Jan 2023 22:56:54 GMT
Received: from pps.reinject (localhost [127.0.0.1])
 by NALASPPMTA04.qualcomm.com (PPS) with ESMTPS id 3ncvskts9j-1
 (version=TLSv1.2 cipher=ECDHE-RSA-AES256-GCM-SHA384 bits=256 verify=NO);
 Tue, 31 Jan 2023 22:56:54 +0000
Received: from NALASPPMTA04.qualcomm.com (NALASPPMTA04.qualcomm.com
 [127.0.0.1])
 by pps.reinject (8.17.1.5/8.17.1.5) with ESMTP id 30VMus12026076;
 Tue, 31 Jan 2023 22:56:54 GMT
Received: from hu-devc-lv-u18-c.qualcomm.com (hu-tsimpson-lv.qualcomm.com
 [10.47.235.220])
 by NALASPPMTA04.qualcomm.com (PPS) with ESMTP id 30VMurM6026065;
 Tue, 31 Jan 2023 22:56:54 +0000
Received: by hu-devc-lv-u18-c.qualcomm.com (Postfix, from userid 47164)
 id 14EAC500119; Tue, 31 Jan 2023 14:56:53 -0800 (PST)
From: Taylor Simpson <tsimpson@quicinc.com>
To: qemu-devel@nongnu.org
Cc: tsimpson@quicinc.com, richard.henderson@linaro.org, philmd@linaro.org,
 ale@rev.ng, anjo@rev.ng, bcain@quicinc.com, quic_mathbern@quicinc.com
Subject: [PATCH v5 12/14] Hexagon (target/hexagon) Remove
 gen_log_predicated_reg_write[_pair]
Date: Tue, 31 Jan 2023 14:56:45 -0800
Message-Id: <20230131225647.25274-13-tsimpson@quicinc.com>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20230131225647.25274-1-tsimpson@quicinc.com>
References: <20230131225647.25274-1-tsimpson@quicinc.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
X-QCInternal: smtphost
X-QCInternal: smtphost
X-Proofpoint-Virus-Version: vendor=nai engine=6200 definitions=5800
 signatures=585085
X-Proofpoint-Virus-Version: vendor=nai engine=6200 definitions=5800
 signatures=585085
X-Proofpoint-GUID: 3HPkL-TPwHoT_fnAFJhGzjcgcMUmbOq4
X-Proofpoint-ORIG-GUID: 3HPkL-TPwHoT_fnAFJhGzjcgcMUmbOq4
X-Proofpoint-Virus-Version: vendor=baseguard
 engine=ICAP:2.0.219,Aquarius:18.0.930,Hydra:6.0.562,FMLib:17.11.122.1
 definitions=2023-01-31_08,2023-01-31_01,2022-06-22_01
X-Proofpoint-Spam-Details: rule=outbound_notspam policy=outbound score=0
 bulkscore=0 impostorscore=0
 mlxscore=0 suspectscore=0 adultscore=0 lowpriorityscore=0 malwarescore=0
 phishscore=0 priorityscore=1501 clxscore=1015 spamscore=0 mlxlogscore=857
 classifier=spam adjust=0 reason=mlx scancount=1 engine=8.12.0-2212070000
 definitions=main-2301310197
Received-SPF: pass client-ip=205.220.180.131;
 envelope-from=tsimpson@qualcomm.com; helo=mx0b-0031df01.pphosted.com
X-Spam_score_int: -17
X-Spam_score: -1.8
X-Spam_bar: -
X-Spam_report: (-1.8 / 5.0 requ) BAYES_00=-1.9, DKIM_SIGNED=0.1,
 DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1, HEADER_FROM_DIFFERENT_DOMAINS=0.25,
 SPF_HELO_NONE=0.001, SPF_PASS=-0.001 autolearn=no autolearn_force=no
X-Spam_action: no action
X-BeenThere: qemu-devel@nongnu.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: <qemu-devel.nongnu.org>
List-Unsubscribe: <https://lists.nongnu.org/mailman/options/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=unsubscribe>
List-Archive: <https://lists.nongnu.org/archive/html/qemu-devel>
List-Post: <mailto:qemu-devel@nongnu.org>
List-Help: <mailto:qemu-devel-request@nongnu.org?subject=help>
List-Subscribe: <https://lists.nongnu.org/mailman/listinfo/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=subscribe>
Errors-To: qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org
Sender: qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org

V2UgYXNzaWduIHRoZSBpbnN0cnVjdGlvbiBkZXN0aW5hdGlvbiByZWdpc3RlciB0byBoZXhfbmV3
X3ZhbHVlW251bV0KaW5zdGVhZCBvZiBhIFRDRyB0ZW1wIHRoYXQgZ2V0cyBjb3BpZWQgYmFjayB0
byBoZXhfbmV3X3ZhbHVlW251bV0uCgpTaW5jZSB3ZSBwcmVsb2FkIGhleF9uZXdfdmFsdWUgZm9y
IHByZWRpY2F0ZWQgaW5zdHJ1Y3Rpb25zLCB3ZSBkb24ndApuZWVkIHRoZSBjaGVjayBmb3Igc2xv
dF9jYW5jZWxsZWQuICBTbywgd2UgY2FsbCBnZW5fbG9nX3JlZ193cml0ZSBpbnN0ZWFkLgoKV2Ug
dXBkYXRlIHRoZSBoZWxwZXIgZnVuY3Rpb24gZ2VuZXJhdGlvbiBhbmQgZ2VuX3RjZy5oIHRvIG1h
aW50YWluIHRoZQpkaXNhYmxlLWhleGFnb24taWRlZi1wYXJzZXIgY29uZmlndXJhdGlvbi4KCkhl
cmUgaXMgYSBzaW1wbGUgZXhhbXBsZSBvZiB0aGUgZGlmZmVyZW5jZXMgaW4gdGhlIFRDRyBjb2Rl
IGdlbmVyYXRlZDoKCklOOgoweDAwNDAwMDk0OiAgMHhmOTAwYzEwMiB7ICAgICAgIGlmIChQMCkg
UjIgPSBhbmQoUjAsUjEpIH0KCkJFRk9SRQogLS0tLSAwMDQwMDA5NAogbW92X2kzMiBzbG90X2Nh
bmNlbGxlZCwkMHgwCiBtb3ZfaTMyIG5ld19yMixyMgogbW92X2kzMiBsb2MyLCQweDAKIGFuZF9p
MzIgdG1wMCxwMCwkMHgxCiBicmNvbmRfaTMyIHRtcDAsJDB4MCxlcSwkTDEKIGFuZF9pMzIgdG1w
MCxyMCxyMQogbW92X2kzMiBsb2MyLHRtcDAKIGJyICRMMgogc2V0X2xhYmVsICRMMQogb3JfaTMy
IHNsb3RfY2FuY2VsbGVkLHNsb3RfY2FuY2VsbGVkLCQweDgKIHNldF9sYWJlbCAkTDIKIGFuZF9p
MzIgdG1wMCxzbG90X2NhbmNlbGxlZCwkMHg4CiBtb3Zjb25kX2kzMiBuZXdfcjIsdG1wMCwkMHgw
LGxvYzIsbmV3X3IyLGVxCiBtb3ZfaTMyIHIyLG5ld19yMgoKQUZURVIKIC0tLS0gMDA0MDAwOTQK
IG1vdl9pMzIgc2xvdF9jYW5jZWxsZWQsJDB4MAogbW92X2kzMiBuZXdfcjIscjIKIGFuZF9pMzIg
dG1wMCxwMCwkMHgxCiBicmNvbmRfaTMyIHRtcDAsJDB4MCxlcSwkTDEKIGFuZF9pMzIgdG1wMCxy
MCxyMQogbW92X2kzMiBuZXdfcjIsdG1wMAogYnIgJEwyCiBzZXRfbGFiZWwgJEwxCiBvcl9pMzIg
c2xvdF9jYW5jZWxsZWQsc2xvdF9jYW5jZWxsZWQsJDB4OAogc2V0X2xhYmVsICRMMgogbW92X2kz
MiByMixuZXdfcjIKCldlJ2xsIHJlbW92ZSB0aGUgdW5uZWNlc3NhcnkgbWFuaXB1bGF0aW9uIG9m
IHNsb3RfY2FuY2VsbGVkIGluIGEKc3Vic2VxdWVudCBwYXRjaC4KClNpZ25lZC1vZmYtYnk6IFRh
eWxvciBTaW1wc29uIDx0c2ltcHNvbkBxdWljaW5jLmNvbT4KLS0tCiB0YXJnZXQvaGV4YWdvbi9n
ZW5fdGNnLmggICAgICAgICAgICAgICAgICAgIHwgICA3ICstCiB0YXJnZXQvaGV4YWdvbi9tYWNy
b3MuaCAgICAgICAgICAgICAgICAgICAgIHwgIDE3IC0tLQogdGFyZ2V0L2hleGFnb24vZ2VucHRy
LmMgICAgICAgICAgICAgICAgICAgICB8IDEyMCArKysrLS0tLS0tLS0tLS0tLS0tLQogdGFyZ2V0
L2hleGFnb24vaWRlZi1wYXJzZXIvcGFyc2VyLWhlbHBlcnMuYyB8ICAgNCArLQogdGFyZ2V0L2hl
eGFnb24vZ2VuX2hlbHBlcl9mdW5jcy5weSAgICAgICAgICB8ICAxOSArKystCiB0YXJnZXQvaGV4
YWdvbi9nZW5faGVscGVyX3Byb3Rvcy5weSAgICAgICAgIHwgIDEyICstCiB0YXJnZXQvaGV4YWdv
bi9nZW5fdGNnX2Z1bmNzLnB5ICAgICAgICAgICAgIHwgIDkwICsrKysrKysrLS0tLS0tLQogdGFy
Z2V0L2hleGFnb24vaGV4X2NvbW1vbi5weSAgICAgICAgICAgICAgICB8ICAgOSArLQogOCBmaWxl
cyBjaGFuZ2VkLCAxMTAgaW5zZXJ0aW9ucygrKSwgMTY4IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdp
dCBhL3RhcmdldC9oZXhhZ29uL2dlbl90Y2cuaCBiL3RhcmdldC9oZXhhZ29uL2dlbl90Y2cuaApp
bmRleCA4MjgyZmYzZmM1Li41ZjJmZmFmNzgwIDEwMDY0NAotLS0gYS90YXJnZXQvaGV4YWdvbi9n
ZW5fdGNnLmgKKysrIGIvdGFyZ2V0L2hleGFnb24vZ2VuX3RjZy5oCkBAIC0zNDIsOCArMzQyLDYg
QEAKICAgICAgICAgdGNnX2dlbl9tb3ZpX3RsKEVBLCAwKTsgXAogICAgICAgICBQUkVEOyAgXAog
ICAgICAgICBDSEVDS19OT1NIVUZfUFJFRChHRVRfRUEsIFNJWkUsIExTQik7IFwKLSAgICAgICAg
UFJFRF9MT0FEX0NBTkNFTChMU0IsIEVBKTsgXAotICAgICAgICB0Y2dfZ2VuX21vdmlfdGwoUmRW
LCAwKTsgXAogICAgICAgICB0Y2dfZ2VuX2JyY29uZGlfdGwoVENHX0NPTkRfRVEsIExTQiwgMCwg
bGFiZWwpOyBcCiAgICAgICAgIGZMT0FEKDEsIFNJWkUsIFNJR04sIEVBLCBSZFYpOyBcCiAgICAg
ICAgIGdlbl9zZXRfbGFiZWwobGFiZWwpOyBcCkBAIC00MDIsOCArNDAwLDYgQEAKICAgICAgICAg
dGNnX2dlbl9tb3ZpX3RsKEVBLCAwKTsgXAogICAgICAgICBQUkVEOyAgXAogICAgICAgICBDSEVD
S19OT1NIVUZfUFJFRChHRVRfRUEsIDgsIExTQik7IFwKLSAgICAgICAgUFJFRF9MT0FEX0NBTkNF
TChMU0IsIEVBKTsgXAotICAgICAgICB0Y2dfZ2VuX21vdmlfaTY0KFJkZFYsIDApOyBcCiAgICAg
ICAgIHRjZ19nZW5fYnJjb25kaV90bChUQ0dfQ09ORF9FUSwgTFNCLCAwLCBsYWJlbCk7IFwKICAg
ICAgICAgZkxPQUQoMSwgOCwgdSwgRUEsIFJkZFYpOyBcCiAgICAgICAgIGdlbl9zZXRfbGFiZWwo
bGFiZWwpOyBcCkBAIC01MjEsMTAgKzUxNyw5IEBACiAgKi8KICNkZWZpbmUgZkdFTl9UQ0dfU0wy
X3JldHVybihTSE9SVENPREUpIFwKICAgICBkbyB7IFwKLSAgICAgICAgVENHdl9pNjQgUmRkViA9
IHRjZ190ZW1wX25ld19pNjQoKTsgXAorICAgICAgICBUQ0d2X2k2NCBSZGRWID0gZ2V0X3Jlc3Vs
dF9ncHJfcGFpcihjdHgsIEhFWF9SRUdfRlApOyBcCiAgICAgICAgIGdlbl9yZXR1cm4oY3R4LCBS
ZGRWLCBoZXhfZ3ByW0hFWF9SRUdfRlBdKTsgXAogICAgICAgICBnZW5fbG9nX3JlZ193cml0ZV9w
YWlyKEhFWF9SRUdfRlAsIFJkZFYpOyBcCi0gICAgICAgIHRjZ190ZW1wX2ZyZWVfaTY0KFJkZFYp
OyBcCiAgICAgfSB3aGlsZSAoMCkKIAogLyoKZGlmZiAtLWdpdCBhL3RhcmdldC9oZXhhZ29uL21h
Y3Jvcy5oIGIvdGFyZ2V0L2hleGFnb24vbWFjcm9zLmgKaW5kZXggOGYxZjgyZjhkYS4uZjVmZjky
M2JiZCAxMDA2NDQKLS0tIGEvdGFyZ2V0L2hleGFnb24vbWFjcm9zLmgKKysrIGIvdGFyZ2V0L2hl
eGFnb24vbWFjcm9zLmgKQEAgLTIxMCwyMyArMjEwLDYgQEAgc3RhdGljIGlubGluZSB2b2lkIGdl
bl9jYW5jZWwodWludDMyX3Qgc2xvdCkKIAogI2RlZmluZSBMT0FEX0NBTkNFTChFQSkgZG8geyBD
QU5DRUw7IH0gd2hpbGUgKDApCiAKLSNpZmRlZiBRRU1VX0dFTkVSQVRFCi1zdGF0aWMgaW5saW5l
IHZvaWQgZ2VuX3ByZWRfY2FuY2VsKFRDR3YgcHJlZCwgdWludDMyX3Qgc2xvdF9udW0pCi0gewot
ICAgIFRDR3Ygc2xvdF9tYXNrID0gdGNnX3RlbXBfbmV3KCk7Ci0gICAgVENHdiB0bXAgPSB0Y2df
dGVtcF9uZXcoKTsKLSAgICBUQ0d2IHplcm8gPSB0Y2dfY29uc3RhbnRfdGwoMCk7Ci0gICAgdGNn
X2dlbl9vcmlfdGwoc2xvdF9tYXNrLCBoZXhfc2xvdF9jYW5jZWxsZWQsIDEgPDwgc2xvdF9udW0p
OwotICAgIHRjZ19nZW5fYW5kaV90bCh0bXAsIHByZWQsIDEpOwotICAgIHRjZ19nZW5fbW92Y29u
ZF90bChUQ0dfQ09ORF9FUSwgaGV4X3Nsb3RfY2FuY2VsbGVkLCB0bXAsIHplcm8sCi0gICAgICAg
ICAgICAgICAgICAgICAgIHNsb3RfbWFzaywgaGV4X3Nsb3RfY2FuY2VsbGVkKTsKLSAgICB0Y2df
dGVtcF9mcmVlKHNsb3RfbWFzayk7Ci0gICAgdGNnX3RlbXBfZnJlZSh0bXApOwotfQotI2RlZmlu
ZSBQUkVEX0xPQURfQ0FOQ0VMKFBSRUQsIEVBKSBcCi0gICAgZ2VuX3ByZWRfY2FuY2VsKFBSRUQs
IGluc24tPmlzX2VuZGxvb3AgPyA0IDogaW5zbi0+c2xvdCkKLSNlbmRpZgotCiAjZGVmaW5lIFNU
T1JFX0NBTkNFTChFQSkgeyBlbnYtPnNsb3RfY2FuY2VsbGVkIHw9ICgxIDw8IHNsb3QpOyB9CiAK
ICNkZWZpbmUgZk1BWChBLCBCKSAoKChBKSA+IChCKSkgPyAoQSkgOiAoQikpCmRpZmYgLS1naXQg
YS90YXJnZXQvaGV4YWdvbi9nZW5wdHIuYyBiL3RhcmdldC9oZXhhZ29uL2dlbnB0ci5jCmluZGV4
IDY3ZWMzYWM1NTEuLmY5MzdhMTdiMjQgMTAwNjQ0Ci0tLSBhL3RhcmdldC9oZXhhZ29uL2dlbnB0
ci5jCisrKyBiL3RhcmdldC9oZXhhZ29uL2dlbnB0ci5jCkBAIC03MCwyOCArNzAsMTcgQEAgc3Rh
dGljIGlubGluZSB2b2lkIGdlbl9tYXNrZWRfcmVnX3dyaXRlKFRDR3YgbmV3X3ZhbCwgVENHdiBj
dXJfdmFsLAogICAgIH0KIH0KIAotc3RhdGljIGlubGluZSB2b2lkIGdlbl9sb2dfcHJlZGljYXRl
ZF9yZWdfd3JpdGUoaW50IHJudW0sIFRDR3YgdmFsLAotICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgdWludDMyX3Qgc2xvdCkKK3N0YXRpYyBUQ0d2IGdldF9y
ZXN1bHRfZ3ByKERpc2FzQ29udGV4dCAqY3R4LCBpbnQgcm51bSkKIHsKLSAgICBUQ0d2IHplcm8g
PSB0Y2dfY29uc3RhbnRfdGwoMCk7Ci0gICAgVENHdiBzbG90X21hc2sgPSB0Y2dfdGVtcF9uZXco
KTsKLQotICAgIHRjZ19nZW5fYW5kaV90bChzbG90X21hc2ssIGhleF9zbG90X2NhbmNlbGxlZCwg
MSA8PCBzbG90KTsKLSAgICB0Y2dfZ2VuX21vdmNvbmRfdGwoVENHX0NPTkRfRVEsIGhleF9uZXdf
dmFsdWVbcm51bV0sIHNsb3RfbWFzaywgemVybywKLSAgICAgICAgICAgICAgICAgICAgICAgICAg
IHZhbCwgaGV4X25ld192YWx1ZVtybnVtXSk7Ci0gICAgaWYgKEhFWF9ERUJVRykgewotICAgICAg
ICAvKgotICAgICAgICAgKiBEbyB0aGlzIHNvIEhFTFBFUihkZWJ1Z19jb21taXRfZW5kKSB3aWxs
IGtub3cKLSAgICAgICAgICoKLSAgICAgICAgICogTm90ZSB0aGF0IHNsb3RfbWFzayBpbmRpY2F0
ZXMgdGhlIHZhbHVlIGlzIG5vdCB3cml0dGVuCi0gICAgICAgICAqIChpLmUuLCBzbG90IHdhcyBj
YW5jZWxsZWQpLCBzbyB3ZSBjcmVhdGUgYSB0cnVlL2ZhbHNlIHZhbHVlIGJlZm9yZQotICAgICAg
ICAgKiBvcidpbmcgd2l0aCBoZXhfcmVnX3dyaXR0ZW5bcm51bV0uCi0gICAgICAgICAqLwotICAg
ICAgICB0Y2dfZ2VuX3NldGNvbmRfdGwoVENHX0NPTkRfRVEsIHNsb3RfbWFzaywgc2xvdF9tYXNr
LCB6ZXJvKTsKLSAgICAgICAgdGNnX2dlbl9vcl90bChoZXhfcmVnX3dyaXR0ZW5bcm51bV0sIGhl
eF9yZWdfd3JpdHRlbltybnVtXSwgc2xvdF9tYXNrKTsKLSAgICB9CisgICAgcmV0dXJuIGhleF9u
ZXdfdmFsdWVbcm51bV07Cit9CiAKLSAgICB0Y2dfdGVtcF9mcmVlKHNsb3RfbWFzayk7CitzdGF0
aWMgVENHdl9pNjQgZ2V0X3Jlc3VsdF9ncHJfcGFpcihEaXNhc0NvbnRleHQgKmN0eCwgaW50IHJu
dW0pCit7CisgICAgVENHdl9pNjQgcmVzdWx0ID0gdGNnX3RlbXBfbG9jYWxfbmV3X2k2NCgpOwor
ICAgIHRjZ19nZW5fY29uY2F0X2kzMl9pNjQocmVzdWx0LCBoZXhfbmV3X3ZhbHVlW3JudW1dLAor
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZXhfbmV3X3ZhbHVlW3JudW0gKyAx
XSk7CisgICAgcmV0dXJuIHJlc3VsdDsKIH0KIAogdm9pZCBnZW5fbG9nX3JlZ193cml0ZShpbnQg
cm51bSwgVENHdiB2YWwpCkBAIC0xMDYsNDIgKzk1LDYgQEAgdm9pZCBnZW5fbG9nX3JlZ193cml0
ZShpbnQgcm51bSwgVENHdiB2YWwpCiAgICAgfQogfQogCi1zdGF0aWMgdm9pZCBnZW5fbG9nX3By
ZWRpY2F0ZWRfcmVnX3dyaXRlX3BhaXIoaW50IHJudW0sIFRDR3ZfaTY0IHZhbCwKLSAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50MzJfdCBzbG90KQotewot
ICAgIFRDR3YgdmFsMzIgPSB0Y2dfdGVtcF9uZXcoKTsKLSAgICBUQ0d2IHplcm8gPSB0Y2dfY29u
c3RhbnRfdGwoMCk7Ci0gICAgVENHdiBzbG90X21hc2sgPSB0Y2dfdGVtcF9uZXcoKTsKLQotICAg
IHRjZ19nZW5fYW5kaV90bChzbG90X21hc2ssIGhleF9zbG90X2NhbmNlbGxlZCwgMSA8PCBzbG90
KTsKLSAgICAvKiBMb3cgd29yZCAqLwotICAgIHRjZ19nZW5fZXh0cmxfaTY0X2kzMih2YWwzMiwg
dmFsKTsKLSAgICB0Y2dfZ2VuX21vdmNvbmRfdGwoVENHX0NPTkRfRVEsIGhleF9uZXdfdmFsdWVb
cm51bV0sCi0gICAgICAgICAgICAgICAgICAgICAgIHNsb3RfbWFzaywgemVybywKLSAgICAgICAg
ICAgICAgICAgICAgICAgdmFsMzIsIGhleF9uZXdfdmFsdWVbcm51bV0pOwotICAgIC8qIEhpZ2gg
d29yZCAqLwotICAgIHRjZ19nZW5fZXh0cmhfaTY0X2kzMih2YWwzMiwgdmFsKTsKLSAgICB0Y2df
Z2VuX21vdmNvbmRfdGwoVENHX0NPTkRfRVEsIGhleF9uZXdfdmFsdWVbcm51bSArIDFdLAotICAg
ICAgICAgICAgICAgICAgICAgICBzbG90X21hc2ssIHplcm8sCi0gICAgICAgICAgICAgICAgICAg
ICAgIHZhbDMyLCBoZXhfbmV3X3ZhbHVlW3JudW0gKyAxXSk7Ci0gICAgaWYgKEhFWF9ERUJVRykg
ewotICAgICAgICAvKgotICAgICAgICAgKiBEbyB0aGlzIHNvIEhFTFBFUihkZWJ1Z19jb21taXRf
ZW5kKSB3aWxsIGtub3cKLSAgICAgICAgICoKLSAgICAgICAgICogTm90ZSB0aGF0IHNsb3RfbWFz
ayBpbmRpY2F0ZXMgdGhlIHZhbHVlIGlzIG5vdCB3cml0dGVuCi0gICAgICAgICAqIChpLmUuLCBz
bG90IHdhcyBjYW5jZWxsZWQpLCBzbyB3ZSBjcmVhdGUgYSB0cnVlL2ZhbHNlIHZhbHVlIGJlZm9y
ZQotICAgICAgICAgKiBvcidpbmcgd2l0aCBoZXhfcmVnX3dyaXR0ZW5bcm51bV0uCi0gICAgICAg
ICAqLwotICAgICAgICB0Y2dfZ2VuX3NldGNvbmRfdGwoVENHX0NPTkRfRVEsIHNsb3RfbWFzaywg
c2xvdF9tYXNrLCB6ZXJvKTsKLSAgICAgICAgdGNnX2dlbl9vcl90bChoZXhfcmVnX3dyaXR0ZW5b
cm51bV0sIGhleF9yZWdfd3JpdHRlbltybnVtXSwgc2xvdF9tYXNrKTsKLSAgICAgICAgdGNnX2dl
bl9vcl90bChoZXhfcmVnX3dyaXR0ZW5bcm51bSArIDFdLCBoZXhfcmVnX3dyaXR0ZW5bcm51bSAr
IDFdLAotICAgICAgICAgICAgICAgICAgICAgIHNsb3RfbWFzayk7Ci0gICAgfQotCi0gICAgdGNn
X3RlbXBfZnJlZSh2YWwzMik7Ci0gICAgdGNnX3RlbXBfZnJlZShzbG90X21hc2spOwotfQotCiBz
dGF0aWMgdm9pZCBnZW5fbG9nX3JlZ193cml0ZV9wYWlyKGludCBybnVtLCBUQ0d2X2k2NCB2YWwp
CiB7CiAgICAgY29uc3QgdGFyZ2V0X3Vsb25nIHJlZ19tYXNrX2xvdyA9IHJlZ19pbW11dF9tYXNr
c1tybnVtXTsKQEAgLTE2Nyw2ICsxMjAsNyBAQCBzdGF0aWMgdm9pZCBnZW5fbG9nX3JlZ193cml0
ZV9wYWlyKGludCBybnVtLCBUQ0d2X2k2NCB2YWwpCiAgICAgfQogCiAgICAgdGNnX3RlbXBfZnJl
ZSh2YWwzMik7CisgICAgdGNnX3RlbXBfZnJlZV9pNjQodmFsKTsKIH0KIAogdm9pZCBnZW5fbG9n
X3ByZWRfd3JpdGUoRGlzYXNDb250ZXh0ICpjdHgsIGludCBwbnVtLCBUQ0d2IHZhbCkKQEAgLTMw
NiwxMiArMjYwLDE0IEBAIHN0YXRpYyBpbmxpbmUgdm9pZCBnZW5fd3JpdGVfY3RybF9yZWdfcGFp
cihEaXNhc0NvbnRleHQgKmN0eCwgaW50IHJlZ19udW0sCiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgVENHdl9pNjQgdmFsKQogewogICAgIGlmIChyZWdfbnVtID09
IEhFWF9SRUdfUDNfMF9BTElBU0VEKSB7CisgICAgICAgIFRDR3YgcmVzdWx0ID0gZ2V0X3Jlc3Vs
dF9ncHIoY3R4LCByZWdfbnVtICsgMSk7CiAgICAgICAgIFRDR3YgdmFsMzIgPSB0Y2dfdGVtcF9u
ZXcoKTsKICAgICAgICAgdGNnX2dlbl9leHRybF9pNjRfaTMyKHZhbDMyLCB2YWwpOwogICAgICAg
ICBnZW5fd3JpdGVfcDNfMChjdHgsIHZhbDMyKTsKICAgICAgICAgdGNnX2dlbl9leHRyaF9pNjRf
aTMyKHZhbDMyLCB2YWwpOwotICAgICAgICBnZW5fbG9nX3JlZ193cml0ZShyZWdfbnVtICsgMSwg
dmFsMzIpOworICAgICAgICB0Y2dfZ2VuX21vdl90bChyZXN1bHQsIHZhbDMyKTsKICAgICAgICAg
dGNnX3RlbXBfZnJlZSh2YWwzMik7CisgICAgICAgIHRjZ190ZW1wX2ZyZWVfaTY0KHZhbCk7CiAg
ICAgfSBlbHNlIHsKICAgICAgICAgZ2VuX2xvZ19yZWdfd3JpdGVfcGFpcihyZWdfbnVtLCB2YWwp
OwogICAgICAgICBpZiAocmVnX251bSA9PSBIRVhfUkVHX1FFTVVfUEtUX0NOVCkgewpAQCAtNzAx
LDMzICs2NTcsMjkgQEAgc3RhdGljIHZvaWQgZ2VuX2p1bXByKERpc2FzQ29udGV4dCAqY3R4LCBU
Q0d2IG5ld19wYykKIAogc3RhdGljIHZvaWQgZ2VuX2NhbGwoRGlzYXNDb250ZXh0ICpjdHgsIGlu
dCBwY19vZmYpCiB7Ci0gICAgVENHdiBuZXh0X1BDID0KLSAgICAgICAgdGNnX2NvbnN0YW50X3Rs
KGN0eC0+cGt0LT5wYyArIGN0eC0+cGt0LT5lbmNvZF9wa3Rfc2l6ZV9pbl9ieXRlcyk7Ci0gICAg
Z2VuX2xvZ19yZWdfd3JpdGUoSEVYX1JFR19MUiwgbmV4dF9QQyk7CisgICAgVENHdiBsciA9IGdl
dF9yZXN1bHRfZ3ByKGN0eCwgSEVYX1JFR19MUik7CisgICAgdGNnX2dlbl9tb3ZpX3RsKGxyLCBj
dHgtPm5leHRfUEMpOwogICAgIGdlbl93cml0ZV9uZXdfcGNfcGNyZWwoY3R4LCBwY19vZmYsIFRD
R19DT05EX0FMV0FZUywgTlVMTCk7CiB9CiAKIHN0YXRpYyB2b2lkIGdlbl9jYWxscihEaXNhc0Nv
bnRleHQgKmN0eCwgVENHdiBuZXdfcGMpCiB7Ci0gICAgVENHdiBuZXh0X1BDID0KLSAgICAgICAg
dGNnX2NvbnN0YW50X3RsKGN0eC0+cGt0LT5wYyArIGN0eC0+cGt0LT5lbmNvZF9wa3Rfc2l6ZV9p
bl9ieXRlcyk7Ci0gICAgZ2VuX2xvZ19yZWdfd3JpdGUoSEVYX1JFR19MUiwgbmV4dF9QQyk7Cisg
ICAgVENHdiBsciA9IGdldF9yZXN1bHRfZ3ByKGN0eCwgSEVYX1JFR19MUik7CisgICAgdGNnX2dl
bl9tb3ZpX3RsKGxyLCBjdHgtPm5leHRfUEMpOwogICAgIGdlbl93cml0ZV9uZXdfcGNfYWRkcihj
dHgsIG5ld19wYywgVENHX0NPTkRfQUxXQVlTLCBOVUxMKTsKIH0KIAogc3RhdGljIHZvaWQgZ2Vu
X2NvbmRfY2FsbChEaXNhc0NvbnRleHQgKmN0eCwgVENHdiBwcmVkLAogICAgICAgICAgICAgICAg
ICAgICAgICAgICBUQ0dDb25kIGNvbmQsIGludCBwY19vZmYpCiB7Ci0gICAgVENHdiBuZXh0X1BD
OworICAgIFRDR3YgbHIgPSBnZXRfcmVzdWx0X2dwcihjdHgsIEhFWF9SRUdfTFIpOwogICAgIFRD
R3YgbHNiID0gdGNnX3RlbXBfbG9jYWxfbmV3KCk7CiAgICAgVENHTGFiZWwgKnNraXAgPSBnZW5f
bmV3X2xhYmVsKCk7CiAgICAgdGNnX2dlbl9hbmRpX3RsKGxzYiwgcHJlZCwgMSk7CiAgICAgZ2Vu
X3dyaXRlX25ld19wY19wY3JlbChjdHgsIHBjX29mZiwgY29uZCwgbHNiKTsKICAgICB0Y2dfZ2Vu
X2JyY29uZGlfdGwoY29uZCwgbHNiLCAwLCBza2lwKTsKICAgICB0Y2dfdGVtcF9mcmVlKGxzYik7
Ci0gICAgbmV4dF9QQyA9Ci0gICAgICAgIHRjZ19jb25zdGFudF90bChjdHgtPnBrdC0+cGMgKyBj
dHgtPnBrdC0+ZW5jb2RfcGt0X3NpemVfaW5fYnl0ZXMpOwotICAgIGdlbl9sb2dfcmVnX3dyaXRl
KEhFWF9SRUdfTFIsIG5leHRfUEMpOworICAgIHRjZ19nZW5fbW92aV90bChsciwgY3R4LT5uZXh0
X1BDKTsKICAgICBnZW5fc2V0X2xhYmVsKHNraXApOwogfQogCkBAIC03NjAsOCArNzEyLDcgQEAg
c3RhdGljIHZvaWQgZ2VuX2xvYWRfZnJhbWUoRGlzYXNDb250ZXh0ICpjdHgsIFRDR3ZfaTY0IGZy
YW1lLCBUQ0d2IEVBKQogICAgIHRjZ19nZW5fcWVtdV9sZDY0KGZyYW1lLCBFQSwgY3R4LT5tZW1f
aWR4KTsKIH0KIAotc3RhdGljIHZvaWQgZ2VuX3JldHVybl9iYXNlKERpc2FzQ29udGV4dCAqY3R4
LCBUQ0d2X2k2NCBkc3QsIFRDR3Ygc3JjLAotICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRD
R3YgcjI5KQorc3RhdGljIHZvaWQgZ2VuX3JldHVybihEaXNhc0NvbnRleHQgKmN0eCwgVENHdl9p
NjQgZHN0LCBUQ0d2IHNyYykKIHsKICAgICAvKgogICAgICAqIGZyYW1lID0gKnNyYwpAQCAtNzcx
LDYgKzcyMiw3IEBAIHN0YXRpYyB2b2lkIGdlbl9yZXR1cm5fYmFzZShEaXNhc0NvbnRleHQgKmN0
eCwgVENHdl9pNjQgZHN0LCBUQ0d2IHNyYywKICAgICAgKi8KICAgICBUQ0d2X2k2NCBmcmFtZSA9
IHRjZ190ZW1wX25ld19pNjQoKTsKICAgICBUQ0d2IHIzMSA9IHRjZ190ZW1wX25ldygpOworICAg
IFRDR3YgcjI5ID0gZ2V0X3Jlc3VsdF9ncHIoY3R4LCBIRVhfUkVHX1NQKTsKIAogICAgIGdlbl9s
b2FkX2ZyYW1lKGN0eCwgZnJhbWUsIHNyYyk7CiAgICAgZ2VuX2ZyYW1lX3Vuc2NyYW1ibGUoZnJh
bWUpOwpAQCAtNzgzLDUwICs3MzUsMjYgQEAgc3RhdGljIHZvaWQgZ2VuX3JldHVybl9iYXNlKERp
c2FzQ29udGV4dCAqY3R4LCBUQ0d2X2k2NCBkc3QsIFRDR3Ygc3JjLAogICAgIHRjZ190ZW1wX2Zy
ZWUocjMxKTsKIH0KIAotc3RhdGljIHZvaWQgZ2VuX3JldHVybihEaXNhc0NvbnRleHQgKmN0eCwg
VENHdl9pNjQgZHN0LCBUQ0d2IHNyYykKLXsKLSAgICBUQ0d2IHIyOSA9IHRjZ190ZW1wX25ldygp
OwotICAgIGdlbl9yZXR1cm5fYmFzZShjdHgsIGRzdCwgc3JjLCByMjkpOwotICAgIGdlbl9sb2df
cmVnX3dyaXRlKEhFWF9SRUdfU1AsIHIyOSk7Ci0gICAgdGNnX3RlbXBfZnJlZShyMjkpOwotfQot
CiAvKiBpZiAocHJlZCkgZHN0ID0gZGVhbGxvY19yZXR1cm4oc3JjKTpyYXcgKi8KIHN0YXRpYyB2
b2lkIGdlbl9jb25kX3JldHVybihEaXNhc0NvbnRleHQgKmN0eCwgVENHdl9pNjQgZHN0LCBUQ0d2
IHNyYywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUQ0d2IHByZWQsIFRDR0NvbmQgY29u
ZCkKIHsKICAgICBUQ0d2IExTQiA9IHRjZ190ZW1wX25ldygpOwotICAgIFRDR3YgbWFzayA9IHRj
Z190ZW1wX25ldygpOwotICAgIFRDR3YgcjI5ID0gdGNnX3RlbXBfbG9jYWxfbmV3KCk7CiAgICAg
VENHTGFiZWwgKnNraXAgPSBnZW5fbmV3X2xhYmVsKCk7CiAgICAgdGNnX2dlbl9hbmRpX3RsKExT
QiwgcHJlZCwgMSk7CiAKLSAgICAvKiBJbml0aWFsaXplIHRoZSByZXN1bHRzIGluIGNhc2UgdGhl
IHByZWRpY2F0ZSBpcyBmYWxzZSAqLwotICAgIHRjZ19nZW5fbW92aV9pNjQoZHN0LCAwKTsKLSAg
ICB0Y2dfZ2VuX21vdmlfdGwocjI5LCAwKTsKLQotICAgIC8qIFNldCB0aGUgYml0IGluIGhleF9z
bG90X2NhbmNlbGxlZCBpZiB0aGUgcHJlZGljYXRlIGlzIGZsYXNlICovCi0gICAgdGNnX2dlbl9t
b3ZpX3RsKG1hc2ssIDEgPDwgY3R4LT5pbnNuLT5zbG90KTsKLSAgICB0Y2dfZ2VuX29yX3RsKG1h
c2ssIGhleF9zbG90X2NhbmNlbGxlZCwgbWFzayk7Ci0gICAgdGNnX2dlbl9tb3Zjb25kX3RsKGNv
bmQsIGhleF9zbG90X2NhbmNlbGxlZCwgTFNCLCB0Y2dfY29uc3RhbnRfdGwoMCksCi0gICAgICAg
ICAgICAgICAgICAgICAgIG1hc2ssIGhleF9zbG90X2NhbmNlbGxlZCk7Ci0gICAgdGNnX3RlbXBf
ZnJlZShtYXNrKTsKLQogICAgIHRjZ19nZW5fYnJjb25kaV90bChjb25kLCBMU0IsIDAsIHNraXAp
OwogICAgIHRjZ190ZW1wX2ZyZWUoTFNCKTsKLSAgICBnZW5fcmV0dXJuX2Jhc2UoY3R4LCBkc3Qs
IHNyYywgcjI5KTsKKyAgICBnZW5fcmV0dXJuKGN0eCwgZHN0LCBzcmMpOwogICAgIGdlbl9zZXRf
bGFiZWwoc2tpcCk7Ci0gICAgZ2VuX2xvZ19wcmVkaWNhdGVkX3JlZ193cml0ZShIRVhfUkVHX1NQ
LCByMjksIGN0eC0+aW5zbi0+c2xvdCk7Ci0gICAgdGNnX3RlbXBfZnJlZShyMjkpOwogfQogCiAv
KiBzdWItaW5zdHJ1Y3Rpb24gdmVyc2lvbiAobm8gUmRkViwgc28gaGFuZGxlIGl0IG1hbnVhbGx5
KSAqLwogc3RhdGljIHZvaWQgZ2VuX2NvbmRfcmV0dXJuX3N1Ymluc24oRGlzYXNDb250ZXh0ICpj
dHgsIFRDR0NvbmQgY29uZCwgVENHdiBwcmVkKQogewotICAgIFRDR3ZfaTY0IFJkZFYgPSB0Y2df
dGVtcF9sb2NhbF9uZXdfaTY0KCk7CisgICAgVENHdl9pNjQgUmRkViA9IGdldF9yZXN1bHRfZ3By
X3BhaXIoY3R4LCBIRVhfUkVHX0ZQKTsKICAgICBnZW5fY29uZF9yZXR1cm4oY3R4LCBSZGRWLCBo
ZXhfZ3ByW0hFWF9SRUdfRlBdLCBwcmVkLCBjb25kKTsKLSAgICBnZW5fbG9nX3ByZWRpY2F0ZWRf
cmVnX3dyaXRlX3BhaXIoSEVYX1JFR19GUCwgUmRkViwgY3R4LT5pbnNuLT5zbG90KTsKLSAgICB0
Y2dfdGVtcF9mcmVlX2k2NChSZGRWKTsKKyAgICBnZW5fbG9nX3JlZ193cml0ZV9wYWlyKEhFWF9S
RUdfRlAsIFJkZFYpOwogfQogCiBzdGF0aWMgdm9pZCBnZW5fZW5kbG9vcDAoRGlzYXNDb250ZXh0
ICpjdHgpCmRpZmYgLS1naXQgYS90YXJnZXQvaGV4YWdvbi9pZGVmLXBhcnNlci9wYXJzZXItaGVs
cGVycy5jIGIvdGFyZ2V0L2hleGFnb24vaWRlZi1wYXJzZXIvcGFyc2VyLWhlbHBlcnMuYwppbmRl
eCBkZTk4Mzg4MDZiLi5lYjY1MmQ2YTdhIDEwMDY0NAotLS0gYS90YXJnZXQvaGV4YWdvbi9pZGVm
LXBhcnNlci9wYXJzZXItaGVscGVycy5jCisrKyBiL3RhcmdldC9oZXhhZ29uL2lkZWYtcGFyc2Vy
L3BhcnNlci1oZWxwZXJzLmMKQEAgLTE4MzYsOSArMTgzNiw3IEBAIHZvaWQgZ2VuX2luc3RfaW5p
dF9hcmdzKENvbnRleHQgKmMsIFlZTFRZUEUgKmxvY3ApCiAgICAgZm9yICh1bnNpZ25lZCBpID0g
MDsgaSA8IGMtPmluc3QuaW5pdF9saXN0LT5sZW47IGkrKykgewogICAgICAgICBIZXhWYWx1ZSAq
dmFsID0gJmdfYXJyYXlfaW5kZXgoYy0+aW5zdC5pbml0X2xpc3QsIEhleFZhbHVlLCBpKTsKICAg
ICAgICAgaWYgKHZhbC0+dHlwZSA9PSBSRUdJU1RFUl9BUkcpIHsKLSAgICAgICAgICAgIGNoYXIg
cmVnX2lkWzVdOwotICAgICAgICAgICAgcmVnX2NvbXBvc2UoYywgbG9jcCwgJnZhbC0+cmVnLCBy
ZWdfaWQpOwotICAgICAgICAgICAgRU1JVF9IRUFEKGMsICJ0Y2dfZ2VuX21vdmlfaSV1KCVzLCAw
KTtcbiIsIHZhbC0+Yml0X3dpZHRoLCByZWdfaWQpOworICAgICAgICAgICAgLyogTm90aGluZyB0
byBkbyBoZXJlICovCiAgICAgICAgIH0gZWxzZSBpZiAodmFsLT50eXBlID09IFBSRURJQ0FURSkg
ewogICAgICAgICAgICAgY2hhciBzdWZmaXggPSB2YWwtPmlzX2RvdG5ldyA/ICdOJyA6ICdWJzsK
ICAgICAgICAgICAgIEVNSVRfSEVBRChjLCAidGNnX2dlbl9tb3ZpX2kldShQJWMlYywgMCk7XG4i
LCB2YWwtPmJpdF93aWR0aCwKZGlmZiAtLWdpdCBhL3RhcmdldC9oZXhhZ29uL2dlbl9oZWxwZXJf
ZnVuY3MucHkgYi90YXJnZXQvaGV4YWdvbi9nZW5faGVscGVyX2Z1bmNzLnB5CmluZGV4IDE5ZTk4
ODNmNGMuLjdhMjI0YjY2ZTYgMTAwNzU1Ci0tLSBhL3RhcmdldC9oZXhhZ29uL2dlbl9oZWxwZXJf
ZnVuY3MucHkKKysrIGIvdGFyZ2V0L2hleGFnb24vZ2VuX2hlbHBlcl9mdW5jcy5weQpAQCAtMSw3
ICsxLDcgQEAKICMhL3Vzci9iaW4vZW52IHB5dGhvbjMKIAogIyMKLSMjICBDb3B5cmlnaHQoYykg
MjAxOS0yMDIyIFF1YWxjb21tIElubm92YXRpb24gQ2VudGVyLCBJbmMuIEFsbCBSaWdodHMgUmVz
ZXJ2ZWQuCisjIyAgQ29weXJpZ2h0KGMpIDIwMTktMjAyMyBRdWFsY29tbSBJbm5vdmF0aW9uIENl
bnRlciwgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogIyMKICMjICBUaGlzIHByb2dyYW0gaXMg
ZnJlZSBzb2Z0d2FyZTsgeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeQogIyMg
IGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMg
cHVibGlzaGVkIGJ5CkBAIC0yMjYsNiArMjI2LDE0IEBAIGRlZiBnZW5faGVscGVyX2Z1bmN0aW9u
KGYsIHRhZywgdGFncmVncywgdGFnaW1tcyk6CiAgICAgICAgICAgICAgICAgICAgIHByaW50KCJC
YWQgcmVnaXN0ZXIgcGFyc2U6ICIscmVndHlwZSxyZWdpZCx0b3NzLG51bXJlZ3MpCiAgICAgICAg
ICAgICAgICAgaSArPSAxCiAKKyAgICAgICAgIyMgRm9yIGNvbmRpdGlvbmFsIGluc3RydWN0aW9u
cywgd2UgcGFzcyBpbiB0aGUgZGVzdGluYXRpb24gcmVnaXN0ZXIKKyAgICAgICAgaWYgJ0FfQ09O
REVYRUMnIGluIGhleF9jb21tb24uYXR0cmliZGljdFt0YWddOgorICAgICAgICAgICAgZm9yIHJl
Z3R5cGUsIHJlZ2lkLCB0b3NzLCBudW1yZWdzIGluIHJlZ3M6CisgICAgICAgICAgICAgICAgaWYg
KGhleF9jb21tb24uaXNfd3JpdGVvbmx5KHJlZ2lkKSBhbmQKKyAgICAgICAgICAgICAgICAgICAg
bm90IGhleF9jb21tb24uaXNfaHZ4X3JlZyhyZWd0eXBlKSk6CisgICAgICAgICAgICAgICAgICAg
IGdlbl9oZWxwZXJfYXJnX29wbihmLCByZWd0eXBlLCByZWdpZCwgaSwgdGFnKQorICAgICAgICAg
ICAgICAgICAgICBpICs9IDEKKwogICAgICAgICAjIyBBcmd1bWVudHMgdG8gdGhlIGhlbHBlciBm
dW5jdGlvbiBhcmUgdGhlIHNvdXJjZSByZWdzIGFuZCBpbW1lZGlhdGVzCiAgICAgICAgIGZvciBy
ZWd0eXBlLHJlZ2lkLHRvc3MsbnVtcmVncyBpbiByZWdzOgogICAgICAgICAgICAgaWYgKGhleF9j
b21tb24uaXNfcmVhZChyZWdpZCkpOgpAQCAtMjYyLDEwICsyNzAsMTEgQEAgZGVmIGdlbl9oZWxw
ZXJfZnVuY3Rpb24oZiwgdGFnLCB0YWdyZWdzLCB0YWdpbW1zKToKICAgICAgICAgaWYgaGV4X2Nv
bW1vbi5uZWVkX2VhKHRhZyk6IGdlbl9kZWNsX2VhKGYpCiAgICAgICAgICMjIERlY2xhcmUgdGhl
IHJldHVybiB2YXJpYWJsZQogICAgICAgICBpPTAKLSAgICAgICAgZm9yIHJlZ3R5cGUscmVnaWQs
dG9zcyxudW1yZWdzIGluIHJlZ3M6Ci0gICAgICAgICAgICBpZiAoaGV4X2NvbW1vbi5pc193cml0
ZW9ubHkocmVnaWQpKToKLSAgICAgICAgICAgICAgICBnZW5faGVscGVyX2Rlc3RfZGVjbF9vcG4o
ZixyZWd0eXBlLHJlZ2lkLGkpCi0gICAgICAgICAgICBpICs9IDEKKyAgICAgICAgaWYgJ0FfQ09O
REVYRUMnIG5vdCBpbiBoZXhfY29tbW9uLmF0dHJpYmRpY3RbdGFnXToKKyAgICAgICAgICAgIGZv
ciByZWd0eXBlLHJlZ2lkLHRvc3MsbnVtcmVncyBpbiByZWdzOgorICAgICAgICAgICAgICAgIGlm
IChoZXhfY29tbW9uLmlzX3dyaXRlb25seShyZWdpZCkpOgorICAgICAgICAgICAgICAgICAgICBn
ZW5faGVscGVyX2Rlc3RfZGVjbF9vcG4oZixyZWd0eXBlLHJlZ2lkLGkpCisgICAgICAgICAgICAg
ICAgaSArPSAxCiAKICAgICAgICAgZm9yIHJlZ3R5cGUscmVnaWQsdG9zcyxudW1yZWdzIGluIHJl
Z3M6CiAgICAgICAgICAgICBpZiAoaGV4X2NvbW1vbi5pc19yZWFkKHJlZ2lkKSk6CmRpZmYgLS1n
aXQgYS90YXJnZXQvaGV4YWdvbi9nZW5faGVscGVyX3Byb3Rvcy5weSBiL3RhcmdldC9oZXhhZ29u
L2dlbl9oZWxwZXJfcHJvdG9zLnB5CmluZGV4IDY3NGJmMzcwZmEuLmRkZGRjOWU0ZjAgMTAwNzU1
Ci0tLSBhL3RhcmdldC9oZXhhZ29uL2dlbl9oZWxwZXJfcHJvdG9zLnB5CisrKyBiL3RhcmdldC9o
ZXhhZ29uL2dlbl9oZWxwZXJfcHJvdG9zLnB5CkBAIC0xLDcgKzEsNyBAQAogIyEvdXNyL2Jpbi9l
bnYgcHl0aG9uMwogCiAjIwotIyMgIENvcHlyaWdodChjKSAyMDE5LTIwMjIgUXVhbGNvbW0gSW5u
b3ZhdGlvbiBDZW50ZXIsIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KKyMjICBDb3B5cmlnaHQo
YykgMjAxOS0yMDIzIFF1YWxjb21tIElubm92YXRpb24gQ2VudGVyLCBJbmMuIEFsbCBSaWdodHMg
UmVzZXJ2ZWQuCiAjIwogIyMgIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOyB5b3UgY2Fu
IHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5CiAjIyAgaXQgdW5kZXIgdGhlIHRlcm1zIG9m
IHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnkKQEAgLTg3LDYg
Kzg3LDcgQEAgZGVmIGdlbl9oZWxwZXJfcHJvdG90eXBlKGYsIHRhZywgdGFncmVncywgdGFnaW1t
cyk6CiAgICAgICAgICAgICBpZiBoZXhfY29tbW9uLm5lZWRfc2xvdCh0YWcpOiBkZWZfaGVscGVy
X3NpemUgKz0gMQogICAgICAgICAgICAgaWYgaGV4X2NvbW1vbi5uZWVkX1BDKHRhZyk6IGRlZl9o
ZWxwZXJfc2l6ZSArPSAxCiAgICAgICAgICAgICBpZiBoZXhfY29tbW9uLmhlbHBlcl9uZWVkc19u
ZXh0X1BDKHRhZyk6IGRlZl9oZWxwZXJfc2l6ZSArPSAxCisgICAgICAgICAgICBpZiBoZXhfY29t
bW9uLm5lZWRfY29uZGV4ZWNfcmVnKHRhZywgcmVncyk6IGRlZl9oZWxwZXJfc2l6ZSArPSAxCiAg
ICAgICAgICAgICBmLndyaXRlKCdERUZfSEVMUEVSXyVzKCVzJyAlIChkZWZfaGVscGVyX3NpemUs
IHRhZykpCiAgICAgICAgICAgICAjIyBUaGUgcmV0dXJuIHR5cGUgaXMgdm9pZAogICAgICAgICAg
ICAgZi53cml0ZSgnLCB2b2lkJyApCkBAIC05Niw2ICs5Nyw3IEBAIGRlZiBnZW5faGVscGVyX3By
b3RvdHlwZShmLCB0YWcsIHRhZ3JlZ3MsIHRhZ2ltbXMpOgogICAgICAgICAgICAgaWYgaGV4X2Nv
bW1vbi5uZWVkX3BhcnQxKHRhZyk6IGRlZl9oZWxwZXJfc2l6ZSArPSAxCiAgICAgICAgICAgICBp
ZiBoZXhfY29tbW9uLm5lZWRfc2xvdCh0YWcpOiBkZWZfaGVscGVyX3NpemUgKz0gMQogICAgICAg
ICAgICAgaWYgaGV4X2NvbW1vbi5uZWVkX1BDKHRhZyk6IGRlZl9oZWxwZXJfc2l6ZSArPSAxCisg
ICAgICAgICAgICBpZiBoZXhfY29tbW9uLm5lZWRfY29uZGV4ZWNfcmVnKHRhZywgcmVncyk6IGRl
Zl9oZWxwZXJfc2l6ZSArPSAxCiAgICAgICAgICAgICBpZiBoZXhfY29tbW9uLmhlbHBlcl9uZWVk
c19uZXh0X1BDKHRhZyk6IGRlZl9oZWxwZXJfc2l6ZSArPSAxCiAgICAgICAgICAgICBmLndyaXRl
KCdERUZfSEVMUEVSXyVzKCVzJyAlIChkZWZfaGVscGVyX3NpemUsIHRhZykpCiAKQEAgLTEyMSw2
ICsxMjMsMTQgQEAgZGVmIGdlbl9oZWxwZXJfcHJvdG90eXBlKGYsIHRhZywgdGFncmVncywgdGFn
aW1tcyk6CiAgICAgICAgICAgICAgICAgICAgIGdlbl9kZWZfaGVscGVyX29wbihmLCB0YWcsIHJl
Z3R5cGUsIHJlZ2lkLCB0b3NzLCBudW1yZWdzLCBpKQogICAgICAgICAgICAgICAgICAgICBpICs9
IDEKIAorICAgICAgICAjIyBGb3IgY29uZGl0aW9uYWwgaW5zdHJ1Y3Rpb25zLCB3ZSBwYXNzIGlu
IHRoZSBkZXN0aW5hdGlvbiByZWdpc3RlcgorICAgICAgICBpZiAnQV9DT05ERVhFQycgaW4gaGV4
X2NvbW1vbi5hdHRyaWJkaWN0W3RhZ106CisgICAgICAgICAgICBmb3IgcmVndHlwZSwgcmVnaWQs
IHRvc3MsIG51bXJlZ3MgaW4gcmVnczoKKyAgICAgICAgICAgICAgICBpZiAoaGV4X2NvbW1vbi5p
c193cml0ZW9ubHkocmVnaWQpIGFuZAorICAgICAgICAgICAgICAgICAgICBub3QgaGV4X2NvbW1v
bi5pc19odnhfcmVnKHJlZ3R5cGUpKToKKyAgICAgICAgICAgICAgICAgICAgZ2VuX2RlZl9oZWxw
ZXJfb3BuKGYsIHRhZywgcmVndHlwZSwgcmVnaWQsIHRvc3MsIG51bXJlZ3MsIGkpCisgICAgICAg
ICAgICAgICAgICAgIGkgKz0gMQorCiAgICAgICAgICMjIEdlbmVyYXRlIHRoZSBxZW11IHR5cGUg
Zm9yIGVhY2ggaW5wdXQgb3BlcmFuZCAocmVncyBhbmQgaW1tZWRpYXRlcykKICAgICAgICAgZm9y
IHJlZ3R5cGUscmVnaWQsdG9zcyxudW1yZWdzIGluIHJlZ3M6CiAgICAgICAgICAgICBpZiAoaGV4
X2NvbW1vbi5pc19yZWFkKHJlZ2lkKSk6CmRpZmYgLS1naXQgYS90YXJnZXQvaGV4YWdvbi9nZW5f
dGNnX2Z1bmNzLnB5IGIvdGFyZ2V0L2hleGFnb24vZ2VuX3RjZ19mdW5jcy5weQppbmRleCAzNzg2
ZWRlNDRjLi5lMmZiYjUwOTQ5IDEwMDc1NQotLS0gYS90YXJnZXQvaGV4YWdvbi9nZW5fdGNnX2Z1
bmNzLnB5CisrKyBiL3RhcmdldC9oZXhhZ29uL2dlbl90Y2dfZnVuY3MucHkKQEAgLTM3LDIzICsz
NywzMyBAQCBkZWYgZ2VuX2ZyZWVfZWFfdGNnKGYpOgogCiBkZWYgZ2VucHRyX2RlY2xfcGFpcl93
cml0YWJsZShmLCB0YWcsIHJlZ3R5cGUsIHJlZ2lkLCByZWdubyk6CiAgICAgcmVnTj0iJXMlc04i
ICUgKHJlZ3R5cGUscmVnaWQpCi0gICAgZi53cml0ZSgiICAgIFRDR3ZfaTY0ICVzJXNWID0gdGNn
X3RlbXBfbG9jYWxfbmV3X2k2NCgpO1xuIiAlIFwKLSAgICAgICAgKHJlZ3R5cGUsIHJlZ2lkKSkK
LSAgICBpZiAocmVndHlwZSA9PSAiQyIpOgorICAgIGlmIChyZWd0eXBlID09ICJSIik6CisgICAg
ICAgIGYud3JpdGUoIiAgICBjb25zdCBpbnQgJXMgPSBpbnNuLT5yZWdub1slZF07XG4iICUgKHJl
Z04sIHJlZ25vKSkKKyAgICBlbGlmIChyZWd0eXBlID09ICJDIik6CiAgICAgICAgIGYud3JpdGUo
IiAgICBjb25zdCBpbnQgJXMgPSBpbnNuLT5yZWdub1slZF0gKyBIRVhfUkVHX1NBMDtcbiIgJSBc
CiAgICAgICAgICAgICAocmVnTiwgcmVnbm8pKQogICAgIGVsc2U6Ci0gICAgICAgIGYud3JpdGUo
IiAgICBjb25zdCBpbnQgJXMgPSBpbnNuLT5yZWdub1slZF07XG4iICUgKHJlZ04sIHJlZ25vKSkK
KyAgICAgICAgcHJpbnQoIkJhZCByZWdpc3RlciBwYXJzZTogIiwgcmVndHlwZSwgcmVnaWQpCisg
ICAgZi53cml0ZSgiICAgIFRDR3ZfaTY0ICVzJXNWID0gZ2V0X3Jlc3VsdF9ncHJfcGFpcihjdHgs
ICVzKTtcbiIgJSBcCisgICAgICAgIChyZWd0eXBlLCByZWdpZCwgcmVnTikpCiAKIGRlZiBnZW5w
dHJfZGVjbF93cml0YWJsZShmLCB0YWcsIHJlZ3R5cGUsIHJlZ2lkLCByZWdubyk6CiAgICAgcmVn
Tj0iJXMlc04iICUgKHJlZ3R5cGUscmVnaWQpCi0gICAgZi53cml0ZSgiICAgIFRDR3YgJXMlc1Yg
PSB0Y2dfdGVtcF9sb2NhbF9uZXcoKTtcbiIgJSBcCi0gICAgICAgIChyZWd0eXBlLCByZWdpZCkp
Ci0gICAgaWYgKHJlZ3R5cGUgPT0gIkMiKToKKyAgICBpZiAocmVndHlwZSA9PSAiUiIpOgorICAg
ICAgICBmLndyaXRlKCIgICAgY29uc3QgaW50ICVzID0gaW5zbi0+cmVnbm9bJWRdO1xuIiAlIChy
ZWdOLCByZWdubykpCisgICAgICAgIGYud3JpdGUoIiAgICBUQ0d2ICVzJXNWID0gZ2V0X3Jlc3Vs
dF9ncHIoY3R4LCAlcyk7XG4iICUgXAorICAgICAgICAgICAgKHJlZ3R5cGUsIHJlZ2lkLCByZWdO
KSkKKyAgICBlbGlmIChyZWd0eXBlID09ICJDIik6CiAgICAgICAgIGYud3JpdGUoIiAgICBjb25z
dCBpbnQgJXMgPSBpbnNuLT5yZWdub1slZF0gKyBIRVhfUkVHX1NBMDtcbiIgJSBcCiAgICAgICAg
ICAgICAocmVnTiwgcmVnbm8pKQotICAgIGVsc2U6CisgICAgICAgIGYud3JpdGUoIiAgICBUQ0d2
ICVzJXNWID0gZ2V0X3Jlc3VsdF9ncHIoY3R4LCAlcyk7XG4iICUgXAorICAgICAgICAgICAgKHJl
Z3R5cGUsIHJlZ2lkLCByZWdOKSkKKyAgICBlbGlmIChyZWd0eXBlID09ICJQIik6CiAgICAgICAg
IGYud3JpdGUoIiAgICBjb25zdCBpbnQgJXMgPSBpbnNuLT5yZWdub1slZF07XG4iICUgKHJlZ04s
IHJlZ25vKSkKKyAgICAgICAgZi53cml0ZSgiICAgIFRDR3YgJXMlc1YgPSB0Y2dfdGVtcF9sb2Nh
bF9uZXcoKTtcbiIgJSBcCisgICAgICAgICAgICAocmVndHlwZSwgcmVnaWQpKQorICAgIGVsc2U6
CisgICAgICAgIHByaW50KCJCYWQgcmVnaXN0ZXIgcGFyc2U6ICIsIHJlZ3R5cGUsIHJlZ2lkKQog
CiBkZWYgZ2VucHRyX2RlY2woZiwgdGFnLCByZWd0eXBlLCByZWdpZCwgcmVnbm8pOgogICAgIHJl
Z049IiVzJXNOIiAlIChyZWd0eXBlLHJlZ2lkKQpAQCAtMjUwLDExICsyNjAsMTAgQEAgZGVmIGdl
bnB0cl9kZWNsX2ltbShmLGltbWxldHQpOgogCiBkZWYgZ2VucHRyX2ZyZWUoZiwgdGFnLCByZWd0
eXBlLCByZWdpZCwgcmVnbm8pOgogICAgIGlmIChyZWd0eXBlID09ICJSIik6Ci0gICAgICAgIGlm
IChyZWdpZCBpbiB7ImRkIiwgInNzIiwgInR0IiwgInh4IiwgInl5In0pOgorICAgICAgICBpZiAo
cmVnaWQgaW4geyJzcyIsICJ0dCJ9KToKICAgICAgICAgICAgIGYud3JpdGUoIiAgICB0Y2dfdGVt
cF9mcmVlX2k2NCglcyVzVik7XG4iICUgKHJlZ3R5cGUsIHJlZ2lkKSkKLSAgICAgICAgZWxpZiAo
cmVnaWQgaW4geyJkIiwgImUiLCAieCIsICJ5In0pOgotICAgICAgICAgICAgZi53cml0ZSgiICAg
IHRjZ190ZW1wX2ZyZWUoJXMlc1YpO1xuIiAlIChyZWd0eXBlLCByZWdpZCkpCi0gICAgICAgIGVs
aWYgKHJlZ2lkIG5vdCBpbiB7InMiLCAidCIsICJ1IiwgInYifSk6CisgICAgICAgIGVsaWYgKHJl
Z2lkIG5vdCBpbiB7ImRkIiwgInh4IiwgInl5IiwgImQiLCAiZSIsICJ4IiwgInkiLAorICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICJzIiwgInQiLCAidSIsICJ2In0pOgogICAgICAgICAgICAg
cHJpbnQoIkJhZCByZWdpc3RlciBwYXJzZTogIixyZWd0eXBlLHJlZ2lkKQogICAgIGVsaWYgKHJl
Z3R5cGUgPT0gIlAiKToKICAgICAgICAgaWYgKHJlZ2lkIGluIHsiZCIsICJlIiwgIngifSk6CkBA
IC0yNjIsMTEgKzI3MSwxMSBAQCBkZWYgZ2VucHRyX2ZyZWUoZiwgdGFnLCByZWd0eXBlLCByZWdp
ZCwgcmVnbm8pOgogICAgICAgICBlbGlmIChyZWdpZCBub3QgaW4geyJzIiwgInQiLCAidSIsICJ2
In0pOgogICAgICAgICAgICAgcHJpbnQoIkJhZCByZWdpc3RlciBwYXJzZTogIixyZWd0eXBlLHJl
Z2lkKQogICAgIGVsaWYgKHJlZ3R5cGUgPT0gIkMiKToKLSAgICAgICAgaWYgKHJlZ2lkIGluIHsi
ZGQiLCAic3MifSk6CisgICAgICAgIGlmIChyZWdpZCBpbiB7InNzIn0pOgogICAgICAgICAgICAg
Zi53cml0ZSgiICAgIHRjZ190ZW1wX2ZyZWVfaTY0KCVzJXNWKTtcbiIgJSAocmVndHlwZSwgcmVn
aWQpKQotICAgICAgICBlbGlmIChyZWdpZCBpbiB7ImQiLCAicyJ9KToKKyAgICAgICAgZWxpZiAo
cmVnaWQgaW4geyJzIn0pOgogICAgICAgICAgICAgZi53cml0ZSgiICAgIHRjZ190ZW1wX2ZyZWUo
JXMlc1YpO1xuIiAlIChyZWd0eXBlLCByZWdpZCkpCi0gICAgICAgIGVsc2U6CisgICAgICAgIGVs
aWYgKHJlZ2lkIG5vdCBpbiB7ImRkIiwgImQifSk6CiAgICAgICAgICAgICBwcmludCgiQmFkIHJl
Z2lzdGVyIHBhcnNlOiAiLHJlZ3R5cGUscmVnaWQpCiAgICAgZWxpZiAocmVndHlwZSA9PSAiTSIp
OgogICAgICAgICBpZiAocmVnaWQgIT0gInUiKToKQEAgLTMyMyw4ICszMzIsMTIgQEAgZGVmIGdl
bnB0cl9zcmNfcmVhZChmLCB0YWcsIHJlZ3R5cGUsIHJlZ2lkKToKICAgICAgICAgICAgIGYud3Jp
dGUoIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhleF9ncHJbJXMlc04gKyAxXSk7
XG4iICUgXAogICAgICAgICAgICAgICAgIChyZWd0eXBlLCByZWdpZCkpCiAgICAgICAgIGVsaWYg
KHJlZ2lkIGluIHsieCIsICJ5In0pOgotICAgICAgICAgICAgZi53cml0ZSgiICAgIHRjZ19nZW5f
bW92X3RsKCVzJXNWLCBoZXhfZ3ByWyVzJXNOXSk7XG4iICUgXAotICAgICAgICAgICAgICAgIChy
ZWd0eXBlLHJlZ2lkLHJlZ3R5cGUscmVnaWQpKQorICAgICAgICAgICAgIyMgRm9yIHJlYWQvd3Jp
dGUgcmVnaXN0ZXJzLCB3ZSBuZWVkIHRvIGdldCB0aGUgb3JpZ2luYWwgdmFsdWUgaW50bworICAg
ICAgICAgICAgIyMgdGhlIHJlc3VsdCBUQ0d2LiAgRm9yIGNvbmRpdGlvbmFsIGluc3RydWN0aW9u
cywgdGhpcyBpcyBkb25lIGluCisgICAgICAgICAgICAjIyBnZW5fc3RhcnRfcGFja2V0LiAgRm9y
IHVuY29uZGl0aW9uYWwgaW5zdHJ1Y3Rpb25zLCB3ZSBkbyBpdCBoZXJlLgorICAgICAgICAgICAg
aWYgKCdBX0NPTkRFWEVDJyBub3QgaW4gaGV4X2NvbW1vbi5hdHRyaWJkaWN0W3RhZ10pOgorICAg
ICAgICAgICAgICAgIGYud3JpdGUoIiAgICB0Y2dfZ2VuX21vdl90bCglcyVzViwgaGV4X2dwclsl
cyVzTl0pO1xuIiAlIFwKKyAgICAgICAgICAgICAgICAgICAgKHJlZ3R5cGUsIHJlZ2lkLCByZWd0
eXBlLCByZWdpZCkpCiAgICAgICAgIGVsaWYgKHJlZ2lkIG5vdCBpbiB7InMiLCAidCIsICJ1Iiwg
InYifSk6CiAgICAgICAgICAgICBwcmludCgiQmFkIHJlZ2lzdGVyIHBhcnNlOiAiLCByZWd0eXBl
LCByZWdpZCkKICAgICBlbGlmIChyZWd0eXBlID09ICJQIik6CkBAIC00MzQsMjUgKzQ0NywxNiBA
QCBkZWYgZ2VuX2hlbHBlcl9jYWxsX2ltbShmLGltbWxldHQpOgogICAgIGYud3JpdGUoIiwgdGNn
dl8lcyIgJSBoZXhfY29tbW9uLmltbV9uYW1lKGltbWxldHQpKQogCiBkZWYgZ2VucHRyX2RzdF93
cml0ZV9wYWlyKGYsIHRhZywgcmVndHlwZSwgcmVnaWQpOgotICAgIGlmICgnQV9DT05ERVhFQycg
aW4gaGV4X2NvbW1vbi5hdHRyaWJkaWN0W3RhZ10pOgotICAgICAgICBmLndyaXRlKCIgICAgZ2Vu
X2xvZ19wcmVkaWNhdGVkX3JlZ193cml0ZV9wYWlyKCVzJXNOLCAlcyVzViwgaW5zbi0+c2xvdCk7
XG4iICUgXAotICAgICAgICAgICAgKHJlZ3R5cGUsIHJlZ2lkLCByZWd0eXBlLCByZWdpZCkpCi0g
ICAgZWxzZToKLSAgICAgICAgZi53cml0ZSgiICAgIGdlbl9sb2dfcmVnX3dyaXRlX3BhaXIoJXMl
c04sICVzJXNWKTtcbiIgJSBcCi0gICAgICAgICAgICAocmVndHlwZSwgcmVnaWQsIHJlZ3R5cGUs
IHJlZ2lkKSkKKyAgICBmLndyaXRlKCIgICAgZ2VuX2xvZ19yZWdfd3JpdGVfcGFpciglcyVzTiwg
JXMlc1YpO1xuIiAlIFwKKyAgICAgICAgKHJlZ3R5cGUsIHJlZ2lkLCByZWd0eXBlLCByZWdpZCkp
CiAKIGRlZiBnZW5wdHJfZHN0X3dyaXRlKGYsIHRhZywgcmVndHlwZSwgcmVnaWQpOgogICAgIGlm
IChyZWd0eXBlID09ICJSIik6CiAgICAgICAgIGlmIChyZWdpZCBpbiB7ImRkIiwgInh4IiwgInl5
In0pOgogICAgICAgICAgICAgZ2VucHRyX2RzdF93cml0ZV9wYWlyKGYsIHRhZywgcmVndHlwZSwg
cmVnaWQpCiAgICAgICAgIGVsaWYgKHJlZ2lkIGluIHsiZCIsICJlIiwgIngiLCAieSJ9KToKLSAg
ICAgICAgICAgIGlmICgnQV9DT05ERVhFQycgaW4gaGV4X2NvbW1vbi5hdHRyaWJkaWN0W3RhZ10p
OgotICAgICAgICAgICAgICAgIGYud3JpdGUoIiAgICBnZW5fbG9nX3ByZWRpY2F0ZWRfcmVnX3dy
aXRlKCVzJXNOLCAlcyVzVixcbiIgJSBcCi0gICAgICAgICAgICAgICAgICAgIChyZWd0eXBlLCBy
ZWdpZCwgcmVndHlwZSwgcmVnaWQpKQotICAgICAgICAgICAgICAgIGYud3JpdGUoIiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIGluc24tPnNsb3QpO1xuIikKLSAgICAgICAgICAgIGVs
c2U6Ci0gICAgICAgICAgICAgICAgZi53cml0ZSgiICAgIGdlbl9sb2dfcmVnX3dyaXRlKCVzJXNO
LCAlcyVzVik7XG4iICUgXAotICAgICAgICAgICAgICAgICAgICAocmVndHlwZSwgcmVnaWQsIHJl
Z3R5cGUsIHJlZ2lkKSkKKyAgICAgICAgICAgIGYud3JpdGUoIiAgICBnZW5fbG9nX3JlZ193cml0
ZSglcyVzTiwgJXMlc1YpO1xuIiAlIFwKKyAgICAgICAgICAgICAgICAocmVndHlwZSwgcmVnaWQs
IHJlZ3R5cGUsIHJlZ2lkKSkKICAgICAgICAgZWxzZToKICAgICAgICAgICAgIHByaW50KCJCYWQg
cmVnaXN0ZXIgcGFyc2U6ICIsIHJlZ3R5cGUsIHJlZ2lkKQogICAgIGVsaWYgKHJlZ3R5cGUgPT0g
IlAiKToKQEAgLTUzNiwxNSArNTQwLDE1IEBAIGRlZiBnZW5wdHJfZHN0X3dyaXRlX29wbihmLHJl
Z3R5cGUsIHJlZ2lkLCB0YWcpOgogIyMgICAgIEZvciBBMl9hZGQ6IFJkMzI9YWRkKFJzMzIsUnQz
MiksIHsgUmRWPVJzVitSdFY7fQogIyMgICAgIFdlIHByb2R1Y2U6CiAjIyAgICBzdGF0aWMgdm9p
ZCBnZW5lcmF0ZV9BMl9hZGQoRGlzYXNDb250ZXh0ICpjdHgpCi0jIyAgICAgICB7Ci0jIyAgICAg
ICAgICAgVENHdiBSZFYgPSB0Y2dfdGVtcF9sb2NhbF9uZXcoKTsKLSMjICAgICAgICAgICBjb25z
dCBpbnQgUmROID0gaW5zbi0+cmVnbm9bMF07Ci0jIyAgICAgICAgICAgVENHdiBSc1YgPSBoZXhf
Z3ByW2luc24tPnJlZ25vWzFdXTsKLSMjICAgICAgICAgICBUQ0d2IFJ0ViA9IGhleF9ncHJbaW5z
bi0+cmVnbm9bMl1dOwotIyMgICAgICAgICAgIDxHRU4+Ci0jIyAgICAgICAgICAgZ2VuX2xvZ19y
ZWdfd3JpdGUoUmROLCBSZFYpOwotIyMgICAgICAgICAgIHRjZ190ZW1wX2ZyZWUoUmRWKTsKLSMj
ICAgICAgIH0KKyMjICAgIHsKKyMjICAgICAgICBJbnNuICppbnNuIF9fYXR0cmlidXRlX18oKHVu
dXNlZCkpID0gY3R4LT5pbnNuOworIyMgICAgICAgIGNvbnN0IGludCBSZE4gPSBpbnNuLT5yZWdu
b1swXTsKKyMjICAgICAgICBUQ0d2IFJkViA9IGdldF9yZXN1bHRfZ3ByKGN0eCwgUmROKTsKKyMj
ICAgICAgICBUQ0d2IFJzViA9IGhleF9ncHJbaW5zbi0+cmVnbm9bMV1dOworIyMgICAgICAgIFRD
R3YgUnRWID0gaGV4X2dwcltpbnNuLT5yZWdub1syXV07CisjIyAgICAgICAgPEdFTj4KKyMjICAg
ICAgICBnZW5fbG9nX3JlZ193cml0ZShSZE4sIFJkVik7CisjIyAgICB9CiAjIwogIyMgICAgICAg
d2hlcmUgPEdFTj4gZGVwZW5kcyBvbiBoZXhfY29tbW9uLnNraXBfcWVtdV9oZWxwZXIodGFnKQog
IyMgICAgICAgaWYgaGV4X2NvbW1vbi5za2lwX3FlbXVfaGVscGVyKHRhZykgaXMgVHJ1ZQpAQCAt
NjI4LDYgKzYzMiwxNCBAQCBkZWYgZ2VuX3RjZ19mdW5jKGYsIHRhZywgcmVncywgaW1tcyk6CiAg
ICAgICAgIGlmIChpID4gMCk6IGYud3JpdGUoIiwgIikKICAgICAgICAgZi53cml0ZSgiY3B1X2Vu
diIpCiAgICAgICAgIGk9MQorICAgICAgICAjIyBGb3IgY29uZGl0aW9uYWwgaW5zdHJ1Y3Rpb25z
LCB3ZSBwYXNzIGluIHRoZSBkZXN0aW5hdGlvbiByZWdpc3RlcgorICAgICAgICBpZiAnQV9DT05E
RVhFQycgaW4gaGV4X2NvbW1vbi5hdHRyaWJkaWN0W3RhZ106CisgICAgICAgICAgICBmb3IgcmVn
dHlwZSwgcmVnaWQsIHRvc3MsIG51bXJlZ3MgaW4gcmVnczoKKyAgICAgICAgICAgICAgICBpZiAo
aGV4X2NvbW1vbi5pc193cml0ZW9ubHkocmVnaWQpIGFuZAorICAgICAgICAgICAgICAgICAgICBu
b3QgaGV4X2NvbW1vbi5pc19odnhfcmVnKHJlZ3R5cGUpKToKKyAgICAgICAgICAgICAgICAgICAg
Z2VuX2hlbHBlcl9jYWxsX29wbihmLCB0YWcsIHJlZ3R5cGUsIHJlZ2lkLCB0b3NzLCBcCisgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtcmVncywgaSkKKyAgICAgICAg
ICAgICAgICAgICAgaSArPSAxCiAgICAgICAgIGZvciByZWd0eXBlLHJlZ2lkLHRvc3MsbnVtcmVn
cyBpbiByZWdzOgogICAgICAgICAgICAgaWYgKGhleF9jb21tb24uaXNfd3JpdHRlbihyZWdpZCkp
OgogICAgICAgICAgICAgICAgIGlmIChub3QgaGV4X2NvbW1vbi5pc19odnhfcmVnKHJlZ3R5cGUp
KToKZGlmZiAtLWdpdCBhL3RhcmdldC9oZXhhZ29uL2hleF9jb21tb24ucHkgYi90YXJnZXQvaGV4
YWdvbi9oZXhfY29tbW9uLnB5CmluZGV4IDc2ZGEzNjJjMTEuLjAyMDBhNjZjYjYgMTAwNzU1Ci0t
LSBhL3RhcmdldC9oZXhhZ29uL2hleF9jb21tb24ucHkKKysrIGIvdGFyZ2V0L2hleGFnb24vaGV4
X2NvbW1vbi5weQpAQCAtMSw3ICsxLDcgQEAKICMhL3Vzci9iaW4vZW52IHB5dGhvbjMKIAogIyMK
LSMjICBDb3B5cmlnaHQoYykgMjAxOS0yMDIyIFF1YWxjb21tIElubm92YXRpb24gQ2VudGVyLCBJ
bmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCisjIyAgQ29weXJpZ2h0KGMpIDIwMTktMjAyMyBRdWFs
Y29tbSBJbm5vdmF0aW9uIENlbnRlciwgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogIyMKICMj
ICBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTsgeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQg
YW5kL29yIG1vZGlmeQogIyMgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwg
UHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5CkBAIC0yMzcsNiArMjM3LDEzIEBAIGRlZiBo
ZWxwZXJfbmVlZHNfbmV4dF9QQyh0YWcpOgogZGVmIG5lZWRfcGt0X2hhc19tdWx0aV9jb2YodGFn
KToKICAgICByZXR1cm4gJ0FfQ09GJyBpbiBhdHRyaWJkaWN0W3RhZ10KIAorZGVmIG5lZWRfY29u
ZGV4ZWNfcmVnKHRhZywgcmVncyk6CisgICAgaWYgJ0FfQ09OREVYRUMnIGluIGF0dHJpYmRpY3Rb
dGFnXToKKyAgICAgICAgZm9yIHJlZ3R5cGUsIHJlZ2lkLCB0b3NzLCBudW1yZWdzIGluIHJlZ3M6
CisgICAgICAgICAgICBpZiBpc193cml0ZW9ubHkocmVnaWQpIGFuZCBub3QgaXNfaHZ4X3JlZyhy
ZWd0eXBlKToKKyAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZQorICAgIHJldHVybiBGYWxzZQor
CiBkZWYgc2tpcF9xZW11X2hlbHBlcih0YWcpOgogICAgIHJldHVybiB0YWcgaW4gb3ZlcnJpZGVz
LmtleXMoKQogCi0tIAoyLjE3LjEKCg==

