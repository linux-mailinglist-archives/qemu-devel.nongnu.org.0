Return-Path: <qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org>
X-Original-To: lists+qemu-devel@lfdr.de
Delivered-To: lists+qemu-devel@lfdr.de
Received: from lists.gnu.org (lists.gnu.org [209.51.188.17])
	by mail.lfdr.de (Postfix) with ESMTPS id 5AB044406C7
	for <lists+qemu-devel@lfdr.de>; Sat, 30 Oct 2021 03:40:55 +0200 (CEST)
Received: from localhost ([::1]:48298 helo=lists1p.gnu.org)
	by lists.gnu.org with esmtp (Exim 4.90_1)
	(envelope-from <qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org>)
	id 1mgdMc-0004D5-GA
	for lists+qemu-devel@lfdr.de; Fri, 29 Oct 2021 21:40:54 -0400
Received: from eggs.gnu.org ([2001:470:142:3::10]:40862)
 by lists.gnu.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256)
 (Exim 4.90_1) (envelope-from <tsimpson@qualcomm.com>)
 id 1mgd3d-00032e-8L
 for qemu-devel@nongnu.org; Fri, 29 Oct 2021 21:21:22 -0400
Received: from alexa-out-sd-01.qualcomm.com ([199.106.114.38]:7465)
 by eggs.gnu.org with esmtps (TLS1.2:RSA_AES_256_CBC_SHA1:256)
 (Exim 4.90_1) (envelope-from <tsimpson@qualcomm.com>)
 id 1mgd3Z-0001cr-8G
 for qemu-devel@nongnu.org; Fri, 29 Oct 2021 21:21:16 -0400
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=quicinc.com; i=@quicinc.com; q=dns/txt; s=qcdkim;
 t=1635556873; x=1667092873;
 h=from:to:cc:subject:date:message-id:in-reply-to:
 references:mime-version:content-transfer-encoding;
 bh=oKy0cyBmpVmDqu+rR+6i2GfO5GmYuHDu6dHofCaJ//A=;
 b=QnhHkzzDV1tPvtyWqakrQGSNotC5c9qe/dfGOrATs/oJWzeioPAqOJiQ
 1Y7JPN5lPdJCDhsnQPNqzYENo/pPrh+8MwLkv6Jawf6mruKaibw075lFq
 wlnyOAuQEQYEjt0oXTHAtrxTgoZOEwTr+UCjbLOgBOq6GqT+fLRe/MMqD M=;
Received: from unknown (HELO ironmsg01-sd.qualcomm.com) ([10.53.140.141])
 by alexa-out-sd-01.qualcomm.com with ESMTP; 29 Oct 2021 18:20:58 -0700
X-QCInternal: smtphost
Received: from vu-tsimpson-aus.qualcomm.com (HELO
 vu-tsimpson1-aus.qualcomm.com) ([10.222.150.1])
 by ironmsg01-sd.qualcomm.com with ESMTP; 29 Oct 2021 18:20:57 -0700
Received: by vu-tsimpson1-aus.qualcomm.com (Postfix, from userid 47164)
 id 090B328EF; Fri, 29 Oct 2021 20:20:57 -0500 (CDT)
From: Taylor Simpson <tsimpson@quicinc.com>
To: qemu-devel@nongnu.org
Subject: [PATCH v5 11/30] Hexagon HVX (target/hexagon) helper functions
Date: Fri, 29 Oct 2021 20:20:30 -0500
Message-Id: <1635556849-18120-12-git-send-email-tsimpson@quicinc.com>
X-Mailer: git-send-email 2.7.4
In-Reply-To: <1635556849-18120-1-git-send-email-tsimpson@quicinc.com>
References: <1635556849-18120-1-git-send-email-tsimpson@quicinc.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Received-SPF: pass client-ip=199.106.114.38;
 envelope-from=tsimpson@qualcomm.com; helo=alexa-out-sd-01.qualcomm.com
X-Spam_score_int: -20
X-Spam_score: -2.1
X-Spam_bar: --
X-Spam_report: (-2.1 / 5.0 requ) DKIM_SIGNED=0.1, DKIM_VALID=-0.1,
 DKIM_VALID_AU=-0.1, HEADER_FROM_DIFFERENT_DOMAINS=0.25, RCVD_IN_DNSWL_MED=-2.3,
 SPF_HELO_NONE=0.001, SPF_PASS=-0.001 autolearn=ham autolearn_force=no
X-Spam_action: no action
X-BeenThere: qemu-devel@nongnu.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: <qemu-devel.nongnu.org>
List-Unsubscribe: <https://lists.nongnu.org/mailman/options/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=unsubscribe>
List-Archive: <https://lists.nongnu.org/archive/html/qemu-devel>
List-Post: <mailto:qemu-devel@nongnu.org>
List-Help: <mailto:qemu-devel-request@nongnu.org?subject=help>
List-Subscribe: <https://lists.nongnu.org/mailman/listinfo/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=subscribe>
Cc: ale@rev.ng, bcain@quicinc.com, tsimpson@quicinc.com,
 richard.henderson@linaro.org, f4bug@amsat.org
Errors-To: qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org
Sender: "Qemu-devel" <qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org>

UHJvYmUgYW5kIGNvbW1pdCB2ZWN0b3Igc3RvcmVzIChtYXNrZWQgYW5kIHNjYXR0ZXIvZ2F0aGVy
KQpMb2cgdmVjdG9yIHJlZ2lzdGVyIHdyaXRlcwpBZGQgdGhlIGV4ZWN1dGlvbiBjb3VudGVycyB0
byB0aGUgZGVidWcgbG9nCkhpc3RvZ3JhbSBpbnN0cnVjdGlvbnMKClJldmlld2VkLWJ5OiBSaWNo
YXJkIEhlbmRlcnNvbiA8cmljaGFyZC5oZW5kZXJzb25AbGluYXJvLm9yZz4KU2lnbmVkLW9mZi1i
eTogVGF5bG9yIFNpbXBzb24gPHRzaW1wc29uQHF1aWNpbmMuY29tPgotLS0KIHRhcmdldC9oZXhh
Z29uL2hlbHBlci5oICAgIHwgIDE2ICsrKwogdGFyZ2V0L2hleGFnb24vb3BfaGVscGVyLmMgfCAy
ODIgKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKystCiAyIGZpbGVz
IGNoYW5nZWQsIDI5NiBpbnNlcnRpb25zKCspLCAyIGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBh
L3RhcmdldC9oZXhhZ29uL2hlbHBlci5oIGIvdGFyZ2V0L2hleGFnb24vaGVscGVyLmgKaW5kZXgg
ODlkZTJhMy4uYzg5YWE0ZSAxMDA2NDQKLS0tIGEvdGFyZ2V0L2hleGFnb24vaGVscGVyLmgKKysr
IGIvdGFyZ2V0L2hleGFnb24vaGVscGVyLmgKQEAgLTIzLDYgKzIzLDggQEAgREVGX0hFTFBFUl8x
KGRlYnVnX3N0YXJ0X3BhY2tldCwgdm9pZCwgZW52KQogREVGX0hFTFBFUl9GTEFHU18zKGRlYnVn
X2NoZWNrX3N0b3JlX3dpZHRoLCBUQ0dfQ0FMTF9OT19XRywgdm9pZCwgZW52LCBpbnQsIGludCkK
IERFRl9IRUxQRVJfRkxBR1NfMyhkZWJ1Z19jb21taXRfZW5kLCBUQ0dfQ0FMTF9OT19XRywgdm9p
ZCwgZW52LCBpbnQsIGludCkKIERFRl9IRUxQRVJfMihjb21taXRfc3RvcmUsIHZvaWQsIGVudiwg
aW50KQorREVGX0hFTFBFUl8zKGdhdGhlcl9zdG9yZSwgdm9pZCwgZW52LCBpMzIsIGludCkKK0RF
Rl9IRUxQRVJfMShjb21taXRfaHZ4X3N0b3Jlcywgdm9pZCwgZW52KQogREVGX0hFTFBFUl9GTEFH
U180KGZjaXJjYWRkLCBUQ0dfQ0FMTF9OT19SV0dfU0UsIHMzMiwgczMyLCBzMzIsIHMzMiwgczMy
KQogREVGX0hFTFBFUl9GTEFHU18xKGZicmV2LCBUQ0dfQ0FMTF9OT19SV0dfU0UsIGkzMiwgaTMy
KQogREVGX0hFTFBFUl8zKHNmcmVjaXBhLCBpNjQsIGVudiwgZjMyLCBmMzIpCkBAIC05MCw0ICs5
MiwxOCBAQCBERUZfSEVMUEVSXzQoc2ZmbXNfbGliLCBmMzIsIGVudiwgZjMyLCBmMzIsIGYzMikK
IERFRl9IRUxQRVJfMyhkZm1weWZpeCwgZjY0LCBlbnYsIGY2NCwgZjY0KQogREVGX0hFTFBFUl80
KGRmbXB5aGgsIGY2NCwgZW52LCBmNjQsIGY2NCwgZjY0KQogCisvKiBIaXN0b2dyYW0gaW5zdHJ1
Y3Rpb25zICovCitERUZfSEVMUEVSXzEodmhpc3QsIHZvaWQsIGVudikKK0RFRl9IRUxQRVJfMSh2
aGlzdHEsIHZvaWQsIGVudikKK0RFRl9IRUxQRVJfMSh2d2hpc3QyNTYsIHZvaWQsIGVudikKK0RF
Rl9IRUxQRVJfMSh2d2hpc3QyNTZxLCB2b2lkLCBlbnYpCitERUZfSEVMUEVSXzEodndoaXN0MjU2
X3NhdCwgdm9pZCwgZW52KQorREVGX0hFTFBFUl8xKHZ3aGlzdDI1NnFfc2F0LCB2b2lkLCBlbnYp
CitERUZfSEVMUEVSXzEodndoaXN0MTI4LCB2b2lkLCBlbnYpCitERUZfSEVMUEVSXzEodndoaXN0
MTI4cSwgdm9pZCwgZW52KQorREVGX0hFTFBFUl8yKHZ3aGlzdDEyOG0sIHZvaWQsIGVudiwgczMy
KQorREVGX0hFTFBFUl8yKHZ3aGlzdDEyOHFtLCB2b2lkLCBlbnYsIHMzMikKKwogREVGX0hFTFBF
Ul8yKHByb2JlX3BrdF9zY2FsYXJfc3RvcmVfczAsIHZvaWQsIGVudiwgaW50KQorREVGX0hFTFBF
Ul8yKHByb2JlX2h2eF9zdG9yZXMsIHZvaWQsIGVudiwgaW50KQorREVGX0hFTFBFUl8zKHByb2Jl
X3BrdF9zY2FsYXJfaHZ4X3N0b3Jlcywgdm9pZCwgZW52LCBpbnQsIGludCkKZGlmZiAtLWdpdCBh
L3RhcmdldC9oZXhhZ29uL29wX2hlbHBlci5jIGIvdGFyZ2V0L2hleGFnb24vb3BfaGVscGVyLmMK
aW5kZXggYWYzMmRlNC4uMDU3YmFmOSAxMDA2NDQKLS0tIGEvdGFyZ2V0L2hleGFnb24vb3BfaGVs
cGVyLmMKKysrIGIvdGFyZ2V0L2hleGFnb24vb3BfaGVscGVyLmMKQEAgLTI3LDYgKzI3LDggQEAK
ICNpbmNsdWRlICJhcmNoLmgiCiAjaW5jbHVkZSAiaGV4X2FyY2hfdHlwZXMuaCIKICNpbmNsdWRl
ICJmbWFfZW11LmgiCisjaW5jbHVkZSAibW12ZWMvbW12ZWMuaCIKKyNpbmNsdWRlICJtbXZlYy9t
YWNyb3MuaCIKIAogI2RlZmluZSBTRl9CSUFTICAgICAgICAxMjcKICNkZWZpbmUgU0ZfTUFOVEJJ
VFMgICAgMjMKQEAgLTE2NCw2ICsxNjYsNTcgQEAgdm9pZCBIRUxQRVIoY29tbWl0X3N0b3JlKShD
UFVIZXhhZ29uU3RhdGUgKmVudiwgaW50IHNsb3RfbnVtKQogICAgIH0KIH0KIAordm9pZCBIRUxQ
RVIoZ2F0aGVyX3N0b3JlKShDUFVIZXhhZ29uU3RhdGUgKmVudiwgdWludDMyX3QgYWRkciwgaW50
IHNsb3QpCit7CisgICAgbWVtX2dhdGhlcl9zdG9yZShlbnYsIGFkZHIsIHNsb3QpOworfQorCit2
b2lkIEhFTFBFUihjb21taXRfaHZ4X3N0b3JlcykoQ1BVSGV4YWdvblN0YXRlICplbnYpCit7Cisg
ICAgdWludHB0cl90IHJhID0gR0VUUEMoKTsKKyAgICBpbnQgaTsKKworICAgIC8qIE5vcm1hbCAo
cG9zc2libHkgbWFza2VkKSB2ZWN0b3Igc3RvcmUgKi8KKyAgICBmb3IgKGkgPSAwOyBpIDwgVlNU
T1JFU19NQVg7IGkrKykgeworICAgICAgICBpZiAoZW52LT52c3RvcmVfcGVuZGluZ1tpXSkgewor
ICAgICAgICAgICAgZW52LT52c3RvcmVfcGVuZGluZ1tpXSA9IDA7CisgICAgICAgICAgICB0YXJn
ZXRfdWxvbmcgdmEgPSBlbnYtPnZzdG9yZVtpXS52YTsKKyAgICAgICAgICAgIGludCBzaXplID0g
ZW52LT52c3RvcmVbaV0uc2l6ZTsKKyAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDwgc2l6
ZTsgaisrKSB7CisgICAgICAgICAgICAgICAgaWYgKHRlc3RfYml0KGosIGVudi0+dnN0b3JlW2ld
Lm1hc2spKSB7CisgICAgICAgICAgICAgICAgICAgIGNwdV9zdGJfZGF0YV9yYShlbnYsIHZhICsg
aiwgZW52LT52c3RvcmVbaV0uZGF0YS51YltqXSwgcmEpOworICAgICAgICAgICAgICAgIH0KKyAg
ICAgICAgICAgIH0KKyAgICAgICAgfQorICAgIH0KKworICAgIC8qIFNjYXR0ZXIgc3RvcmUgKi8K
KyAgICBpZiAoZW52LT52dGNtX3BlbmRpbmcpIHsKKyAgICAgICAgZW52LT52dGNtX3BlbmRpbmcg
PSBmYWxzZTsKKyAgICAgICAgaWYgKGVudi0+dnRjbV9sb2cub3ApIHsKKyAgICAgICAgICAgIC8q
IE5lZWQgdG8gcGVyZm9ybSB0aGUgc2NhdHRlciByZWFkL21vZGlmeS93cml0ZSBhdCBjb21taXQg
dGltZSAqLworICAgICAgICAgICAgaWYgKGVudi0+dnRjbV9sb2cub3Bfc2l6ZSA9PSAyKSB7Cisg
ICAgICAgICAgICAgICAgU0NBVFRFUl9PUF9XUklURV9UT19NRU0odWludDE2X3QpOworICAgICAg
ICAgICAgfSBlbHNlIGlmIChlbnYtPnZ0Y21fbG9nLm9wX3NpemUgPT0gNCkgeworICAgICAgICAg
ICAgICAgIC8qIFdvcmQgU2NhdHRlciArPSAqLworICAgICAgICAgICAgICAgIFNDQVRURVJfT1Bf
V1JJVEVfVE9fTUVNKHVpbnQzMl90KTsKKyAgICAgICAgICAgIH0gZWxzZSB7CisgICAgICAgICAg
ICAgICAgZ19hc3NlcnRfbm90X3JlYWNoZWQoKTsKKyAgICAgICAgICAgIH0KKyAgICAgICAgfSBl
bHNlIHsKKyAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBzaXplb2YoTU1WZWN0b3IpOyBpKysp
IHsKKyAgICAgICAgICAgICAgICBpZiAodGVzdF9iaXQoaSwgZW52LT52dGNtX2xvZy5tYXNrKSkg
eworICAgICAgICAgICAgICAgICAgICBjcHVfc3RiX2RhdGFfcmEoZW52LCBlbnYtPnZ0Y21fbG9n
LnZhW2ldLAorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW52LT52dGNtX2xv
Zy5kYXRhLnViW2ldLCByYSk7CisgICAgICAgICAgICAgICAgICAgIGNsZWFyX2JpdChpLCBlbnYt
PnZ0Y21fbG9nLm1hc2spOworICAgICAgICAgICAgICAgICAgICBlbnYtPnZ0Y21fbG9nLmRhdGEu
dWJbaV0gPSAwOworICAgICAgICAgICAgICAgIH0KKworICAgICAgICAgICAgfQorICAgICAgICB9
CisgICAgfQorfQorCiBzdGF0aWMgdm9pZCBwcmludF9zdG9yZShDUFVIZXhhZ29uU3RhdGUgKmVu
diwgaW50IHNsb3QpCiB7CiAgICAgaWYgKCEoZW52LT5zbG90X2NhbmNlbGxlZCAmICgxIDw8IHNs
b3QpKSkgewpAQCAtMjQyLDkgKzI5NSwxMCBAQCB2b2lkIEhFTFBFUihkZWJ1Z19jb21taXRfZW5k
KShDUFVIZXhhZ29uU3RhdGUgKmVudiwgaW50IGhhc19zdDAsIGludCBoYXNfc3QxKQogICAgIEhF
WF9ERUJVR19MT0coIk5leHQgUEMgPSAiIFRBUkdFVF9GTVRfbHggIlxuIiwgZW52LT5uZXh0X1BD
KTsKICAgICBIRVhfREVCVUdfTE9HKCJFeGVjIGNvdW50ZXJzOiBwa3QgPSAiIFRBUkdFVF9GTVRf
bHgKICAgICAgICAgICAgICAgICAgICIsIGluc24gPSAiIFRBUkdFVF9GTVRfbHgKLSAgICAgICAg
ICAgICAgICAgICJcbiIsCisgICAgICAgICAgICAgICAgICAiLCBodnggPSAiIFRBUkdFVF9GTVRf
bHggIlxuIiwKICAgICAgICAgICAgICAgICAgIGVudi0+Z3ByW0hFWF9SRUdfUUVNVV9QS1RfQ05U
XSwKLSAgICAgICAgICAgICAgICAgIGVudi0+Z3ByW0hFWF9SRUdfUUVNVV9JTlNOX0NOVF0pOwor
ICAgICAgICAgICAgICAgICAgZW52LT5ncHJbSEVYX1JFR19RRU1VX0lOU05fQ05UXSwKKyAgICAg
ICAgICAgICAgICAgIGVudi0+Z3ByW0hFWF9SRUdfUUVNVV9IVlhfQ05UXSk7CiAKIH0KIApAQCAt
MzkzLDYgKzQ0Nyw2NSBAQCB2b2lkIEhFTFBFUihwcm9iZV9wa3Rfc2NhbGFyX3N0b3JlX3MwKShD
UFVIZXhhZ29uU3RhdGUgKmVudiwgaW50IG1tdV9pZHgpCiAgICAgcHJvYmVfc3RvcmUoZW52LCAw
LCBtbXVfaWR4KTsKIH0KIAordm9pZCBIRUxQRVIocHJvYmVfaHZ4X3N0b3JlcykoQ1BVSGV4YWdv
blN0YXRlICplbnYsIGludCBtbXVfaWR4KQoreworICAgIHVpbnRwdHJfdCByZXRhZGRyID0gR0VU
UEMoKTsKKyAgICBpbnQgaTsKKworICAgIC8qIE5vcm1hbCAocG9zc2libHkgbWFza2VkKSB2ZWN0
b3Igc3RvcmUgKi8KKyAgICBmb3IgKGkgPSAwOyBpIDwgVlNUT1JFU19NQVg7IGkrKykgeworICAg
ICAgICBpZiAoZW52LT52c3RvcmVfcGVuZGluZ1tpXSkgeworICAgICAgICAgICAgdGFyZ2V0X3Vs
b25nIHZhID0gZW52LT52c3RvcmVbaV0udmE7CisgICAgICAgICAgICBpbnQgc2l6ZSA9IGVudi0+
dnN0b3JlW2ldLnNpemU7CisgICAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8IHNpemU7IGor
KykgeworICAgICAgICAgICAgICAgIGlmICh0ZXN0X2JpdChqLCBlbnYtPnZzdG9yZVtpXS5tYXNr
KSkgeworICAgICAgICAgICAgICAgICAgICBwcm9iZV93cml0ZShlbnYsIHZhICsgaiwgMSwgbW11
X2lkeCwgcmV0YWRkcik7CisgICAgICAgICAgICAgICAgfQorICAgICAgICAgICAgfQorICAgICAg
ICB9CisgICAgfQorCisgICAgLyogU2NhdHRlciBzdG9yZSAqLworICAgIGlmIChlbnYtPnZ0Y21f
cGVuZGluZykgeworICAgICAgICBpZiAoZW52LT52dGNtX2xvZy5vcCkgeworICAgICAgICAgICAg
LyogTmVlZCB0byBwZXJmb3JtIHRoZSBzY2F0dGVyIHJlYWQvbW9kaWZ5L3dyaXRlIGF0IGNvbW1p
dCB0aW1lICovCisgICAgICAgICAgICBpZiAoZW52LT52dGNtX2xvZy5vcF9zaXplID09IDIpIHsK
KyAgICAgICAgICAgICAgICBTQ0FUVEVSX09QX1BST0JFX01FTShzaXplMnVfdCwgbW11X2lkeCwg
cmV0YWRkcik7CisgICAgICAgICAgICB9IGVsc2UgaWYgKGVudi0+dnRjbV9sb2cub3Bfc2l6ZSA9
PSA0KSB7CisgICAgICAgICAgICAgICAgLyogV29yZCBTY2F0dGVyICs9ICovCisgICAgICAgICAg
ICAgICAgU0NBVFRFUl9PUF9QUk9CRV9NRU0oc2l6ZTR1X3QsIG1tdV9pZHgsIHJldGFkZHIpOwor
ICAgICAgICAgICAgfSBlbHNlIHsKKyAgICAgICAgICAgICAgICBnX2Fzc2VydF9ub3RfcmVhY2hl
ZCgpOworICAgICAgICAgICAgfQorICAgICAgICB9IGVsc2UgeworICAgICAgICAgICAgZm9yIChp
bnQgaSA9IDA7IGkgPCBzaXplb2YoTU1WZWN0b3IpOyBpKyspIHsKKyAgICAgICAgICAgICAgICBp
ZiAodGVzdF9iaXQoaSwgZW52LT52dGNtX2xvZy5tYXNrKSkgeworICAgICAgICAgICAgICAgICAg
ICBwcm9iZV93cml0ZShlbnYsIGVudi0+dnRjbV9sb2cudmFbaV0sIDEsIG1tdV9pZHgsIHJldGFk
ZHIpOworICAgICAgICAgICAgICAgIH0KKworICAgICAgICAgICAgfQorICAgICAgICB9CisgICAg
fQorfQorCit2b2lkIEhFTFBFUihwcm9iZV9wa3Rfc2NhbGFyX2h2eF9zdG9yZXMpKENQVUhleGFn
b25TdGF0ZSAqZW52LCBpbnQgbWFzaywKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgaW50IG1tdV9pZHgpCit7CisgICAgYm9vbCBoYXNfc3QwICAgICAgICA9IChtYXNr
ID4+IDApICYgMTsKKyAgICBib29sIGhhc19zdDEgICAgICAgID0gKG1hc2sgPj4gMSkgJiAxOwor
ICAgIGJvb2wgaGFzX2h2eF9zdG9yZXMgPSAobWFzayA+PiAyKSAmIDE7CisKKyAgICBpZiAoaGFz
X3N0MCkgeworICAgICAgICBwcm9iZV9zdG9yZShlbnYsIDAsIG1tdV9pZHgpOworICAgIH0KKyAg
ICBpZiAoaGFzX3N0MSkgeworICAgICAgICBwcm9iZV9zdG9yZShlbnYsIDEsIG1tdV9pZHgpOwor
ICAgIH0KKyAgICBpZiAoaGFzX2h2eF9zdG9yZXMpIHsKKyAgICAgICAgSEVMUEVSKHByb2JlX2h2
eF9zdG9yZXMpKGVudiwgbW11X2lkeCk7CisgICAgfQorfQorCiAvKgogICogbWVtX25vc2h1Zgog
ICogU2VjdGlvbiA1LjUgb2YgdGhlIEhleGFnb24gVjY3IFByb2dyYW1tZXIncyBSZWZlcmVuY2Ug
TWFudWFsCkBAIC0xMTgxLDYgKzEyOTQsMTcxIEBAIGZsb2F0NjQgSEVMUEVSKGRmbXB5aGgpKENQ
VUhleGFnb25TdGF0ZSAqZW52LCBmbG9hdDY0IFJ4eFYsCiAgICAgcmV0dXJuIFJ4eFY7CiB9CiAK
Ky8qIEhpc3RvZ3JhbSBpbnN0cnVjdGlvbnMgKi8KKwordm9pZCBIRUxQRVIodmhpc3QpKENQVUhl
eGFnb25TdGF0ZSAqZW52KQoreworICAgIE1NVmVjdG9yICppbnB1dCA9ICZlbnYtPnRtcF9WUmVn
c1swXTsKKworICAgIGZvciAoaW50IGxhbmUgPSAwOyBsYW5lIDwgODsgbGFuZSsrKSB7CisgICAg
ICAgIGZvciAoaW50IGkgPSAwOyBpIDwgc2l6ZW9mKE1NVmVjdG9yKSAvIDg7ICsraSkgeworICAg
ICAgICAgICAgdW5zaWduZWQgY2hhciB2YWx1ZSA9IGlucHV0LT51Ylsoc2l6ZW9mKE1NVmVjdG9y
KSAvIDgpICogbGFuZSArIGldOworICAgICAgICAgICAgdW5zaWduZWQgY2hhciByZWdubyA9IHZh
bHVlID4+IDM7CisgICAgICAgICAgICB1bnNpZ25lZCBjaGFyIGVsZW1lbnQgPSB2YWx1ZSAmIDc7
CisKKyAgICAgICAgICAgIGVudi0+VlJlZ3NbcmVnbm9dLnVoWyhzaXplb2YoTU1WZWN0b3IpIC8g
MTYpICogbGFuZSArIGVsZW1lbnRdKys7CisgICAgICAgIH0KKyAgICB9Cit9CisKK3ZvaWQgSEVM
UEVSKHZoaXN0cSkoQ1BVSGV4YWdvblN0YXRlICplbnYpCit7CisgICAgTU1WZWN0b3IgKmlucHV0
ID0gJmVudi0+dG1wX1ZSZWdzWzBdOworCisgICAgZm9yIChpbnQgbGFuZSA9IDA7IGxhbmUgPCA4
OyBsYW5lKyspIHsKKyAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBzaXplb2YoTU1WZWN0b3Ip
IC8gODsgKytpKSB7CisgICAgICAgICAgICB1bnNpZ25lZCBjaGFyIHZhbHVlID0gaW5wdXQtPnVi
WyhzaXplb2YoTU1WZWN0b3IpIC8gOCkgKiBsYW5lICsgaV07CisgICAgICAgICAgICB1bnNpZ25l
ZCBjaGFyIHJlZ25vID0gdmFsdWUgPj4gMzsKKyAgICAgICAgICAgIHVuc2lnbmVkIGNoYXIgZWxl
bWVudCA9IHZhbHVlICYgNzsKKworICAgICAgICAgICAgaWYgKGZHRVRRQklUKGVudi0+cXRtcCwg
c2l6ZW9mKE1NVmVjdG9yKSAvIDggKiBsYW5lICsgaSkpIHsKKyAgICAgICAgICAgICAgICBlbnYt
PlZSZWdzW3JlZ25vXS51aFsKKyAgICAgICAgICAgICAgICAgICAgKHNpemVvZihNTVZlY3Rvcikg
LyAxNikgKiBsYW5lICsgZWxlbWVudF0rKzsKKyAgICAgICAgICAgIH0KKyAgICAgICAgfQorICAg
IH0KK30KKwordm9pZCBIRUxQRVIodndoaXN0MjU2KShDUFVIZXhhZ29uU3RhdGUgKmVudikKK3sK
KyAgICBNTVZlY3RvciAqaW5wdXQgPSAmZW52LT50bXBfVlJlZ3NbMF07CisKKyAgICBmb3IgKGlu
dCBpID0gMDsgaSA8IChzaXplb2YoTU1WZWN0b3IpIC8gMik7IGkrKykgeworICAgICAgICB1bnNp
Z25lZCBpbnQgYnVja2V0ID0gZkdFVFVCWVRFKDAsIGlucHV0LT5oW2ldKTsKKyAgICAgICAgdW5z
aWduZWQgaW50IHdlaWdodCA9IGZHRVRVQllURSgxLCBpbnB1dC0+aFtpXSk7CisgICAgICAgIHVu
c2lnbmVkIGludCB2aW5kZXggPSAoYnVja2V0ID4+IDMpICYgMHgxRjsKKyAgICAgICAgdW5zaWdu
ZWQgaW50IGVsaW5kZXggPSAoKGkgPj4gMCkgJiAofjcpKSB8ICgoYnVja2V0ID4+IDApICYgNyk7
CisKKyAgICAgICAgZW52LT5WUmVnc1t2aW5kZXhdLnVoW2VsaW5kZXhdID0KKyAgICAgICAgICAg
IGVudi0+VlJlZ3NbdmluZGV4XS51aFtlbGluZGV4XSArIHdlaWdodDsKKyAgICB9Cit9CisKK3Zv
aWQgSEVMUEVSKHZ3aGlzdDI1NnEpKENQVUhleGFnb25TdGF0ZSAqZW52KQoreworICAgIE1NVmVj
dG9yICppbnB1dCA9ICZlbnYtPnRtcF9WUmVnc1swXTsKKworICAgIGZvciAoaW50IGkgPSAwOyBp
IDwgKHNpemVvZihNTVZlY3RvcikgLyAyKTsgaSsrKSB7CisgICAgICAgIHVuc2lnbmVkIGludCBi
dWNrZXQgPSBmR0VUVUJZVEUoMCwgaW5wdXQtPmhbaV0pOworICAgICAgICB1bnNpZ25lZCBpbnQg
d2VpZ2h0ID0gZkdFVFVCWVRFKDEsIGlucHV0LT5oW2ldKTsKKyAgICAgICAgdW5zaWduZWQgaW50
IHZpbmRleCA9IChidWNrZXQgPj4gMykgJiAweDFGOworICAgICAgICB1bnNpZ25lZCBpbnQgZWxp
bmRleCA9ICgoaSA+PiAwKSAmICh+NykpIHwgKChidWNrZXQgPj4gMCkgJiA3KTsKKworICAgICAg
ICBpZiAoZkdFVFFCSVQoZW52LT5xdG1wLCAyICogaSkpIHsKKyAgICAgICAgICAgIGVudi0+VlJl
Z3NbdmluZGV4XS51aFtlbGluZGV4XSA9CisgICAgICAgICAgICAgICAgZW52LT5WUmVnc1t2aW5k
ZXhdLnVoW2VsaW5kZXhdICsgd2VpZ2h0OworICAgICAgICB9CisgICAgfQorfQorCit2b2lkIEhF
TFBFUih2d2hpc3QyNTZfc2F0KShDUFVIZXhhZ29uU3RhdGUgKmVudikKK3sKKyAgICBNTVZlY3Rv
ciAqaW5wdXQgPSAmZW52LT50bXBfVlJlZ3NbMF07CisKKyAgICBmb3IgKGludCBpID0gMDsgaSA8
IChzaXplb2YoTU1WZWN0b3IpIC8gMik7IGkrKykgeworICAgICAgICB1bnNpZ25lZCBpbnQgYnVj
a2V0ID0gZkdFVFVCWVRFKDAsIGlucHV0LT5oW2ldKTsKKyAgICAgICAgdW5zaWduZWQgaW50IHdl
aWdodCA9IGZHRVRVQllURSgxLCBpbnB1dC0+aFtpXSk7CisgICAgICAgIHVuc2lnbmVkIGludCB2
aW5kZXggPSAoYnVja2V0ID4+IDMpICYgMHgxRjsKKyAgICAgICAgdW5zaWduZWQgaW50IGVsaW5k
ZXggPSAoKGkgPj4gMCkgJiAofjcpKSB8ICgoYnVja2V0ID4+IDApICYgNyk7CisKKyAgICAgICAg
ZW52LT5WUmVnc1t2aW5kZXhdLnVoW2VsaW5kZXhdID0KKyAgICAgICAgICAgIGZWU0FUVUgoZW52
LT5WUmVnc1t2aW5kZXhdLnVoW2VsaW5kZXhdICsgd2VpZ2h0KTsKKyAgICB9Cit9CisKK3ZvaWQg
SEVMUEVSKHZ3aGlzdDI1NnFfc2F0KShDUFVIZXhhZ29uU3RhdGUgKmVudikKK3sKKyAgICBNTVZl
Y3RvciAqaW5wdXQgPSAmZW52LT50bXBfVlJlZ3NbMF07CisKKyAgICBmb3IgKGludCBpID0gMDsg
aSA8IChzaXplb2YoTU1WZWN0b3IpIC8gMik7IGkrKykgeworICAgICAgICB1bnNpZ25lZCBpbnQg
YnVja2V0ID0gZkdFVFVCWVRFKDAsIGlucHV0LT5oW2ldKTsKKyAgICAgICAgdW5zaWduZWQgaW50
IHdlaWdodCA9IGZHRVRVQllURSgxLCBpbnB1dC0+aFtpXSk7CisgICAgICAgIHVuc2lnbmVkIGlu
dCB2aW5kZXggPSAoYnVja2V0ID4+IDMpICYgMHgxRjsKKyAgICAgICAgdW5zaWduZWQgaW50IGVs
aW5kZXggPSAoKGkgPj4gMCkgJiAofjcpKSB8ICgoYnVja2V0ID4+IDApICYgNyk7CisKKyAgICAg
ICAgaWYgKGZHRVRRQklUKGVudi0+cXRtcCwgMiAqIGkpKSB7CisgICAgICAgICAgICBlbnYtPlZS
ZWdzW3ZpbmRleF0udWhbZWxpbmRleF0gPQorICAgICAgICAgICAgICAgIGZWU0FUVUgoZW52LT5W
UmVnc1t2aW5kZXhdLnVoW2VsaW5kZXhdICsgd2VpZ2h0KTsKKyAgICAgICAgfQorICAgIH0KK30K
Kwordm9pZCBIRUxQRVIodndoaXN0MTI4KShDUFVIZXhhZ29uU3RhdGUgKmVudikKK3sKKyAgICBN
TVZlY3RvciAqaW5wdXQgPSAmZW52LT50bXBfVlJlZ3NbMF07CisKKyAgICBmb3IgKGludCBpID0g
MDsgaSA8IChzaXplb2YoTU1WZWN0b3IpIC8gMik7IGkrKykgeworICAgICAgICB1bnNpZ25lZCBp
bnQgYnVja2V0ID0gZkdFVFVCWVRFKDAsIGlucHV0LT5oW2ldKTsKKyAgICAgICAgdW5zaWduZWQg
aW50IHdlaWdodCA9IGZHRVRVQllURSgxLCBpbnB1dC0+aFtpXSk7CisgICAgICAgIHVuc2lnbmVk
IGludCB2aW5kZXggPSAoYnVja2V0ID4+IDMpICYgMHgxRjsKKyAgICAgICAgdW5zaWduZWQgaW50
IGVsaW5kZXggPSAoKGkgPj4gMSkgJiAofjMpKSB8ICgoYnVja2V0ID4+IDEpICYgMyk7CisKKyAg
ICAgICAgZW52LT5WUmVnc1t2aW5kZXhdLnV3W2VsaW5kZXhdID0KKyAgICAgICAgICAgIGVudi0+
VlJlZ3NbdmluZGV4XS51d1tlbGluZGV4XSArIHdlaWdodDsKKyAgICB9Cit9CisKK3ZvaWQgSEVM
UEVSKHZ3aGlzdDEyOHEpKENQVUhleGFnb25TdGF0ZSAqZW52KQoreworICAgIE1NVmVjdG9yICpp
bnB1dCA9ICZlbnYtPnRtcF9WUmVnc1swXTsKKworICAgIGZvciAoaW50IGkgPSAwOyBpIDwgKHNp
emVvZihNTVZlY3RvcikgLyAyKTsgaSsrKSB7CisgICAgICAgIHVuc2lnbmVkIGludCBidWNrZXQg
PSBmR0VUVUJZVEUoMCwgaW5wdXQtPmhbaV0pOworICAgICAgICB1bnNpZ25lZCBpbnQgd2VpZ2h0
ID0gZkdFVFVCWVRFKDEsIGlucHV0LT5oW2ldKTsKKyAgICAgICAgdW5zaWduZWQgaW50IHZpbmRl
eCA9IChidWNrZXQgPj4gMykgJiAweDFGOworICAgICAgICB1bnNpZ25lZCBpbnQgZWxpbmRleCA9
ICgoaSA+PiAxKSAmICh+MykpIHwgKChidWNrZXQgPj4gMSkgJiAzKTsKKworICAgICAgICBpZiAo
ZkdFVFFCSVQoZW52LT5xdG1wLCAyICogaSkpIHsKKyAgICAgICAgICAgIGVudi0+VlJlZ3Nbdmlu
ZGV4XS51d1tlbGluZGV4XSA9CisgICAgICAgICAgICAgICAgZW52LT5WUmVnc1t2aW5kZXhdLnV3
W2VsaW5kZXhdICsgd2VpZ2h0OworICAgICAgICB9CisgICAgfQorfQorCit2b2lkIEhFTFBFUih2
d2hpc3QxMjhtKShDUFVIZXhhZ29uU3RhdGUgKmVudiwgaW50MzJfdCB1aVYpCit7CisgICAgTU1W
ZWN0b3IgKmlucHV0ID0gJmVudi0+dG1wX1ZSZWdzWzBdOworCisgICAgZm9yIChpbnQgaSA9IDA7
IGkgPCAoc2l6ZW9mKE1NVmVjdG9yKSAvIDIpOyBpKyspIHsKKyAgICAgICAgdW5zaWduZWQgaW50
IGJ1Y2tldCA9IGZHRVRVQllURSgwLCBpbnB1dC0+aFtpXSk7CisgICAgICAgIHVuc2lnbmVkIGlu
dCB3ZWlnaHQgPSBmR0VUVUJZVEUoMSwgaW5wdXQtPmhbaV0pOworICAgICAgICB1bnNpZ25lZCBp
bnQgdmluZGV4ID0gKGJ1Y2tldCA+PiAzKSAmIDB4MUY7CisgICAgICAgIHVuc2lnbmVkIGludCBl
bGluZGV4ID0gKChpID4+IDEpICYgKH4zKSkgfCAoKGJ1Y2tldCA+PiAxKSAmIDMpOworCisgICAg
ICAgIGlmICgoYnVja2V0ICYgMSkgPT0gdWlWKSB7CisgICAgICAgICAgICBlbnYtPlZSZWdzW3Zp
bmRleF0udXdbZWxpbmRleF0gPQorICAgICAgICAgICAgICAgIGVudi0+VlJlZ3NbdmluZGV4XS51
d1tlbGluZGV4XSArIHdlaWdodDsKKyAgICAgICAgfQorICAgIH0KK30KKwordm9pZCBIRUxQRVIo
dndoaXN0MTI4cW0pKENQVUhleGFnb25TdGF0ZSAqZW52LCBpbnQzMl90IHVpVikKK3sKKyAgICBN
TVZlY3RvciAqaW5wdXQgPSAmZW52LT50bXBfVlJlZ3NbMF07CisKKyAgICBmb3IgKGludCBpID0g
MDsgaSA8IChzaXplb2YoTU1WZWN0b3IpIC8gMik7IGkrKykgeworICAgICAgICB1bnNpZ25lZCBp
bnQgYnVja2V0ID0gZkdFVFVCWVRFKDAsIGlucHV0LT5oW2ldKTsKKyAgICAgICAgdW5zaWduZWQg
aW50IHdlaWdodCA9IGZHRVRVQllURSgxLCBpbnB1dC0+aFtpXSk7CisgICAgICAgIHVuc2lnbmVk
IGludCB2aW5kZXggPSAoYnVja2V0ID4+IDMpICYgMHgxRjsKKyAgICAgICAgdW5zaWduZWQgaW50
IGVsaW5kZXggPSAoKGkgPj4gMSkgJiAofjMpKSB8ICgoYnVja2V0ID4+IDEpICYgMyk7CisKKyAg
ICAgICAgaWYgKCgoYnVja2V0ICYgMSkgPT0gdWlWKSAmJiBmR0VUUUJJVChlbnYtPnF0bXAsIDIg
KiBpKSkgeworICAgICAgICAgICAgZW52LT5WUmVnc1t2aW5kZXhdLnV3W2VsaW5kZXhdID0KKyAg
ICAgICAgICAgICAgICBlbnYtPlZSZWdzW3ZpbmRleF0udXdbZWxpbmRleF0gKyB3ZWlnaHQ7Cisg
ICAgICAgIH0KKyAgICB9Cit9CisKIHN0YXRpYyB2b2lkIGNhbmNlbF9zbG90KENQVUhleGFnb25T
dGF0ZSAqZW52LCB1aW50MzJfdCBzbG90KQogewogICAgIEhFWF9ERUJVR19MT0coIlNsb3QgJWQg
Y2FuY2VsbGVkXG4iLCBzbG90KTsKLS0gCjIuNy40Cgo=

