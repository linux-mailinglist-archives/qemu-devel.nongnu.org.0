Return-Path: <qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org>
X-Original-To: lists+qemu-devel@lfdr.de
Delivered-To: lists+qemu-devel@lfdr.de
Received: from lists.gnu.org (lists.gnu.org [209.51.188.17])
	by mail.lfdr.de (Postfix) with ESMTPS id 6E65C60BF1C
	for <lists+qemu-devel@lfdr.de>; Tue, 25 Oct 2022 01:56:42 +0200 (CEST)
Received: from localhost ([::1] helo=lists1p.gnu.org)
	by lists.gnu.org with esmtp (Exim 4.90_1)
	(envelope-from <qemu-devel-bounces@nongnu.org>)
	id 1on7Ep-0002c7-U1; Mon, 24 Oct 2022 19:52:11 -0400
Received: from eggs.gnu.org ([2001:470:142:3::10])
 by lists.gnu.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256)
 (Exim 4.90_1) (envelope-from <tsimpson@qualcomm.com>)
 id 1on7E7-0000ed-6t
 for qemu-devel@nongnu.org; Mon, 24 Oct 2022 19:51:27 -0400
Received: from mx0b-0031df01.pphosted.com ([205.220.180.131])
 by eggs.gnu.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256)
 (Exim 4.90_1) (envelope-from <tsimpson@qualcomm.com>)
 id 1on7E4-0005DS-VZ
 for qemu-devel@nongnu.org; Mon, 24 Oct 2022 19:51:26 -0400
Received: from pps.filterd (m0279869.ppops.net [127.0.0.1])
 by mx0a-0031df01.pphosted.com (8.17.1.5/8.17.1.5) with ESMTP id 29ONlXcb016759;
 Mon, 24 Oct 2022 23:51:22 GMT
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=quicinc.com;
 h=from : to : cc :
 subject : date : message-id : in-reply-to : references : mime-version :
 content-type : content-transfer-encoding; s=qcppdkim1;
 bh=ffSsC/Sley/zyBKriQPGWhqTwF8UQ8n52PziSp8oMdk=;
 b=o9SDBeCY078+hHUbOXzSFa7+bZsubfbOcgizl7IrCFnTwxKA2ZEwZ0Iy0wf3+Pflo1fq
 73spbGSNTFDZAL1H2GXtxL2GMYQxzVg2qWVjM8TTYqEaf/Fcb8yhJ686HX0QmdMe5xmJ
 r/0SUAP+YM6xNOJTmjNqTZy842KjJijf6HPl+OFVHaJ3f/d1vJt09yEJmN7mqhtvShwY
 Inf4N3bTQsL8YO4h9IEnpSMfb1y20NufDrfT5mbdxAqTbq96d3/se0Xg8vU9bW+gr1oM
 ta/9y6hPmRBR957cx8vWZUbjfSPY2oXAyyJqOPXTe/rc1SidMtQY2HoK3AcKlIAHPx84 pw== 
Received: from nalasppmta01.qualcomm.com (Global_NAT1.qualcomm.com
 [129.46.96.20])
 by mx0a-0031df01.pphosted.com (PPS) with ESMTPS id 3kc7hf4rxc-1
 (version=TLSv1.2 cipher=ECDHE-RSA-AES256-GCM-SHA384 bits=256 verify=NOT);
 Mon, 24 Oct 2022 23:51:21 +0000
Received: from pps.filterd (NALASPPMTA01.qualcomm.com [127.0.0.1])
 by NALASPPMTA01.qualcomm.com (8.17.1.5/8.17.1.5) with ESMTP id 29ONpKcs029605; 
 Mon, 24 Oct 2022 23:51:20 GMT
Received: from pps.reinject (localhost [127.0.0.1])
 by NALASPPMTA01.qualcomm.com (PPS) with ESMTPS id 3kc9kk81su-1
 (version=TLSv1.2 cipher=ECDHE-RSA-AES256-GCM-SHA384 bits=256 verify=NO);
 Mon, 24 Oct 2022 23:51:20 +0000
Received: from NALASPPMTA01.qualcomm.com (NALASPPMTA01.qualcomm.com
 [127.0.0.1])
 by pps.reinject (8.17.1.5/8.17.1.5) with ESMTP id 29ONnW7Y027277;
 Mon, 24 Oct 2022 23:51:19 GMT
Received: from hu-devc-lv-u18-c.qualcomm.com (hu-tsimpson-lv.qualcomm.com
 [10.47.235.220])
 by NALASPPMTA01.qualcomm.com (PPS) with ESMTP id 29ONpJBm029584;
 Mon, 24 Oct 2022 23:51:19 +0000
Received: by hu-devc-lv-u18-c.qualcomm.com (Postfix, from userid 47164)
 id 369EE5000A8; Mon, 24 Oct 2022 16:51:19 -0700 (PDT)
From: Taylor Simpson <tsimpson@quicinc.com>
To: qemu-devel@nongnu.org
Cc: tsimpson@quicinc.com, richard.henderson@linaro.org, philmd@linaro.org,
 ale@rev.ng, anjo@rev.ng, bcain@quicinc.com, quic_mathbern@quicinc.com
Subject: [PATCH v2 1/8] Hexagon (target/hexagon) Only use branch_taken when
 packet has multi cof
Date: Mon, 24 Oct 2022 16:51:10 -0700
Message-Id: <20221024235117.3663-2-tsimpson@quicinc.com>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20221024235117.3663-1-tsimpson@quicinc.com>
References: <20221024235117.3663-1-tsimpson@quicinc.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
X-QCInternal: smtphost
X-QCInternal: smtphost
X-Proofpoint-Virus-Version: vendor=nai engine=6200 definitions=5800
 signatures=585085
X-Proofpoint-Virus-Version: vendor=nai engine=6200 definitions=5800
 signatures=585085
X-Proofpoint-ORIG-GUID: yqizaX9x9x4b7kKTcjR7JkGx2mNY6FXC
X-Proofpoint-GUID: yqizaX9x9x4b7kKTcjR7JkGx2mNY6FXC
X-Proofpoint-Virus-Version: vendor=baseguard
 engine=ICAP:2.0.205,Aquarius:18.0.895,Hydra:6.0.545,FMLib:17.11.122.1
 definitions=2022-10-24_07,2022-10-21_01,2022-06-22_01
X-Proofpoint-Spam-Details: rule=outbound_notspam policy=outbound score=0
 mlxlogscore=994
 impostorscore=0 adultscore=0 malwarescore=0 clxscore=1015
 lowpriorityscore=0 bulkscore=0 spamscore=0 phishscore=0 suspectscore=0
 mlxscore=0 priorityscore=1501 classifier=spam adjust=0 reason=mlx
 scancount=1 engine=8.12.0-2209130000 definitions=main-2210240142
Received-SPF: pass client-ip=205.220.180.131;
 envelope-from=tsimpson@qualcomm.com; helo=mx0b-0031df01.pphosted.com
X-Spam_score_int: -24
X-Spam_score: -2.5
X-Spam_bar: --
X-Spam_report: (-2.5 / 5.0 requ) BAYES_00=-1.9, DKIM_SIGNED=0.1,
 DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1, HEADER_FROM_DIFFERENT_DOMAINS=0.249,
 RCVD_IN_DNSWL_LOW=-0.7, SPF_HELO_NONE=0.001,
 SPF_PASS=-0.001 autolearn=ham autolearn_force=no
X-Spam_action: no action
X-BeenThere: qemu-devel@nongnu.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: <qemu-devel.nongnu.org>
List-Unsubscribe: <https://lists.nongnu.org/mailman/options/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=unsubscribe>
List-Archive: <https://lists.nongnu.org/archive/html/qemu-devel>
List-Post: <mailto:qemu-devel@nongnu.org>
List-Help: <mailto:qemu-devel-request@nongnu.org?subject=help>
List-Subscribe: <https://lists.nongnu.org/mailman/listinfo/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=subscribe>
Sender: "Qemu-devel" <qemu-devel-bounces@nongnu.org>
Errors-To: qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org

V2hlbiBhIHBhY2tldCBoYXMgbW9yZSB0aGFuIG9uZSBjaGFuZ2Utb2YtZmxvdyBpbnN0cnVjdGlv
biwgb25seSB0aGUgZmlyc3QKb25lIHRvIGJyYW5jaCBpcyBjb25zaWRlcmVkLiAgV2UgdXNlIHRo
ZSBicmFuY2hfdGFrZW4gdmFyaWFibGUgdG8ga2VlcAp0cmFjayBvZiB0aGlzLgoKSG93ZXZlciwg
d2hlbiB0aGVyZSBpcyBhIHNpbmdsZSBjb2YgaW5zdHJ1Y3Rpb24sIHdlIGRvbid0IG5lZWQgdGhl
IHNhbWUKYW1vdW50IG9mIGJvb2trZWVwaW5nLgoKV2UgYWRkIHRoZSBwa3RfaGFzX211bHRpX2Nv
ZiBtZW1iZXIgdG8gdGhlIFBhY2tldCBzdHJ1Y3R1cmUsIGFuZCBwYXNzIHRoaXMKaW5mb3JtYXRp
b24gdG8gdGhlIG5lZWRlZCBmdW5jdGlvbnMuCgpXaGVuIHRoZXJlIGlzIGEgZ2VuZXJhdGVkIGhl
bHBlciBmdW5jdGlvbiB3aXRoIGNvZiwgdGhlIGdlbmVyYXRvciB3aWxsCnBhc3MgdGhpcyBwa3Rf
aGFzX211bHRpX2NvZiBhcyBhIHJ1bnRpbWUgdmFsdWUuCgpTaWduZWQtb2ZmLWJ5OiBUYXlsb3Ig
U2ltcHNvbiA8dHNpbXBzb25AcXVpY2luYy5jb20+Ci0tLQogdGFyZ2V0L2hleGFnb24vaW5zbi5o
ICAgICAgICAgICAgICAgfCAgMSArCiB0YXJnZXQvaGV4YWdvbi9tYWNyb3MuaCAgICAgICAgICAg
ICB8ICAyICstCiB0YXJnZXQvaGV4YWdvbi9kZWNvZGUuYyAgICAgICAgICAgICB8IDE1ICsrKysr
KysrKysrKystLQogdGFyZ2V0L2hleGFnb24vb3BfaGVscGVyLmMgICAgICAgICAgfCAyNCArKysr
KysrKysrKysrKystLS0tLS0tLS0KIHRhcmdldC9oZXhhZ29uL3RyYW5zbGF0ZS5jICAgICAgICAg
IHwgIDQgKysrLQogdGFyZ2V0L2hleGFnb24vZ2VuX2hlbHBlcl9mdW5jcy5weSAgfCAgMyArKysK
IHRhcmdldC9oZXhhZ29uL2dlbl9oZWxwZXJfcHJvdG9zLnB5IHwgIDYgKysrKystCiB0YXJnZXQv
aGV4YWdvbi9nZW5fdGNnX2Z1bmNzLnB5ICAgICB8ICA1ICsrKysrCiB0YXJnZXQvaGV4YWdvbi9o
ZXhfY29tbW9uLnB5ICAgICAgICB8ICAzICsrKwogOSBmaWxlcyBjaGFuZ2VkLCA0OSBpbnNlcnRp
b25zKCspLCAxNCBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS90YXJnZXQvaGV4YWdvbi9pbnNu
LmggYi90YXJnZXQvaGV4YWdvbi9pbnNuLmgKaW5kZXggYWEyNjM4OTE0Ny4uODU3YTdjZWI3NSAx
MDA2NDQKLS0tIGEvdGFyZ2V0L2hleGFnb24vaW5zbi5oCisrKyBiL3RhcmdldC9oZXhhZ29uL2lu
c24uaApAQCAtNjAsNiArNjAsNyBAQCBzdHJ1Y3QgUGFja2V0IHsKIAogICAgIC8qIFByZS1kZWNv
ZGVzIGFib3V0IENPRiAqLwogICAgIGJvb2wgcGt0X2hhc19jb2Y7ICAgICAgICAgIC8qIEhhcyBh
bnkgY2hhbmdlLW9mLWZsb3cgKi8KKyAgICBib29sIHBrdF9oYXNfbXVsdGlfY29mOyAgICAvKiBI
YXMgbW9yZSB0aGFuIG9uZSBjaGFuZ2Utb2YtZmxvdyAqLwogICAgIGJvb2wgcGt0X2hhc19lbmRs
b29wOwogCiAgICAgYm9vbCBwa3RfaGFzX2RjemVyb2E7CmRpZmYgLS1naXQgYS90YXJnZXQvaGV4
YWdvbi9tYWNyb3MuaCBiL3RhcmdldC9oZXhhZ29uL21hY3Jvcy5oCmluZGV4IGM4ODA1YmRhZWIu
LmU5MDg0MDVkODIgMTAwNjQ0Ci0tLSBhL3RhcmdldC9oZXhhZ29uL21hY3Jvcy5oCisrKyBiL3Rh
cmdldC9oZXhhZ29uL21hY3Jvcy5oCkBAIC00MDcsNyArNDA3LDcgQEAgc3RhdGljIGlubGluZSBU
Q0d2IGdlbl9yZWFkX2lyZWcoVENHdiByZXN1bHQsIFRDR3YgdmFsLCBpbnQgc2hpZnQpCiAKICNk
ZWZpbmUgZkNIRUNLX1BDQUxJR04oQSkKIAotI2RlZmluZSBmV1JJVEVfTlBDKEEpIHdyaXRlX25l
d19wYyhlbnYsIEEpCisjZGVmaW5lIGZXUklURV9OUEMoQSkgd3JpdGVfbmV3X3BjKGVudiwgcGt0
X2hhc19tdWx0aV9jb2YgIT0gMCwgQSkKIAogI2RlZmluZSBmQlJBTkNIKExPQywgVFlQRSkgICAg
ICAgICAgZldSSVRFX05QQyhMT0MpCiAjZGVmaW5lIGZKVU1QUihSRUdOTywgVEFSR0VULCBUWVBF
KSBmQlJBTkNIKFRBUkdFVCwgQ09GX1RZUEVfSlVNUFIpCmRpZmYgLS1naXQgYS90YXJnZXQvaGV4
YWdvbi9kZWNvZGUuYyBiL3RhcmdldC9oZXhhZ29uL2RlY29kZS5jCmluZGV4IDZiNzNiNWM2MGMu
LjA0MWM4ZGU3NTEgMTAwNjQ0Ci0tLSBhL3RhcmdldC9oZXhhZ29uL2RlY29kZS5jCisrKyBiL3Rh
cmdldC9oZXhhZ29uL2RlY29kZS5jCkBAIC0zODgsNiArMzg4LDcgQEAgc3RhdGljIHZvaWQgZGVj
b2RlX3NldF9pbnNuX2F0dHJfZmllbGRzKFBhY2tldCAqcGt0KQogICAgIHVpbnQxNl90IG9wY29k
ZTsKIAogICAgIHBrdC0+cGt0X2hhc19jb2YgPSBmYWxzZTsKKyAgICBwa3QtPnBrdF9oYXNfbXVs
dGlfY29mID0gZmFsc2U7CiAgICAgcGt0LT5wa3RfaGFzX2VuZGxvb3AgPSBmYWxzZTsKICAgICBw
a3QtPnBrdF9oYXNfZGN6ZXJvYSA9IGZhbHNlOwogCkBAIC00MTIsMTMgKzQxMywyMyBAQCBzdGF0
aWMgdm9pZCBkZWNvZGVfc2V0X2luc25fYXR0cl9maWVsZHMoUGFja2V0ICpwa3QpCiAgICAgICAg
ICAgICB9CiAgICAgICAgIH0KIAotICAgICAgICBwa3QtPnBrdF9oYXNfY29mIHw9IGRlY29kZV9v
cGNvZGVfY2FuX2p1bXAob3Bjb2RlKTsKKyAgICAgICAgaWYgKGRlY29kZV9vcGNvZGVfY2FuX2p1
bXAob3Bjb2RlKSkgeworICAgICAgICAgICAgaWYgKHBrdC0+cGt0X2hhc19jb2YpIHsKKyAgICAg
ICAgICAgICAgICBwa3QtPnBrdF9oYXNfbXVsdGlfY29mID0gdHJ1ZTsKKyAgICAgICAgICAgIH0K
KyAgICAgICAgICAgIHBrdC0+cGt0X2hhc19jb2YgPSB0cnVlOworICAgICAgICB9CiAKICAgICAg
ICAgcGt0LT5pbnNuW2ldLmlzX2VuZGxvb3AgPSBkZWNvZGVfb3Bjb2RlX2VuZHNfbG9vcChvcGNv
ZGUpOwogCiAgICAgICAgIHBrdC0+cGt0X2hhc19lbmRsb29wIHw9IHBrdC0+aW5zbltpXS5pc19l
bmRsb29wOwogCi0gICAgICAgIHBrdC0+cGt0X2hhc19jb2YgfD0gcGt0LT5wa3RfaGFzX2VuZGxv
b3A7CisgICAgICAgIGlmIChwa3QtPnBrdF9oYXNfZW5kbG9vcCkgeworICAgICAgICAgICAgaWYg
KHBrdC0+cGt0X2hhc19jb2YpIHsKKyAgICAgICAgICAgICAgICBwa3QtPnBrdF9oYXNfbXVsdGlf
Y29mID0gdHJ1ZTsKKyAgICAgICAgICAgIH0KKyAgICAgICAgICAgIHBrdC0+cGt0X2hhc19jb2Yg
PSB0cnVlOworICAgICAgICB9CiAgICAgfQogfQogCmRpZmYgLS1naXQgYS90YXJnZXQvaGV4YWdv
bi9vcF9oZWxwZXIuYyBiL3RhcmdldC9oZXhhZ29uL29wX2hlbHBlci5jCmluZGV4IDA4NWFmYzMy
NzQuLjg0MzkxZTI1ZWIgMTAwNjQ0Ci0tLSBhL3RhcmdldC9oZXhhZ29uL29wX2hlbHBlci5jCisr
KyBiL3RhcmdldC9oZXhhZ29uL29wX2hlbHBlci5jCkBAIC0xMDQsMjAgKzEwNCwyNiBAQCBzdGF0
aWMgdm9pZCBsb2dfc3RvcmU2NChDUFVIZXhhZ29uU3RhdGUgKmVudiwgdGFyZ2V0X3Vsb25nIGFk
ZHIsCiAgICAgZW52LT5tZW1fbG9nX3N0b3Jlc1tzbG90XS5kYXRhNjQgPSB2YWw7CiB9CiAKLXN0
YXRpYyB2b2lkIHdyaXRlX25ld19wYyhDUFVIZXhhZ29uU3RhdGUgKmVudiwgdGFyZ2V0X3Vsb25n
IGFkZHIpCitzdGF0aWMgdm9pZCB3cml0ZV9uZXdfcGMoQ1BVSGV4YWdvblN0YXRlICplbnYsIGJv
b2wgcGt0X2hhc19tdWx0aV9jb2YsCisgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0X3Vs
b25nIGFkZHIpCiB7CiAgICAgSEVYX0RFQlVHX0xPRygid3JpdGVfbmV3X3BjKDB4IiBUQVJHRVRf
Rk1UX2x4ICIpXG4iLCBhZGRyKTsKIAotICAgIC8qCi0gICAgICogSWYgbW9yZSB0aGFuIG9uZSBi
cmFuY2ggaXMgdGFrZW4gaW4gYSBwYWNrZXQsIG9ubHkgdGhlIGZpcnN0IG9uZQotICAgICAqIGlz
IGFjdHVhbGx5IGRvbmUuCi0gICAgICovCi0gICAgaWYgKGVudi0+YnJhbmNoX3Rha2VuKSB7Ci0g
ICAgICAgIEhFWF9ERUJVR19MT0coIklORk86IG11bHRpcGxlIGJyYW5jaGVzIHRha2VuIGluIHNh
bWUgcGFja2V0LCAiCi0gICAgICAgICAgICAgICAgICAgICAgImlnbm9yaW5nIHRoZSBzZWNvbmQg
b25lXG4iKTsKKyAgICBpZiAocGt0X2hhc19tdWx0aV9jb2YpIHsKKyAgICAgICAgLyoKKyAgICAg
ICAgICogSWYgbW9yZSB0aGFuIG9uZSBicmFuY2ggaXMgdGFrZW4gaW4gYSBwYWNrZXQsIG9ubHkg
dGhlIGZpcnN0IG9uZQorICAgICAgICAgKiBpcyBhY3R1YWxseSBkb25lLgorICAgICAgICAgKi8K
KyAgICAgICAgaWYgKGVudi0+YnJhbmNoX3Rha2VuKSB7CisgICAgICAgICAgICBIRVhfREVCVUdf
TE9HKCJJTkZPOiBtdWx0aXBsZSBicmFuY2hlcyB0YWtlbiBpbiBzYW1lIHBhY2tldCwgIgorICAg
ICAgICAgICAgICAgICAgICAgICAgICAiaWdub3JpbmcgdGhlIHNlY29uZCBvbmVcbiIpOworICAg
ICAgICB9IGVsc2UgeworICAgICAgICAgICAgZkNIRUNLX1BDQUxJR04oYWRkcik7CisgICAgICAg
ICAgICBlbnYtPm5leHRfUEMgPSBhZGRyOworICAgICAgICAgICAgZW52LT5icmFuY2hfdGFrZW4g
PSAxOworICAgICAgICB9CiAgICAgfSBlbHNlIHsKICAgICAgICAgZkNIRUNLX1BDQUxJR04oYWRk
cik7Ci0gICAgICAgIGVudi0+YnJhbmNoX3Rha2VuID0gMTsKICAgICAgICAgZW52LT5uZXh0X1BD
ID0gYWRkcjsKICAgICB9CiB9CmRpZmYgLS1naXQgYS90YXJnZXQvaGV4YWdvbi90cmFuc2xhdGUu
YyBiL3RhcmdldC9oZXhhZ29uL3RyYW5zbGF0ZS5jCmluZGV4IDIzMjkxNzc1MzcuLjJlNDZjYzA2
ODAgMTAwNjQ0Ci0tLSBhL3RhcmdldC9oZXhhZ29uL3RyYW5zbGF0ZS5jCisrKyBiL3RhcmdldC9o
ZXhhZ29uL3RyYW5zbGF0ZS5jCkBAIC0yNDcsNyArMjQ3LDkgQEAgc3RhdGljIHZvaWQgZ2VuX3N0
YXJ0X3BhY2tldChEaXNhc0NvbnRleHQgKmN0eCwgUGFja2V0ICpwa3QpCiAgICAgICAgIHRjZ19n
ZW5fbW92aV90bChoZXhfc2xvdF9jYW5jZWxsZWQsIDApOwogICAgIH0KICAgICBpZiAocGt0LT5w
a3RfaGFzX2NvZikgewotICAgICAgICB0Y2dfZ2VuX21vdmlfdGwoaGV4X2JyYW5jaF90YWtlbiwg
MCk7CisgICAgICAgIGlmIChwa3QtPnBrdF9oYXNfbXVsdGlfY29mKSB7CisgICAgICAgICAgICB0
Y2dfZ2VuX21vdmlfdGwoaGV4X2JyYW5jaF90YWtlbiwgMCk7CisgICAgICAgIH0KICAgICAgICAg
dGNnX2dlbl9tb3ZpX3RsKGhleF9uZXh0X1BDLCBuZXh0X1BDKTsKICAgICB9CiAgICAgaWYgKG5l
ZWRfcHJlZF93cml0dGVuKHBrdCkpIHsKZGlmZiAtLWdpdCBhL3RhcmdldC9oZXhhZ29uL2dlbl9o
ZWxwZXJfZnVuY3MucHkgYi90YXJnZXQvaGV4YWdvbi9nZW5faGVscGVyX2Z1bmNzLnB5CmluZGV4
IGE0NDZjNDUzODQuLmY3YzFhODJlOWYgMTAwNzU1Ci0tLSBhL3RhcmdldC9oZXhhZ29uL2dlbl9o
ZWxwZXJfZnVuY3MucHkKKysrIGIvdGFyZ2V0L2hleGFnb24vZ2VuX2hlbHBlcl9mdW5jcy5weQpA
QCAtMjM4LDYgKzIzOCw5IEBAIGRlZiBnZW5faGVscGVyX2Z1bmN0aW9uKGYsIHRhZywgdGFncmVn
cywgdGFnaW1tcyk6CiAgICAgICAgICAgICBnZW5faGVscGVyX2FyZ19pbW0oZixpbW1sZXR0KQog
ICAgICAgICAgICAgaSArPSAxCiAKKyAgICAgICAgaWYgKGhleF9jb21tb24ubmVlZF9wa3RfaGFz
X211bHRpX2NvZih0YWcpKToKKyAgICAgICAgICAgIGYud3JpdGUoIiwgdWludDMyX3QgcGt0X2hh
c19tdWx0aV9jb2YiKQorCiAgICAgICAgIGlmIGhleF9jb21tb24ubmVlZF9zbG90KHRhZyk6CiAg
ICAgICAgICAgICBpZiBpID4gMDogZi53cml0ZSgiLCAiKQogICAgICAgICAgICAgZi53cml0ZSgi
dWludDMyX3Qgc2xvdCIpCmRpZmYgLS1naXQgYS90YXJnZXQvaGV4YWdvbi9nZW5faGVscGVyX3By
b3Rvcy5weSBiL3RhcmdldC9oZXhhZ29uL2dlbl9oZWxwZXJfcHJvdG9zLnB5CmluZGV4IDNiNGU5
OTNmZDEuLjQ1MzBkN2JhOGQgMTAwNzU1Ci0tLSBhL3RhcmdldC9oZXhhZ29uL2dlbl9oZWxwZXJf
cHJvdG9zLnB5CisrKyBiL3RhcmdldC9oZXhhZ29uL2dlbl9oZWxwZXJfcHJvdG9zLnB5CkBAIC04
Miw2ICs4Miw3IEBAIGRlZiBnZW5faGVscGVyX3Byb3RvdHlwZShmLCB0YWcsIHRhZ3JlZ3MsIHRh
Z2ltbXMpOgogICAgICAgICAjIyBGaWd1cmUgb3V0IGhvdyBtYW55IGFyZ3VtZW50cyB0aGUgaGVs
cGVyIHdpbGwgdGFrZQogICAgICAgICBpZiAobnVtc2NhbGFycmVzdWx0cyA9PSAwKToKICAgICAg
ICAgICAgIGRlZl9oZWxwZXJfc2l6ZSA9IGxlbihyZWdzKStsZW4oaW1tcykrbnVtc2NhbGFycmVh
ZHdyaXRlKzEKKyAgICAgICAgICAgIGlmIGhleF9jb21tb24ubmVlZF9wa3RfaGFzX211bHRpX2Nv
Zih0YWcpOiBkZWZfaGVscGVyX3NpemUgKz0gMQogICAgICAgICAgICAgaWYgaGV4X2NvbW1vbi5u
ZWVkX3BhcnQxKHRhZyk6IGRlZl9oZWxwZXJfc2l6ZSArPSAxCiAgICAgICAgICAgICBpZiBoZXhf
Y29tbW9uLm5lZWRfc2xvdCh0YWcpOiBkZWZfaGVscGVyX3NpemUgKz0gMQogICAgICAgICAgICAg
Zi53cml0ZSgnREVGX0hFTFBFUl8lcyglcycgJSAoZGVmX2hlbHBlcl9zaXplLCB0YWcpKQpAQCAt
ODksNiArOTAsNyBAQCBkZWYgZ2VuX2hlbHBlcl9wcm90b3R5cGUoZiwgdGFnLCB0YWdyZWdzLCB0
YWdpbW1zKToKICAgICAgICAgICAgIGYud3JpdGUoJywgdm9pZCcgKQogICAgICAgICBlbHNlOgog
ICAgICAgICAgICAgZGVmX2hlbHBlcl9zaXplID0gbGVuKHJlZ3MpK2xlbihpbW1zKStudW1zY2Fs
YXJyZWFkd3JpdGUKKyAgICAgICAgICAgIGlmIGhleF9jb21tb24ubmVlZF9wa3RfaGFzX211bHRp
X2NvZih0YWcpOiBkZWZfaGVscGVyX3NpemUgKz0gMQogICAgICAgICAgICAgaWYgaGV4X2NvbW1v
bi5uZWVkX3BhcnQxKHRhZyk6IGRlZl9oZWxwZXJfc2l6ZSArPSAxCiAgICAgICAgICAgICBpZiBo
ZXhfY29tbW9uLm5lZWRfc2xvdCh0YWcpOiBkZWZfaGVscGVyX3NpemUgKz0gMQogICAgICAgICAg
ICAgZi53cml0ZSgnREVGX0hFTFBFUl8lcyglcycgJSAoZGVmX2hlbHBlcl9zaXplLCB0YWcpKQpA
QCAtMTI2LDcgKzEyOCw5IEBAIGRlZiBnZW5faGVscGVyX3Byb3RvdHlwZShmLCB0YWcsIHRhZ3Jl
Z3MsIHRhZ2ltbXMpOgogICAgICAgICBmb3IgaW1tbGV0dCxiaXRzLGltbXNoaWZ0IGluIGltbXM6
CiAgICAgICAgICAgICBmLndyaXRlKCIsIHMzMiIpCiAKLSAgICAgICAgIyMgQWRkIHRoZSBhcmd1
bWVudHMgZm9yIHRoZSBpbnN0cnVjdGlvbiBzbG90IGFuZCBwYXJ0MSAoaWYgbmVlZGVkKQorICAg
ICAgICAjIyBBZGQgdGhlIGFyZ3VtZW50cyBmb3IgdGhlIGluc3RydWN0aW9uIHBrdF9oYXNfbXVs
dGlfY29mLCBzbG90IGFuZAorICAgICAgICAjIyBwYXJ0MSAoaWYgbmVlZGVkKQorICAgICAgICBp
ZiBoZXhfY29tbW9uLm5lZWRfcGt0X2hhc19tdWx0aV9jb2YodGFnKTogZi53cml0ZSgnLCBpMzIn
KQogICAgICAgICBpZiBoZXhfY29tbW9uLm5lZWRfc2xvdCh0YWcpOiBmLndyaXRlKCcsIGkzMicg
KQogICAgICAgICBpZiBoZXhfY29tbW9uLm5lZWRfcGFydDEodGFnKTogZi53cml0ZSgnICwgaTMy
JyApCiAgICAgICAgIGYud3JpdGUoJylcbicpCmRpZmYgLS1naXQgYS90YXJnZXQvaGV4YWdvbi9n
ZW5fdGNnX2Z1bmNzLnB5IGIvdGFyZ2V0L2hleGFnb24vZ2VuX3RjZ19mdW5jcy5weQppbmRleCA2
ZGVhMDJiMGI5Li42NzA0NWM4MGJiIDEwMDc1NQotLS0gYS90YXJnZXQvaGV4YWdvbi9nZW5fdGNn
X2Z1bmNzLnB5CisrKyBiL3RhcmdldC9oZXhhZ29uL2dlbl90Y2dfZnVuY3MucHkKQEAgLTYxNSw2
ICs2MTUsOSBAQCBkZWYgZ2VuX3RjZ19mdW5jKGYsIHRhZywgcmVncywgaW1tcyk6CiAgICAgICAg
ICMjIEdlbmVyYXRlIHRoZSBjYWxsIHRvIHRoZSBoZWxwZXIKICAgICAgICAgZm9yIGltbWxldHQs
Yml0cyxpbW1zaGlmdCBpbiBpbW1zOgogICAgICAgICAgICAgZ2VuX2hlbHBlcl9kZWNsX2ltbShm
LGltbWxldHQpCisgICAgICAgIGlmIGhleF9jb21tb24ubmVlZF9wa3RfaGFzX211bHRpX2NvZih0
YWcpOgorICAgICAgICAgICAgZi53cml0ZSgiICAgIFRDR3YgcGt0X2hhc19tdWx0aV9jb2YgPSAi
KQorICAgICAgICAgICAgZi53cml0ZSgidGNnX2NvbnN0YW50X3RsKHBrdC0+cGt0X2hhc19tdWx0
aV9jb2YpO1xuIikKICAgICAgICAgaWYgaGV4X2NvbW1vbi5uZWVkX3BhcnQxKHRhZyk6CiAgICAg
ICAgICAgICBmLndyaXRlKCIgICAgVENHdiBwYXJ0MSA9IHRjZ19jb25zdGFudF90bChpbnNuLT5w
YXJ0MSk7XG4iKQogICAgICAgICBpZiBoZXhfY29tbW9uLm5lZWRfc2xvdCh0YWcpOgpAQCAtNjQ3
LDYgKzY1MCw4IEBAIGRlZiBnZW5fdGNnX2Z1bmMoZiwgdGFnLCByZWdzLCBpbW1zKToKICAgICAg
ICAgZm9yIGltbWxldHQsYml0cyxpbW1zaGlmdCBpbiBpbW1zOgogICAgICAgICAgICAgZ2VuX2hl
bHBlcl9jYWxsX2ltbShmLGltbWxldHQpCiAKKyAgICAgICAgaWYgaGV4X2NvbW1vbi5uZWVkX3Br
dF9oYXNfbXVsdGlfY29mKHRhZyk6CisgICAgICAgICAgICBmLndyaXRlKCIsIHBrdF9oYXNfbXVs
dGlfY29mIikKICAgICAgICAgaWYgaGV4X2NvbW1vbi5uZWVkX3Nsb3QodGFnKTogZi53cml0ZSgi
LCBzbG90IikKICAgICAgICAgaWYgaGV4X2NvbW1vbi5uZWVkX3BhcnQxKHRhZyk6IGYud3JpdGUo
IiwgcGFydDEiICkKICAgICAgICAgZi53cml0ZSgiKTtcbiIpCmRpZmYgLS1naXQgYS90YXJnZXQv
aGV4YWdvbi9oZXhfY29tbW9uLnB5IGIvdGFyZ2V0L2hleGFnb24vaGV4X2NvbW1vbi5weQppbmRl
eCBkOWJhN2RmNzg2Li5mNWI1ODUwMWRiIDEwMDc1NQotLS0gYS90YXJnZXQvaGV4YWdvbi9oZXhf
Y29tbW9uLnB5CisrKyBiL3RhcmdldC9oZXhhZ29uL2hleF9jb21tb24ucHkKQEAgLTIwNyw2ICsy
MDcsOSBAQCBkZWYgbmVlZF9wYXJ0MSh0YWcpOgogZGVmIG5lZWRfZWEodGFnKToKICAgICByZXR1
cm4gcmUuY29tcGlsZShyIlxiRUFcYiIpLnNlYXJjaChzZW1kaWN0W3RhZ10pCiAKK2RlZiBuZWVk
X3BrdF9oYXNfbXVsdGlfY29mKHRhZyk6CisgICAgcmV0dXJuICdBX0NPRicgaW4gYXR0cmliZGlj
dFt0YWddCisKIGRlZiBza2lwX3FlbXVfaGVscGVyKHRhZyk6CiAgICAgcmV0dXJuIHRhZyBpbiBv
dmVycmlkZXMua2V5cygpCiAKLS0gCjIuMTcuMQoK

