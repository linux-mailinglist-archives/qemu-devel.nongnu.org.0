Return-Path: <qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org>
X-Original-To: lists+qemu-devel@lfdr.de
Delivered-To: lists+qemu-devel@lfdr.de
Received: from lists.gnu.org (lists.gnu.org [209.51.188.17])
	by mail.lfdr.de (Postfix) with ESMTPS id EB729312A7C
	for <lists+qemu-devel@lfdr.de>; Mon,  8 Feb 2021 07:08:24 +0100 (CET)
Received: from localhost ([::1]:45810 helo=lists1p.gnu.org)
	by lists.gnu.org with esmtp (Exim 4.90_1)
	(envelope-from <qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org>)
	id 1l8zii-0001nB-14
	for lists+qemu-devel@lfdr.de; Mon, 08 Feb 2021 01:08:24 -0500
Received: from eggs.gnu.org ([2001:470:142:3::10]:56044)
 by lists.gnu.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256)
 (Exim 4.90_1) (envelope-from <tsimpson@qualcomm.com>)
 id 1l8zO9-0007vx-Eh
 for qemu-devel@nongnu.org; Mon, 08 Feb 2021 00:47:09 -0500
Received: from alexa-out-sd-01.qualcomm.com ([199.106.114.38]:14438)
 by eggs.gnu.org with esmtps (TLS1.2:RSA_AES_256_CBC_SHA1:256)
 (Exim 4.90_1) (envelope-from <tsimpson@qualcomm.com>)
 id 1l8zNz-0006ST-0F
 for qemu-devel@nongnu.org; Mon, 08 Feb 2021 00:47:09 -0500
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple;
 d=quicinc.com; i=@quicinc.com; q=dns/txt; s=qcdkim;
 t=1612763219; x=1644299219;
 h=from:to:cc:subject:date:message-id:in-reply-to:
 references:mime-version:content-transfer-encoding;
 bh=YDtjG0IZmbNhBm82ZlWQoreALnt+KXAQFQ6esFUZF8g=;
 b=mtT9NiJv4ytOgriyAi+nAMwIXqvthUriI827pl2wtbEW4ilFr+gX+rC2
 fisLIcmCXUdqHariUMcnFNzlAKWnMsEZRzbXEDIh+s+cNezyUwaXXMB5u
 fPGNL6UMVL49lv2laCsbxMtGmdH9B5uVpO995ELi+fGoOMAUVqOL4QnRk w=;
Received: from unknown (HELO ironmsg03-sd.qualcomm.com) ([10.53.140.143])
 by alexa-out-sd-01.qualcomm.com with ESMTP; 07 Feb 2021 21:46:31 -0800
X-QCInternal: smtphost
Received: from vu-tsimpson-aus.qualcomm.com (HELO
 vu-tsimpson1-aus.qualcomm.com) ([10.222.150.1])
 by ironmsg03-sd.qualcomm.com with ESMTP; 07 Feb 2021 21:46:30 -0800
Received: by vu-tsimpson1-aus.qualcomm.com (Postfix, from userid 47164)
 id 4A5352A73; Sun,  7 Feb 2021 23:46:30 -0600 (CST)
From: Taylor Simpson <tsimpson@quicinc.com>
To: qemu-devel@nongnu.org
Subject: [PATCH v8 20/35] Hexagon (target/hexagon) generator phase 2 -
 generate header files
Date: Sun,  7 Feb 2021 23:46:10 -0600
Message-Id: <1612763186-18161-21-git-send-email-tsimpson@quicinc.com>
X-Mailer: git-send-email 2.7.4
In-Reply-To: <1612763186-18161-1-git-send-email-tsimpson@quicinc.com>
References: <1612763186-18161-1-git-send-email-tsimpson@quicinc.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Received-SPF: pass client-ip=199.106.114.38;
 envelope-from=tsimpson@qualcomm.com; helo=alexa-out-sd-01.qualcomm.com
X-Spam_score_int: -40
X-Spam_score: -4.1
X-Spam_bar: ----
X-Spam_report: (-4.1 / 5.0 requ) BAYES_00=-1.9, DKIM_SIGNED=0.1,
 DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1, HEADER_FROM_DIFFERENT_DOMAINS=0.248,
 RCVD_IN_DNSWL_MED=-2.3, SPF_HELO_NONE=0.001,
 SPF_PASS=-0.001 autolearn=ham autolearn_force=no
X-Spam_action: no action
X-BeenThere: qemu-devel@nongnu.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: <qemu-devel.nongnu.org>
List-Unsubscribe: <https://lists.nongnu.org/mailman/options/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=unsubscribe>
List-Archive: <https://lists.nongnu.org/archive/html/qemu-devel>
List-Post: <mailto:qemu-devel@nongnu.org>
List-Help: <mailto:qemu-devel-request@nongnu.org?subject=help>
List-Subscribe: <https://lists.nongnu.org/mailman/listinfo/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=subscribe>
Cc: ale@rev.ng, bcain@quicinc.com, philmd@redhat.com,
 richard.henderson@linaro.org, laurent@vivier.eu, tsimpson@quicinc.com,
 alex.bennee@linaro.org
Errors-To: qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org
Sender: "Qemu-devel" <qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org>

UHl0aG9uIHNjcmlwdHMgZ2VuZXJhdGUgdGhlIGZvbGxvd2luZyBmaWxlcwogICAgaGVscGVyX3By
b3Rvc19nZW5lcmF0ZWQuaC5pbmMKICAgICAgICBGb3IgZWFjaCBpbnN0cnVjdGlvbiB3ZSBjcmVh
dGUgREVGX0hFTFBFUiBmdW5jdGlvbiBwcm90b3R5cGUKICAgIGhlbHBlcl9mdW5jc19nZW5lcmF0
ZWQuYy5pbmMKICAgICAgICBGb3IgZWFjaCBpbnN0cnVjdGlvbiB3ZSBjcmVhdGUgdGhlIGhlbHBl
ciBmdW5jdGlvbiBkZWZpbml0aW9uCiAgICB0Y2dfZnVuY3NfZ2VuZXJhdGVkLmMuaW5jCiAgICAg
ICAgRm9yIGVhY2ggaW5zdHJ1Y3Rpb24gd2UgY3JlYXRlIFRDRyBjb2RlIHRvIGdlbmVyYXRlIGNh
bGwgdG8gaGVscGVyCiAgICB0Y2dfZnVuY190YWJsZV9nZW5lcmF0ZWQuYy5pbmMKICAgICAgICBU
YWJsZSBvZiBmdW5jdGlvbiBwb2ludGVycyBpbmRleGVkIGJ5IG9wY29kZQogICAgc2hvcnRjb2Rl
X2dlbmVyYXRlZC5oLmluYwogICAgICAgIEdlbmVyYXRlIGEgdGFibGUgb2YgaW5zdHJ1Y3Rpb24g
InNob3J0Y29kZSIgc2VtYW50aWNzCiAgICBvcGNvZGVzX2RlZl9nZW5lcmF0ZWQuaC5pbmMKICAg
ICAgICBHaXZlcyBhIGxpc3Qgb2YgYWxsIHRoZSBvcGNvZGVzCiAgICBvcF9hdHRyaWJzX2dlbmVy
YXRlZC5oLmluYwogICAgICAgIExpc3RzIGFsbCB0aGUgYXR0cmlidXRlcyBhc3NvY2lhdGVkIHdp
dGggZWFjaCBpbnN0cnVjdGlvbgogICAgb3BfcmVnc19nZW5lcmF0ZWQuaC5pbmMKICAgICAgICBM
aXN0cyB0aGUgcmVnaXN0ZXIgYW5kIGltbWVkaWF0ZSBvcGVyYW5kcyBmb3IgZWFjaCBpbnN0cnVj
dGlvbgogICAgcHJpbnRpbnNuX2dlbmVyYXRlZC5oLmluYwogICAgICAgIERhdGEgZm9yIHByaW50
aW5nIChkaXNhc3NlbWJsaW5nKSBlYWNoIGluc3RydWN0aW9uIChmb3JtYXQKICAgICAgICBzdHJp
bmcgKyBvcGVyYW5kcykKClNpZ25lZC1vZmYtYnk6IFRheWxvciBTaW1wc29uIDx0c2ltcHNvbkBx
dWljaW5jLmNvbT4KLS0tCiB0YXJnZXQvaGV4YWdvbi9nZW5faGVscGVyX2Z1bmNzLnB5ICAgfCAy
MjAgKysrKysrKysrKysrKysrKwogdGFyZ2V0L2hleGFnb24vZ2VuX2hlbHBlcl9wcm90b3MucHkg
IHwgMTUwICsrKysrKysrKysrCiB0YXJnZXQvaGV4YWdvbi9nZW5fb3BfYXR0cmlicy5weSAgICAg
fCAgMzkgKysrCiB0YXJnZXQvaGV4YWdvbi9nZW5fb3BfcmVncy5weSAgICAgICAgfCAxMTAgKysr
KysrKysKIHRhcmdldC9oZXhhZ29uL2dlbl9vcGNvZGVzX2RlZi5weSAgICB8ICAzNiArKysKIHRh
cmdldC9oZXhhZ29uL2dlbl9wcmludGluc24ucHkgICAgICB8IDE3MyArKysrKysrKysrKysrCiB0
YXJnZXQvaGV4YWdvbi9nZW5fc2hvcnRjb2RlLnB5ICAgICAgfCAgNjAgKysrKysKIHRhcmdldC9o
ZXhhZ29uL2dlbl90Y2dfZnVuY190YWJsZS5weSB8ICA1OCArKysrKwogdGFyZ2V0L2hleGFnb24v
Z2VuX3RjZ19mdW5jcy5weSAgICAgIHwgNDg1ICsrKysrKysrKysrKysrKysrKysrKysrKysrKysr
KysrKysrCiB0YXJnZXQvaGV4YWdvbi9oZXhfY29tbW9uLnB5ICAgICAgICAgfCAyMzQgKysrKysr
KysrKysrKysrKysKIDEwIGZpbGVzIGNoYW5nZWQsIDE1NjUgaW5zZXJ0aW9ucygrKQogY3JlYXRl
IG1vZGUgMTAwNzU1IHRhcmdldC9oZXhhZ29uL2dlbl9oZWxwZXJfZnVuY3MucHkKIGNyZWF0ZSBt
b2RlIDEwMDc1NSB0YXJnZXQvaGV4YWdvbi9nZW5faGVscGVyX3Byb3Rvcy5weQogY3JlYXRlIG1v
ZGUgMTAwNzU1IHRhcmdldC9oZXhhZ29uL2dlbl9vcF9hdHRyaWJzLnB5CiBjcmVhdGUgbW9kZSAx
MDA3NTUgdGFyZ2V0L2hleGFnb24vZ2VuX29wX3JlZ3MucHkKIGNyZWF0ZSBtb2RlIDEwMDc1NSB0
YXJnZXQvaGV4YWdvbi9nZW5fb3Bjb2Rlc19kZWYucHkKIGNyZWF0ZSBtb2RlIDEwMDc1NSB0YXJn
ZXQvaGV4YWdvbi9nZW5fcHJpbnRpbnNuLnB5CiBjcmVhdGUgbW9kZSAxMDA3NTUgdGFyZ2V0L2hl
eGFnb24vZ2VuX3Nob3J0Y29kZS5weQogY3JlYXRlIG1vZGUgMTAwNzU1IHRhcmdldC9oZXhhZ29u
L2dlbl90Y2dfZnVuY190YWJsZS5weQogY3JlYXRlIG1vZGUgMTAwNzU1IHRhcmdldC9oZXhhZ29u
L2dlbl90Y2dfZnVuY3MucHkKIGNyZWF0ZSBtb2RlIDEwMDc1NSB0YXJnZXQvaGV4YWdvbi9oZXhf
Y29tbW9uLnB5CgpkaWZmIC0tZ2l0IGEvdGFyZ2V0L2hleGFnb24vZ2VuX2hlbHBlcl9mdW5jcy5w
eSBiL3RhcmdldC9oZXhhZ29uL2dlbl9oZWxwZXJfZnVuY3MucHkKbmV3IGZpbGUgbW9kZSAxMDA3
NTUKaW5kZXggMDAwMDAwMC4uMmIxYzVkOAotLS0gL2Rldi9udWxsCisrKyBiL3RhcmdldC9oZXhh
Z29uL2dlbl9oZWxwZXJfZnVuY3MucHkKQEAgLTAsMCArMSwyMjAgQEAKKyMhL3Vzci9iaW4vZW52
IHB5dGhvbjMKKworIyMKKyMjICBDb3B5cmlnaHQoYykgMjAxOS0yMDIxIFF1YWxjb21tIElubm92
YXRpb24gQ2VudGVyLCBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCisjIworIyMgIFRoaXMgcHJv
Z3JhbSBpcyBmcmVlIHNvZnR3YXJlOyB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9k
aWZ5CisjIyAgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGlj
ZW5zZSBhcyBwdWJsaXNoZWQgYnkKKyMjICB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uOyBl
aXRoZXIgdmVyc2lvbiAyIG9mIHRoZSBMaWNlbnNlLCBvcgorIyMgIChhdCB5b3VyIG9wdGlvbikg
YW55IGxhdGVyIHZlcnNpb24uCisjIworIyMgIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBp
biB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLAorIyMgIGJ1dCBXSVRIT1VUIEFOWSBX
QVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mCisjIyAgTUVSQ0hB
TlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZQor
IyMgIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuCisjIworIyMg
IFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1Ymxp
YyBMaWNlbnNlCisjIyAgYWxvbmcgd2l0aCB0aGlzIHByb2dyYW07IGlmIG5vdCwgc2VlIDxodHRw
Oi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi4KKyMjCisKK2ltcG9ydCBzeXMKK2ltcG9ydCByZQor
aW1wb3J0IHN0cmluZworaW1wb3J0IGhleF9jb21tb24KKworIyMKKyMjIEhlbHBlcnMgZm9yIGdl
bl9oZWxwZXJfZnVuY3Rpb24KKyMjCitkZWYgZ2VuX2RlY2xfZWEoZik6CisgICAgZi53cml0ZSgi
ICAgIHVpbnQzMl90IEVBO1xuIikKKworZGVmIGdlbl9oZWxwZXJfcmV0dXJuX3R5cGUoZixyZWd0
eXBlLHJlZ2lkLHJlZ25vKToKKyAgICBpZiByZWdubyA+IDEgOiBmLndyaXRlKCIsICIpCisgICAg
Zi53cml0ZSgiaW50MzJfdCIpCisKK2RlZiBnZW5faGVscGVyX3JldHVybl90eXBlX3BhaXIoZixy
ZWd0eXBlLHJlZ2lkLHJlZ25vKToKKyAgICBpZiByZWdubyA+IDEgOiBmLndyaXRlKCIsICIpCisg
ICAgZi53cml0ZSgiaW50NjRfdCIpCisKK2RlZiBnZW5faGVscGVyX2FyZyhmLHJlZ3R5cGUscmVn
aWQscmVnbm8pOgorICAgIGlmIHJlZ25vID4gMCA6IGYud3JpdGUoIiwgIiApCisgICAgZi53cml0
ZSgiaW50MzJfdCAlcyVzViIgJSAocmVndHlwZSxyZWdpZCkpCisKK2RlZiBnZW5faGVscGVyX2Fy
Z19uZXcoZixyZWd0eXBlLHJlZ2lkLHJlZ25vKToKKyAgICBpZiByZWdubyA+PSAwIDogZi53cml0
ZSgiLCAiICkKKyAgICBmLndyaXRlKCJpbnQzMl90ICVzJXNOIiAlIChyZWd0eXBlLHJlZ2lkKSkK
KworZGVmIGdlbl9oZWxwZXJfYXJnX3BhaXIoZixyZWd0eXBlLHJlZ2lkLHJlZ25vKToKKyAgICBp
ZiByZWdubyA+PSAwIDogZi53cml0ZSgiLCAiKQorICAgIGYud3JpdGUoImludDY0X3QgJXMlc1Yi
ICUgKHJlZ3R5cGUscmVnaWQpKQorCitkZWYgZ2VuX2hlbHBlcl9hcmdfb3BuKGYscmVndHlwZSxy
ZWdpZCxpLHRhZyk6CisgICAgaWYgKGhleF9jb21tb24uaXNfcGFpcihyZWdpZCkpOgorICAgICAg
ICBnZW5faGVscGVyX2FyZ19wYWlyKGYscmVndHlwZSxyZWdpZCxpKQorICAgIGVsaWYgKGhleF9j
b21tb24uaXNfc2luZ2xlKHJlZ2lkKSk6CisgICAgICAgIGlmIGhleF9jb21tb24uaXNfb2xkX3Zh
bChyZWd0eXBlLCByZWdpZCwgdGFnKToKKyAgICAgICAgICAgIGdlbl9oZWxwZXJfYXJnKGYscmVn
dHlwZSxyZWdpZCxpKQorICAgICAgICBlbGlmIGhleF9jb21tb24uaXNfbmV3X3ZhbChyZWd0eXBl
LCByZWdpZCwgdGFnKToKKyAgICAgICAgICAgIGdlbl9oZWxwZXJfYXJnX25ldyhmLHJlZ3R5cGUs
cmVnaWQsaSkKKyAgICAgICAgZWxzZToKKyAgICAgICAgICAgIHByaW50KCJCYWQgcmVnaXN0ZXIg
cGFyc2U6ICIscmVndHlwZSxyZWdpZCx0b3NzLG51bXJlZ3MpCisgICAgZWxzZToKKyAgICAgICAg
cHJpbnQoIkJhZCByZWdpc3RlciBwYXJzZTogIixyZWd0eXBlLHJlZ2lkLHRvc3MsbnVtcmVncykK
KworZGVmIGdlbl9oZWxwZXJfYXJnX2ltbShmLGltbWxldHQpOgorICAgIGYud3JpdGUoIiwgaW50
MzJfdCAlcyIgJSAoaGV4X2NvbW1vbi5pbW1fbmFtZShpbW1sZXR0KSkpCisKK2RlZiBnZW5faGVs
cGVyX2Rlc3RfZGVjbChmLHJlZ3R5cGUscmVnaWQscmVnbm8sc3ViZmllbGQ9IiIpOgorICAgIGYu
d3JpdGUoIiAgICBpbnQzMl90ICVzJXNWJXMgPSAwO1xuIiAlIFwKKyAgICAgICAgKHJlZ3R5cGUs
cmVnaWQsc3ViZmllbGQpKQorCitkZWYgZ2VuX2hlbHBlcl9kZXN0X2RlY2xfcGFpcihmLHJlZ3R5
cGUscmVnaWQscmVnbm8sc3ViZmllbGQ9IiIpOgorICAgIGYud3JpdGUoIiAgICBpbnQ2NF90ICVz
JXNWJXMgPSAwO1xuIiAlIFwKKyAgICAgICAgKHJlZ3R5cGUscmVnaWQsc3ViZmllbGQpKQorCitk
ZWYgZ2VuX2hlbHBlcl9kZXN0X2RlY2xfb3BuKGYscmVndHlwZSxyZWdpZCxpKToKKyAgICBpZiAo
aGV4X2NvbW1vbi5pc19wYWlyKHJlZ2lkKSk6CisgICAgICAgIGdlbl9oZWxwZXJfZGVzdF9kZWNs
X3BhaXIoZixyZWd0eXBlLHJlZ2lkLGkpCisgICAgZWxpZiAoaGV4X2NvbW1vbi5pc19zaW5nbGUo
cmVnaWQpKToKKyAgICAgICAgZ2VuX2hlbHBlcl9kZXN0X2RlY2woZixyZWd0eXBlLHJlZ2lkLGkp
CisgICAgZWxzZToKKyAgICAgICAgcHJpbnQoIkJhZCByZWdpc3RlciBwYXJzZTogIixyZWd0eXBl
LHJlZ2lkLHRvc3MsbnVtcmVncykKKworZGVmIGdlbl9oZWxwZXJfcmV0dXJuKGYscmVndHlwZSxy
ZWdpZCxyZWdubyk6CisgICAgZi53cml0ZSgiICAgIHJldHVybiAlcyVzVjtcbiIgJSAocmVndHlw
ZSxyZWdpZCkpCisKK2RlZiBnZW5faGVscGVyX3JldHVybl9wYWlyKGYscmVndHlwZSxyZWdpZCxy
ZWdubyk6CisgICAgZi53cml0ZSgiICAgIHJldHVybiAlcyVzVjtcbiIgJSAocmVndHlwZSxyZWdp
ZCkpCisKK2RlZiBnZW5faGVscGVyX3JldHVybl9vcG4oZiwgcmVndHlwZSwgcmVnaWQsIGkpOgor
ICAgIGlmIChoZXhfY29tbW9uLmlzX3BhaXIocmVnaWQpKToKKyAgICAgICAgZ2VuX2hlbHBlcl9y
ZXR1cm5fcGFpcihmLHJlZ3R5cGUscmVnaWQsaSkKKyAgICBlbGlmIChoZXhfY29tbW9uLmlzX3Np
bmdsZShyZWdpZCkpOgorICAgICAgICBnZW5faGVscGVyX3JldHVybihmLHJlZ3R5cGUscmVnaWQs
aSkKKyAgICBlbHNlOgorICAgICAgICBwcmludCgiQmFkIHJlZ2lzdGVyIHBhcnNlOiAiLHJlZ3R5
cGUscmVnaWQsdG9zcyxudW1yZWdzKQorCisjIworIyMgR2VuZXJhdGUgdGhlIFRDRyBjb2RlIHRv
IGNhbGwgdGhlIGhlbHBlcgorIyMgICAgIEZvciBBMl9hZGQ6IFJkMzI9YWRkKFJzMzIsUnQzMiks
IHsgUmRWPVJzVitSdFY7fQorIyMgICAgIFdlIHByb2R1Y2U6CisjIyAgICAgICBpbnQzMl90IEhF
TFBFUihBMl9hZGQpKENQVUhleGFnb25TdGF0ZSAqZW52LCBpbnQzMl90IFJzViwgaW50MzJfdCBS
dFYpCisjIyAgICAgICB7CisjIyAgICAgICAgICAgdWludDMyX3Qgc2xvdCBfX2F0dHJpYnV0ZV9f
KHVudXNlZCkpID0gNDsKKyMjICAgICAgICAgICBpbnQzMl90IFJkViA9IDA7CisjIyAgICAgICAg
ICAgeyBSZFY9UnNWK1J0Vjt9CisjIyAgICAgICAgICAgQ09VTlRfSEVMUEVSKEEyX2FkZCk7Cisj
IyAgICAgICAgICAgcmV0dXJuIFJkVjsKKyMjICAgICAgIH0KKyMjCitkZWYgZ2VuX2hlbHBlcl9m
dW5jdGlvbihmLCB0YWcsIHRhZ3JlZ3MsIHRhZ2ltbXMpOgorICAgIHJlZ3MgPSB0YWdyZWdzW3Rh
Z10KKyAgICBpbW1zID0gdGFnaW1tc1t0YWddCisKKyAgICBudW1yZXN1bHRzID0gMAorICAgIG51
bXNjYWxhcnJlc3VsdHMgPSAwCisgICAgbnVtc2NhbGFycmVhZHdyaXRlID0gMAorICAgIGZvciBy
ZWd0eXBlLHJlZ2lkLHRvc3MsbnVtcmVncyBpbiByZWdzOgorICAgICAgICBpZiAoaGV4X2NvbW1v
bi5pc193cml0dGVuKHJlZ2lkKSk6CisgICAgICAgICAgICBudW1yZXN1bHRzICs9IDEKKyAgICAg
ICAgICAgIGlmIChoZXhfY29tbW9uLmlzX3NjYWxhcl9yZWcocmVndHlwZSkpOgorICAgICAgICAg
ICAgICAgIG51bXNjYWxhcnJlc3VsdHMgKz0gMQorICAgICAgICBpZiAoaGV4X2NvbW1vbi5pc19y
ZWFkd3JpdGUocmVnaWQpKToKKyAgICAgICAgICAgIGlmIChoZXhfY29tbW9uLmlzX3NjYWxhcl9y
ZWcocmVndHlwZSkpOgorICAgICAgICAgICAgICAgIG51bXNjYWxhcnJlYWR3cml0ZSArPSAxCisK
KyAgICBpZiAobnVtc2NhbGFycmVzdWx0cyA+IDEpOgorICAgICAgICAjIyBUaGUgaGVscGVyIGlz
IGJvZ3VzIHdoZW4gdGhlcmUgaXMgbW9yZSB0aGFuIG9uZSByZXN1bHQKKyAgICAgICAgZi53cml0
ZSgidm9pZCBIRUxQRVIoJXMpKENQVUhleGFnb25TdGF0ZSAqZW52KSB7IEJPR1VTX0hFTFBFUigl
cyk7IH1cbiIKKyAgICAgICAgICAgICAgICAlICh0YWcsIHRhZykpCisgICAgZWxzZToKKyAgICAg
ICAgIyMgVGhlIHJldHVybiB0eXBlIG9mIHRoZSBmdW5jdGlvbiBpcyB0aGUgdHlwZSBvZiB0aGUg
ZGVzdGluYXRpb24KKyAgICAgICAgIyMgcmVnaXN0ZXIKKyAgICAgICAgaT0wCisgICAgICAgIGZv
ciByZWd0eXBlLHJlZ2lkLHRvc3MsbnVtcmVncyBpbiByZWdzOgorICAgICAgICAgICAgaWYgKGhl
eF9jb21tb24uaXNfd3JpdHRlbihyZWdpZCkpOgorICAgICAgICAgICAgICAgIGlmIChoZXhfY29t
bW9uLmlzX3BhaXIocmVnaWQpKToKKyAgICAgICAgICAgICAgICAgICAgZ2VuX2hlbHBlcl9yZXR1
cm5fdHlwZV9wYWlyKGYscmVndHlwZSxyZWdpZCxpKQorICAgICAgICAgICAgICAgIGVsaWYgKGhl
eF9jb21tb24uaXNfc2luZ2xlKHJlZ2lkKSk6CisgICAgICAgICAgICAgICAgICAgIGdlbl9oZWxw
ZXJfcmV0dXJuX3R5cGUoZixyZWd0eXBlLHJlZ2lkLGkpCisgICAgICAgICAgICAgICAgZWxzZToK
KyAgICAgICAgICAgICAgICAgICAgcHJpbnQoIkJhZCByZWdpc3RlciBwYXJzZTogIixyZWd0eXBl
LHJlZ2lkLHRvc3MsbnVtcmVncykKKyAgICAgICAgICAgIGkgKz0gMQorCisgICAgICAgIGlmIChu
dW1zY2FsYXJyZXN1bHRzID09IDApOgorICAgICAgICAgICAgZi53cml0ZSgidm9pZCIpCisgICAg
ICAgIGYud3JpdGUoIiBIRUxQRVIoJXMpKENQVUhleGFnb25TdGF0ZSAqZW52IiAlIHRhZykKKwor
ICAgICAgICBpID0gMQorCisgICAgICAgICMjIEFyZ3VtZW50cyB0byB0aGUgaGVscGVyIGZ1bmN0
aW9uIGFyZSB0aGUgc291cmNlIHJlZ3MgYW5kIGltbWVkaWF0ZXMKKyAgICAgICAgZm9yIHJlZ3R5
cGUscmVnaWQsdG9zcyxudW1yZWdzIGluIHJlZ3M6CisgICAgICAgICAgICBpZiAoaGV4X2NvbW1v
bi5pc19yZWFkKHJlZ2lkKSk6CisgICAgICAgICAgICAgICAgZ2VuX2hlbHBlcl9hcmdfb3BuKGYs
cmVndHlwZSxyZWdpZCxpLHRhZykKKyAgICAgICAgICAgICAgICBpICs9IDEKKyAgICAgICAgZm9y
IGltbWxldHQsYml0cyxpbW1zaGlmdCBpbiBpbW1zOgorICAgICAgICAgICAgZ2VuX2hlbHBlcl9h
cmdfaW1tKGYsaW1tbGV0dCkKKyAgICAgICAgICAgIGkgKz0gMQorICAgICAgICBpZiBoZXhfY29t
bW9uLm5lZWRfc2xvdCh0YWcpOgorICAgICAgICAgICAgaWYgaSA+IDA6IGYud3JpdGUoIiwgIikK
KyAgICAgICAgICAgIGYud3JpdGUoInVpbnQzMl90IHNsb3QiKQorICAgICAgICAgICAgaSArPSAx
CisgICAgICAgIGlmIGhleF9jb21tb24ubmVlZF9wYXJ0MSh0YWcpOgorICAgICAgICAgICAgaWYg
aSA+IDA6IGYud3JpdGUoIiwgIikKKyAgICAgICAgICAgIGYud3JpdGUoInVpbnQzMl90IHBhcnQx
IikKKyAgICAgICAgZi53cml0ZSgiKVxue1xuIikKKyAgICAgICAgaWYgKG5vdCBoZXhfY29tbW9u
Lm5lZWRfc2xvdCh0YWcpKToKKyAgICAgICAgICAgIGYud3JpdGUoIiAgICB1aW50MzJfdCBzbG90
IF9fYXR0cmlidXRlX18oKHVudXNlZCkpID0gNDtcbiIgKQorICAgICAgICBpZiBoZXhfY29tbW9u
Lm5lZWRfZWEodGFnKTogZ2VuX2RlY2xfZWEoZikKKyAgICAgICAgIyMgRGVjbGFyZSB0aGUgcmV0
dXJuIHZhcmlhYmxlCisgICAgICAgIGk9MAorICAgICAgICBmb3IgcmVndHlwZSxyZWdpZCx0b3Nz
LG51bXJlZ3MgaW4gcmVnczoKKyAgICAgICAgICAgIGlmIChoZXhfY29tbW9uLmlzX3dyaXRlb25s
eShyZWdpZCkpOgorICAgICAgICAgICAgICAgIGdlbl9oZWxwZXJfZGVzdF9kZWNsX29wbihmLHJl
Z3R5cGUscmVnaWQsaSkKKyAgICAgICAgICAgIGkgKz0gMQorCisgICAgICAgIGlmICdBX0ZQT1An
IGluIGhleF9jb21tb24uYXR0cmliZGljdFt0YWddOgorICAgICAgICAgICAgZi53cml0ZSgnICAg
IGFyY2hfZnBvcF9zdGFydChlbnYpO1xuJyk7CisKKyAgICAgICAgZi53cml0ZSgiICAgICVzXG4i
ICUgaGV4X2NvbW1vbi5zZW1kaWN0W3RhZ10pCisKKyAgICAgICAgaWYgJ0FfRlBPUCcgaW4gaGV4
X2NvbW1vbi5hdHRyaWJkaWN0W3RhZ106CisgICAgICAgICAgICBmLndyaXRlKCcgICAgYXJjaF9m
cG9wX2VuZChlbnYpO1xuJyk7CisKKyAgICAgICAgIyMgU2F2ZS9yZXR1cm4gdGhlIHJldHVybiB2
YXJpYWJsZQorICAgICAgICBmb3IgcmVndHlwZSxyZWdpZCx0b3NzLG51bXJlZ3MgaW4gcmVnczoK
KyAgICAgICAgICAgIGlmIChoZXhfY29tbW9uLmlzX3dyaXR0ZW4ocmVnaWQpKToKKyAgICAgICAg
ICAgICAgICBnZW5faGVscGVyX3JldHVybl9vcG4oZiwgcmVndHlwZSwgcmVnaWQsIGkpCisgICAg
ICAgIGYud3JpdGUoIn1cblxuIikKKyAgICAgICAgIyMgRW5kIG9mIHRoZSBoZWxwZXIgZGVmaW5p
dGlvbgorCitkZWYgbWFpbigpOgorICAgIGhleF9jb21tb24ucmVhZF9zZW1hbnRpY3NfZmlsZShz
eXMuYXJndlsxXSkKKyAgICBoZXhfY29tbW9uLnJlYWRfYXR0cmlic19maWxlKHN5cy5hcmd2WzJd
KQorICAgIGhleF9jb21tb24ucmVhZF9vdmVycmlkZXNfZmlsZShzeXMuYXJndlszXSkKKyAgICBo
ZXhfY29tbW9uLmNhbGN1bGF0ZV9hdHRyaWJzKCkKKyAgICB0YWdyZWdzID0gaGV4X2NvbW1vbi5n
ZXRfdGFncmVncygpCisgICAgdGFnaW1tcyA9IGhleF9jb21tb24uZ2V0X3RhZ2ltbXMoKQorCisg
ICAgd2l0aCBvcGVuKHN5cy5hcmd2WzRdLCAndycpIGFzIGY6CisgICAgICAgIGZvciB0YWcgaW4g
aGV4X2NvbW1vbi50YWdzOgorICAgICAgICAgICAgIyMgU2tpcCB0aGUgcHJpdiBpbnN0cnVjdGlv
bnMKKyAgICAgICAgICAgIGlmICggIkFfUFJJViIgaW4gaGV4X2NvbW1vbi5hdHRyaWJkaWN0W3Rh
Z10gKSA6CisgICAgICAgICAgICAgICAgY29udGludWUKKyAgICAgICAgICAgICMjIFNraXAgdGhl
IGd1ZXN0IGluc3RydWN0aW9ucworICAgICAgICAgICAgaWYgKCAiQV9HVUVTVCIgaW4gaGV4X2Nv
bW1vbi5hdHRyaWJkaWN0W3RhZ10gKSA6CisgICAgICAgICAgICAgICAgY29udGludWUKKyAgICAg
ICAgICAgICMjIFNraXAgdGhlIGRpYWcgaW5zdHJ1Y3Rpb25zCisgICAgICAgICAgICBpZiAoIHRh
ZyA9PSAiWTZfZGlhZyIgKSA6CisgICAgICAgICAgICAgICAgY29udGludWUKKyAgICAgICAgICAg
IGlmICggdGFnID09ICJZNl9kaWFnMCIgKSA6CisgICAgICAgICAgICAgICAgY29udGludWUKKyAg
ICAgICAgICAgIGlmICggdGFnID09ICJZNl9kaWFnMSIgKSA6CisgICAgICAgICAgICAgICAgY29u
dGludWUKKyAgICAgICAgICAgIGlmICggaGV4X2NvbW1vbi5za2lwX3FlbXVfaGVscGVyKHRhZykg
KToKKyAgICAgICAgICAgICAgICBjb250aW51ZQorCisgICAgICAgICAgICBnZW5faGVscGVyX2Z1
bmN0aW9uKGYsIHRhZywgdGFncmVncywgdGFnaW1tcykKKworaWYgX19uYW1lX18gPT0gIl9fbWFp
bl9fIjoKKyAgICBtYWluKCkKZGlmZiAtLWdpdCBhL3RhcmdldC9oZXhhZ29uL2dlbl9oZWxwZXJf
cHJvdG9zLnB5IGIvdGFyZ2V0L2hleGFnb24vZ2VuX2hlbHBlcl9wcm90b3MucHkKbmV3IGZpbGUg
bW9kZSAxMDA3NTUKaW5kZXggMDAwMDAwMC4uZWE0MTAwNwotLS0gL2Rldi9udWxsCisrKyBiL3Rh
cmdldC9oZXhhZ29uL2dlbl9oZWxwZXJfcHJvdG9zLnB5CkBAIC0wLDAgKzEsMTUwIEBACisjIS91
c3IvYmluL2VudiBweXRob24zCisKKyMjCisjIyAgQ29weXJpZ2h0KGMpIDIwMTktMjAyMSBRdWFs
Y29tbSBJbm5vdmF0aW9uIENlbnRlciwgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLgorIyMKKyMj
ICBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTsgeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQg
YW5kL29yIG1vZGlmeQorIyMgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwg
UHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5CisjIyAgdGhlIEZyZWUgU29mdHdhcmUgRm91
bmRhdGlvbjsgZWl0aGVyIHZlcnNpb24gMiBvZiB0aGUgTGljZW5zZSwgb3IKKyMjICAoYXQgeW91
ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLgorIyMKKyMjICBUaGlzIHByb2dyYW0gaXMgZGlz
dHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCwKKyMjICBidXQgV0lU
SE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZgor
IyMgIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4g
IFNlZSB0aGUKKyMjICBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxz
LgorIyMKKyMjICBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2Vu
ZXJhbCBQdWJsaWMgTGljZW5zZQorIyMgIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtOyBpZiBub3Qs
IHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uCisjIworCitpbXBvcnQgc3lzCitp
bXBvcnQgcmUKK2ltcG9ydCBzdHJpbmcKK2ltcG9ydCBoZXhfY29tbW9uCisKKyMjCisjIyBIZWxw
ZXJzIGZvciBnZW5faGVscGVyX3Byb3RvdHlwZQorIyMKK2RlZl9oZWxwZXJfdHlwZXMgPSB7Cisg
ICAgJ04nIDogJ3MzMicsCisgICAgJ08nIDogJ3MzMicsCisgICAgJ1AnIDogJ3MzMicsCisgICAg
J00nIDogJ3MzMicsCisgICAgJ0MnIDogJ3MzMicsCisgICAgJ1InIDogJ3MzMicsCisgICAgJ1Yn
IDogJ3B0cicsCisgICAgJ1EnIDogJ3B0cicKK30KKworZGVmX2hlbHBlcl90eXBlc19wYWlyID0g
eworICAgICdSJyA6ICdzNjQnLAorICAgICdDJyA6ICdzNjQnLAorICAgICdTJyA6ICdzNjQnLAor
ICAgICdHJyA6ICdzNjQnLAorICAgICdWJyA6ICdwdHInLAorICAgICdRJyA6ICdwdHInCit9CisK
K2RlZiBnZW5fZGVmX2hlbHBlcl9vcG4oZiwgdGFnLCByZWd0eXBlLCByZWdpZCwgdG9zcywgbnVt
cmVncywgaSk6CisgICAgaWYgKGhleF9jb21tb24uaXNfcGFpcihyZWdpZCkpOgorICAgICAgICBm
LndyaXRlKCIsICVzIiAlIChkZWZfaGVscGVyX3R5cGVzX3BhaXJbcmVndHlwZV0pKQorICAgIGVs
aWYgKGhleF9jb21tb24uaXNfc2luZ2xlKHJlZ2lkKSk6CisgICAgICAgIGYud3JpdGUoIiwgJXMi
ICUgKGRlZl9oZWxwZXJfdHlwZXNbcmVndHlwZV0pKQorICAgIGVsc2U6CisgICAgICAgIHByaW50
KCJCYWQgcmVnaXN0ZXIgcGFyc2U6ICIscmVndHlwZSxyZWdpZCx0b3NzLG51bXJlZ3MpCisKKyMj
CisjIyBHZW5lcmF0ZSB0aGUgREVGX0hFTFBFUiBwcm90b3R5cGUgZm9yIGFuIGluc3RydWN0aW9u
CisjIyAgICAgRm9yIEEyX2FkZDogUmQzMj1hZGQoUnMzMixSdDMyKQorIyMgICAgIFdlIHByb2R1
Y2U6CisjIyAgICAgICAgIERFRl9IRUxQRVJfMyhBMl9hZGQsIHMzMiwgZW52LCBzMzIsIHMzMikK
KyMjCitkZWYgZ2VuX2hlbHBlcl9wcm90b3R5cGUoZiwgdGFnLCB0YWdyZWdzLCB0YWdpbW1zKToK
KyAgICByZWdzID0gdGFncmVnc1t0YWddCisgICAgaW1tcyA9IHRhZ2ltbXNbdGFnXQorCisgICAg
bnVtcmVzdWx0cyA9IDAKKyAgICBudW1zY2FsYXJyZXN1bHRzID0gMAorICAgIG51bXNjYWxhcnJl
YWR3cml0ZSA9IDAKKyAgICBmb3IgcmVndHlwZSxyZWdpZCx0b3NzLG51bXJlZ3MgaW4gcmVnczoK
KyAgICAgICAgaWYgKGhleF9jb21tb24uaXNfd3JpdHRlbihyZWdpZCkpOgorICAgICAgICAgICAg
bnVtcmVzdWx0cyArPSAxCisgICAgICAgICAgICBpZiAoaGV4X2NvbW1vbi5pc19zY2FsYXJfcmVn
KHJlZ3R5cGUpKToKKyAgICAgICAgICAgICAgICBudW1zY2FsYXJyZXN1bHRzICs9IDEKKyAgICAg
ICAgaWYgKGhleF9jb21tb24uaXNfcmVhZHdyaXRlKHJlZ2lkKSk6CisgICAgICAgICAgICBpZiAo
aGV4X2NvbW1vbi5pc19zY2FsYXJfcmVnKHJlZ3R5cGUpKToKKyAgICAgICAgICAgICAgICBudW1z
Y2FsYXJyZWFkd3JpdGUgKz0gMQorCisgICAgaWYgKG51bXNjYWxhcnJlc3VsdHMgPiAxKToKKyAg
ICAgICAgIyMgVGhlIGhlbHBlciBpcyBib2d1cyB3aGVuIHRoZXJlIGlzIG1vcmUgdGhhbiBvbmUg
cmVzdWx0CisgICAgICAgIGYud3JpdGUoJ0RFRl9IRUxQRVJfMSglcywgdm9pZCwgZW52KVxuJyAl
IHRhZykKKyAgICBlbHNlOgorICAgICAgICAjIyBGaWd1cmUgb3V0IGhvdyBtYW55IGFyZ3VtZW50
cyB0aGUgaGVscGVyIHdpbGwgdGFrZQorICAgICAgICBpZiAobnVtc2NhbGFycmVzdWx0cyA9PSAw
KToKKyAgICAgICAgICAgIGRlZl9oZWxwZXJfc2l6ZSA9IGxlbihyZWdzKStsZW4oaW1tcykrbnVt
c2NhbGFycmVhZHdyaXRlKzEKKyAgICAgICAgICAgIGlmIGhleF9jb21tb24ubmVlZF9wYXJ0MSh0
YWcpOiBkZWZfaGVscGVyX3NpemUgKz0gMQorICAgICAgICAgICAgaWYgaGV4X2NvbW1vbi5uZWVk
X3Nsb3QodGFnKTogZGVmX2hlbHBlcl9zaXplICs9IDEKKyAgICAgICAgICAgIGYud3JpdGUoJ0RF
Rl9IRUxQRVJfJXMoJXMnICUgKGRlZl9oZWxwZXJfc2l6ZSwgdGFnKSkKKyAgICAgICAgICAgICMj
IFRoZSByZXR1cm4gdHlwZSBpcyB2b2lkCisgICAgICAgICAgICBmLndyaXRlKCcsIHZvaWQnICkK
KyAgICAgICAgZWxzZToKKyAgICAgICAgICAgIGRlZl9oZWxwZXJfc2l6ZSA9IGxlbihyZWdzKSts
ZW4oaW1tcykrbnVtc2NhbGFycmVhZHdyaXRlCisgICAgICAgICAgICBpZiBoZXhfY29tbW9uLm5l
ZWRfcGFydDEodGFnKTogZGVmX2hlbHBlcl9zaXplICs9IDEKKyAgICAgICAgICAgIGlmIGhleF9j
b21tb24ubmVlZF9zbG90KHRhZyk6IGRlZl9oZWxwZXJfc2l6ZSArPSAxCisgICAgICAgICAgICBm
LndyaXRlKCdERUZfSEVMUEVSXyVzKCVzJyAlIChkZWZfaGVscGVyX3NpemUsIHRhZykpCisKKyAg
ICAgICAgIyMgR2VuZXJhdGUgdGhlIHFlbXUgREVGX0hFTFBFUiB0eXBlIGZvciBlYWNoIHJlc3Vs
dAorICAgICAgICBpPTAKKyAgICAgICAgZm9yIHJlZ3R5cGUscmVnaWQsdG9zcyxudW1yZWdzIGlu
IHJlZ3M6CisgICAgICAgICAgICBpZiAoaGV4X2NvbW1vbi5pc193cml0dGVuKHJlZ2lkKSk6Cisg
ICAgICAgICAgICAgICAgZ2VuX2RlZl9oZWxwZXJfb3BuKGYsIHRhZywgcmVndHlwZSwgcmVnaWQs
IHRvc3MsIG51bXJlZ3MsIGkpCisgICAgICAgICAgICAgICAgaSArPSAxCisKKyAgICAgICAgIyMg
UHV0IHRoZSBlbnYgYmV0d2VlbiB0aGUgb3V0cHV0cyBhbmQgaW5wdXRzCisgICAgICAgIGYud3Jp
dGUoJywgZW52JyApCisgICAgICAgIGkgKz0gMQorCisgICAgICAgICMjIEdlbmVyYXRlIHRoZSBx
ZW11IHR5cGUgZm9yIGVhY2ggaW5wdXQgb3BlcmFuZCAocmVncyBhbmQgaW1tZWRpYXRlcykKKyAg
ICAgICAgZm9yIHJlZ3R5cGUscmVnaWQsdG9zcyxudW1yZWdzIGluIHJlZ3M6CisgICAgICAgICAg
ICBpZiAoaGV4X2NvbW1vbi5pc19yZWFkKHJlZ2lkKSk6CisgICAgICAgICAgICAgICAgZ2VuX2Rl
Zl9oZWxwZXJfb3BuKGYsIHRhZywgcmVndHlwZSwgcmVnaWQsIHRvc3MsIG51bXJlZ3MsIGkpCisg
ICAgICAgICAgICAgICAgaSArPSAxCisgICAgICAgIGZvciBpbW1sZXR0LGJpdHMsaW1tc2hpZnQg
aW4gaW1tczoKKyAgICAgICAgICAgIGYud3JpdGUoIiwgczMyIikKKworICAgICAgICAjIyBBZGQg
dGhlIGFyZ3VtZW50cyBmb3IgdGhlIGluc3RydWN0aW9uIHNsb3QgYW5kIHBhcnQxIChpZiBuZWVk
ZWQpCisgICAgICAgIGlmIGhleF9jb21tb24ubmVlZF9zbG90KHRhZyk6IGYud3JpdGUoJywgaTMy
JyApCisgICAgICAgIGlmIGhleF9jb21tb24ubmVlZF9wYXJ0MSh0YWcpOiBmLndyaXRlKCcgLCBp
MzInICkKKyAgICAgICAgZi53cml0ZSgnKVxuJykKKworZGVmIG1haW4oKToKKyAgICBoZXhfY29t
bW9uLnJlYWRfc2VtYW50aWNzX2ZpbGUoc3lzLmFyZ3ZbMV0pCisgICAgaGV4X2NvbW1vbi5yZWFk
X2F0dHJpYnNfZmlsZShzeXMuYXJndlsyXSkKKyAgICBoZXhfY29tbW9uLnJlYWRfb3ZlcnJpZGVz
X2ZpbGUoc3lzLmFyZ3ZbM10pCisgICAgaGV4X2NvbW1vbi5jYWxjdWxhdGVfYXR0cmlicygpCisg
ICAgdGFncmVncyA9IGhleF9jb21tb24uZ2V0X3RhZ3JlZ3MoKQorICAgIHRhZ2ltbXMgPSBoZXhf
Y29tbW9uLmdldF90YWdpbW1zKCkKKworICAgIHdpdGggb3BlbihzeXMuYXJndls0XSwgJ3cnKSBh
cyBmOgorICAgICAgICBmb3IgdGFnIGluIGhleF9jb21tb24udGFnczoKKyAgICAgICAgICAgICMj
IFNraXAgdGhlIHByaXYgaW5zdHJ1Y3Rpb25zCisgICAgICAgICAgICBpZiAoICJBX1BSSVYiIGlu
IGhleF9jb21tb24uYXR0cmliZGljdFt0YWddICkgOgorICAgICAgICAgICAgICAgIGNvbnRpbnVl
CisgICAgICAgICAgICAjIyBTa2lwIHRoZSBndWVzdCBpbnN0cnVjdGlvbnMKKyAgICAgICAgICAg
IGlmICggIkFfR1VFU1QiIGluIGhleF9jb21tb24uYXR0cmliZGljdFt0YWddICkgOgorICAgICAg
ICAgICAgICAgIGNvbnRpbnVlCisgICAgICAgICAgICAjIyBTa2lwIHRoZSBkaWFnIGluc3RydWN0
aW9ucworICAgICAgICAgICAgaWYgKCB0YWcgPT0gIlk2X2RpYWciICkgOgorICAgICAgICAgICAg
ICAgIGNvbnRpbnVlCisgICAgICAgICAgICBpZiAoIHRhZyA9PSAiWTZfZGlhZzAiICkgOgorICAg
ICAgICAgICAgICAgIGNvbnRpbnVlCisgICAgICAgICAgICBpZiAoIHRhZyA9PSAiWTZfZGlhZzEi
ICkgOgorICAgICAgICAgICAgICAgIGNvbnRpbnVlCisKKyAgICAgICAgICAgIGlmICggaGV4X2Nv
bW1vbi5za2lwX3FlbXVfaGVscGVyKHRhZykgKToKKyAgICAgICAgICAgICAgICBjb250aW51ZQor
CisgICAgICAgICAgICBnZW5faGVscGVyX3Byb3RvdHlwZShmLCB0YWcsIHRhZ3JlZ3MsIHRhZ2lt
bXMpCisKK2lmIF9fbmFtZV9fID09ICJfX21haW5fXyI6CisgICAgbWFpbigpCmRpZmYgLS1naXQg
YS90YXJnZXQvaGV4YWdvbi9nZW5fb3BfYXR0cmlicy5weSBiL3RhcmdldC9oZXhhZ29uL2dlbl9v
cF9hdHRyaWJzLnB5Cm5ldyBmaWxlIG1vZGUgMTAwNzU1CmluZGV4IDAwMDAwMDAuLjZhMWExY2EK
LS0tIC9kZXYvbnVsbAorKysgYi90YXJnZXQvaGV4YWdvbi9nZW5fb3BfYXR0cmlicy5weQpAQCAt
MCwwICsxLDM5IEBACisjIS91c3IvYmluL2VudiBweXRob24zCisKKyMjCisjIyAgQ29weXJpZ2h0
KGMpIDIwMTktMjAyMSBRdWFsY29tbSBJbm5vdmF0aW9uIENlbnRlciwgSW5jLiBBbGwgUmlnaHRz
IFJlc2VydmVkLgorIyMKKyMjICBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTsgeW91IGNh
biByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeQorIyMgIGl0IHVuZGVyIHRoZSB0ZXJtcyBv
ZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5CisjIyAgdGhl
IEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbjsgZWl0aGVyIHZlcnNpb24gMiBvZiB0aGUgTGljZW5z
ZSwgb3IKKyMjICAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLgorIyMKKyMjICBU
aGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVz
ZWZ1bCwKKyMjICBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1w
bGllZCB3YXJyYW50eSBvZgorIyMgIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBB
UlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGUKKyMjICBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5z
ZSBmb3IgbW9yZSBkZXRhaWxzLgorIyMKKyMjICBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBj
b3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZQorIyMgIGFsb25nIHdpdGggdGhp
cyBwcm9ncmFtOyBpZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uCisj
IworCitpbXBvcnQgc3lzCitpbXBvcnQgcmUKK2ltcG9ydCBzdHJpbmcKK2ltcG9ydCBoZXhfY29t
bW9uCisKK2RlZiBtYWluKCk6CisgICAgaGV4X2NvbW1vbi5yZWFkX3NlbWFudGljc19maWxlKHN5
cy5hcmd2WzFdKQorICAgIGhleF9jb21tb24ucmVhZF9hdHRyaWJzX2ZpbGUoc3lzLmFyZ3ZbMl0p
CisgICAgaGV4X2NvbW1vbi5jYWxjdWxhdGVfYXR0cmlicygpCisKKyAgICAjIworICAgICMjICAg
ICBHZW5lcmF0ZSBhbGwgdGhlIGF0dHJpYnV0ZXMgYXNzb2NpYXRlZCB3aXRoIGVhY2ggaW5zdHJ1
Y3Rpb24KKyAgICAjIworICAgIHdpdGggb3BlbihzeXMuYXJndlszXSwgJ3cnKSBhcyBmOgorICAg
ICAgICBmb3IgdGFnIGluIGhleF9jb21tb24udGFnczoKKyAgICAgICAgICAgIGYud3JpdGUoJ09Q
X0FUVFJJQiglcyxBVFRSSUJTKCVzKSlcbicgJSBcCisgICAgICAgICAgICAgICAgKHRhZywgJywn
LmpvaW4oc29ydGVkKGhleF9jb21tb24uYXR0cmliZGljdFt0YWddKSkpKQorCitpZiBfX25hbWVf
XyA9PSAiX19tYWluX18iOgorICAgIG1haW4oKQpkaWZmIC0tZ2l0IGEvdGFyZ2V0L2hleGFnb24v
Z2VuX29wX3JlZ3MucHkgYi90YXJnZXQvaGV4YWdvbi9nZW5fb3BfcmVncy5weQpuZXcgZmlsZSBt
b2RlIDEwMDc1NQppbmRleCAwMDAwMDAwLi5lODEzN2Q0Ci0tLSAvZGV2L251bGwKKysrIGIvdGFy
Z2V0L2hleGFnb24vZ2VuX29wX3JlZ3MucHkKQEAgLTAsMCArMSwxMTAgQEAKKyMhL3Vzci9iaW4v
ZW52IHB5dGhvbjMKKworIyMKKyMjICBDb3B5cmlnaHQoYykgMjAxOS0yMDIxIFF1YWxjb21tIElu
bm92YXRpb24gQ2VudGVyLCBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCisjIworIyMgIFRoaXMg
cHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOyB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3Ig
bW9kaWZ5CisjIyAgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMg
TGljZW5zZSBhcyBwdWJsaXNoZWQgYnkKKyMjICB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9u
OyBlaXRoZXIgdmVyc2lvbiAyIG9mIHRoZSBMaWNlbnNlLCBvcgorIyMgIChhdCB5b3VyIG9wdGlv
bikgYW55IGxhdGVyIHZlcnNpb24uCisjIworIyMgIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRl
ZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLAorIyMgIGJ1dCBXSVRIT1VUIEFO
WSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mCisjIyAgTUVS
Q0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRo
ZQorIyMgIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuCisjIwor
IyMgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1
YmxpYyBMaWNlbnNlCisjIyAgYWxvbmcgd2l0aCB0aGlzIHByb2dyYW07IGlmIG5vdCwgc2VlIDxo
dHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi4KKyMjCisKK2ltcG9ydCBzeXMKK2ltcG9ydCBy
ZQoraW1wb3J0IHN0cmluZworaW1wb3J0IGhleF9jb21tb24KKworIyMKKyMjICAgICBHZW5lcmF0
ZSB0aGUgcmVnaXN0ZXIgYW5kIGltbWVkaWF0ZSBvcGVyYW5kcyBmb3IgZWFjaCBpbnN0cnVjdGlv
bgorIyMKK2RlZiBjYWxjdWxhdGVfcmVnaWRfcmVnKHRhZyk6CisgICAgZGVmIGxldHRlcl9pbmMo
eCk6IHJldHVybiBjaHIob3JkKHgpKzEpCisgICAgb3JkZXJlZF9pbXBscmVncyA9IFsgJ1NQJywn
RlAnLCdMUicgXQorICAgIHNyY2RzdF9sZXR0ID0gJ1gnCisgICAgc3JjX2xldHQgPSAnUycKKyAg
ICBkc3RfbGV0dCA9ICdEJworICAgIHJldHN0ciA9ICIiCisgICAgbWFwZGljdCA9IHt9CisgICAg
Zm9yIHJlZyBpbiBvcmRlcmVkX2ltcGxyZWdzOgorICAgICAgICByZWdfcmQgPSAwCisgICAgICAg
IHJlZ193ciA9IDAKKyAgICAgICAgaWYgKCdBX0lNUExJQ0lUX1dSSVRFU18nK3JlZykgaW4gaGV4
X2NvbW1vbi5hdHRyaWJkaWN0W3RhZ106IHJlZ193ciA9IDEKKyAgICAgICAgaWYgcmVnX3JkIGFu
ZCByZWdfd3I6CisgICAgICAgICAgICByZXRzdHIgKz0gc3JjZHN0X2xldHQKKyAgICAgICAgICAg
IG1hcGRpY3Rbc3JjZHN0X2xldHRdID0gcmVnCisgICAgICAgICAgICBzcmNkc3RfbGV0dCA9IGxl
dHRlcl9pbmMoc3JjZHN0X2xldHQpCisgICAgICAgIGVsaWYgcmVnX3JkOgorICAgICAgICAgICAg
cmV0c3RyICs9IHNyY19sZXR0CisgICAgICAgICAgICBtYXBkaWN0W3NyY19sZXR0XSA9IHJlZwor
ICAgICAgICAgICAgc3JjX2xldHQgPSBsZXR0ZXJfaW5jKHNyY19sZXR0KQorICAgICAgICBlbGlm
IHJlZ193cjoKKyAgICAgICAgICAgIHJldHN0ciArPSBkc3RfbGV0dAorICAgICAgICAgICAgbWFw
ZGljdFtkc3RfbGV0dF0gPSByZWcKKyAgICAgICAgICAgIGRzdF9sZXR0ID0gbGV0dGVyX2luYyhk
c3RfbGV0dCkKKyAgICByZXR1cm4gcmV0c3RyLG1hcGRpY3QKKworZGVmIGNhbGN1bGF0ZV9yZWdp
ZF9sZXR0ZXJzKHRhZyk6CisgICAgcmV0c3RyLG1hcGRpY3QgPSBjYWxjdWxhdGVfcmVnaWRfcmVn
KHRhZykKKyAgICByZXR1cm4gcmV0c3RyCisKK2RlZiBzdHJpcF9yZWdfcHJlZml4KHgpOgorICAg
IHk9eC5yZXBsYWNlKCdVUkVHLicsJycpCisgICAgeT15LnJlcGxhY2UoJ01SRUcuJywnJykKKyAg
ICByZXR1cm4geS5yZXBsYWNlKCdHUkVHLicsJycpCisKK2RlZiBtYWluKCk6CisgICAgaGV4X2Nv
bW1vbi5yZWFkX3NlbWFudGljc19maWxlKHN5cy5hcmd2WzFdKQorICAgIGhleF9jb21tb24ucmVh
ZF9hdHRyaWJzX2ZpbGUoc3lzLmFyZ3ZbMl0pCisgICAgdGFncmVncyA9IGhleF9jb21tb24uZ2V0
X3RhZ3JlZ3MoKQorICAgIHRhZ2ltbXMgPSBoZXhfY29tbW9uLmdldF90YWdpbW1zKCkKKworICAg
IHdpdGggb3BlbihzeXMuYXJndlszXSwgJ3cnKSBhcyBmOgorICAgICAgICBmb3IgdGFnIGluIGhl
eF9jb21tb24udGFnczoKKyAgICAgICAgICAgIHJlZ3MgPSB0YWdyZWdzW3RhZ10KKyAgICAgICAg
ICAgIHJyZWdzID0gW10KKyAgICAgICAgICAgIHdyZWdzID0gW10KKyAgICAgICAgICAgIHJlZ2lk
cyA9ICIiCisgICAgICAgICAgICBmb3IgcmVndHlwZSxyZWdpZCx0b3NzLG51bXJlZ3MgaW4gcmVn
czoKKyAgICAgICAgICAgICAgICBpZiBoZXhfY29tbW9uLmlzX3JlYWQocmVnaWQpOgorICAgICAg
ICAgICAgICAgICAgICBpZiByZWdpZFswXSBub3QgaW4gcmVnaWRzOiByZWdpZHMgKz0gcmVnaWRb
MF0KKyAgICAgICAgICAgICAgICAgICAgcnJlZ3MuYXBwZW5kKHJlZ3R5cGUrcmVnaWQrbnVtcmVn
cykKKyAgICAgICAgICAgICAgICBpZiBoZXhfY29tbW9uLmlzX3dyaXR0ZW4ocmVnaWQpOgorICAg
ICAgICAgICAgICAgICAgICB3cmVncy5hcHBlbmQocmVndHlwZStyZWdpZCtudW1yZWdzKQorICAg
ICAgICAgICAgICAgICAgICBpZiByZWdpZFswXSBub3QgaW4gcmVnaWRzOiByZWdpZHMgKz0gcmVn
aWRbMF0KKyAgICAgICAgICAgIGZvciBhdHRyaWIgaW4gaGV4X2NvbW1vbi5hdHRyaWJkaWN0W3Rh
Z106CisgICAgICAgICAgICAgICAgaWYgaGV4X2NvbW1vbi5hdHRyaWJpbmZvW2F0dHJpYl1bJ3Jy
ZWcnXToKKyAgICAgICAgICAgICAgICAgICAgcnJlZ3MuYXBwZW5kKHN0cmlwX3JlZ19wcmVmaXgo
YXR0cmliaW5mb1thdHRyaWJdWydycmVnJ10pKQorICAgICAgICAgICAgICAgIGlmIGhleF9jb21t
b24uYXR0cmliaW5mb1thdHRyaWJdWyd3cmVnJ106CisgICAgICAgICAgICAgICAgICAgIHdyZWdz
LmFwcGVuZChzdHJpcF9yZWdfcHJlZml4KGF0dHJpYmluZm9bYXR0cmliXVsnd3JlZyddKSkKKyAg
ICAgICAgICAgIHJlZ2lkcyArPSBjYWxjdWxhdGVfcmVnaWRfbGV0dGVycyh0YWcpCisgICAgICAg
ICAgICBmLndyaXRlKCdSRUdJTkZPKCVzLCIlcyIsXHQvKlJEOiovXHQiJXMiLFx0LypXUjoqL1x0
IiVzIilcbicgJSBcCisgICAgICAgICAgICAgICAgKHRhZyxyZWdpZHMsIiwiLmpvaW4ocnJlZ3Mp
LCIsIi5qb2luKHdyZWdzKSkpCisKKyAgICAgICAgZm9yIHRhZyBpbiBoZXhfY29tbW9uLnRhZ3M6
CisgICAgICAgICAgICBpbW1zID0gdGFnaW1tc1t0YWddCisgICAgICAgICAgICBmLndyaXRlKCAn
SU1NSU5GTyglcycgJSB0YWcpCisgICAgICAgICAgICBpZiBub3QgaW1tczoKKyAgICAgICAgICAg
ICAgICBmLndyaXRlKCcnJywndScsMCwwLCdVJywwLDAnJycpCisgICAgICAgICAgICBmb3Igc2ln
bixzaXplLHNoYW10IGluIGltbXM6CisgICAgICAgICAgICAgICAgaWYgc2lnbiA9PSAncic6IHNp
Z24gPSAncycKKyAgICAgICAgICAgICAgICBpZiBub3Qgc2hhbXQ6CisgICAgICAgICAgICAgICAg
ICAgIHNoYW10ID0gIjAiCisgICAgICAgICAgICAgICAgZi53cml0ZSgnJycsJyVzJywlcywlcycn
JyAlIChzaWduLHNpemUsc2hhbXQpKQorICAgICAgICAgICAgaWYgbGVuKGltbXMpID09IDE6Cisg
ICAgICAgICAgICAgICAgaWYgc2lnbi5pc3VwcGVyKCk6CisgICAgICAgICAgICAgICAgICAgIG15
dSA9ICd1JworICAgICAgICAgICAgICAgIGVsc2U6CisgICAgICAgICAgICAgICAgICAgIG15dSA9
ICdVJworICAgICAgICAgICAgICAgIGYud3JpdGUoJycnLCclcycsMCwwJycnICUgbXl1KQorICAg
ICAgICAgICAgZi53cml0ZSgnKVxuJykKKworaWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjoKKyAg
ICBtYWluKCkKZGlmZiAtLWdpdCBhL3RhcmdldC9oZXhhZ29uL2dlbl9vcGNvZGVzX2RlZi5weSBi
L3RhcmdldC9oZXhhZ29uL2dlbl9vcGNvZGVzX2RlZi5weQpuZXcgZmlsZSBtb2RlIDEwMDc1NQpp
bmRleCAwMDAwMDAwLi5mYTYwNGE4Ci0tLSAvZGV2L251bGwKKysrIGIvdGFyZ2V0L2hleGFnb24v
Z2VuX29wY29kZXNfZGVmLnB5CkBAIC0wLDAgKzEsMzYgQEAKKyMhL3Vzci9iaW4vZW52IHB5dGhv
bjMKKworIyMKKyMjICBDb3B5cmlnaHQoYykgMjAxOS0yMDIxIFF1YWxjb21tIElubm92YXRpb24g
Q2VudGVyLCBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCisjIworIyMgIFRoaXMgcHJvZ3JhbSBp
cyBmcmVlIHNvZnR3YXJlOyB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5Cisj
IyAgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBh
cyBwdWJsaXNoZWQgYnkKKyMjICB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uOyBlaXRoZXIg
dmVyc2lvbiAyIG9mIHRoZSBMaWNlbnNlLCBvcgorIyMgIChhdCB5b3VyIG9wdGlvbikgYW55IGxh
dGVyIHZlcnNpb24uCisjIworIyMgIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUg
aG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLAorIyMgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5U
WTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mCisjIyAgTUVSQ0hBTlRBQklM
SVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZQorIyMgIEdO
VSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuCisjIworIyMgIFlvdSBz
aG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNl
bnNlCisjIyAgYWxvbmcgd2l0aCB0aGlzIHByb2dyYW07IGlmIG5vdCwgc2VlIDxodHRwOi8vd3d3
LmdudS5vcmcvbGljZW5zZXMvPi4KKyMjCisKK2ltcG9ydCBzeXMKK2ltcG9ydCByZQoraW1wb3J0
IHN0cmluZworaW1wb3J0IGhleF9jb21tb24KKworZGVmIG1haW4oKToKKyAgICBoZXhfY29tbW9u
LnJlYWRfc2VtYW50aWNzX2ZpbGUoc3lzLmFyZ3ZbMV0pCisKKyAgICAjIworICAgICMjICAgICBH
ZW5lcmF0ZSBhIGxpc3Qgb2YgYWxsIHRoZSBvcGNvZGVzCisgICAgIyMKKyAgICB3aXRoIG9wZW4o
c3lzLmFyZ3ZbM10sICd3JykgYXMgZjoKKyAgICAgICAgZm9yIHRhZyBpbiBoZXhfY29tbW9uLnRh
Z3M6CisgICAgICAgICAgICBmLndyaXRlICggIk9QQ09ERSglcyksXG4iICUgKHRhZykgKQorCitp
ZiBfX25hbWVfXyA9PSAiX19tYWluX18iOgorICAgIG1haW4oKQpkaWZmIC0tZ2l0IGEvdGFyZ2V0
L2hleGFnb24vZ2VuX3ByaW50aW5zbi5weSBiL3RhcmdldC9oZXhhZ29uL2dlbl9wcmludGluc24u
cHkKbmV3IGZpbGUgbW9kZSAxMDA3NTUKaW5kZXggMDAwMDAwMC4uMTI3MzdiZgotLS0gL2Rldi9u
dWxsCisrKyBiL3RhcmdldC9oZXhhZ29uL2dlbl9wcmludGluc24ucHkKQEAgLTAsMCArMSwxNzMg
QEAKKyMhL3Vzci9iaW4vZW52IHB5dGhvbjMKKworIyMKKyMjICBDb3B5cmlnaHQoYykgMjAxOS0y
MDIxIFF1YWxjb21tIElubm92YXRpb24gQ2VudGVyLCBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQu
CisjIworIyMgIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOyB5b3UgY2FuIHJlZGlzdHJp
YnV0ZSBpdCBhbmQvb3IgbW9kaWZ5CisjIyAgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUg
R2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnkKKyMjICB0aGUgRnJlZSBTb2Z0
d2FyZSBGb3VuZGF0aW9uOyBlaXRoZXIgdmVyc2lvbiAyIG9mIHRoZSBMaWNlbnNlLCBvcgorIyMg
IChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uCisjIworIyMgIFRoaXMgcHJvZ3Jh
bSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLAorIyMg
IGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJh
bnR5IG9mCisjIyAgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQ
VVJQT1NFLiAgU2VlIHRoZQorIyMgIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3Jl
IGRldGFpbHMuCisjIworIyMgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhl
IEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlCisjIyAgYWxvbmcgd2l0aCB0aGlzIHByb2dyYW07
IGlmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi4KKyMjCisKK2ltcG9y
dCBzeXMKK2ltcG9ydCByZQoraW1wb3J0IHN0cmluZworaW1wb3J0IGhleF9jb21tb24KKworIyMK
KyMjICAgICBHZW5lcmF0ZSBkYXRhIGZvciBwcmludGluZyBlYWNoIGluc3RydWN0aW9uIChmb3Jt
YXQgc3RyaW5nICsgb3BlcmFuZHMpCisjIworZGVmIHJlZ3ByaW50ZXIobSk6CisgICAgc3RyID0g
bS5ncm91cCgxKQorICAgIHN0ciArPSAiOiIuam9pbihbIiVkIl0qbGVuKG0uZ3JvdXAoMikpKQor
ICAgIHN0ciArPSBtLmdyb3VwKDMpCisgICAgaWYgKCdTJyBpbiBtLmdyb3VwKDEpKSBhbmQgKGxl
bihtLmdyb3VwKDIpKSA9PSAxKToKKyAgICAgICAgc3RyICs9ICIvJXMiCisgICAgZWxpZiAoJ0Mn
IGluIG0uZ3JvdXAoMSkpIGFuZCAobGVuKG0uZ3JvdXAoMikpID09IDEpOgorICAgICAgICBzdHIg
Kz0gIi8lcyIKKyAgICByZXR1cm4gc3RyCisKK2RlZiBzcGFjaWZ5KHMpOgorICAgICMgUmVndWxh
ciBleHByZXNzaW9uIHRoYXQgbWF0Y2hlcyBhbnkgb3BlcmF0b3IgdGhhdCBjb250YWlucyAnPScg
Y2hhcmFjdGVyOgorICAgIG9wc3dpdGhlcXVhbF9yZSA9ICdbLSteJnwhPD49XT89JworICAgICMg
UmVndWxhciBleHByZXNzaW9uIHRoYXQgbWF0Y2hlcyBhbnkgYXNzaWdubWVudCBvcGVyYXRvci4K
KyAgICBhc3NpZ25tZW50X3JlID0gJ1stK14mfF0/PScKKworICAgICMgT3V0IG9mIHRoZSBvcGVy
YXRvcnMgdGhhdCBjb250YWluIHRoZSA9IHNpZ24sIGlmIHRoZSBvcGVyYXRvciBpcyBhbHNvIGFu
CisgICAgIyBhc3NpZ25tZW50LCBzcGFjZXMgd2lsbCBiZSBhZGRlZCBhcm91bmQgaXQsIHVubGVz
cyBpdCdzIGVuY2xvc2VkIHdpdGhpbgorICAgICMgcGFyZW50aGVzZXMsIG9yIHNwYWNlcyBhcmUg
YWxyZWFkeSBwcmVzZW50LgorCisgICAgZXF1YWxzID0gcmUuY29tcGlsZShvcHN3aXRoZXF1YWxf
cmUpCisgICAgYXNzaWduID0gcmUuY29tcGlsZShhc3NpZ25tZW50X3JlKQorCisgICAgc2xlbiA9
IGxlbihzKQorICAgIHBhcmVuX2NvdW50ID0ge30KKyAgICBpID0gMAorICAgIHBjID0gMAorICAg
IHdoaWxlIGkgPCBzbGVuOgorICAgICAgICBjID0gc1tpXQorICAgICAgICBpZiBjID09ICcoJzoK
KyAgICAgICAgICAgIHBjICs9IDEKKyAgICAgICAgZWxpZiBjID09ICcpJzoKKyAgICAgICAgICAg
IHBjIC09IDEKKyAgICAgICAgcGFyZW5fY291bnRbaV0gPSBwYworICAgICAgICBpICs9IDEKKwor
ICAgICMgSXRlcmF0ZSBvdmVyIGFsbCBvcGVyYXRvcnMgdGhhdCBjb250YWluIHRoZSBlcXVhbCBz
aWduLiBJZiBhbnkKKyAgICAjIG1hdGNoIGlzIGFsc28gYW4gYXNzaWdubWVudCBvcGVyYXRvciwg
YWRkIHNwYWNlcyBhcm91bmQgaXQgaWYKKyAgICAjIHRoZSBwYXJlbnRoZXNpcyBjb3VudCBpcyAw
LgorICAgIHBvcyA9IDAKKyAgICBvdXQgPSBbXQorICAgIGZvciBtIGluIGVxdWFscy5maW5kaXRl
cihzKToKKyAgICAgICAgbXMgPSBtLnN0YXJ0KCkKKyAgICAgICAgbWUgPSBtLmVuZCgpCisgICAg
ICAgICMgdCBpcyB0aGUgc3RyaW5nIHRoYXQgbWF0Y2hlZCBvcHN3aXRoZXF1YWxfcmUuCisgICAg
ICAgIHQgPSBtLnN0cmluZ1ttczptZV0KKyAgICAgICAgb3V0ICs9IHNbcG9zOm1zXQorICAgICAg
ICBwb3MgPSBtZQorICAgICAgICBpZiBwYXJlbl9jb3VudFttc10gPT0gMDoKKyAgICAgICAgICAg
ICMgQ2hlY2sgaWYgdGhlIGVudGlyZSBzdHJpbmcgdCBpcyBhbiBhc3NpZ25tZW50LgorICAgICAg
ICAgICAgYW0gPSBhc3NpZ24ubWF0Y2godCkKKyAgICAgICAgICAgIGlmIGFtIGFuZCBsZW4oYW0u
Z3JvdXAoMCkpID09IG1lLW1zOgorICAgICAgICAgICAgICAgICMgRG9uJ3QgYWRkIHNwYWNlcyBp
ZiB0aGV5IGFyZSBhbHJlYWR5IHRoZXJlLgorICAgICAgICAgICAgICAgIGlmIG1zID4gMCBhbmQg
c1ttcy0xXSAhPSAnICc6CisgICAgICAgICAgICAgICAgICAgIG91dC5hcHBlbmQoJyAnKQorICAg
ICAgICAgICAgICAgIG91dCArPSB0CisgICAgICAgICAgICAgICAgaWYgbWUgPCBzbGVuIGFuZCBz
W21lXSAhPSAnICc6CisgICAgICAgICAgICAgICAgICAgIG91dC5hcHBlbmQoJyAnKQorICAgICAg
ICAgICAgICAgIGNvbnRpbnVlCisgICAgICAgICMgSWYgdGhpcyBpcyBub3QgYW4gYXNzaWdubWVu
dCwganVzdCBhcHBlbmQgaXQgdG8gdGhlIG91dHB1dAorICAgICAgICAjIHN0cmluZy4KKyAgICAg
ICAgb3V0ICs9IHQKKworICAgICMgQXBwZW5kIHRoZSByZW1haW5pbmcgcGFydCBvZiB0aGUgc3Ry
aW5nLgorICAgIG91dCArPSBzW3BvczpsZW4ocyldCisgICAgcmV0dXJuICcnLmpvaW4ob3V0KQor
CitkZWYgbWFpbigpOgorICAgIGhleF9jb21tb24ucmVhZF9zZW1hbnRpY3NfZmlsZShzeXMuYXJn
dlsxXSkKKyAgICBoZXhfY29tbW9uLnJlYWRfYXR0cmlic19maWxlKHN5cy5hcmd2WzJdKQorCisg
ICAgaW1tZXh0X2Nhc2VyZSA9IHJlLmNvbXBpbGUocidJTU1FWFRcKChbQS1aYS16XSknKQorCisg
ICAgd2l0aCBvcGVuKHN5cy5hcmd2WzNdLCAndycpIGFzIGY6CisgICAgICAgIGZvciB0YWcgaW4g
aGV4X2NvbW1vbi50YWdzOgorICAgICAgICAgICAgaWYgbm90IGhleF9jb21tb24uYmVoZGljdFt0
YWddOiBjb250aW51ZQorICAgICAgICAgICAgZXh0ZW5kYWJsZV91cHBlcl9pbW0gPSBGYWxzZQor
ICAgICAgICAgICAgZXh0ZW5kYWJsZV9sb3dlcl9pbW0gPSBGYWxzZQorICAgICAgICAgICAgbSA9
IGltbWV4dF9jYXNlcmUuc2VhcmNoKGhleF9jb21tb24uc2VtZGljdFt0YWddKQorICAgICAgICAg
ICAgaWYgbToKKyAgICAgICAgICAgICAgICBpZiBtLmdyb3VwKDEpLmlzdXBwZXIoKToKKyAgICAg
ICAgICAgICAgICAgICAgZXh0ZW5kYWJsZV91cHBlcl9pbW0gPSBUcnVlCisgICAgICAgICAgICAg
ICAgZWxzZToKKyAgICAgICAgICAgICAgICAgICAgZXh0ZW5kYWJsZV9sb3dlcl9pbW0gPSBUcnVl
CisgICAgICAgICAgICBiZWggPSBoZXhfY29tbW9uLmJlaGRpY3RbdGFnXQorICAgICAgICAgICAg
YmVoID0gaGV4X2NvbW1vbi5yZWdyZS5zdWIocmVncHJpbnRlcixiZWgpCisgICAgICAgICAgICBi
ZWggPSBoZXhfY29tbW9uLmFic2ltbXJlLnN1YihyIiMlczB4JXgiLGJlaCkKKyAgICAgICAgICAg
IGJlaCA9IGhleF9jb21tb24ucmVsaW1tcmUuc3ViKHIiUEMrJXMlZCIsYmVoKQorICAgICAgICAg
ICAgYmVoID0gc3BhY2lmeShiZWgpCisgICAgICAgICAgICAjIFByaW50IG91dCBhIGxpdGVyYWwg
IiVzIiBhdCB0aGUgZW5kLCB1c2VkIHRvIG1hdGNoIGVtcHR5IHN0cmluZworICAgICAgICAgICAg
IyBzbyBDIHdvbid0IGNvbXBsYWluIGF0IHVzCisgICAgICAgICAgICBpZiAoIkFfVkVDWCIgaW4g
aGV4X2NvbW1vbi5hdHRyaWJkaWN0W3RhZ10pOgorICAgICAgICAgICAgICAgIG1hY25hbWUgPSAi
REVGX1ZFQ1hfUFJJTlRJTkZPIgorICAgICAgICAgICAgZWxzZTogbWFjbmFtZSA9ICJERUZfUFJJ
TlRJTkZPIgorICAgICAgICAgICAgZi53cml0ZSgnJXMoJXMsIiVzJSVzIicgJSAobWFjbmFtZSx0
YWcsYmVoKSkKKyAgICAgICAgICAgIHJlZ3Nfb3JfaW1tcyA9IFwKKyAgICAgICAgICAgICAgICBo
ZXhfY29tbW9uLnJlZ19vcl9pbW1yZS5maW5kYWxsKGhleF9jb21tb24uYmVoZGljdFt0YWddKQor
ICAgICAgICAgICAgcmkgPSAwCisgICAgICAgICAgICBzZWVucmVncyA9IHt9CisgICAgICAgICAg
ICBmb3IgYWxscmVncyxhLGIsYyxkLGFsbGltbSxpbW1sZXR0LGJpdHMsaW1tc2hpZnQgaW4gcmVn
c19vcl9pbW1zOgorICAgICAgICAgICAgICAgIGlmIGE6CisgICAgICAgICAgICAgICAgICAgICNy
ZWdpc3RlcgorICAgICAgICAgICAgICAgICAgICBpZiBiIGluIHNlZW5yZWdzOgorICAgICAgICAg
ICAgICAgICAgICAgICAgcmVnbm8gPSBzZWVucmVnc1tiXQorICAgICAgICAgICAgICAgICAgICBl
bHNlOgorICAgICAgICAgICAgICAgICAgICAgICAgcmVnbm8gPSByaQorICAgICAgICAgICAgICAg
ICAgICBpZiBsZW4oYikgPT0gMToKKyAgICAgICAgICAgICAgICAgICAgICAgIGYud3JpdGUoJywg
aW5zbi0+cmVnbm9bJWRdJyAlIHJlZ25vKQorICAgICAgICAgICAgICAgICAgICAgICAgaWYgJ1Mn
IGluIGE6CisgICAgICAgICAgICAgICAgICAgICAgICAgICAgZi53cml0ZSgnLCBzcmVnMnN0cihp
bnNuLT5yZWdub1slZF0pJyAlIHJlZ25vKQorICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiAn
QycgaW4gYToKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICBmLndyaXRlKCcsIGNyZWcyc3Ry
KGluc24tPnJlZ25vWyVkXSknICUgcmVnbm8pCisgICAgICAgICAgICAgICAgICAgIGVsaWYgbGVu
KGIpID09IDI6CisgICAgICAgICAgICAgICAgICAgICAgICBmLndyaXRlKCcsIGluc24tPnJlZ25v
WyVkXSArIDEsIGluc24tPnJlZ25vWyVkXScgJSBcCisgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgKHJlZ25vLHJlZ25vKSkKKyAgICAgICAgICAgICAgICAgICAgZWxzZToKKyAgICAgICAgICAg
ICAgICAgICAgICAgIHByaW50KCJQdXQgc29tZSBzdHVmZiB0byBoYW5kbGUgcXVhZHMgaGVyZSIp
CisgICAgICAgICAgICAgICAgICAgIGlmIGIgbm90IGluIHNlZW5yZWdzOgorICAgICAgICAgICAg
ICAgICAgICAgICAgc2VlbnJlZ3NbYl0gPSByaQorICAgICAgICAgICAgICAgICAgICAgICAgcmkg
Kz0gMQorICAgICAgICAgICAgICAgIGVsc2U6CisgICAgICAgICAgICAgICAgICAgICNpbW1lZGlh
dGUKKyAgICAgICAgICAgICAgICAgICAgaWYgKGltbWxldHQuaXN1cHBlcigpKToKKyAgICAgICAg
ICAgICAgICAgICAgICAgIGlmIGV4dGVuZGFibGVfdXBwZXJfaW1tOgorICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIGlmIGltbWxldHQgaW4gJ3JSJzoKKyAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgZi53cml0ZSgnLGluc24tPmV4dGVuc2lvbl92YWxpZD8iIyMiOiIiJykKKyAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgorICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBmLndyaXRlKCcsaW5zbi0+ZXh0ZW5zaW9uX3ZhbGlkPyIjIjoiIicpCisgICAgICAgICAg
ICAgICAgICAgICAgICBlbHNlOgorICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYud3JpdGUo
JywiIicpCisgICAgICAgICAgICAgICAgICAgICAgICBpaSA9IDEKKyAgICAgICAgICAgICAgICAg
ICAgZWxzZToKKyAgICAgICAgICAgICAgICAgICAgICAgIGlmIGV4dGVuZGFibGVfbG93ZXJfaW1t
OgorICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGltbWxldHQgaW4gJ3JSJzoKKyAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgZi53cml0ZSgnLGluc24tPmV4dGVuc2lvbl92YWxp
ZD8iIyMiOiIiJykKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgorICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBmLndyaXRlKCcsaW5zbi0+ZXh0ZW5zaW9uX3ZhbGlkPyIj
IjoiIicpCisgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgorICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIGYud3JpdGUoJywiIicpCisgICAgICAgICAgICAgICAgICAgICAgICBpaSA9IDAK
KyAgICAgICAgICAgICAgICAgICAgZi53cml0ZSgnLCBpbnNuLT5pbW1lZFslZF0nICUgaWkpCisg
ICAgICAgICAgICAjIGFwcGVuZCBlbXB0eSBzdHJpbmcgc28gdGhlcmUgaXMgYXQgbGVhc3Qgb25l
IG1vcmUgYXJnCisgICAgICAgICAgICBmLndyaXRlKCcsIiIpXG4nKQorCitpZiBfX25hbWVfXyA9
PSAiX19tYWluX18iOgorICAgIG1haW4oKQpkaWZmIC0tZ2l0IGEvdGFyZ2V0L2hleGFnb24vZ2Vu
X3Nob3J0Y29kZS5weSBiL3RhcmdldC9oZXhhZ29uL2dlbl9zaG9ydGNvZGUucHkKbmV3IGZpbGUg
bW9kZSAxMDA3NTUKaW5kZXggMDAwMDAwMC4uOWI1ODlkMAotLS0gL2Rldi9udWxsCisrKyBiL3Rh
cmdldC9oZXhhZ29uL2dlbl9zaG9ydGNvZGUucHkKQEAgLTAsMCArMSw2MCBAQAorIyEvdXNyL2Jp
bi9lbnYgcHl0aG9uMworCisjIworIyMgIENvcHlyaWdodChjKSAyMDE5LTIwMjEgUXVhbGNvbW0g
SW5ub3ZhdGlvbiBDZW50ZXIsIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KKyMjCisjIyAgVGhp
cyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9v
ciBtb2RpZnkKKyMjICBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1Ymxp
YyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieQorIyMgIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRp
b247IGVpdGhlciB2ZXJzaW9uIDIgb2YgdGhlIExpY2Vuc2UsIG9yCisjIyAgKGF0IHlvdXIgb3B0
aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi4KKyMjCisjIyAgVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1
dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsCisjIyAgYnV0IFdJVEhPVVQg
QU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2YKKyMjICBN
RVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUg
dGhlCisjIyAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy4KKyMj
CisjIyAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwg
UHVibGljIExpY2Vuc2UKKyMjICBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbTsgaWYgbm90LCBzZWUg
PGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LgorIyMKKworaW1wb3J0IHN5cworaW1wb3J0
IHJlCitpbXBvcnQgc3RyaW5nCitpbXBvcnQgaGV4X2NvbW1vbgorCitkZWYgZ2VuX3Nob3J0Y29k
ZShmLCB0YWcpOgorICAgIGYud3JpdGUoJ0RFRl9TSE9SVENPREUoJXMsICVzKVxuJyAlICh0YWcs
IGhleF9jb21tb24uc2VtZGljdFt0YWddKSkKKworZGVmIG1haW4oKToKKyAgICBoZXhfY29tbW9u
LnJlYWRfc2VtYW50aWNzX2ZpbGUoc3lzLmFyZ3ZbMV0pCisgICAgaGV4X2NvbW1vbi5yZWFkX2F0
dHJpYnNfZmlsZShzeXMuYXJndlsyXSkKKyAgICBoZXhfY29tbW9uLmNhbGN1bGF0ZV9hdHRyaWJz
KCkKKyAgICB0YWdyZWdzID0gaGV4X2NvbW1vbi5nZXRfdGFncmVncygpCisgICAgdGFnaW1tcyA9
IGhleF9jb21tb24uZ2V0X3RhZ2ltbXMoKQorCisgICAgd2l0aCBvcGVuKHN5cy5hcmd2WzNdLCAn
dycpIGFzIGY6CisgICAgICAgIGYud3JpdGUoIiNpZm5kZWYgREVGX1NIT1JUQ09ERVxuIikKKyAg
ICAgICAgZi53cml0ZSgiI2RlZmluZSBERUZfU0hPUlRDT0RFKFRBRyxTSE9SVENPREUpICAgIC8q
IE5vdGhpbmcgKi9cbiIpCisgICAgICAgIGYud3JpdGUoIiNlbmRpZlxuIikKKworICAgICAgICBm
b3IgdGFnIGluIGhleF9jb21tb24udGFnczoKKyAgICAgICAgICAgICMjIFNraXAgdGhlIHByaXYg
aW5zdHJ1Y3Rpb25zCisgICAgICAgICAgICBpZiAoICJBX1BSSVYiIGluIGhleF9jb21tb24uYXR0
cmliZGljdFt0YWddICkgOgorICAgICAgICAgICAgICAgIGNvbnRpbnVlCisgICAgICAgICAgICAj
IyBTa2lwIHRoZSBndWVzdCBpbnN0cnVjdGlvbnMKKyAgICAgICAgICAgIGlmICggIkFfR1VFU1Qi
IGluIGhleF9jb21tb24uYXR0cmliZGljdFt0YWddICkgOgorICAgICAgICAgICAgICAgIGNvbnRp
bnVlCisgICAgICAgICAgICAjIyBTa2lwIHRoZSBkaWFnIGluc3RydWN0aW9ucworICAgICAgICAg
ICAgaWYgKCB0YWcgPT0gIlk2X2RpYWciICkgOgorICAgICAgICAgICAgICAgIGNvbnRpbnVlCisg
ICAgICAgICAgICBpZiAoIHRhZyA9PSAiWTZfZGlhZzAiICkgOgorICAgICAgICAgICAgICAgIGNv
bnRpbnVlCisgICAgICAgICAgICBpZiAoIHRhZyA9PSAiWTZfZGlhZzEiICkgOgorICAgICAgICAg
ICAgICAgIGNvbnRpbnVlCisKKyAgICAgICAgICAgIGdlbl9zaG9ydGNvZGUoZiwgdGFnKQorCisg
ICAgICAgIGYud3JpdGUoIiN1bmRlZiBERUZfU0hPUlRDT0RFXG4iKQorCitpZiBfX25hbWVfXyA9
PSAiX19tYWluX18iOgorICAgIG1haW4oKQpkaWZmIC0tZ2l0IGEvdGFyZ2V0L2hleGFnb24vZ2Vu
X3RjZ19mdW5jX3RhYmxlLnB5IGIvdGFyZ2V0L2hleGFnb24vZ2VuX3RjZ19mdW5jX3RhYmxlLnB5
Cm5ldyBmaWxlIG1vZGUgMTAwNzU1CmluZGV4IDAwMDAwMDAuLjQ4MDlkMzIKLS0tIC9kZXYvbnVs
bAorKysgYi90YXJnZXQvaGV4YWdvbi9nZW5fdGNnX2Z1bmNfdGFibGUucHkKQEAgLTAsMCArMSw1
OCBAQAorIyEvdXNyL2Jpbi9lbnYgcHl0aG9uMworCisjIworIyMgIENvcHlyaWdodChjKSAyMDE5
LTIwMjEgUXVhbGNvbW0gSW5ub3ZhdGlvbiBDZW50ZXIsIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZl
ZC4KKyMjCisjIyAgVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0
cmlidXRlIGl0IGFuZC9vciBtb2RpZnkKKyMjICBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdO
VSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieQorIyMgIHRoZSBGcmVlIFNv
ZnR3YXJlIEZvdW5kYXRpb247IGVpdGhlciB2ZXJzaW9uIDIgb2YgdGhlIExpY2Vuc2UsIG9yCisj
IyAgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi4KKyMjCisjIyAgVGhpcyBwcm9n
cmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsCisj
IyAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2Fy
cmFudHkgb2YKKyMjICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFS
IFBVUlBPU0UuICBTZWUgdGhlCisjIyAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1v
cmUgZGV0YWlscy4KKyMjCisjIyAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0
aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UKKyMjICBhbG9uZyB3aXRoIHRoaXMgcHJvZ3Jh
bTsgaWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LgorIyMKKworaW1w
b3J0IHN5cworaW1wb3J0IHJlCitpbXBvcnQgc3RyaW5nCitpbXBvcnQgaGV4X2NvbW1vbgorCitk
ZWYgbWFpbigpOgorICAgIGhleF9jb21tb24ucmVhZF9zZW1hbnRpY3NfZmlsZShzeXMuYXJndlsx
XSkKKyAgICBoZXhfY29tbW9uLnJlYWRfYXR0cmlic19maWxlKHN5cy5hcmd2WzJdKQorICAgIGhl
eF9jb21tb24uY2FsY3VsYXRlX2F0dHJpYnMoKQorICAgIHRhZ3JlZ3MgPSBoZXhfY29tbW9uLmdl
dF90YWdyZWdzKCkKKyAgICB0YWdpbW1zID0gaGV4X2NvbW1vbi5nZXRfdGFnaW1tcygpCisKKyAg
ICB3aXRoIG9wZW4oc3lzLmFyZ3ZbM10sICd3JykgYXMgZjoKKyAgICAgICAgZi53cml0ZSgiI2lm
bmRlZiBIRVhBR09OX0ZVTkNfVEFCTEVfSFxuIikKKyAgICAgICAgZi53cml0ZSgiI2RlZmluZSBI
RVhBR09OX0ZVTkNfVEFCTEVfSFxuXG4iKQorCisgICAgICAgIGYud3JpdGUoImNvbnN0IFNlbWFu
dGljSW5zbiBvcGNvZGVfZ2VucHRyW1hYX0xBU1RfT1BDT0RFXSA9IHtcbiIpCisgICAgICAgIGZv
ciB0YWcgaW4gaGV4X2NvbW1vbi50YWdzOgorICAgICAgICAgICAgIyMgU2tpcCB0aGUgcHJpdiBp
bnN0cnVjdGlvbnMKKyAgICAgICAgICAgIGlmICggIkFfUFJJViIgaW4gaGV4X2NvbW1vbi5hdHRy
aWJkaWN0W3RhZ10gKSA6CisgICAgICAgICAgICAgICAgY29udGludWUKKyAgICAgICAgICAgICMj
IFNraXAgdGhlIGd1ZXN0IGluc3RydWN0aW9ucworICAgICAgICAgICAgaWYgKCAiQV9HVUVTVCIg
aW4gaGV4X2NvbW1vbi5hdHRyaWJkaWN0W3RhZ10gKSA6CisgICAgICAgICAgICAgICAgY29udGlu
dWUKKyAgICAgICAgICAgICMjIFNraXAgdGhlIGRpYWcgaW5zdHJ1Y3Rpb25zCisgICAgICAgICAg
ICBpZiAoIHRhZyA9PSAiWTZfZGlhZyIgKSA6CisgICAgICAgICAgICAgICAgY29udGludWUKKyAg
ICAgICAgICAgIGlmICggdGFnID09ICJZNl9kaWFnMCIgKSA6CisgICAgICAgICAgICAgICAgY29u
dGludWUKKyAgICAgICAgICAgIGlmICggdGFnID09ICJZNl9kaWFnMSIgKSA6CisgICAgICAgICAg
ICAgICAgY29udGludWUKKworICAgICAgICAgICAgZi53cml0ZSgiICAgIFslc10gPSBnZW5lcmF0
ZV8lcyxcbiIgJSAodGFnLCB0YWcpKQorICAgICAgICBmLndyaXRlKCJ9O1xuXG4iKQorCisgICAg
ICAgIGYud3JpdGUoIiNlbmRpZiAgICAvKiBIRVhBR09OX0ZVTkNfVEFCTEVfSCAqL1xuIikKKwor
aWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjoKKyAgICBtYWluKCkKZGlmZiAtLWdpdCBhL3Rhcmdl
dC9oZXhhZ29uL2dlbl90Y2dfZnVuY3MucHkgYi90YXJnZXQvaGV4YWdvbi9nZW5fdGNnX2Z1bmNz
LnB5Cm5ldyBmaWxlIG1vZGUgMTAwNzU1CmluZGV4IDAwMDAwMDAuLmZlNGQ4ZTUKLS0tIC9kZXYv
bnVsbAorKysgYi90YXJnZXQvaGV4YWdvbi9nZW5fdGNnX2Z1bmNzLnB5CkBAIC0wLDAgKzEsNDg1
IEBACisjIS91c3IvYmluL2VudiBweXRob24zCisKKyMjCisjIyAgQ29weXJpZ2h0KGMpIDIwMTkt
MjAyMSBRdWFsY29tbSBJbm5vdmF0aW9uIENlbnRlciwgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVk
LgorIyMKKyMjICBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTsgeW91IGNhbiByZWRpc3Ry
aWJ1dGUgaXQgYW5kL29yIG1vZGlmeQorIyMgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05V
IEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5CisjIyAgdGhlIEZyZWUgU29m
dHdhcmUgRm91bmRhdGlvbjsgZWl0aGVyIHZlcnNpb24gMiBvZiB0aGUgTGljZW5zZSwgb3IKKyMj
ICAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLgorIyMKKyMjICBUaGlzIHByb2dy
YW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCwKKyMj
ICBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJy
YW50eSBvZgorIyMgIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIg
UFVSUE9TRS4gIFNlZSB0aGUKKyMjICBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9y
ZSBkZXRhaWxzLgorIyMKKyMjICBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRo
ZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZQorIyMgIGFsb25nIHdpdGggdGhpcyBwcm9ncmFt
OyBpZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uCisjIworCitpbXBv
cnQgc3lzCitpbXBvcnQgcmUKK2ltcG9ydCBzdHJpbmcKK2ltcG9ydCBoZXhfY29tbW9uCisKKyMj
CisjIyBIZWxwZXJzIGZvciBnZW5fdGNnX2Z1bmMKKyMjCitkZWYgZ2VuX2RlY2xfZWFfdGNnKGYs
IHRhZyk6CisgICAgaWYgKCdBX0NPTkRFWEVDJyBpbiBoZXhfY29tbW9uLmF0dHJpYmRpY3RbdGFn
XSBvcgorICAgICAgICAnQV9MT0FEJyBpbiBoZXhfY29tbW9uLmF0dHJpYmRpY3RbdGFnXSk6Cisg
ICAgICAgIGYud3JpdGUoIiAgICBUQ0d2IEVBID0gdGNnX3RlbXBfbG9jYWxfbmV3KCk7XG4iKQor
ICAgIGVsc2U6CisgICAgICAgIGYud3JpdGUoIiAgICBUQ0d2IEVBID0gdGNnX3RlbXBfbmV3KCk7
XG4iKQorCitkZWYgZ2VuX2ZyZWVfZWFfdGNnKGYpOgorICAgIGYud3JpdGUoIiAgICB0Y2dfdGVt
cF9mcmVlKEVBKTtcbiIpCisKK2RlZiBnZW5wdHJfZGVjbF9wYWlyX3dyaXRlYmxlKGYsIHRhZywg
cmVndHlwZSwgcmVnaWQsIHJlZ25vKToKKyAgICByZWdOPSIlcyVzTiIgJSAocmVndHlwZSxyZWdp
ZCkKKyAgICBmLndyaXRlKCIgICAgVENHdl9pNjQgJXMlc1YgPSB0Y2dfdGVtcF9sb2NhbF9uZXdf
aTY0KCk7XG4iICUgXAorICAgICAgICAocmVndHlwZSwgcmVnaWQpKQorICAgIGlmIChyZWd0eXBl
ID09ICJDIik6CisgICAgICAgIGYud3JpdGUoIiAgICBjb25zdCBpbnQgJXMgPSBpbnNuLT5yZWdu
b1slZF0gKyBIRVhfUkVHX1NBMDtcbiIgJSBcCisgICAgICAgICAgICAocmVnTiwgcmVnbm8pKQor
ICAgIGVsc2U6CisgICAgICAgIGYud3JpdGUoIiAgICBjb25zdCBpbnQgJXMgPSBpbnNuLT5yZWdu
b1slZF07XG4iICUgKHJlZ04sIHJlZ25vKSkKKyAgICBpZiAoJ0FfQ09OREVYRUMnIGluIGhleF9j
b21tb24uYXR0cmliZGljdFt0YWddKToKKyAgICAgICAgZi53cml0ZSgiICAgIGlmICghaXNfcHJl
bG9hZGVkKGN0eCwgJXMpKSB7XG4iICUgcmVnTikKKyAgICAgICAgZi53cml0ZSgiICAgICAgICB0
Y2dfZ2VuX21vdl90bChoZXhfbmV3X3ZhbHVlWyVzXSwgaGV4X2dwclslc10pO1xuIiAlIFwKKyAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgKHJlZ04sIHJlZ04pKQorICAgICAgICBmLndyaXRl
KCIgICAgfVxuIikKKyAgICAgICAgZi53cml0ZSgiICAgIGlmICghaXNfcHJlbG9hZGVkKGN0eCwg
JXMgKyAxKSkge1xuIiAlIHJlZ04pCisgICAgICAgIGYud3JpdGUoIiAgICAgICAgdGNnX2dlbl9t
b3ZfdGwoaGV4X25ld192YWx1ZVslcyArIDFdLCBoZXhfZ3ByWyVzICsgMV0pO1xuIiAlIFwKKyAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgKHJlZ04sIHJlZ04pKQorICAgICAgICBmLndyaXRl
KCIgICAgfVxuIikKKworZGVmIGdlbnB0cl9kZWNsX3dyaXRlYmxlKGYsIHRhZywgcmVndHlwZSwg
cmVnaWQsIHJlZ25vKToKKyAgICByZWdOPSIlcyVzTiIgJSAocmVndHlwZSxyZWdpZCkKKyAgICBm
LndyaXRlKCIgICAgVENHdiAlcyVzViA9IHRjZ190ZW1wX2xvY2FsX25ldygpO1xuIiAlIFwKKyAg
ICAgICAgKHJlZ3R5cGUsIHJlZ2lkKSkKKyAgICBpZiAocmVndHlwZSA9PSAiQyIpOgorICAgICAg
ICBmLndyaXRlKCIgICAgY29uc3QgaW50ICVzID0gaW5zbi0+cmVnbm9bJWRdICsgSEVYX1JFR19T
QTA7XG4iICUgXAorICAgICAgICAgICAgKHJlZ04sIHJlZ25vKSkKKyAgICBlbHNlOgorICAgICAg
ICBmLndyaXRlKCIgICAgY29uc3QgaW50ICVzID0gaW5zbi0+cmVnbm9bJWRdO1xuIiAlIChyZWdO
LCByZWdubykpCisgICAgaWYgKCdBX0NPTkRFWEVDJyBpbiBoZXhfY29tbW9uLmF0dHJpYmRpY3Rb
dGFnXSk6CisgICAgICAgIGYud3JpdGUoIiAgICBpZiAoIWlzX3ByZWxvYWRlZChjdHgsICVzKSkg
e1xuIiAlIHJlZ04pCisgICAgICAgIGYud3JpdGUoIiAgICAgICAgdGNnX2dlbl9tb3ZfdGwoaGV4
X25ld192YWx1ZVslc10sIGhleF9ncHJbJXNdKTtcbiIgJSBcCisgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIChyZWdOLCByZWdOKSkKKyAgICAgICAgZi53cml0ZSgiICAgIH1cbiIpCisKK2Rl
ZiBnZW5wdHJfZGVjbChmLCB0YWcsIHJlZ3R5cGUsIHJlZ2lkLCByZWdubyk6CisgICAgcmVnTj0i
JXMlc04iICUgKHJlZ3R5cGUscmVnaWQpCisgICAgaWYgKHJlZ3R5cGUgPT0gIlIiKToKKyAgICAg
ICAgaWYgKHJlZ2lkIGluIHsic3MiLCAidHQifSk6CisgICAgICAgICAgICBmLndyaXRlKCIgICAg
VENHdl9pNjQgJXMlc1YgPSB0Y2dfdGVtcF9sb2NhbF9uZXdfaTY0KCk7XG4iICUgXAorICAgICAg
ICAgICAgICAgIChyZWd0eXBlLCByZWdpZCkpCisgICAgICAgICAgICBmLndyaXRlKCIgICAgY29u
c3QgaW50ICVzID0gaW5zbi0+cmVnbm9bJWRdO1xuIiAlIFwKKyAgICAgICAgICAgICAgICAocmVn
TiwgcmVnbm8pKQorICAgICAgICBlbGlmIChyZWdpZCBpbiB7ImRkIiwgImVlIiwgInh4IiwgInl5
In0pOgorICAgICAgICAgICAgZ2VucHRyX2RlY2xfcGFpcl93cml0ZWJsZShmLCB0YWcsIHJlZ3R5
cGUsIHJlZ2lkLCByZWdubykKKyAgICAgICAgZWxpZiAocmVnaWQgaW4geyJzIiwgInQiLCAidSIs
ICJ2In0pOgorICAgICAgICAgICAgZi53cml0ZSgiICAgIFRDR3YgJXMlc1YgPSBoZXhfZ3ByW2lu
c24tPnJlZ25vWyVkXV07XG4iICUgXAorICAgICAgICAgICAgICAgIChyZWd0eXBlLCByZWdpZCwg
cmVnbm8pKQorICAgICAgICBlbGlmIChyZWdpZCBpbiB7ImQiLCAiZSIsICJ4IiwgInkifSk6Cisg
ICAgICAgICAgICBnZW5wdHJfZGVjbF93cml0ZWJsZShmLCB0YWcsIHJlZ3R5cGUsIHJlZ2lkLCBy
ZWdubykKKyAgICAgICAgZWxzZToKKyAgICAgICAgICAgIHByaW50KCJCYWQgcmVnaXN0ZXIgcGFy
c2U6ICIsIHJlZ3R5cGUsIHJlZ2lkKQorICAgIGVsaWYgKHJlZ3R5cGUgPT0gIlAiKToKKyAgICAg
ICAgaWYgKHJlZ2lkIGluIHsicyIsICJ0IiwgInUiLCAidiJ9KToKKyAgICAgICAgICAgIGYud3Jp
dGUoIiAgICBUQ0d2ICVzJXNWID0gaGV4X3ByZWRbaW5zbi0+cmVnbm9bJWRdXTtcbiIgJSBcCisg
ICAgICAgICAgICAgICAgKHJlZ3R5cGUsIHJlZ2lkLCByZWdubykpCisgICAgICAgIGVsaWYgKHJl
Z2lkIGluIHsiZCIsICJlIiwgIngifSk6CisgICAgICAgICAgICBnZW5wdHJfZGVjbF93cml0ZWJs
ZShmLCB0YWcsIHJlZ3R5cGUsIHJlZ2lkLCByZWdubykKKyAgICAgICAgZWxzZToKKyAgICAgICAg
ICAgIHByaW50KCJCYWQgcmVnaXN0ZXIgcGFyc2U6ICIsIHJlZ3R5cGUsIHJlZ2lkKQorICAgIGVs
aWYgKHJlZ3R5cGUgPT0gIkMiKToKKyAgICAgICAgaWYgKHJlZ2lkID09ICJzcyIpOgorICAgICAg
ICAgICAgZi53cml0ZSgiICAgIFRDR3ZfaTY0ICVzJXNWID0gdGNnX3RlbXBfbG9jYWxfbmV3X2k2
NCgpO1xuIiAlIFwKKyAgICAgICAgICAgICAgICAocmVndHlwZSwgcmVnaWQpKQorICAgICAgICAg
ICAgZi53cml0ZSgiICAgIGNvbnN0IGludCAlcyA9IGluc24tPnJlZ25vWyVkXSArIEhFWF9SRUdf
U0EwO1xuIiAlIFwKKyAgICAgICAgICAgICAgICAocmVnTiwgcmVnbm8pKQorICAgICAgICBlbGlm
IChyZWdpZCA9PSAiZGQiKToKKyAgICAgICAgICAgIGdlbnB0cl9kZWNsX3BhaXJfd3JpdGVibGUo
ZiwgdGFnLCByZWd0eXBlLCByZWdpZCwgcmVnbm8pCisgICAgICAgIGVsaWYgKHJlZ2lkID09ICJz
Iik6CisgICAgICAgICAgICBmLndyaXRlKCIgICAgVENHdiAlcyVzViA9IHRjZ190ZW1wX2xvY2Fs
X25ldygpO1xuIiAlIFwKKyAgICAgICAgICAgICAgICAocmVndHlwZSwgcmVnaWQpKQorICAgICAg
ICAgICAgZi53cml0ZSgiICAgIGNvbnN0IGludCAlcyVzTiA9IGluc24tPnJlZ25vWyVkXSArIEhF
WF9SRUdfU0EwO1xuIiAlIFwKKyAgICAgICAgICAgICAgICAocmVndHlwZSwgcmVnaWQsIHJlZ25v
KSkKKyAgICAgICAgZWxpZiAocmVnaWQgPT0gImQiKToKKyAgICAgICAgICAgIGdlbnB0cl9kZWNs
X3dyaXRlYmxlKGYsIHRhZywgcmVndHlwZSwgcmVnaWQsIHJlZ25vKQorICAgICAgICBlbHNlOgor
ICAgICAgICAgICAgcHJpbnQoIkJhZCByZWdpc3RlciBwYXJzZTogIiwgcmVndHlwZSwgcmVnaWQp
CisgICAgZWxpZiAocmVndHlwZSA9PSAiTSIpOgorICAgICAgICBpZiAocmVnaWQgPT0gInUiKToK
KyAgICAgICAgICAgIGYud3JpdGUoIiAgICBjb25zdCBpbnQgJXMlc04gPSBpbnNuLT5yZWdub1sl
ZF07XG4iJSBcCisgICAgICAgICAgICAgICAgKHJlZ3R5cGUsIHJlZ2lkLCByZWdubykpCisgICAg
ICAgICAgICBmLndyaXRlKCIgICAgVENHdiAlcyVzViA9IGhleF9ncHJbJXMlc04gKyBIRVhfUkVH
X00wXTtcbiIgJSBcCisgICAgICAgICAgICAgICAgKHJlZ3R5cGUsIHJlZ2lkLCByZWd0eXBlLCBy
ZWdpZCkpCisgICAgICAgIGVsc2U6CisgICAgICAgICAgICBwcmludCgiQmFkIHJlZ2lzdGVyIHBh
cnNlOiAiLCByZWd0eXBlLCByZWdpZCkKKyAgICBlbHNlOgorICAgICAgICBwcmludCgiQmFkIHJl
Z2lzdGVyIHBhcnNlOiAiLCByZWd0eXBlLCByZWdpZCkKKworZGVmIGdlbnB0cl9kZWNsX25ldyhm
LHJlZ3R5cGUscmVnaWQscmVnbm8pOgorICAgIGlmIChyZWd0eXBlID09ICJOIik6CisgICAgICAg
IGlmIChyZWdpZCBpbiB7InMiLCAidCJ9KToKKyAgICAgICAgICAgIGYud3JpdGUoIiAgICBUQ0d2
ICVzJXNOID0gaGV4X25ld192YWx1ZVtpbnNuLT5yZWdub1slZF1dO1xuIiAlIFwKKyAgICAgICAg
ICAgICAgICAocmVndHlwZSwgcmVnaWQsIHJlZ25vKSkKKyAgICAgICAgZWxzZToKKyAgICAgICAg
ICAgIHByaW50KCJCYWQgcmVnaXN0ZXIgcGFyc2U6ICIsIHJlZ3R5cGUsIHJlZ2lkKQorICAgIGVs
aWYgKHJlZ3R5cGUgPT0gIlAiKToKKyAgICAgICAgaWYgKHJlZ2lkIGluIHsidCIsICJ1IiwgInYi
fSk6CisgICAgICAgICAgICBmLndyaXRlKCIgICAgVENHdiAlcyVzTiA9IGhleF9uZXdfcHJlZF92
YWx1ZVtpbnNuLT5yZWdub1slZF1dO1xuIiAlIFwKKyAgICAgICAgICAgICAgICAocmVndHlwZSwg
cmVnaWQsIHJlZ25vKSkKKyAgICAgICAgZWxzZToKKyAgICAgICAgICAgIHByaW50KCJCYWQgcmVn
aXN0ZXIgcGFyc2U6ICIsIHJlZ3R5cGUsIHJlZ2lkKQorICAgIGVsc2U6CisgICAgICAgIHByaW50
KCJCYWQgcmVnaXN0ZXIgcGFyc2U6ICIsIHJlZ3R5cGUsIHJlZ2lkKQorCitkZWYgZ2VucHRyX2Rl
Y2xfb3BuKGYsIHRhZywgcmVndHlwZSwgcmVnaWQsIHRvc3MsIG51bXJlZ3MsIGkpOgorICAgIGlm
IChoZXhfY29tbW9uLmlzX3BhaXIocmVnaWQpKToKKyAgICAgICAgZ2VucHRyX2RlY2woZiwgdGFn
LCByZWd0eXBlLCByZWdpZCwgaSkKKyAgICBlbGlmIChoZXhfY29tbW9uLmlzX3NpbmdsZShyZWdp
ZCkpOgorICAgICAgICBpZiBoZXhfY29tbW9uLmlzX29sZF92YWwocmVndHlwZSwgcmVnaWQsIHRh
Zyk6CisgICAgICAgICAgICBnZW5wdHJfZGVjbChmLHRhZywgcmVndHlwZSwgcmVnaWQsIGkpCisg
ICAgICAgIGVsaWYgaGV4X2NvbW1vbi5pc19uZXdfdmFsKHJlZ3R5cGUsIHJlZ2lkLCB0YWcpOgor
ICAgICAgICAgICAgZ2VucHRyX2RlY2xfbmV3KGYscmVndHlwZSxyZWdpZCxpKQorICAgICAgICBl
bHNlOgorICAgICAgICAgICAgcHJpbnQoIkJhZCByZWdpc3RlciBwYXJzZTogIixyZWd0eXBlLHJl
Z2lkLHRvc3MsbnVtcmVncykKKyAgICBlbHNlOgorICAgICAgICBwcmludCgiQmFkIHJlZ2lzdGVy
IHBhcnNlOiAiLHJlZ3R5cGUscmVnaWQsdG9zcyxudW1yZWdzKQorCitkZWYgZ2VucHRyX2RlY2xf
aW1tKGYsaW1tbGV0dCk6CisgICAgaWYgKGltbWxldHQuaXN1cHBlcigpKToKKyAgICAgICAgaSA9
IDEKKyAgICBlbHNlOgorICAgICAgICBpID0gMAorICAgIGYud3JpdGUoIiAgICBpbnQgJXMgPSBp
bnNuLT5pbW1lZFslZF07XG4iICUgXAorICAgICAgICAoaGV4X2NvbW1vbi5pbW1fbmFtZShpbW1s
ZXR0KSwgaSkpCisKK2RlZiBnZW5wdHJfZnJlZShmLHJlZ3R5cGUscmVnaWQscmVnbm8pOgorICAg
IGlmIChyZWd0eXBlID09ICJSIik6CisgICAgICAgIGlmIChyZWdpZCBpbiB7ImRkIiwgInNzIiwg
InR0IiwgInh4IiwgInl5In0pOgorICAgICAgICAgICAgZi53cml0ZSgiICAgIHRjZ190ZW1wX2Zy
ZWVfaTY0KCVzJXNWKTtcbiIgJSAocmVndHlwZSwgcmVnaWQpKQorICAgICAgICBlbGlmIChyZWdp
ZCBpbiB7ImQiLCAiZSIsICJ4IiwgInkifSk6CisgICAgICAgICAgICBmLndyaXRlKCIgICAgdGNn
X3RlbXBfZnJlZSglcyVzVik7XG4iICUgKHJlZ3R5cGUsIHJlZ2lkKSkKKyAgICAgICAgZWxpZiAo
cmVnaWQgbm90IGluIHsicyIsICJ0IiwgInUiLCAidiJ9KToKKyAgICAgICAgICAgIHByaW50KCJC
YWQgcmVnaXN0ZXIgcGFyc2U6ICIscmVndHlwZSxyZWdpZCkKKyAgICBlbGlmIChyZWd0eXBlID09
ICJQIik6CisgICAgICAgIGlmIChyZWdpZCBpbiB7ImQiLCAiZSIsICJ4In0pOgorICAgICAgICAg
ICAgZi53cml0ZSgiICAgIHRjZ190ZW1wX2ZyZWUoJXMlc1YpO1xuIiAlIChyZWd0eXBlLCByZWdp
ZCkpCisgICAgICAgIGVsaWYgKHJlZ2lkIG5vdCBpbiB7InMiLCAidCIsICJ1IiwgInYifSk6Cisg
ICAgICAgICAgICBwcmludCgiQmFkIHJlZ2lzdGVyIHBhcnNlOiAiLHJlZ3R5cGUscmVnaWQpCisg
ICAgZWxpZiAocmVndHlwZSA9PSAiQyIpOgorICAgICAgICBpZiAocmVnaWQgaW4geyJkZCIsICJz
cyJ9KToKKyAgICAgICAgICAgIGYud3JpdGUoIiAgICB0Y2dfdGVtcF9mcmVlX2k2NCglcyVzVik7
XG4iICUgKHJlZ3R5cGUsIHJlZ2lkKSkKKyAgICAgICAgZWxpZiAocmVnaWQgaW4geyJkIiwgInMi
fSk6CisgICAgICAgICAgICBmLndyaXRlKCIgICAgdGNnX3RlbXBfZnJlZSglcyVzVik7XG4iICUg
KHJlZ3R5cGUsIHJlZ2lkKSkKKyAgICAgICAgZWxzZToKKyAgICAgICAgICAgIHByaW50KCJCYWQg
cmVnaXN0ZXIgcGFyc2U6ICIscmVndHlwZSxyZWdpZCkKKyAgICBlbGlmIChyZWd0eXBlID09ICJN
Iik6CisgICAgICAgIGlmIChyZWdpZCAhPSAidSIpOgorICAgICAgICAgICAgcHJpbnQoIkJhZCBy
ZWdpc3RlciBwYXJzZTogIiwgcmVndHlwZSwgcmVnaWQpCisgICAgZWxzZToKKyAgICAgICAgcHJp
bnQoIkJhZCByZWdpc3RlciBwYXJzZTogIiwgcmVndHlwZSwgcmVnaWQpCisKK2RlZiBnZW5wdHJf
ZnJlZV9uZXcoZixyZWd0eXBlLHJlZ2lkLHJlZ25vKToKKyAgICBpZiAocmVndHlwZSA9PSAiTiIp
OgorICAgICAgICBpZiAocmVnaWQgbm90IGluIHsicyIsICJ0In0pOgorICAgICAgICAgICAgcHJp
bnQoIkJhZCByZWdpc3RlciBwYXJzZTogIiwgcmVndHlwZSwgcmVnaWQpCisgICAgZWxpZiAocmVn
dHlwZSA9PSAiUCIpOgorICAgICAgICBpZiAocmVnaWQgbm90IGluIHsidCIsICJ1IiwgInYifSk6
CisgICAgICAgICAgICBwcmludCgiQmFkIHJlZ2lzdGVyIHBhcnNlOiAiLCByZWd0eXBlLCByZWdp
ZCkKKyAgICBlbHNlOgorICAgICAgICBwcmludCgiQmFkIHJlZ2lzdGVyIHBhcnNlOiAiLCByZWd0
eXBlLCByZWdpZCkKKworZGVmIGdlbnB0cl9mcmVlX29wbihmLHJlZ3R5cGUscmVnaWQsaSx0YWcp
OgorICAgIGlmIChoZXhfY29tbW9uLmlzX3BhaXIocmVnaWQpKToKKyAgICAgICAgZ2VucHRyX2Zy
ZWUoZixyZWd0eXBlLHJlZ2lkLGkpCisgICAgZWxpZiAoaGV4X2NvbW1vbi5pc19zaW5nbGUocmVn
aWQpKToKKyAgICAgICAgaWYgaGV4X2NvbW1vbi5pc19vbGRfdmFsKHJlZ3R5cGUsIHJlZ2lkLCB0
YWcpOgorICAgICAgICAgICAgZ2VucHRyX2ZyZWUoZixyZWd0eXBlLHJlZ2lkLGkpCisgICAgICAg
IGVsaWYgaGV4X2NvbW1vbi5pc19uZXdfdmFsKHJlZ3R5cGUsIHJlZ2lkLCB0YWcpOgorICAgICAg
ICAgICAgZ2VucHRyX2ZyZWVfbmV3KGYscmVndHlwZSxyZWdpZCxpKQorICAgICAgICBlbHNlOgor
ICAgICAgICAgICAgcHJpbnQoIkJhZCByZWdpc3RlciBwYXJzZTogIixyZWd0eXBlLHJlZ2lkLHRv
c3MsbnVtcmVncykKKyAgICBlbHNlOgorICAgICAgICBwcmludCgiQmFkIHJlZ2lzdGVyIHBhcnNl
OiAiLHJlZ3R5cGUscmVnaWQsdG9zcyxudW1yZWdzKQorCitkZWYgZ2VucHRyX3NyY19yZWFkKGYs
cmVndHlwZSxyZWdpZCk6CisgICAgaWYgKHJlZ3R5cGUgPT0gIlIiKToKKyAgICAgICAgaWYgKHJl
Z2lkIGluIHsic3MiLCAidHQiLCAieHgiLCAieXkifSk6CisgICAgICAgICAgICBmLndyaXRlKCIg
ICAgdGNnX2dlbl9jb25jYXRfaTMyX2k2NCglcyVzViwgaGV4X2dwclslcyVzTl0sXG4iICUgXAor
ICAgICAgICAgICAgICAgIChyZWd0eXBlLCByZWdpZCwgcmVndHlwZSwgcmVnaWQpKQorICAgICAg
ICAgICAgZi53cml0ZSgiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGV4X2dwclsl
cyVzTiArIDFdKTtcbiIgJSBcCisgICAgICAgICAgICAgICAgKHJlZ3R5cGUsIHJlZ2lkKSkKKyAg
ICAgICAgZWxpZiAocmVnaWQgaW4geyJ4IiwgInkifSk6CisgICAgICAgICAgICBmLndyaXRlKCIg
ICAgdGNnX2dlbl9tb3ZfdGwoJXMlc1YsIGhleF9ncHJbJXMlc05dKTtcbiIgJSBcCisgICAgICAg
ICAgICAgICAgKHJlZ3R5cGUscmVnaWQscmVndHlwZSxyZWdpZCkpCisgICAgICAgIGVsaWYgKHJl
Z2lkIG5vdCBpbiB7InMiLCAidCIsICJ1IiwgInYifSk6CisgICAgICAgICAgICBwcmludCgiQmFk
IHJlZ2lzdGVyIHBhcnNlOiAiLCByZWd0eXBlLCByZWdpZCkKKyAgICBlbGlmIChyZWd0eXBlID09
ICJQIik6CisgICAgICAgIGlmIChyZWdpZCA9PSAieCIpOgorICAgICAgICAgICAgZi53cml0ZSgi
ICAgIHRjZ19nZW5fbW92X3RsKCVzJXNWLCBoZXhfcHJlZFslcyVzTl0pO1xuIiAlIFwKKyAgICAg
ICAgICAgICAgICAocmVndHlwZSwgcmVnaWQsIHJlZ3R5cGUsIHJlZ2lkKSkKKyAgICAgICAgZWxp
ZiAocmVnaWQgbm90IGluIHsicyIsICJ0IiwgInUiLCAidiJ9KToKKyAgICAgICAgICAgIHByaW50
KCJCYWQgcmVnaXN0ZXIgcGFyc2U6ICIsIHJlZ3R5cGUsIHJlZ2lkKQorICAgIGVsaWYgKHJlZ3R5
cGUgPT0gIkMiKToKKyAgICAgICAgaWYgKHJlZ2lkID09ICJzcyIpOgorICAgICAgICAgICAgZi53
cml0ZSgiICAgIGdlbl9yZWFkX2N0cmxfcmVnX3BhaXIoY3R4LCAlcyVzTiwgJXMlc1YpO1xuIiAl
IFwKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHJlZ3R5cGUsIHJlZ2lkLCByZWd0eXBl
LCByZWdpZCkpCisgICAgICAgIGVsaWYgKHJlZ2lkID09ICJzIik6CisgICAgICAgICAgICBmLndy
aXRlKCIgICAgZ2VuX3JlYWRfY3RybF9yZWcoY3R4LCAlcyVzTiwgJXMlc1YpO1xuIiAlIFwKKyAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgKHJlZ3R5cGUsIHJlZ2lkLCByZWd0eXBlLCByZWdp
ZCkpCisgICAgICAgIGVsc2U6CisgICAgICAgICAgICBwcmludCgiQmFkIHJlZ2lzdGVyIHBhcnNl
OiAiLCByZWd0eXBlLCByZWdpZCkKKyAgICBlbGlmIChyZWd0eXBlID09ICJNIik6CisgICAgICAg
IGlmIChyZWdpZCAhPSAidSIpOgorICAgICAgICAgICAgcHJpbnQoIkJhZCByZWdpc3RlciBwYXJz
ZTogIiwgcmVndHlwZSwgcmVnaWQpCisgICAgZWxzZToKKyAgICAgICAgcHJpbnQoIkJhZCByZWdp
c3RlciBwYXJzZTogIiwgcmVndHlwZSwgcmVnaWQpCisKK2RlZiBnZW5wdHJfc3JjX3JlYWRfbmV3
KGYscmVndHlwZSxyZWdpZCk6CisgICAgaWYgKHJlZ3R5cGUgPT0gIk4iKToKKyAgICAgICAgaWYg
KHJlZ2lkIG5vdCBpbiB7InMiLCAidCJ9KToKKyAgICAgICAgICAgIHByaW50KCJCYWQgcmVnaXN0
ZXIgcGFyc2U6ICIsIHJlZ3R5cGUsIHJlZ2lkKQorICAgIGVsaWYgKHJlZ3R5cGUgPT0gIlAiKToK
KyAgICAgICAgaWYgKHJlZ2lkIG5vdCBpbiB7InQiLCAidSIsICJ2In0pOgorICAgICAgICAgICAg
cHJpbnQoIkJhZCByZWdpc3RlciBwYXJzZTogIiwgcmVndHlwZSwgcmVnaWQpCisgICAgZWxzZToK
KyAgICAgICAgcHJpbnQoIkJhZCByZWdpc3RlciBwYXJzZTogIiwgcmVndHlwZSwgcmVnaWQpCisK
K2RlZiBnZW5wdHJfc3JjX3JlYWRfb3BuKGYscmVndHlwZSxyZWdpZCx0YWcpOgorICAgIGlmICho
ZXhfY29tbW9uLmlzX3BhaXIocmVnaWQpKToKKyAgICAgICAgZ2VucHRyX3NyY19yZWFkKGYscmVn
dHlwZSxyZWdpZCkKKyAgICBlbGlmIChoZXhfY29tbW9uLmlzX3NpbmdsZShyZWdpZCkpOgorICAg
ICAgICBpZiBoZXhfY29tbW9uLmlzX29sZF92YWwocmVndHlwZSwgcmVnaWQsIHRhZyk6CisgICAg
ICAgICAgICBnZW5wdHJfc3JjX3JlYWQoZixyZWd0eXBlLHJlZ2lkKQorICAgICAgICBlbGlmIGhl
eF9jb21tb24uaXNfbmV3X3ZhbChyZWd0eXBlLCByZWdpZCwgdGFnKToKKyAgICAgICAgICAgIGdl
bnB0cl9zcmNfcmVhZF9uZXcoZixyZWd0eXBlLHJlZ2lkKQorICAgICAgICBlbHNlOgorICAgICAg
ICAgICAgcHJpbnQoIkJhZCByZWdpc3RlciBwYXJzZTogIixyZWd0eXBlLHJlZ2lkLHRvc3MsbnVt
cmVncykKKyAgICBlbHNlOgorICAgICAgICBwcmludCgiQmFkIHJlZ2lzdGVyIHBhcnNlOiAiLHJl
Z3R5cGUscmVnaWQsdG9zcyxudW1yZWdzKQorCitkZWYgZ2VuX2hlbHBlcl9jYWxsX29wbihmLCB0
YWcsIHJlZ3R5cGUsIHJlZ2lkLCB0b3NzLCBudW1yZWdzLCBpKToKKyAgICBpZiAoaSA+IDApOiBm
LndyaXRlKCIsICIpCisgICAgaWYgKGhleF9jb21tb24uaXNfcGFpcihyZWdpZCkpOgorICAgICAg
ICBmLndyaXRlKCIlcyVzViIgJSAocmVndHlwZSxyZWdpZCkpCisgICAgZWxpZiAoaGV4X2NvbW1v
bi5pc19zaW5nbGUocmVnaWQpKToKKyAgICAgICAgaWYgaGV4X2NvbW1vbi5pc19vbGRfdmFsKHJl
Z3R5cGUsIHJlZ2lkLCB0YWcpOgorICAgICAgICAgICAgZi53cml0ZSgiJXMlc1YiICUgKHJlZ3R5
cGUscmVnaWQpKQorICAgICAgICBlbGlmIGhleF9jb21tb24uaXNfbmV3X3ZhbChyZWd0eXBlLCBy
ZWdpZCwgdGFnKToKKyAgICAgICAgICAgIGYud3JpdGUoIiVzJXNOIiAlIChyZWd0eXBlLHJlZ2lk
KSkKKyAgICAgICAgZWxzZToKKyAgICAgICAgICAgIHByaW50KCJCYWQgcmVnaXN0ZXIgcGFyc2U6
ICIscmVndHlwZSxyZWdpZCx0b3NzLG51bXJlZ3MpCisgICAgZWxzZToKKyAgICAgICAgcHJpbnQo
IkJhZCByZWdpc3RlciBwYXJzZTogIixyZWd0eXBlLHJlZ2lkLHRvc3MsbnVtcmVncykKKworZGVm
IGdlbl9oZWxwZXJfZGVjbF9pbW0oZixpbW1sZXR0KToKKyAgICBmLndyaXRlKCIgICAgVENHdiB0
Y2d2XyVzID0gdGNnX2NvbnN0X3RsKCVzKTtcbiIgJSBcCisgICAgICAgIChoZXhfY29tbW9uLmlt
bV9uYW1lKGltbWxldHQpLCBoZXhfY29tbW9uLmltbV9uYW1lKGltbWxldHQpKSkKKworZGVmIGdl
bl9oZWxwZXJfY2FsbF9pbW0oZixpbW1sZXR0KToKKyAgICBmLndyaXRlKCIsIHRjZ3ZfJXMiICUg
aGV4X2NvbW1vbi5pbW1fbmFtZShpbW1sZXR0KSkKKworZGVmIGdlbl9oZWxwZXJfZnJlZV9pbW0o
ZixpbW1sZXR0KToKKyAgICBmLndyaXRlKCIgICAgdGNnX3RlbXBfZnJlZSh0Y2d2XyVzKTtcbiIg
JSBoZXhfY29tbW9uLmltbV9uYW1lKGltbWxldHQpKQorCitkZWYgZ2VucHRyX2RzdF93cml0ZV9w
YWlyKGYsIHRhZywgcmVndHlwZSwgcmVnaWQpOgorICAgIGlmICgnQV9DT05ERVhFQycgaW4gaGV4
X2NvbW1vbi5hdHRyaWJkaWN0W3RhZ10pOgorICAgICAgICBmLndyaXRlKCIgICAgZ2VuX2xvZ19w
cmVkaWNhdGVkX3JlZ193cml0ZV9wYWlyKCVzJXNOLCAlcyVzViwgaW5zbi0+c2xvdCk7XG4iICUg
XAorICAgICAgICAgICAgKHJlZ3R5cGUsIHJlZ2lkLCByZWd0eXBlLCByZWdpZCkpCisgICAgZWxz
ZToKKyAgICAgICAgZi53cml0ZSgiICAgIGdlbl9sb2dfcmVnX3dyaXRlX3BhaXIoJXMlc04sICVz
JXNWKTtcbiIgJSBcCisgICAgICAgICAgICAocmVndHlwZSwgcmVnaWQsIHJlZ3R5cGUsIHJlZ2lk
KSkKKyAgICBmLndyaXRlKCIgICAgY3R4X2xvZ19yZWdfd3JpdGVfcGFpcihjdHgsICVzJXNOKTtc
biIgJSBcCisgICAgICAgIChyZWd0eXBlLCByZWdpZCkpCisKK2RlZiBnZW5wdHJfZHN0X3dyaXRl
KGYsIHRhZywgcmVndHlwZSwgcmVnaWQpOgorICAgIGlmIChyZWd0eXBlID09ICJSIik6CisgICAg
ICAgIGlmIChyZWdpZCBpbiB7ImRkIiwgInh4IiwgInl5In0pOgorICAgICAgICAgICAgZ2VucHRy
X2RzdF93cml0ZV9wYWlyKGYsIHRhZywgcmVndHlwZSwgcmVnaWQpCisgICAgICAgIGVsaWYgKHJl
Z2lkIGluIHsiZCIsICJlIiwgIngiLCAieSJ9KToKKyAgICAgICAgICAgIGlmICgnQV9DT05ERVhF
QycgaW4gaGV4X2NvbW1vbi5hdHRyaWJkaWN0W3RhZ10pOgorICAgICAgICAgICAgICAgIGYud3Jp
dGUoIiAgICBnZW5fbG9nX3ByZWRpY2F0ZWRfcmVnX3dyaXRlKCVzJXNOLCAlcyVzVixcbiIgJSBc
CisgICAgICAgICAgICAgICAgICAgIChyZWd0eXBlLCByZWdpZCwgcmVndHlwZSwgcmVnaWQpKQor
ICAgICAgICAgICAgICAgIGYud3JpdGUoIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IGluc24tPnNsb3QpO1xuIikKKyAgICAgICAgICAgIGVsc2U6CisgICAgICAgICAgICAgICAgZi53
cml0ZSgiICAgIGdlbl9sb2dfcmVnX3dyaXRlKCVzJXNOLCAlcyVzVik7XG4iICUgXAorICAgICAg
ICAgICAgICAgICAgICAocmVndHlwZSwgcmVnaWQsIHJlZ3R5cGUsIHJlZ2lkKSkKKyAgICAgICAg
ICAgIGYud3JpdGUoIiAgICBjdHhfbG9nX3JlZ193cml0ZShjdHgsICVzJXNOKTtcbiIgJSBcCisg
ICAgICAgICAgICAgICAgKHJlZ3R5cGUsIHJlZ2lkKSkKKyAgICAgICAgZWxzZToKKyAgICAgICAg
ICAgIHByaW50KCJCYWQgcmVnaXN0ZXIgcGFyc2U6ICIsIHJlZ3R5cGUsIHJlZ2lkKQorICAgIGVs
aWYgKHJlZ3R5cGUgPT0gIlAiKToKKyAgICAgICAgaWYgKHJlZ2lkIGluIHsiZCIsICJlIiwgIngi
fSk6CisgICAgICAgICAgICBmLndyaXRlKCIgICAgZ2VuX2xvZ19wcmVkX3dyaXRlKCVzJXNOLCAl
cyVzVik7XG4iICUgXAorICAgICAgICAgICAgICAgIChyZWd0eXBlLCByZWdpZCwgcmVndHlwZSwg
cmVnaWQpKQorICAgICAgICAgICAgZi53cml0ZSgiICAgIGN0eF9sb2dfcHJlZF93cml0ZShjdHgs
ICVzJXNOKTtcbiIgJSBcCisgICAgICAgICAgICAgICAgKHJlZ3R5cGUsIHJlZ2lkKSkKKyAgICAg
ICAgZWxzZToKKyAgICAgICAgICAgIHByaW50KCJCYWQgcmVnaXN0ZXIgcGFyc2U6ICIsIHJlZ3R5
cGUsIHJlZ2lkKQorICAgIGVsaWYgKHJlZ3R5cGUgPT0gIkMiKToKKyAgICAgICAgaWYgKHJlZ2lk
ID09ICJkZCIpOgorICAgICAgICAgICAgZi53cml0ZSgiICAgIGdlbl93cml0ZV9jdHJsX3JlZ19w
YWlyKGN0eCwgJXMlc04sICVzJXNWKTtcbiIgJSBcCisgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIChyZWd0eXBlLCByZWdpZCwgcmVndHlwZSwgcmVnaWQpKQorICAgICAgICBlbGlmIChyZWdp
ZCA9PSAiZCIpOgorICAgICAgICAgICAgZi53cml0ZSgiICAgIGdlbl93cml0ZV9jdHJsX3JlZyhj
dHgsICVzJXNOLCAlcyVzVik7XG4iICUgXAorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAo
cmVndHlwZSwgcmVnaWQsIHJlZ3R5cGUsIHJlZ2lkKSkKKyAgICAgICAgZWxzZToKKyAgICAgICAg
ICAgIHByaW50KCJCYWQgcmVnaXN0ZXIgcGFyc2U6ICIsIHJlZ3R5cGUsIHJlZ2lkKQorICAgIGVs
c2U6CisgICAgICAgIHByaW50KCJCYWQgcmVnaXN0ZXIgcGFyc2U6ICIsIHJlZ3R5cGUsIHJlZ2lk
KQorCitkZWYgZ2VucHRyX2RzdF93cml0ZV9vcG4oZixyZWd0eXBlLCByZWdpZCwgdGFnKToKKyAg
ICBpZiAoaGV4X2NvbW1vbi5pc19wYWlyKHJlZ2lkKSk6CisgICAgICAgIGdlbnB0cl9kc3Rfd3Jp
dGUoZiwgdGFnLCByZWd0eXBlLCByZWdpZCkKKyAgICBlbGlmIChoZXhfY29tbW9uLmlzX3Npbmds
ZShyZWdpZCkpOgorICAgICAgICBnZW5wdHJfZHN0X3dyaXRlKGYsIHRhZywgcmVndHlwZSwgcmVn
aWQpCisgICAgZWxzZToKKyAgICAgICAgcHJpbnQoIkJhZCByZWdpc3RlciBwYXJzZTogIixyZWd0
eXBlLHJlZ2lkLHRvc3MsbnVtcmVncykKKworIyMKKyMjIEdlbmVyYXRlIHRoZSBUQ0cgY29kZSB0
byBjYWxsIHRoZSBoZWxwZXIKKyMjICAgICBGb3IgQTJfYWRkOiBSZDMyPWFkZChSczMyLFJ0MzIp
LCB7IFJkVj1Sc1YrUnRWO30KKyMjICAgICBXZSBwcm9kdWNlOgorIyMgICAgc3RhdGljIHZvaWQg
Z2VuZXJhdGVfQTJfYWRkKCkKKyMjICAgICAgICAgICAgICAgICAgICBDUFVIZXhhZ29uU3RhdGUg
KmVudgorIyMgICAgICAgICAgICAgICAgICAgIERpc2FzQ29udGV4dCAqY3R4LAorIyMgICAgICAg
ICAgICAgICAgICAgIEluc24gKmluc24sCisjIyAgICAgICAgICAgICAgICAgICAgUGFja2V0ICpw
a3QpCisjIyAgICAgICB7CisjIyAgICAgICAgICAgVENHdiBSZFYgPSB0Y2dfdGVtcF9sb2NhbF9u
ZXcoKTsKKyMjICAgICAgICAgICBjb25zdCBpbnQgUmROID0gaW5zbi0+cmVnbm9bMF07CisjIyAg
ICAgICAgICAgVENHdiBSc1YgPSBoZXhfZ3ByW2luc24tPnJlZ25vWzFdXTsKKyMjICAgICAgICAg
ICBUQ0d2IFJ0ViA9IGhleF9ncHJbaW5zbi0+cmVnbm9bMl1dOworIyMgICAgICAgICAgIDxHRU4+
CisjIyAgICAgICAgICAgZ2VuX2xvZ19yZWdfd3JpdGUoUmROLCBSZFYpOworIyMgICAgICAgICAg
IGN0eF9sb2dfcmVnX3dyaXRlKGN0eCwgUmROKTsKKyMjICAgICAgICAgICB0Y2dfdGVtcF9mcmVl
KFJkVik7CisjIyAgICAgICB9CisjIworIyMgICAgICAgd2hlcmUgPEdFTj4gZGVwZW5kcyBvbiBo
ZXhfY29tbW9uLnNraXBfcWVtdV9oZWxwZXIodGFnKQorIyMgICAgICAgaWYgaGV4X2NvbW1vbi5z
a2lwX3FlbXVfaGVscGVyKHRhZykgaXMgVHJ1ZQorIyMgICAgICAgPEdFTj4gIGlzIGZHRU5fVENH
X0EyX2FkZCh7IFJkVj1Sc1YrUnRWO30pOworIyMgICAgICAgaWYgaGV4X2NvbW1vbi5za2lwX3Fl
bXVfaGVscGVyKHRhZykgaXMgRmFsc2UKKyMjICAgICAgIDxHRU4+ICBpcyBnZW5faGVscGVyX0Ey
X2FkZChSZFYsIGNwdV9lbnYsIFJzViwgUnRWKTsKKyMjCitkZWYgZ2VuX3RjZ19mdW5jKGYsIHRh
ZywgcmVncywgaW1tcyk6CisgICAgZi53cml0ZSgic3RhdGljIHZvaWQgZ2VuZXJhdGVfJXMoXG4i
ICV0YWcpCisgICAgZi53cml0ZSgiICAgICAgICAgICAgICAgIENQVUhleGFnb25TdGF0ZSAqZW52
LFxuIikKKyAgICBmLndyaXRlKCIgICAgICAgICAgICAgICAgRGlzYXNDb250ZXh0ICpjdHgsXG4i
KQorICAgIGYud3JpdGUoIiAgICAgICAgICAgICAgICBJbnNuICppbnNuLFxuIikKKyAgICBmLndy
aXRlKCIgICAgICAgICAgICAgICAgUGFja2V0ICpwa3QpXG4iKQorICAgIGYud3JpdGUoJ3tcbicp
CisgICAgaWYgaGV4X2NvbW1vbi5uZWVkX2VhKHRhZyk6IGdlbl9kZWNsX2VhX3RjZyhmLCB0YWcp
CisgICAgaT0wCisgICAgIyMgRGVjbGFyZSBhbGwgdGhlIG9wZXJhbmRzIChyZWdzIGFuZCBpbW1l
ZGlhdGVzKQorICAgIGZvciByZWd0eXBlLHJlZ2lkLHRvc3MsbnVtcmVncyBpbiByZWdzOgorICAg
ICAgICBnZW5wdHJfZGVjbF9vcG4oZiwgdGFnLCByZWd0eXBlLCByZWdpZCwgdG9zcywgbnVtcmVn
cywgaSkKKyAgICAgICAgaSArPSAxCisgICAgZm9yIGltbWxldHQsYml0cyxpbW1zaGlmdCBpbiBp
bW1zOgorICAgICAgICBnZW5wdHJfZGVjbF9pbW0oZixpbW1sZXR0KQorCisgICAgaWYgJ0FfUFJJ
VicgaW4gaGV4X2NvbW1vbi5hdHRyaWJkaWN0W3RhZ106CisgICAgICAgIGYud3JpdGUoJyAgICBm
Q0hFQ0tGT1JQUklWKCk7XG4nKQorICAgIGlmICdBX0dVRVNUJyBpbiBoZXhfY29tbW9uLmF0dHJp
YmRpY3RbdGFnXToKKyAgICAgICAgZi53cml0ZSgnICAgIGZDSEVDS0ZPUkdVRVNUKCk7XG4nKQor
CisgICAgIyMgUmVhZCBhbGwgdGhlIGlucHV0cworICAgIGZvciByZWd0eXBlLHJlZ2lkLHRvc3Ms
bnVtcmVncyBpbiByZWdzOgorICAgICAgICBpZiAoaGV4X2NvbW1vbi5pc19yZWFkKHJlZ2lkKSk6
CisgICAgICAgICAgICBnZW5wdHJfc3JjX3JlYWRfb3BuKGYscmVndHlwZSxyZWdpZCx0YWcpCisK
KyAgICBpZiAoIGhleF9jb21tb24uc2tpcF9xZW11X2hlbHBlcih0YWcpICk6CisgICAgICAgIGYu
d3JpdGUoIiAgICBmR0VOX1RDR18lcyglcyk7XG4iICUgKHRhZywgaGV4X2NvbW1vbi5zZW1kaWN0
W3RhZ10pKQorICAgIGVsc2U6CisgICAgICAgICMjIEdlbmVyYXRlIHRoZSBjYWxsIHRvIHRoZSBo
ZWxwZXIKKyAgICAgICAgZm9yIGltbWxldHQsYml0cyxpbW1zaGlmdCBpbiBpbW1zOgorICAgICAg
ICAgICAgZ2VuX2hlbHBlcl9kZWNsX2ltbShmLGltbWxldHQpCisgICAgICAgIGlmIGhleF9jb21t
b24ubmVlZF9wYXJ0MSh0YWcpOgorICAgICAgICAgICAgZi53cml0ZSgiICAgIFRDR3YgcGFydDEg
PSB0Y2dfY29uc3RfdGwoaW5zbi0+cGFydDEpO1xuIikKKyAgICAgICAgaWYgaGV4X2NvbW1vbi5u
ZWVkX3Nsb3QodGFnKToKKyAgICAgICAgICAgIGYud3JpdGUoIiAgICBUQ0d2IHNsb3QgPSB0Y2df
Y29uc3RfdGwoaW5zbi0+c2xvdCk7XG4iKQorICAgICAgICBmLndyaXRlKCIgICAgZ2VuX2hlbHBl
cl8lcygiICUgKHRhZykpCisgICAgICAgIGk9MAorICAgICAgICAjIyBJZiB0aGVyZSBpcyBhIHNj
YWxhciByZXN1bHQsIGl0IGlzIHRoZSByZXR1cm4gdHlwZQorICAgICAgICBmb3IgcmVndHlwZSxy
ZWdpZCx0b3NzLG51bXJlZ3MgaW4gcmVnczoKKyAgICAgICAgICAgIGlmIChoZXhfY29tbW9uLmlz
X3dyaXR0ZW4ocmVnaWQpKToKKyAgICAgICAgICAgICAgICBnZW5faGVscGVyX2NhbGxfb3BuKGYs
IHRhZywgcmVndHlwZSwgcmVnaWQsIHRvc3MsIG51bXJlZ3MsIGkpCisgICAgICAgICAgICAgICAg
aSArPSAxCisgICAgICAgIGlmIChpID4gMCk6IGYud3JpdGUoIiwgIikKKyAgICAgICAgZi53cml0
ZSgiY3B1X2VudiIpCisgICAgICAgIGk9MQorICAgICAgICBmb3IgcmVndHlwZSxyZWdpZCx0b3Nz
LG51bXJlZ3MgaW4gcmVnczoKKyAgICAgICAgICAgIGlmIChoZXhfY29tbW9uLmlzX3JlYWQocmVn
aWQpKToKKyAgICAgICAgICAgICAgICBnZW5faGVscGVyX2NhbGxfb3BuKGYsIHRhZywgcmVndHlw
ZSwgcmVnaWQsIHRvc3MsIG51bXJlZ3MsIGkpCisgICAgICAgICAgICAgICAgaSArPSAxCisgICAg
ICAgIGZvciBpbW1sZXR0LGJpdHMsaW1tc2hpZnQgaW4gaW1tczoKKyAgICAgICAgICAgIGdlbl9o
ZWxwZXJfY2FsbF9pbW0oZixpbW1sZXR0KQorCisgICAgICAgIGlmIGhleF9jb21tb24ubmVlZF9z
bG90KHRhZyk6IGYud3JpdGUoIiwgc2xvdCIpCisgICAgICAgIGlmIGhleF9jb21tb24ubmVlZF9w
YXJ0MSh0YWcpOiBmLndyaXRlKCIsIHBhcnQxIiApCisgICAgICAgIGYud3JpdGUoIik7XG4iKQor
ICAgICAgICBpZiBoZXhfY29tbW9uLm5lZWRfc2xvdCh0YWcpOgorICAgICAgICAgICAgZi53cml0
ZSgiICAgIHRjZ190ZW1wX2ZyZWUoc2xvdCk7XG4iKQorICAgICAgICBpZiBoZXhfY29tbW9uLm5l
ZWRfcGFydDEodGFnKToKKyAgICAgICAgICAgIGYud3JpdGUoIiAgICB0Y2dfdGVtcF9mcmVlKHBh
cnQxKTtcbiIpCisgICAgICAgIGZvciBpbW1sZXR0LGJpdHMsaW1tc2hpZnQgaW4gaW1tczoKKyAg
ICAgICAgICAgIGdlbl9oZWxwZXJfZnJlZV9pbW0oZixpbW1sZXR0KQorCisgICAgIyMgV3JpdGUg
YWxsIHRoZSBvdXRwdXRzCisgICAgZm9yIHJlZ3R5cGUscmVnaWQsdG9zcyxudW1yZWdzIGluIHJl
Z3M6CisgICAgICAgIGlmIChoZXhfY29tbW9uLmlzX3dyaXR0ZW4ocmVnaWQpKToKKyAgICAgICAg
ICAgIGdlbnB0cl9kc3Rfd3JpdGVfb3BuKGYscmVndHlwZSwgcmVnaWQsIHRhZykKKworICAgICMj
IEZyZWUgYWxsIHRoZSBvcGVyYW5kcyAocmVncyBhbmQgaW1tZWRpYXRlcykKKyAgICBpZiBoZXhf
Y29tbW9uLm5lZWRfZWEodGFnKTogZ2VuX2ZyZWVfZWFfdGNnKGYpCisgICAgZm9yIHJlZ3R5cGUs
cmVnaWQsdG9zcyxudW1yZWdzIGluIHJlZ3M6CisgICAgICAgIGdlbnB0cl9mcmVlX29wbihmLHJl
Z3R5cGUscmVnaWQsaSx0YWcpCisgICAgICAgIGkgKz0gMQorCisgICAgZi53cml0ZSgifVxuXG4i
KQorCitkZWYgZ2VuX2RlZl90Y2dfZnVuYyhmLCB0YWcsIHRhZ3JlZ3MsIHRhZ2ltbXMpOgorICAg
IHJlZ3MgPSB0YWdyZWdzW3RhZ10KKyAgICBpbW1zID0gdGFnaW1tc1t0YWddCisKKyAgICBnZW5f
dGNnX2Z1bmMoZiwgdGFnLCByZWdzLCBpbW1zKQorCitkZWYgbWFpbigpOgorICAgIGhleF9jb21t
b24ucmVhZF9zZW1hbnRpY3NfZmlsZShzeXMuYXJndlsxXSkKKyAgICBoZXhfY29tbW9uLnJlYWRf
YXR0cmlic19maWxlKHN5cy5hcmd2WzJdKQorICAgIGhleF9jb21tb24ucmVhZF9vdmVycmlkZXNf
ZmlsZShzeXMuYXJndlszXSkKKyAgICBoZXhfY29tbW9uLmNhbGN1bGF0ZV9hdHRyaWJzKCkKKyAg
ICB0YWdyZWdzID0gaGV4X2NvbW1vbi5nZXRfdGFncmVncygpCisgICAgdGFnaW1tcyA9IGhleF9j
b21tb24uZ2V0X3RhZ2ltbXMoKQorCisgICAgd2l0aCBvcGVuKHN5cy5hcmd2WzRdLCAndycpIGFz
IGY6CisgICAgICAgIGYud3JpdGUoIiNpZm5kZWYgSEVYQUdPTl9UQ0dfRlVOQ1NfSFxuIikKKyAg
ICAgICAgZi53cml0ZSgiI2RlZmluZSBIRVhBR09OX1RDR19GVU5DU19IXG5cbiIpCisKKyAgICAg
ICAgZm9yIHRhZyBpbiBoZXhfY29tbW9uLnRhZ3M6CisgICAgICAgICAgICAjIyBTa2lwIHRoZSBw
cml2IGluc3RydWN0aW9ucworICAgICAgICAgICAgaWYgKCAiQV9QUklWIiBpbiBoZXhfY29tbW9u
LmF0dHJpYmRpY3RbdGFnXSApIDoKKyAgICAgICAgICAgICAgICBjb250aW51ZQorICAgICAgICAg
ICAgIyMgU2tpcCB0aGUgZ3Vlc3QgaW5zdHJ1Y3Rpb25zCisgICAgICAgICAgICBpZiAoICJBX0dV
RVNUIiBpbiBoZXhfY29tbW9uLmF0dHJpYmRpY3RbdGFnXSApIDoKKyAgICAgICAgICAgICAgICBj
b250aW51ZQorICAgICAgICAgICAgIyMgU2tpcCB0aGUgZGlhZyBpbnN0cnVjdGlvbnMKKyAgICAg
ICAgICAgIGlmICggdGFnID09ICJZNl9kaWFnIiApIDoKKyAgICAgICAgICAgICAgICBjb250aW51
ZQorICAgICAgICAgICAgaWYgKCB0YWcgPT0gIlk2X2RpYWcwIiApIDoKKyAgICAgICAgICAgICAg
ICBjb250aW51ZQorICAgICAgICAgICAgaWYgKCB0YWcgPT0gIlk2X2RpYWcxIiApIDoKKyAgICAg
ICAgICAgICAgICBjb250aW51ZQorCisgICAgICAgICAgICBnZW5fZGVmX3RjZ19mdW5jKGYsIHRh
ZywgdGFncmVncywgdGFnaW1tcykKKworICAgICAgICBmLndyaXRlKCIjZW5kaWYgICAgLyogSEVY
QUdPTl9UQ0dfRlVOQ1NfSCAqL1xuIikKKworaWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjoKKyAg
ICBtYWluKCkKZGlmZiAtLWdpdCBhL3RhcmdldC9oZXhhZ29uL2hleF9jb21tb24ucHkgYi90YXJn
ZXQvaGV4YWdvbi9oZXhfY29tbW9uLnB5Cm5ldyBmaWxlIG1vZGUgMTAwNzU1CmluZGV4IDAwMDAw
MDAuLmIzYjUzNDAKLS0tIC9kZXYvbnVsbAorKysgYi90YXJnZXQvaGV4YWdvbi9oZXhfY29tbW9u
LnB5CkBAIC0wLDAgKzEsMjM0IEBACisjIS91c3IvYmluL2VudiBweXRob24zCisKKyMjCisjIyAg
Q29weXJpZ2h0KGMpIDIwMTktMjAyMSBRdWFsY29tbSBJbm5vdmF0aW9uIENlbnRlciwgSW5jLiBB
bGwgUmlnaHRzIFJlc2VydmVkLgorIyMKKyMjICBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2Fy
ZTsgeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeQorIyMgIGl0IHVuZGVyIHRo
ZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5
CisjIyAgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbjsgZWl0aGVyIHZlcnNpb24gMiBvZiB0
aGUgTGljZW5zZSwgb3IKKyMjICAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLgor
IyMKKyMjICBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3
aWxsIGJlIHVzZWZ1bCwKKyMjICBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZl
biB0aGUgaW1wbGllZCB3YXJyYW50eSBvZgorIyMgIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNT
IEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGUKKyMjICBHTlUgR2VuZXJhbCBQdWJs
aWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLgorIyMKKyMjICBZb3Ugc2hvdWxkIGhhdmUgcmVj
ZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZQorIyMgIGFsb25n
IHdpdGggdGhpcyBwcm9ncmFtOyBpZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vu
c2VzLz4uCisjIworCitpbXBvcnQgc3lzCitpbXBvcnQgcmUKK2ltcG9ydCBzdHJpbmcKKworYmVo
ZGljdCA9IHt9ICAgICAgICAgICMgdGFnIC0+YmVoYXZpb3IKK3NlbWRpY3QgPSB7fSAgICAgICAg
ICAjIHRhZyAtPiBzZW1hbnRpY3MKK2F0dHJpYmRpY3QgPSB7fSAgICAgICAjIHRhZyAtPiBhdHRy
aWJ1dGVzCittYWNyb3MgPSB7fSAgICAgICAgICAgIyBtYWNybyAtPiBtYWNybyBpbmZvcm1hdGlv
bi4uLgorYXR0cmliaW5mbyA9IHt9ICAgICAgICMgUmVnaXN0ZXIgaW5mb3JtYXRpb24gYW5kIG1p
c2MKK3RhZ3MgPSBbXSAgICAgICAgICAgICAjIGxpc3Qgb2YgYWxsIHRhZ3MKK292ZXJyaWRlcyA9
IHt9ICAgICAgICAjIHRhZ3Mgd2l0aCBoZWxwZXIgb3ZlcnJpZGVzCisKKyMgV2Ugc2hvdWxkIGRv
IHRoaXMgYXMgYSBoYXNoIGZvciBwZXJmb3JtYW5jZSwKKyMgYnV0IHRvIGtlZXAgb3JkZXIgbGV0
J3Mga2VlcCBpdCBhcyBhIGxpc3QuCitkZWYgdW5pcXVpZnkoc2VxKToKKyAgICBzZWVuID0gc2V0
KCkKKyAgICBzZWVuX2FkZCA9IHNlZW4uYWRkCisgICAgcmV0dXJuIFt4IGZvciB4IGluIHNlcSBp
ZiB4IG5vdCBpbiBzZWVuIGFuZCBub3Qgc2Vlbl9hZGQoeCldCisKK3JlZ3JlID0gcmUuY29tcGls
ZSgKKyAgICByIigoPzwhRFVQKVtNTk9SQ1BRWFNHVlpBXSkoW3N0dXZ3eHl6ZGVmZ10rKShbLl0/
W0xsSGhdPykoXGQrUz8pIikKK2ltbXJlID0gcmUuY29tcGlsZShyIlsjXShbclJzU3VVbV0pKFxk
KykoPzpbOl0oXGQrKSk/IikKK3JlZ19vcl9pbW1yZSA9IFwKKyAgICByZS5jb21waWxlKHIiKCgo
PzwhRFVQKVtNTlJDT1BRWFNHVlpBXSkoW3N0dXZ3eHl6ZGVmZ10rKSIgKyBcCisgICAgICAgICAg
ICAgICAgIihbLl0/W0xsSGhdPykoXGQrUz8pKXwoWyNdKFtyUnNTdVVtXSkoXGQrKVs6XT8oXGQr
KT8pIikKK3JlbGltbXJlID0gcmUuY29tcGlsZShyIlsjXShbclJdKShcZCspKD86WzpdKFxkKykp
PyIpCithYnNpbW1yZSA9IHJlLmNvbXBpbGUociJbI10oW3NTdVVtXSkoXGQrKSg/Ols6XShcZCsp
KT8iKQorCitmaW5pc2hlZF9tYWNyb3MgPSBzZXQoKQorCitkZWYgZXhwYW5kX21hY3JvX2F0dHJp
YnMobWFjcm8sYWxsbWFjX3JlKToKKyAgICBpZiBtYWNyby5rZXkgbm90IGluIGZpbmlzaGVkX21h
Y3JvczoKKyAgICAgICAgIyBHZXQgYSBsaXN0IG9mIGFsbCB0aGluZ3MgdGhhdCBtaWdodCBiZSBt
YWNyb3MKKyAgICAgICAgbCA9IGFsbG1hY19yZS5maW5kYWxsKG1hY3JvLmJlaCkKKyAgICAgICAg
Zm9yIHN1Ym1hY3JvIGluIGw6CisgICAgICAgICAgICBpZiBub3Qgc3VibWFjcm86IGNvbnRpbnVl
CisgICAgICAgICAgICBpZiBub3QgbWFjcm9zW3N1Ym1hY3JvXToKKyAgICAgICAgICAgICAgICBy
YWlzZSBFeGNlcHRpb24oIkNvdWxkbid0IGZpbmQgbWFjcm86IDwlcz4iICUgbCkKKyAgICAgICAg
ICAgIG1hY3JvLmF0dHJpYnMgfD0gZXhwYW5kX21hY3JvX2F0dHJpYnMoCisgICAgICAgICAgICAg
ICAgbWFjcm9zW3N1Ym1hY3JvXSwgYWxsbWFjX3JlKQorICAgICAgICAgICAgZmluaXNoZWRfbWFj
cm9zLmFkZChtYWNyby5rZXkpCisgICAgcmV0dXJuIG1hY3JvLmF0dHJpYnMKKworIyBXaGVuIHFl
bXUgbmVlZHMgYW4gYXR0cmlidXRlIHRoYXQgaXNuJ3QgaW4gdGhlIGltcG9ydGVkIGZpbGVzLAor
IyB3ZSdsbCBhZGQgaXQgaGVyZS4KK2RlZiBhZGRfcWVtdV9tYWNyb19hdHRyaWIobmFtZSwgYXR0
cmliKToKKyAgICBtYWNyb3NbbmFtZV0uYXR0cmlicy5hZGQoYXR0cmliKQorCitpbW1leHRyZSA9
IHJlLmNvbXBpbGUocidmKE1VU1RfKT9JTU1FWFRbKF0oW1V1U3NScl0pJykKK2RlZiBjYWxjdWxh
dGVfYXR0cmlicygpOgorICAgIGFkZF9xZW11X21hY3JvX2F0dHJpYignZlJFQURfUEMnLCAnQV9J
TVBMSUNJVF9SRUFEU19QQycpCisgICAgYWRkX3FlbXVfbWFjcm9fYXR0cmliKCdmVFJBUCcsICdB
X0lNUExJQ0lUX1JFQURTX1BDJykKKyAgICBhZGRfcWVtdV9tYWNyb19hdHRyaWIoJ2ZXUklURV9Q
MCcsICdBX1dSSVRFU19QUkVEX1JFRycpCisgICAgYWRkX3FlbXVfbWFjcm9fYXR0cmliKCdmV1JJ
VEVfUDEnLCAnQV9XUklURVNfUFJFRF9SRUcnKQorICAgIGFkZF9xZW11X21hY3JvX2F0dHJpYign
ZldSSVRFX1AyJywgJ0FfV1JJVEVTX1BSRURfUkVHJykKKyAgICBhZGRfcWVtdV9tYWNyb19hdHRy
aWIoJ2ZXUklURV9QMycsICdBX1dSSVRFU19QUkVEX1JFRycpCisKKyAgICAjIFJlY3Vyc2UgZG93
biBtYWNyb3MsIGZpbmQgYXR0cmlidXRlcyBmcm9tIHN1Yi1tYWNyb3MKKyAgICBtYWNyb1ZhbHVl
cyA9IGxpc3QobWFjcm9zLnZhbHVlcygpKQorICAgIGFsbG1hY3Jvc19yZXN0ciA9ICJ8Ii5qb2lu
KHNldChbIG0ucmUucGF0dGVybiBmb3IgbSBpbiBtYWNyb1ZhbHVlcyBdKSkKKyAgICBhbGxtYWNy
b3NfcmUgPSByZS5jb21waWxlKGFsbG1hY3Jvc19yZXN0cikKKyAgICBmb3IgbWFjcm8gaW4gbWFj
cm9WYWx1ZXM6CisgICAgICAgIGV4cGFuZF9tYWNyb19hdHRyaWJzKG1hY3JvLGFsbG1hY3Jvc19y
ZSkKKyAgICAjIEFwcGVuZCBhdHRyaWJ1dGVzIHRvIGFsbCBpbnN0cnVjdGlvbnMKKyAgICBmb3Ig
dGFnIGluIHRhZ3M6CisgICAgICAgIGZvciBtYWNuYW1lIGluIGFsbG1hY3Jvc19yZS5maW5kYWxs
KHNlbWRpY3RbdGFnXSk6CisgICAgICAgICAgICBpZiBub3QgbWFjbmFtZTogY29udGludWUKKyAg
ICAgICAgICAgIG1hY3JvID0gbWFjcm9zW21hY25hbWVdCisgICAgICAgICAgICBhdHRyaWJkaWN0
W3RhZ10gfD0gc2V0KG1hY3JvLmF0dHJpYnMpCisgICAgIyBGaWd1cmUgb3V0IHdoaWNoIGluc3Ry
dWN0aW9ucyB3cml0ZSBwcmVkaWNhdGUgcmVnaXN0ZXJzCisgICAgdGFncmVncyA9IGdldF90YWdy
ZWdzKCkKKyAgICBmb3IgdGFnIGluIHRhZ3M6CisgICAgICAgIHJlZ3MgPSB0YWdyZWdzW3RhZ10K
KyAgICAgICAgZm9yIHJlZ3R5cGUsIHJlZ2lkLCB0b3NzLCBudW1yZWdzIGluIHJlZ3M6CisgICAg
ICAgICAgICBpZiByZWd0eXBlID09ICJQIiBhbmQgaXNfd3JpdHRlbihyZWdpZCk6CisgICAgICAg
ICAgICAgICAgYXR0cmliZGljdFt0YWddLmFkZCgnQV9XUklURVNfUFJFRF9SRUcnKQorCitkZWYg
U0VNQU5USUNTKHRhZywgYmVoLCBzZW0pOgorICAgICNwcmludCB0YWcsYmVoLHNlbQorICAgIGJl
aGRpY3RbdGFnXSA9IGJlaAorICAgIHNlbWRpY3RbdGFnXSA9IHNlbQorICAgIGF0dHJpYmRpY3Rb
dGFnXSA9IHNldCgpCisgICAgdGFncy5hcHBlbmQodGFnKSAgICAgICAgIyBkaWN0cyBoYXZlIG5v
IG9yZGVyLCB0aGlzIGlzIGZvciBvcmRlcgorCitkZWYgQVRUUklCVVRFUyh0YWcsIGF0dHJpYnN0
cmluZyk6CisgICAgYXR0cmlic3RyaW5nID0gXAorICAgICAgICBhdHRyaWJzdHJpbmcucmVwbGFj
ZSgiQVRUUklCUyIsIiIpLnJlcGxhY2UoIigiLCIiKS5yZXBsYWNlKCIpIiwiIikKKyAgICBpZiBu
b3QgYXR0cmlic3RyaW5nOgorICAgICAgICByZXR1cm4KKyAgICBhdHRyaWJzID0gYXR0cmlic3Ry
aW5nLnNwbGl0KCIsIikKKyAgICBmb3IgYXR0cmliIGluIGF0dHJpYnM6CisgICAgICAgIGF0dHJp
YmRpY3RbdGFnXS5hZGQoYXR0cmliLnN0cmlwKCkpCisKK2NsYXNzIE1hY3JvKG9iamVjdCk6Cisg
ICAgX19zbG90c19fID0gWydrZXknLCduYW1lJywgJ2JlaCcsICdhdHRyaWJzJywgJ3JlJ10KKyAg
ICBkZWYgX19pbml0X18oc2VsZiwgbmFtZSwgYmVoLCBhdHRyaWJzKToKKyAgICAgICAgc2VsZi5r
ZXkgPSBuYW1lCisgICAgICAgIHNlbGYubmFtZSA9IG5hbWUKKyAgICAgICAgc2VsZi5iZWggPSBi
ZWgKKyAgICAgICAgc2VsZi5hdHRyaWJzID0gc2V0KGF0dHJpYnMpCisgICAgICAgIHNlbGYucmUg
PSByZS5jb21waWxlKCJcXGIiICsgbmFtZSArICJcXGIiKQorCitkZWYgTUFDUk9BVFRSSUIobWFj
bmFtZSxiZWgsYXR0cmlic3RyaW5nKToKKyAgICBhdHRyaWJzdHJpbmcgPSBhdHRyaWJzdHJpbmcu
cmVwbGFjZSgiKCIsIiIpLnJlcGxhY2UoIikiLCIiKQorICAgIGlmIGF0dHJpYnN0cmluZzoKKyAg
ICAgICAgYXR0cmlicyA9IGF0dHJpYnN0cmluZy5zcGxpdCgiLCIpCisgICAgZWxzZToKKyAgICAg
ICAgYXR0cmlicyA9IFtdCisgICAgbWFjcm9zW21hY25hbWVdID0gTWFjcm8obWFjbmFtZSxiZWgs
YXR0cmlicykKKworZGVmIGNvbXB1dGVfdGFnX3JlZ3ModGFnKToKKyAgICByZXR1cm4gdW5pcXVp
ZnkocmVncmUuZmluZGFsbChiZWhkaWN0W3RhZ10pKQorCitkZWYgY29tcHV0ZV90YWdfaW1tZWRp
YXRlcyh0YWcpOgorICAgIHJldHVybiB1bmlxdWlmeShpbW1yZS5maW5kYWxsKGJlaGRpY3RbdGFn
XSkpCisKKyMjCisjIyAgdGFncmVncyBpcyB0aGUgbWFpbiBkYXRhIHN0cnVjdHVyZSB3ZSdsbCB1
c2UKKyMjICB0YWdyZWdzW3RhZ10gd2lsbCBjb250YWluIHRoZSByZWdpc3RlcnMgdXNlZCBieSBh
biBpbnN0cnVjdGlvbgorIyMgIFdpdGhpbiBlYWNoIGVudHJ5LCB3ZSdsbCB1c2UgdGhlIHJlZ3R5
cGUgYW5kIHJlZ2lkIGZpZWxkcworIyMgICAgICByZWd0eXBlIGNhbiBiZSBvbmUgb2YgdGhlIGZv
bGxvd2luZworIyMgICAgICAgICAgQyAgICAgICAgICAgICAgICBjb250cm9sIHJlZ2lzdGVyCisj
IyAgICAgICAgICBOICAgICAgICAgICAgICAgIG5ldyByZWdpc3RlciB2YWx1ZQorIyMgICAgICAg
ICAgUCAgICAgICAgICAgICAgICBwcmVkaWNhdGUgcmVnaXN0ZXIKKyMjICAgICAgICAgIFIgICAg
ICAgICAgICAgICAgR1BSIHJlZ2lzdGVyCisjIyAgICAgICAgICBNICAgICAgICAgICAgICAgIG1v
ZGlmaWVyIHJlZ2lzdGVyCisjIyAgICAgIHJlZ2lkIGNhbiBiZSBvbmUgb2YgdGhlIGZvbGxvd2lu
ZworIyMgICAgICAgICAgZCwgZSAgICAgICAgICAgICBkZXN0aW5hdGlvbiByZWdpc3RlcgorIyMg
ICAgICAgICAgZGQgICAgICAgICAgICAgICBkZXN0aW5hdGlvbiByZWdpc3RlciBwYWlyCisjIyAg
ICAgICAgICBzLCB0LCB1LCB2LCB3ICAgIHNvdXJjZSByZWdpc3RlcgorIyMgICAgICAgICAgc3Ms
IHR0LCB1dSwgdnYgICBzb3VyY2UgcmVnaXN0ZXIgcGFpcgorIyMgICAgICAgICAgeCwgeSAgICAg
ICAgICAgICByZWFkLXdyaXRlIHJlZ2lzdGVyCisjIyAgICAgICAgICB4eCwgeXkgICAgICAgICAg
IHJlYWQtd3JpdGUgcmVnaXN0ZXIgcGFpcgorIyMKK2RlZiBnZXRfdGFncmVncygpOgorICAgIHJl
dHVybiBkaWN0KHppcCh0YWdzLCBsaXN0KG1hcChjb21wdXRlX3RhZ19yZWdzLCB0YWdzKSkpKQor
CitkZWYgZ2V0X3RhZ2ltbXMoKToKKyAgICByZXR1cm4gZGljdCh6aXAodGFncywgbGlzdChtYXAo
Y29tcHV0ZV90YWdfaW1tZWRpYXRlcywgdGFncykpKSkKKworZGVmIGlzX3BhaXIocmVnaWQpOgor
ICAgIHJldHVybiBsZW4ocmVnaWQpID09IDIKKworZGVmIGlzX3NpbmdsZShyZWdpZCk6CisgICAg
cmV0dXJuIGxlbihyZWdpZCkgPT0gMQorCitkZWYgaXNfd3JpdHRlbihyZWdpZCk6CisgICAgcmV0
dXJuIHJlZ2lkWzBdIGluICJkZXh5IgorCitkZWYgaXNfd3JpdGVvbmx5KHJlZ2lkKToKKyAgICBy
ZXR1cm4gcmVnaWRbMF0gaW4gImRlIgorCitkZWYgaXNfcmVhZChyZWdpZCk6CisgICAgcmV0dXJu
IHJlZ2lkWzBdIGluICJzdHV2d3h5IgorCitkZWYgaXNfcmVhZHdyaXRlKHJlZ2lkKToKKyAgICBy
ZXR1cm4gcmVnaWRbMF0gaW4gInh5IgorCitkZWYgaXNfc2NhbGFyX3JlZyhyZWd0eXBlKToKKyAg
ICByZXR1cm4gcmVndHlwZSBpbiAiUlBDIgorCitkZWYgaXNfb2xkX3ZhbChyZWd0eXBlLCByZWdp
ZCwgdGFnKToKKyAgICByZXR1cm4gcmVndHlwZStyZWdpZCsnVicgaW4gc2VtZGljdFt0YWddCisK
K2RlZiBpc19uZXdfdmFsKHJlZ3R5cGUsIHJlZ2lkLCB0YWcpOgorICAgIHJldHVybiByZWd0eXBl
K3JlZ2lkKydOJyBpbiBzZW1kaWN0W3RhZ10KKworZGVmIG5lZWRfc2xvdCh0YWcpOgorICAgIGlm
ICgnQV9DT05ERVhFQycgaW4gYXR0cmliZGljdFt0YWddIG9yCisgICAgICAgICdBX1NUT1JFJyBp
biBhdHRyaWJkaWN0W3RhZ10gb3IKKyAgICAgICAgJ0FfTE9BRCcgaW4gYXR0cmliZGljdFt0YWdd
KToKKyAgICAgICAgcmV0dXJuIDEKKyAgICBlbHNlOgorICAgICAgICByZXR1cm4gMAorCitkZWYg
bmVlZF9wYXJ0MSh0YWcpOgorICAgIHJldHVybiByZS5jb21waWxlKHIiZlBBUlQxIikuc2VhcmNo
KHNlbWRpY3RbdGFnXSkKKworZGVmIG5lZWRfZWEodGFnKToKKyAgICByZXR1cm4gcmUuY29tcGls
ZShyIlxiRUFcYiIpLnNlYXJjaChzZW1kaWN0W3RhZ10pCisKK2RlZiBza2lwX3FlbXVfaGVscGVy
KHRhZyk6CisgICAgcmV0dXJuIHRhZyBpbiBvdmVycmlkZXMua2V5cygpCisKK2RlZiBpbW1fbmFt
ZShpbW1sZXR0KToKKyAgICByZXR1cm4gIiVzaVYiICUgaW1tbGV0dAorCitkZWYgcmVhZF9zZW1h
bnRpY3NfZmlsZShuYW1lKToKKyAgICBldmFsX2xpbmUgPSAiIgorICAgIGZvciBsaW5lIGluIG9w
ZW4obmFtZSwgJ3J0JykucmVhZGxpbmVzKCk6CisgICAgICAgIGlmIG5vdCBsaW5lLnN0YXJ0c3dp
dGgoIiMiKToKKyAgICAgICAgICAgIGV2YWxfbGluZSArPSBsaW5lCisgICAgICAgICAgICBpZiBs
aW5lLmVuZHN3aXRoKCJcXFxuIik6CisgICAgICAgICAgICAgICAgZXZhbF9saW5lLnJzdHJpcCgi
XFxcbiIpCisgICAgICAgICAgICBlbHNlOgorICAgICAgICAgICAgICAgIGV2YWwoZXZhbF9saW5l
LnN0cmlwKCkpCisgICAgICAgICAgICAgICAgZXZhbF9saW5lID0gIiIKKworZGVmIHJlYWRfYXR0
cmlic19maWxlKG5hbWUpOgorICAgIGF0dHJpYnJlID0gcmUuY29tcGlsZShyJ0RFRl9BVFRSSUJc
KChbQS1aYS16MC05X10rKSwgKFteLF0qKSwgJyArCisgICAgICAgICAgICByJyIoW0EtWmEtejAt
OV9cLl0qKSIsICIoW0EtWmEtejAtOV9cLl0qKSJcKScpCisgICAgZm9yIGxpbmUgaW4gb3Blbihu
YW1lLCAncnQnKS5yZWFkbGluZXMoKToKKyAgICAgICAgaWYgbm90IGF0dHJpYnJlLm1hdGNoKGxp
bmUpOgorICAgICAgICAgICAgY29udGludWUKKyAgICAgICAgKGF0dHJpYl9iYXNlLGRlc2NyLHJy
ZWcsd3JlZykgPSBhdHRyaWJyZS5maW5kYWxsKGxpbmUpWzBdCisgICAgICAgIGF0dHJpYl9iYXNl
ID0gJ0FfJyArIGF0dHJpYl9iYXNlCisgICAgICAgIGF0dHJpYmluZm9bYXR0cmliX2Jhc2VdID0g
eydycmVnJzpycmVnLCAnd3JlZyc6d3JlZywgJ2Rlc2NyJzpkZXNjcn0KKworZGVmIHJlYWRfb3Zl
cnJpZGVzX2ZpbGUobmFtZSk6CisgICAgb3ZlcnJpZGVyZSA9IHJlLmNvbXBpbGUoIiNkZWZpbmUg
ZkdFTl9UQ0dfKFtBLVphLXowLTlfXSspXCguKiIpCisgICAgZm9yIGxpbmUgaW4gb3BlbihuYW1l
LCAncnQnKS5yZWFkbGluZXMoKToKKyAgICAgICAgaWYgbm90IG92ZXJyaWRlcmUubWF0Y2gobGlu
ZSk6CisgICAgICAgICAgICBjb250aW51ZQorICAgICAgICB0YWcgPSBvdmVycmlkZXJlLmZpbmRh
bGwobGluZSlbMF0KKyAgICAgICAgb3ZlcnJpZGVzW3RhZ10gPSBUcnVlCi0tIAoyLjcuNAoK

