Return-Path: <qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org>
X-Original-To: lists+qemu-devel@lfdr.de
Delivered-To: lists+qemu-devel@lfdr.de
Received: from lists.gnu.org (lists.gnu.org [209.51.188.17])
	by mail.lfdr.de (Postfix) with ESMTPS id F350861A102
	for <lists+qemu-devel@lfdr.de>; Fri,  4 Nov 2022 20:29:19 +0100 (CET)
Received: from localhost ([::1] helo=lists1p.gnu.org)
	by lists.gnu.org with esmtp (Exim 4.90_1)
	(envelope-from <qemu-devel-bounces@nongnu.org>)
	id 1or2L7-0001d7-MR; Fri, 04 Nov 2022 15:26:53 -0400
Received: from eggs.gnu.org ([2001:470:142:3::10])
 by lists.gnu.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256)
 (Exim 4.90_1) (envelope-from <tsimpson@qualcomm.com>)
 id 1or2Kw-0001XU-Hz
 for qemu-devel@nongnu.org; Fri, 04 Nov 2022 15:26:43 -0400
Received: from mx0b-0031df01.pphosted.com ([205.220.180.131])
 by eggs.gnu.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256)
 (Exim 4.90_1) (envelope-from <tsimpson@qualcomm.com>)
 id 1or2Kt-0002Lf-KP
 for qemu-devel@nongnu.org; Fri, 04 Nov 2022 15:26:42 -0400
Received: from pps.filterd (m0279868.ppops.net [127.0.0.1])
 by mx0a-0031df01.pphosted.com (8.17.1.19/8.17.1.19) with ESMTP id
 2A4JJ6Je030031; Fri, 4 Nov 2022 19:26:35 GMT
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=quicinc.com;
 h=from : to : cc :
 subject : date : message-id : in-reply-to : references : mime-version :
 content-type : content-transfer-encoding; s=qcppdkim1;
 bh=Z0HHd3LYzI3wwpJ0F9h4i/bU26MYIKXhl4jRimKxsGI=;
 b=J25Pdq3CXlIbMzpYaQTafJTD83BYS603q7vk4PPzxZY7gZBRE/Jq5hALJ3SoNO4yHpsG
 SA+YVV5mOOHxLuWf0tpO1B6zm8G/DbOhmh0AFlP+STrEAqIUTgywgeJSJfrhM5tDO7FZ
 TBr15OF08QUp6JKRIsi1HpLV3S2oaOCh+K+KiR/Wp0V4nsyt5vumPqhzfqJ+3hJqxok+
 J0yq0q7tWzpLfvpVmLusUcBS/RU/CwXZIZ7e5dsNsCQiiEOxUi3OFI4YNIvoc3rtJ4Ei
 bK1+iHjC+otR0qPSBDlQvSdn6I/LUnNXgi7q1e8fHmvK86PIcxVNj1ygTzatXkH794ow 1w== 
Received: from nalasppmta01.qualcomm.com (Global_NAT1.qualcomm.com
 [129.46.96.20])
 by mx0a-0031df01.pphosted.com (PPS) with ESMTPS id 3kn7ep85da-1
 (version=TLSv1.2 cipher=ECDHE-RSA-AES256-GCM-SHA384 bits=256 verify=NOT);
 Fri, 04 Nov 2022 19:26:35 +0000
Received: from pps.filterd (NALASPPMTA01.qualcomm.com [127.0.0.1])
 by NALASPPMTA01.qualcomm.com (8.17.1.5/8.17.1.5) with ESMTP id 2A4JNQOg010099; 
 Fri, 4 Nov 2022 19:26:34 GMT
Received: from pps.reinject (localhost [127.0.0.1])
 by NALASPPMTA01.qualcomm.com (PPS) with ESMTPS id 3khdpmqm6r-1
 (version=TLSv1.2 cipher=ECDHE-RSA-AES256-GCM-SHA384 bits=256 verify=NO);
 Fri, 04 Nov 2022 19:26:34 +0000
Received: from NALASPPMTA01.qualcomm.com (NALASPPMTA01.qualcomm.com
 [127.0.0.1])
 by pps.reinject (8.17.1.5/8.17.1.5) with ESMTP id 2A4JQYhh012321;
 Fri, 4 Nov 2022 19:26:34 GMT
Received: from hu-devc-lv-u18-c.qualcomm.com (hu-tsimpson-lv.qualcomm.com
 [10.47.235.220])
 by NALASPPMTA01.qualcomm.com (PPS) with ESMTP id 2A4JQXZg012319;
 Fri, 04 Nov 2022 19:26:34 +0000
Received: by hu-devc-lv-u18-c.qualcomm.com (Postfix, from userid 47164)
 id 09D1F5000B9; Fri,  4 Nov 2022 12:26:33 -0700 (PDT)
From: Taylor Simpson <tsimpson@quicinc.com>
To: qemu-devel@nongnu.org
Cc: tsimpson@quicinc.com, richard.henderson@linaro.org, philmd@linaro.org,
 ale@rev.ng, anjo@rev.ng, bcain@quicinc.com, quic_mathbern@quicinc.com
Subject: [PATCH v3 06/11] Hexagon (target/hexagon) Remove next_PC from runtime
 state
Date: Fri,  4 Nov 2022 12:26:26 -0700
Message-Id: <20221104192631.29434-7-tsimpson@quicinc.com>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20221104192631.29434-1-tsimpson@quicinc.com>
References: <20221104192631.29434-1-tsimpson@quicinc.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
X-QCInternal: smtphost
X-QCInternal: smtphost
X-Proofpoint-Virus-Version: vendor=nai engine=6200 definitions=5800
 signatures=585085
X-Proofpoint-Virus-Version: vendor=nai engine=6200 definitions=5800
 signatures=585085
X-Proofpoint-ORIG-GUID: CFkcHiFfM44r6vU0fWlMLmWzZU4BCxls
X-Proofpoint-GUID: CFkcHiFfM44r6vU0fWlMLmWzZU4BCxls
X-Proofpoint-Virus-Version: vendor=baseguard
 engine=ICAP:2.0.219,Aquarius:18.0.895,Hydra:6.0.545,FMLib:17.11.122.1
 definitions=2022-11-04_11,2022-11-03_01,2022-06-22_01
X-Proofpoint-Spam-Details: rule=outbound_notspam policy=outbound score=0
 priorityscore=1501
 spamscore=0 mlxscore=0 lowpriorityscore=0 adultscore=0 malwarescore=0
 clxscore=1015 phishscore=0 mlxlogscore=999 suspectscore=0 bulkscore=0
 impostorscore=0 classifier=spam adjust=0 reason=mlx scancount=1
 engine=8.12.0-2210170000 definitions=main-2211040121
Received-SPF: pass client-ip=205.220.180.131;
 envelope-from=tsimpson@qualcomm.com; helo=mx0b-0031df01.pphosted.com
X-Spam_score_int: -17
X-Spam_score: -1.8
X-Spam_bar: -
X-Spam_report: (-1.8 / 5.0 requ) BAYES_00=-1.9, DKIM_SIGNED=0.1,
 DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1, HEADER_FROM_DIFFERENT_DOMAINS=0.249,
 RCVD_IN_DNSWL_NONE=-0.0001, SPF_HELO_NONE=0.001,
 SPF_PASS=-0.001 autolearn=no autolearn_force=no
X-Spam_action: no action
X-BeenThere: qemu-devel@nongnu.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: <qemu-devel.nongnu.org>
List-Unsubscribe: <https://lists.nongnu.org/mailman/options/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=unsubscribe>
List-Archive: <https://lists.nongnu.org/archive/html/qemu-devel>
List-Post: <mailto:qemu-devel@nongnu.org>
List-Help: <mailto:qemu-devel-request@nongnu.org?subject=help>
List-Subscribe: <https://lists.nongnu.org/mailman/listinfo/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=subscribe>
Sender: "Qemu-devel" <qemu-devel-bounces@nongnu.org>
Errors-To: qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org

VGhlIGltcG9ydGVkIGZpbGVzIGRvbid0IHByb3Blcmx5IG1hcmsgYWxsIENPTkRFWEVDIGluc3Ry
dWN0aW9ucywgc28Kd2UgYWRkIHNvbWUgbG9naWMgdG8gaGV4X2NvbW1vbi5weSB0byBhZGQgdGhl
IGF0dHJpYnV0ZS4KClNpZ25lZC1vZmYtYnk6IFRheWxvciBTaW1wc29uIDx0c2ltcHNvbkBxdWlj
aW5jLmNvbT4KLS0tCiB0YXJnZXQvaGV4YWdvbi9jcHUuaCAgICAgICAgICAgICAgICB8ICAxIC0K
IHRhcmdldC9oZXhhZ29uL2dlbl90Y2cuaCAgICAgICAgICAgIHwgIDYgKysrKysrCiB0YXJnZXQv
aGV4YWdvbi9tYWNyb3MuaCAgICAgICAgICAgICB8ICAyICstCiB0YXJnZXQvaGV4YWdvbi90cmFu
c2xhdGUuaCAgICAgICAgICB8ICAyICstCiB0YXJnZXQvaGV4YWdvbi9vcF9oZWxwZXIuYyAgICAg
ICAgICB8ICA2ICsrKy0tLQogdGFyZ2V0L2hleGFnb24vdHJhbnNsYXRlLmMgICAgICAgICAgfCAy
OSArKysrKysrKysrKysrKysrKysrKysrKy0tLS0tLQogdGFyZ2V0L2hleGFnb24vZ2VuX2hlbHBl
cl9mdW5jcy5weSAgfCAgNCArKysrCiB0YXJnZXQvaGV4YWdvbi9nZW5faGVscGVyX3Byb3Rvcy5w
eSB8ICAzICsrKwogdGFyZ2V0L2hleGFnb24vZ2VuX3RjZ19mdW5jcy5weSAgICAgfCAgMyArKysK
IHRhcmdldC9oZXhhZ29uL2hleF9jb21tb24ucHkgICAgICAgIHwgMjAgKysrKysrKysrKysrKysr
KysrKysKIDEwIGZpbGVzIGNoYW5nZWQsIDY0IGluc2VydGlvbnMoKyksIDEyIGRlbGV0aW9ucygt
KQoKZGlmZiAtLWdpdCBhL3RhcmdldC9oZXhhZ29uL2NwdS5oIGIvdGFyZ2V0L2hleGFnb24vY3B1
LmgKaW5kZXggMmE2NWE1N2JhYi4uZmY4YzI2MjcyZCAxMDA2NDQKLS0tIGEvdGFyZ2V0L2hleGFn
b24vY3B1LmgKKysrIGIvdGFyZ2V0L2hleGFnb24vY3B1LmgKQEAgLTc4LDcgKzc4LDYgQEAgdHlw
ZWRlZiBzdHJ1Y3QgQ1BVQXJjaFN0YXRlIHsKICAgICB0YXJnZXRfdWxvbmcgZ3ByW1RPVEFMX1BF
Ul9USFJFQURfUkVHU107CiAgICAgdGFyZ2V0X3Vsb25nIHByZWRbTlVNX1BSRUdTXTsKICAgICB0
YXJnZXRfdWxvbmcgYnJhbmNoX3Rha2VuOwotICAgIHRhcmdldF91bG9uZyBuZXh0X1BDOwogCiAg
ICAgLyogRm9yIGNvbXBhcmluZyB3aXRoIExMREIgb24gdGFyZ2V0IC0gc2VlIGFkanVzdF9zdGFj
a19wdHJzIGZ1bmN0aW9uICovCiAgICAgdGFyZ2V0X3Vsb25nIGxhc3RfcGNfZHVtcGVkOwpkaWZm
IC0tZ2l0IGEvdGFyZ2V0L2hleGFnb24vZ2VuX3RjZy5oIGIvdGFyZ2V0L2hleGFnb24vZ2VuX3Rj
Zy5oCmluZGV4IGQzOGRiNzJjZTkuLmRmMjc5YWI0M2IgMTAwNjQ0Ci0tLSBhL3RhcmdldC9oZXhh
Z29uL2dlbl90Y2cuaAorKysgYi90YXJnZXQvaGV4YWdvbi9nZW5fdGNnLmgKQEAgLTYxMiw2ICs2
MTIsMTIgQEAKICAgICAgICAgdGNnX3RlbXBfZnJlZSh0bXApOyBcCiAgICAgfSB3aGlsZSAoMCkK
IAorI2RlZmluZSBmR0VOX1RDR19KMl9wYXVzZShTSE9SVENPREUpIFwKKyAgICBkbyB7IFwKKyAg
ICAgICAgdWlWID0gdWlWOyBcCisgICAgICAgIHRjZ19nZW5fbW92aV90bChoZXhfZ3ByW0hFWF9S
RUdfUENdLCBjdHgtPm5leHRfUEMpOyBcCisgICAgfSB3aGlsZSAoMCkKKwogLyogcjAgPSBhc3Io
cjEsIHIyKTpzYXQgKi8KICNkZWZpbmUgZkdFTl9UQ0dfUzJfYXNyX3Jfcl9zYXQoU0hPUlRDT0RF
KSBcCiAgICAgZ2VuX2Fzcl9yX3Jfc2F0KFJkViwgUnNWLCBSdFYpCmRpZmYgLS1naXQgYS90YXJn
ZXQvaGV4YWdvbi9tYWNyb3MuaCBiL3RhcmdldC9oZXhhZ29uL21hY3Jvcy5oCmluZGV4IDZlN2E2
YTE1NmEuLjkwMzUwMzU0MGUgMTAwNjQ0Ci0tLSBhL3RhcmdldC9oZXhhZ29uL21hY3Jvcy5oCisr
KyBiL3RhcmdldC9oZXhhZ29uL21hY3Jvcy5oCkBAIC00MDAsNyArNDAwLDcgQEAgc3RhdGljIGlu
bGluZSBUQ0d2IGdlbl9yZWFkX2lyZWcoVENHdiByZXN1bHQsIFRDR3YgdmFsLCBpbnQgc2hpZnQp
CiAjZW5kaWYKICNkZWZpbmUgZlJFQURfUEMoKSAoUEMpCiAKLSNkZWZpbmUgZlJFQURfTlBDKCkg
KGVudi0+bmV4dF9QQyAmICgweGZmZmZmZmZlKSkKKyNkZWZpbmUgZlJFQURfTlBDKCkgKG5leHRf
UEMgJiAoMHhmZmZmZmZmZSkpCiAKICNkZWZpbmUgZlJFQURfUDAoKSAoUkVBRF9QUkVHKDApKQog
I2RlZmluZSBmUkVBRF9QMygpIChSRUFEX1BSRUcoMykpCmRpZmYgLS1naXQgYS90YXJnZXQvaGV4
YWdvbi90cmFuc2xhdGUuaCBiL3RhcmdldC9oZXhhZ29uL3RyYW5zbGF0ZS5oCmluZGV4IGI4ZmNm
NjE1ZTguLjk2NTA5YTRkYTcgMTAwNjQ0Ci0tLSBhL3RhcmdldC9oZXhhZ29uL3RyYW5zbGF0ZS5o
CisrKyBiL3RhcmdldC9oZXhhZ29uL3RyYW5zbGF0ZS5oCkBAIC0zMCw2ICszMCw3IEBAIHR5cGVk
ZWYgc3RydWN0IERpc2FzQ29udGV4dCB7CiAgICAgRGlzYXNDb250ZXh0QmFzZSBiYXNlOwogICAg
IFBhY2tldCAqcGt0OwogICAgIEluc24gKmluc247CisgICAgdWludDMyX3QgbmV4dF9QQzsKICAg
ICB1aW50MzJfdCBtZW1faWR4OwogICAgIHVpbnQzMl90IG51bV9wYWNrZXRzOwogICAgIHVpbnQz
Ml90IG51bV9pbnNuczsKQEAgLTEzNCw3ICsxMzUsNiBAQCBzdGF0aWMgaW5saW5lIHZvaWQgY3R4
X2xvZ19xcmVnX3dyaXRlKERpc2FzQ29udGV4dCAqY3R4LAogCiBleHRlcm4gVENHdiBoZXhfZ3By
W1RPVEFMX1BFUl9USFJFQURfUkVHU107CiBleHRlcm4gVENHdiBoZXhfcHJlZFtOVU1fUFJFR1Nd
OwotZXh0ZXJuIFRDR3YgaGV4X25leHRfUEM7CiBleHRlcm4gVENHdiBoZXhfdGhpc19QQzsKIGV4
dGVybiBUQ0d2IGhleF9zbG90X2NhbmNlbGxlZDsKIGV4dGVybiBUQ0d2IGhleF9icmFuY2hfdGFr
ZW47CmRpZmYgLS1naXQgYS90YXJnZXQvaGV4YWdvbi9vcF9oZWxwZXIuYyBiL3RhcmdldC9oZXhh
Z29uL29wX2hlbHBlci5jCmluZGV4IDg0MzkxZTI1ZWIuLmFhZDAxOTVlYjYgMTAwNjQ0Ci0tLSBh
L3RhcmdldC9oZXhhZ29uL29wX2hlbHBlci5jCisrKyBiL3RhcmdldC9oZXhhZ29uL29wX2hlbHBl
ci5jCkBAIC0xMTksMTIgKzExOSwxMiBAQCBzdGF0aWMgdm9pZCB3cml0ZV9uZXdfcGMoQ1BVSGV4
YWdvblN0YXRlICplbnYsIGJvb2wgcGt0X2hhc19tdWx0aV9jb2YsCiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICJpZ25vcmluZyB0aGUgc2Vjb25kIG9uZVxuIik7CiAgICAgICAgIH0gZWxzZSB7
CiAgICAgICAgICAgICBmQ0hFQ0tfUENBTElHTihhZGRyKTsKLSAgICAgICAgICAgIGVudi0+bmV4
dF9QQyA9IGFkZHI7CisgICAgICAgICAgICBlbnYtPmdwcltIRVhfUkVHX1BDXSA9IGFkZHI7CiAg
ICAgICAgICAgICBlbnYtPmJyYW5jaF90YWtlbiA9IDE7CiAgICAgICAgIH0KICAgICB9IGVsc2Ug
ewogICAgICAgICBmQ0hFQ0tfUENBTElHTihhZGRyKTsKLSAgICAgICAgZW52LT5uZXh0X1BDID0g
YWRkcjsKKyAgICAgICAgZW52LT5ncHJbSEVYX1JFR19QQ10gPSBhZGRyOwogICAgIH0KIH0KIApA
QCAtMjk5LDcgKzI5OSw3IEBAIHZvaWQgSEVMUEVSKGRlYnVnX2NvbW1pdF9lbmQpKENQVUhleGFn
b25TdGF0ZSAqZW52LCBpbnQgaGFzX3N0MCwgaW50IGhhc19zdDEpCiAgICAgICAgIH0KICAgICB9
CiAKLSAgICBIRVhfREVCVUdfTE9HKCJOZXh0IFBDID0gIiBUQVJHRVRfRk1UX2x4ICJcbiIsIGVu
di0+bmV4dF9QQyk7CisgICAgSEVYX0RFQlVHX0xPRygiTmV4dCBQQyA9ICIgVEFSR0VUX0ZNVF9s
eCAiXG4iLCBlbnYtPmdwcltIRVhfUkVHX1BDXSk7CiAgICAgSEVYX0RFQlVHX0xPRygiRXhlYyBj
b3VudGVyczogcGt0ID0gIiBUQVJHRVRfRk1UX2x4CiAgICAgICAgICAgICAgICAgICAiLCBpbnNu
ID0gIiBUQVJHRVRfRk1UX2x4CiAgICAgICAgICAgICAgICAgICAiLCBodnggPSAiIFRBUkdFVF9G
TVRfbHggIlxuIiwKZGlmZiAtLWdpdCBhL3RhcmdldC9oZXhhZ29uL3RyYW5zbGF0ZS5jIGIvdGFy
Z2V0L2hleGFnb24vdHJhbnNsYXRlLmMKaW5kZXggOWVmYzZjODhhYS4uZmE2NDE1OTM2YyAxMDA2
NDQKLS0tIGEvdGFyZ2V0L2hleGFnb24vdHJhbnNsYXRlLmMKKysrIGIvdGFyZ2V0L2hleGFnb24v
dHJhbnNsYXRlLmMKQEAgLTMxLDcgKzMxLDYgQEAKIAogVENHdiBoZXhfZ3ByW1RPVEFMX1BFUl9U
SFJFQURfUkVHU107CiBUQ0d2IGhleF9wcmVkW05VTV9QUkVHU107Ci1UQ0d2IGhleF9uZXh0X1BD
OwogVENHdiBoZXhfdGhpc19QQzsKIFRDR3YgaGV4X3Nsb3RfY2FuY2VsbGVkOwogVENHdiBoZXhf
YnJhbmNoX3Rha2VuOwpAQCAtMTIwLDcgKzExOSw2IEBAIHN0YXRpYyB2b2lkIGdlbl9leGVjX2Nv
dW50ZXJzKERpc2FzQ29udGV4dCAqY3R4KQogc3RhdGljIHZvaWQgZ2VuX2VuZF90YihEaXNhc0Nv
bnRleHQgKmN0eCkKIHsKICAgICBnZW5fZXhlY19jb3VudGVycyhjdHgpOwotICAgIHRjZ19nZW5f
bW92X3RsKGhleF9ncHJbSEVYX1JFR19QQ10sIGhleF9uZXh0X1BDKTsKICAgICB0Y2dfZ2VuX2V4
aXRfdGIoTlVMTCwgMCk7CiAgICAgY3R4LT5iYXNlLmlzX2ptcCA9IERJU0FTX05PUkVUVVJOOwog
fQpAQCAtMTI4LDcgKzEyNiw3IEBAIHN0YXRpYyB2b2lkIGdlbl9lbmRfdGIoRGlzYXNDb250ZXh0
ICpjdHgpCiBzdGF0aWMgdm9pZCBnZW5fZXhjZXB0aW9uX2VuZF90YihEaXNhc0NvbnRleHQgKmN0
eCwgaW50IGV4Y3ApCiB7CiAgICAgZ2VuX2V4ZWNfY291bnRlcnMoY3R4KTsKLSAgICB0Y2dfZ2Vu
X21vdl90bChoZXhfZ3ByW0hFWF9SRUdfUENdLCBoZXhfbmV4dF9QQyk7CisgICAgdGNnX2dlbl9t
b3ZpX3RsKGhleF9ncHJbSEVYX1JFR19QQ10sIGN0eC0+bmV4dF9QQyk7CiAgICAgZ2VuX2V4Y2Vw
dGlvbl9yYXcoZXhjcCk7CiAgICAgY3R4LT5iYXNlLmlzX2ptcCA9IERJU0FTX05PUkVUVVJOOwog
CkBAIC0yMDQsNiArMjAyLDI0IEBAIHN0YXRpYyBib29sIG5lZWRfcHJlZF93cml0dGVuKFBhY2tl
dCAqcGt0KQogICAgIHJldHVybiBjaGVja19mb3JfYXR0cmliKHBrdCwgQV9XUklURVNfUFJFRF9S
RUcpOwogfQogCitzdGF0aWMgYm9vbCBuZWVkX25leHRfUEMoRGlzYXNDb250ZXh0ICpjdHgpCit7
CisgICAgUGFja2V0ICpwa3QgPSBjdHgtPnBrdDsKKworICAgIC8qIENoZWNrIGZvciBjb25kaXRp
b25hbCBjb250cm9sIGZsb3cgb3IgSFcgbG9vcCBlbmQgKi8KKyAgICBmb3IgKGludCBpID0gMDsg
aSA8IHBrdC0+bnVtX2luc25zOyBpKyspIHsKKyAgICAgICAgdWludDE2X3Qgb3Bjb2RlID0gcGt0
LT5pbnNuW2ldLm9wY29kZTsKKyAgICAgICAgaWYgKEdFVF9BVFRSSUIob3Bjb2RlLCBBX0NPTkRF
WEVDKSAmJiBHRVRfQVRUUklCKG9wY29kZSwgQV9DT0YpKSB7CisgICAgICAgICAgICByZXR1cm4g
dHJ1ZTsKKyAgICAgICAgfQorICAgICAgICBpZiAoR0VUX0FUVFJJQihvcGNvZGUsIEFfSFdMT09Q
MF9FTkQpIHx8CisgICAgICAgICAgICBHRVRfQVRUUklCKG9wY29kZSwgQV9IV0xPT1AxX0VORCkp
IHsKKyAgICAgICAgICAgIHJldHVybiB0cnVlOworICAgICAgICB9CisgICAgfQorICAgIHJldHVy
biBmYWxzZTsKK30KKwogc3RhdGljIHZvaWQgZ2VuX3N0YXJ0X3BhY2tldChEaXNhc0NvbnRleHQg
KmN0eCkKIHsKICAgICBQYWNrZXQgKnBrdCA9IGN0eC0+cGt0OwpAQCAtMjExLDYgKzIyNyw3IEBA
IHN0YXRpYyB2b2lkIGdlbl9zdGFydF9wYWNrZXQoRGlzYXNDb250ZXh0ICpjdHgpCiAgICAgaW50
IGk7CiAKICAgICAvKiBDbGVhciBvdXQgdGhlIGRpc2Fzc2VtYmx5IGNvbnRleHQgKi8KKyAgICBj
dHgtPm5leHRfUEMgPSBuZXh0X1BDOwogICAgIGN0eC0+cmVnX2xvZ19pZHggPSAwOwogICAgIGJp
dG1hcF96ZXJvKGN0eC0+cmVnc193cml0dGVuLCBUT1RBTF9QRVJfVEhSRUFEX1JFR1MpOwogICAg
IGN0eC0+cHJlZ19sb2dfaWR4ID0gMDsKQEAgLTI0Myw3ICsyNjAsOSBAQCBzdGF0aWMgdm9pZCBn
ZW5fc3RhcnRfcGFja2V0KERpc2FzQ29udGV4dCAqY3R4KQogICAgICAgICBpZiAocGt0LT5wa3Rf
aGFzX211bHRpX2NvZikgewogICAgICAgICAgICAgdGNnX2dlbl9tb3ZpX3RsKGhleF9icmFuY2hf
dGFrZW4sIDApOwogICAgICAgICB9Ci0gICAgICAgIHRjZ19nZW5fbW92aV90bChoZXhfbmV4dF9Q
QywgbmV4dF9QQyk7CisgICAgICAgIGlmIChuZWVkX25leHRfUEMoY3R4KSkgeworICAgICAgICAg
ICAgdGNnX2dlbl9tb3ZpX3RsKGhleF9ncHJbSEVYX1JFR19QQ10sIG5leHRfUEMpOworICAgICAg
ICB9CiAgICAgfQogICAgIGlmIChuZWVkX3ByZWRfd3JpdHRlbihwa3QpKSB7CiAgICAgICAgIHRj
Z19nZW5fbW92aV90bChoZXhfcHJlZF93cml0dGVuLCAwKTsKQEAgLTkzNiw4ICs5NTUsNiBAQCB2
b2lkIGhleGFnb25fdHJhbnNsYXRlX2luaXQodm9pZCkKICAgICB9CiAgICAgaGV4X3ByZWRfd3Jp
dHRlbiA9IHRjZ19nbG9iYWxfbWVtX25ldyhjcHVfZW52LAogICAgICAgICBvZmZzZXRvZihDUFVI
ZXhhZ29uU3RhdGUsIHByZWRfd3JpdHRlbiksICJwcmVkX3dyaXR0ZW4iKTsKLSAgICBoZXhfbmV4
dF9QQyA9IHRjZ19nbG9iYWxfbWVtX25ldyhjcHVfZW52LAotICAgICAgICBvZmZzZXRvZihDUFVI
ZXhhZ29uU3RhdGUsIG5leHRfUEMpLCAibmV4dF9QQyIpOwogICAgIGhleF90aGlzX1BDID0gdGNn
X2dsb2JhbF9tZW1fbmV3KGNwdV9lbnYsCiAgICAgICAgIG9mZnNldG9mKENQVUhleGFnb25TdGF0
ZSwgdGhpc19QQyksICJ0aGlzX1BDIik7CiAgICAgaGV4X3Nsb3RfY2FuY2VsbGVkID0gdGNnX2ds
b2JhbF9tZW1fbmV3KGNwdV9lbnYsCmRpZmYgLS1naXQgYS90YXJnZXQvaGV4YWdvbi9nZW5faGVs
cGVyX2Z1bmNzLnB5IGIvdGFyZ2V0L2hleGFnb24vZ2VuX2hlbHBlcl9mdW5jcy5weQppbmRleCAw
MjRmNzBkMTY2Li4wMGVlNThmMTU5IDEwMDc1NQotLS0gYS90YXJnZXQvaGV4YWdvbi9nZW5faGVs
cGVyX2Z1bmNzLnB5CisrKyBiL3RhcmdldC9oZXhhZ29uL2dlbl9oZWxwZXJfZnVuY3MucHkKQEAg
LTI0NSw2ICsyNDUsMTAgQEAgZGVmIGdlbl9oZWxwZXJfZnVuY3Rpb24oZiwgdGFnLCB0YWdyZWdz
LCB0YWdpbW1zKToKICAgICAgICAgICAgIGlmIGkgPiAwOiBmLndyaXRlKCIsICIpCiAgICAgICAg
ICAgICBmLndyaXRlKCJ0YXJnZXRfdWxvbmcgUEMiKQogICAgICAgICAgICAgaSArPSAxCisgICAg
ICAgIGlmIGhleF9jb21tb24uaGVscGVyX25lZWRzX25leHRfUEModGFnKToKKyAgICAgICAgICAg
IGlmIGkgPiAwOiBmLndyaXRlKCIsICIpCisgICAgICAgICAgICBmLndyaXRlKCJ0YXJnZXRfdWxv
bmcgbmV4dF9QQyIpCisgICAgICAgICAgICBpICs9IDEKICAgICAgICAgaWYgaGV4X2NvbW1vbi5u
ZWVkX3Nsb3QodGFnKToKICAgICAgICAgICAgIGlmIGkgPiAwOiBmLndyaXRlKCIsICIpCiAgICAg
ICAgICAgICBmLndyaXRlKCJ1aW50MzJfdCBzbG90IikKZGlmZiAtLWdpdCBhL3RhcmdldC9oZXhh
Z29uL2dlbl9oZWxwZXJfcHJvdG9zLnB5IGIvdGFyZ2V0L2hleGFnb24vZ2VuX2hlbHBlcl9wcm90
b3MucHkKaW5kZXggMDBjNDhkZmY3Yy4uZWQ0YjljZjBkNCAxMDA3NTUKLS0tIGEvdGFyZ2V0L2hl
eGFnb24vZ2VuX2hlbHBlcl9wcm90b3MucHkKKysrIGIvdGFyZ2V0L2hleGFnb24vZ2VuX2hlbHBl
cl9wcm90b3MucHkKQEAgLTg2LDYgKzg2LDcgQEAgZGVmIGdlbl9oZWxwZXJfcHJvdG90eXBlKGYs
IHRhZywgdGFncmVncywgdGFnaW1tcyk6CiAgICAgICAgICAgICBpZiBoZXhfY29tbW9uLm5lZWRf
cGFydDEodGFnKTogZGVmX2hlbHBlcl9zaXplICs9IDEKICAgICAgICAgICAgIGlmIGhleF9jb21t
b24ubmVlZF9zbG90KHRhZyk6IGRlZl9oZWxwZXJfc2l6ZSArPSAxCiAgICAgICAgICAgICBpZiBo
ZXhfY29tbW9uLm5lZWRfUEModGFnKTogZGVmX2hlbHBlcl9zaXplICs9IDEKKyAgICAgICAgICAg
IGlmIGhleF9jb21tb24uaGVscGVyX25lZWRzX25leHRfUEModGFnKTogZGVmX2hlbHBlcl9zaXpl
ICs9IDEKICAgICAgICAgICAgIGYud3JpdGUoJ0RFRl9IRUxQRVJfJXMoJXMnICUgKGRlZl9oZWxw
ZXJfc2l6ZSwgdGFnKSkKICAgICAgICAgICAgICMjIFRoZSByZXR1cm4gdHlwZSBpcyB2b2lkCiAg
ICAgICAgICAgICBmLndyaXRlKCcsIHZvaWQnICkKQEAgLTk1LDYgKzk2LDcgQEAgZGVmIGdlbl9o
ZWxwZXJfcHJvdG90eXBlKGYsIHRhZywgdGFncmVncywgdGFnaW1tcyk6CiAgICAgICAgICAgICBp
ZiBoZXhfY29tbW9uLm5lZWRfcGFydDEodGFnKTogZGVmX2hlbHBlcl9zaXplICs9IDEKICAgICAg
ICAgICAgIGlmIGhleF9jb21tb24ubmVlZF9zbG90KHRhZyk6IGRlZl9oZWxwZXJfc2l6ZSArPSAx
CiAgICAgICAgICAgICBpZiBoZXhfY29tbW9uLm5lZWRfUEModGFnKTogZGVmX2hlbHBlcl9zaXpl
ICs9IDEKKyAgICAgICAgICAgIGlmIGhleF9jb21tb24uaGVscGVyX25lZWRzX25leHRfUEModGFn
KTogZGVmX2hlbHBlcl9zaXplICs9IDEKICAgICAgICAgICAgIGYud3JpdGUoJ0RFRl9IRUxQRVJf
JXMoJXMnICUgKGRlZl9oZWxwZXJfc2l6ZSwgdGFnKSkKIAogICAgICAgICAjIyBHZW5lcmF0ZSB0
aGUgcWVtdSBERUZfSEVMUEVSIHR5cGUgZm9yIGVhY2ggcmVzdWx0CkBAIC0xMzQsNiArMTM2LDcg
QEAgZGVmIGdlbl9oZWxwZXJfcHJvdG90eXBlKGYsIHRhZywgdGFncmVncywgdGFnaW1tcyk6CiAg
ICAgICAgICMjIHBhcnQxIChpZiBuZWVkZWQpCiAgICAgICAgIGlmIGhleF9jb21tb24ubmVlZF9w
a3RfaGFzX211bHRpX2NvZih0YWcpOiBmLndyaXRlKCcsIGkzMicpCiAgICAgICAgIGlmIGhleF9j
b21tb24ubmVlZF9QQyh0YWcpOiBmLndyaXRlKCcsIGkzMicpCisgICAgICAgIGlmIGhleF9jb21t
b24uaGVscGVyX25lZWRzX25leHRfUEModGFnKTogZi53cml0ZSgnLCBpMzInKQogICAgICAgICBp
ZiBoZXhfY29tbW9uLm5lZWRfc2xvdCh0YWcpOiBmLndyaXRlKCcsIGkzMicgKQogICAgICAgICBp
ZiBoZXhfY29tbW9uLm5lZWRfcGFydDEodGFnKTogZi53cml0ZSgnICwgaTMyJyApCiAgICAgICAg
IGYud3JpdGUoJylcbicpCmRpZmYgLS1naXQgYS90YXJnZXQvaGV4YWdvbi9nZW5fdGNnX2Z1bmNz
LnB5IGIvdGFyZ2V0L2hleGFnb24vZ2VuX3RjZ19mdW5jcy5weQppbmRleCA3ZGJkZGUzMTkxLi5m
NGNlYTZkZmM0IDEwMDc1NQotLS0gYS90YXJnZXQvaGV4YWdvbi9nZW5fdGNnX2Z1bmNzLnB5Cisr
KyBiL3RhcmdldC9oZXhhZ29uL2dlbl90Y2dfZnVuY3MucHkKQEAgLTYzMSw2ICs2MzEsOCBAQCBk
ZWYgZ2VuX3RjZ19mdW5jKGYsIHRhZywgcmVncywgaW1tcyk6CiAgICAgICAgICAgICBmLndyaXRl
KCIgICAgVENHdiBzbG90ID0gdGNnX2NvbnN0YW50X3RsKGluc24tPnNsb3QpO1xuIikKICAgICAg
ICAgaWYgaGV4X2NvbW1vbi5uZWVkX1BDKHRhZyk6CiAgICAgICAgICAgICBmLndyaXRlKCIgICAg
VENHdiBQQyA9IHRjZ19jb25zdGFudF90bChjdHgtPnBrdC0+cGMpO1xuIikKKyAgICAgICAgaWYg
aGV4X2NvbW1vbi5oZWxwZXJfbmVlZHNfbmV4dF9QQyh0YWcpOgorICAgICAgICAgICAgZi53cml0
ZSgiICAgIFRDR3YgbmV4dF9QQyA9IHRjZ19jb25zdGFudF90bChjdHgtPm5leHRfUEMpO1xuIikK
ICAgICAgICAgZi53cml0ZSgiICAgIGdlbl9oZWxwZXJfJXMoIiAlICh0YWcpKQogICAgICAgICBp
PTAKICAgICAgICAgIyMgSWYgdGhlcmUgaXMgYSBzY2FsYXIgcmVzdWx0LCBpdCBpcyB0aGUgcmV0
dXJuIHR5cGUKQEAgLTY2Miw2ICs2NjQsNyBAQCBkZWYgZ2VuX3RjZ19mdW5jKGYsIHRhZywgcmVn
cywgaW1tcyk6CiAgICAgICAgIGlmIGhleF9jb21tb24ubmVlZF9wa3RfaGFzX211bHRpX2NvZih0
YWcpOgogICAgICAgICAgICAgZi53cml0ZSgiLCBwa3RfaGFzX211bHRpX2NvZiIpCiAgICAgICAg
IGlmIGhleF9jb21tb24ubmVlZF9QQyh0YWcpOiBmLndyaXRlKCIsIFBDIikKKyAgICAgICAgaWYg
aGV4X2NvbW1vbi5oZWxwZXJfbmVlZHNfbmV4dF9QQyh0YWcpOiBmLndyaXRlKCIsIG5leHRfUEMi
KQogICAgICAgICBpZiBoZXhfY29tbW9uLm5lZWRfc2xvdCh0YWcpOiBmLndyaXRlKCIsIHNsb3Qi
KQogICAgICAgICBpZiBoZXhfY29tbW9uLm5lZWRfcGFydDEodGFnKTogZi53cml0ZSgiLCBwYXJ0
MSIgKQogICAgICAgICBmLndyaXRlKCIpO1xuIikKZGlmZiAtLWdpdCBhL3RhcmdldC9oZXhhZ29u
L2hleF9jb21tb24ucHkgYi90YXJnZXQvaGV4YWdvbi9oZXhfY29tbW9uLnB5CmluZGV4IGNmZTVm
ZTdiMzUuLmRhOGU3NWZiYzcgMTAwNzU1Ci0tLSBhL3RhcmdldC9oZXhhZ29uL2hleF9jb21tb24u
cHkKKysrIGIvdGFyZ2V0L2hleGFnb24vaGV4X2NvbW1vbi5weQpAQCAtNjYsNiArNjYsMTggQEAg
ZGVmIGFkZF9xZW11X21hY3JvX2F0dHJpYihuYW1lLCBhdHRyaWIpOgogICAgIG1hY3Jvc1tuYW1l
XS5hdHRyaWJzLmFkZChhdHRyaWIpCiAKIGltbWV4dHJlID0gcmUuY29tcGlsZShyJ2YoTVVTVF8p
P0lNTUVYVFsoXShbVXVTc1JyXSknKQorCitkZWYgaXNfY29uZF9qdW1wKHRhZyk6CisgICAgaWYg
dGFnID09ICdKMl9ydGUnOgorICAgICAgICByZXR1cm4gRmFsc2UKKyAgICBpZiAoJ0FfSFdMT09Q
MF9FTkQnIGluIGF0dHJpYmRpY3RbdGFnXSBvcgorICAgICAgICAnQV9IV0xPT1AxX0VORCcgaW4g
YXR0cmliZGljdFt0YWddKToKKyAgICAgICAgcmV0dXJuIEZhbHNlCisgICAgcmV0dXJuIHJlLmNv
bXBpbGUociIoaWYuKmZCUkFOQ0gpfChpZi4qZkpVTVBSKSIpLnNlYXJjaChzZW1kaWN0W3RhZ10p
CisKK2RlZiBpc19jb25kX2NhbGwodGFnKToKKyAgICByZXR1cm4gcmUuY29tcGlsZShyIihpZi4q
ZkNBTEwpIikuc2VhcmNoKHNlbWRpY3RbdGFnXSkKKwogZGVmIGNhbGN1bGF0ZV9hdHRyaWJzKCk6
CiAgICAgYWRkX3FlbXVfbWFjcm9fYXR0cmliKCdmUkVBRF9QQycsICdBX0lNUExJQ0lUX1JFQURT
X1BDJykKICAgICBhZGRfcWVtdV9tYWNyb19hdHRyaWIoJ2ZUUkFQJywgJ0FfSU1QTElDSVRfUkVB
RFNfUEMnKQpAQCAtOTYsNiArMTA4LDExIEBAIGRlZiBjYWxjdWxhdGVfYXR0cmlicygpOgogICAg
ICAgICBmb3IgcmVndHlwZSwgcmVnaWQsIHRvc3MsIG51bXJlZ3MgaW4gcmVnczoKICAgICAgICAg
ICAgIGlmIHJlZ3R5cGUgPT0gIlAiIGFuZCBpc193cml0dGVuKHJlZ2lkKToKICAgICAgICAgICAg
ICAgICBhdHRyaWJkaWN0W3RhZ10uYWRkKCdBX1dSSVRFU19QUkVEX1JFRycpCisgICAgIyBNYXJr
IGNvbmRpdGlvbmFsIGp1bXBzIGFuZCBjYWxscworICAgICMgICAgIE5vdCBhbGwgaW5zdHJ1Y3Rp
b25zIGFyZSBwcm9wZXJseSBtYXJrZWQgd2l0aCBBX0NPTkRFWEVDCisgICAgZm9yIHRhZyBpbiB0
YWdzOgorICAgICAgICBpZiBpc19jb25kX2p1bXAodGFnKSBvciBpc19jb25kX2NhbGwodGFnKToK
KyAgICAgICAgICAgIGF0dHJpYmRpY3RbdGFnXS5hZGQoJ0FfQ09OREVYRUMnKQogCiBkZWYgU0VN
QU5USUNTKHRhZywgYmVoLCBzZW0pOgogICAgICNwcmludCB0YWcsYmVoLHNlbQpAQCAtMjExLDYg
KzIyOCw5IEBAIGRlZiBuZWVkX2VhKHRhZyk6CiBkZWYgbmVlZF9QQyh0YWcpOgogICAgIHJldHVy
biAnQV9JTVBMSUNJVF9SRUFEU19QQycgaW4gYXR0cmliZGljdFt0YWddCiAKK2RlZiBoZWxwZXJf
bmVlZHNfbmV4dF9QQyh0YWcpOgorICAgIHJldHVybiAnQV9DQUxMJyBpbiBhdHRyaWJkaWN0W3Rh
Z10KKwogZGVmIG5lZWRfcGt0X2hhc19tdWx0aV9jb2YodGFnKToKICAgICByZXR1cm4gJ0FfQ09G
JyBpbiBhdHRyaWJkaWN0W3RhZ10KIAotLSAKMi4xNy4xCgo=

