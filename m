Return-Path: <qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org>
X-Original-To: lists+qemu-devel@lfdr.de
Delivered-To: lists+qemu-devel@lfdr.de
Received: from lists.gnu.org (lists.gnu.org [209.51.188.17])
	by mail.lfdr.de (Postfix) with ESMTPS id 384F7508187
	for <lists+qemu-devel@lfdr.de>; Wed, 20 Apr 2022 08:56:51 +0200 (CEST)
Received: from localhost ([::1]:55454 helo=lists1p.gnu.org)
	by lists.gnu.org with esmtp (Exim 4.90_1)
	(envelope-from <qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org>)
	id 1nh4Gg-0005dc-Be
	for lists+qemu-devel@lfdr.de; Wed, 20 Apr 2022 02:56:50 -0400
Received: from eggs.gnu.org ([2001:470:142:3::10]:46090)
 by lists.gnu.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256)
 (Exim 4.90_1) (envelope-from <hch@lst.de>)
 id 1nh4De-000489-Cx; Wed, 20 Apr 2022 02:53:42 -0400
Received: from verein.lst.de ([213.95.11.211]:42140)
 by eggs.gnu.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256)
 (Exim 4.90_1) (envelope-from <hch@lst.de>)
 id 1nh4Dc-0006kl-Lq; Wed, 20 Apr 2022 02:53:42 -0400
Received: by verein.lst.de (Postfix, from userid 2407)
 id 1C37467373; Wed, 20 Apr 2022 08:53:35 +0200 (CEST)
Date: Wed, 20 Apr 2022 08:53:34 +0200
From: Christoph Hellwig <hch@lst.de>
To: Klaus Jensen <its@irrelevant.dk>
Subject: Re: [PATCH 4/5] hw/nvme: do not auto-generate uuid
Message-ID: <20220420065334.GA3651@lst.de>
References: <20220419121039.1259477-1-its@irrelevant.dk>
 <20220419121039.1259477-5-its@irrelevant.dk> <20220420053336.GA2063@lst.de>
 <Yl+fZI5kGW2wQ1DO@apples>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <Yl+fZI5kGW2wQ1DO@apples>
User-Agent: Mutt/1.5.17 (2007-11-01)
Received-SPF: none client-ip=213.95.11.211; envelope-from=hch@lst.de;
 helo=verein.lst.de
X-Spam_score_int: -18
X-Spam_score: -1.9
X-Spam_bar: -
X-Spam_report: (-1.9 / 5.0 requ) BAYES_00=-1.9, SPF_HELO_NONE=0.001,
 SPF_NONE=0.001, T_SCC_BODY_TEXT_LINE=-0.01 autolearn=ham autolearn_force=no
X-Spam_action: no action
X-BeenThere: qemu-devel@nongnu.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: <qemu-devel.nongnu.org>
List-Unsubscribe: <https://lists.nongnu.org/mailman/options/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=unsubscribe>
List-Archive: <https://lists.nongnu.org/archive/html/qemu-devel>
List-Post: <mailto:qemu-devel@nongnu.org>
List-Help: <mailto:qemu-devel-request@nongnu.org?subject=help>
List-Subscribe: <https://lists.nongnu.org/mailman/listinfo/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=subscribe>
Cc: qemu-block@nongnu.org, Klaus Jensen <k.jensen@samsung.com>,
 qemu-devel@nongnu.org, Luis Chamberlain <mcgrof@kernel.org>,
 Keith Busch <kbusch@kernel.org>, Christoph Hellwig <hch@lst.de>
Errors-To: qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org
Sender: "Qemu-devel" <qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org>

On Wed, Apr 20, 2022 at 07:51:32AM +0200, Klaus Jensen wrote:
> > So unlike the EUI, UUIDs are designed to be autogenerated even if the
> > current algorithm is completely broken.  We'd just need to persist them.
> > Note that NVMe at least in theory requires providing at least on of
> > the unique identifiers, and the UUID is the only one designed to be
> > autogenerated in a distributed fashion.
> 
> I understand, but it boils down to the fact that we do not have a
> general method of storing "metadata" like this persistently.
> 
> But maybe it is time that we come up with something to do this.

If we can't make the persistent uniqueue identifiers persistent and
unique, we should not provide them.  While NVMe does require a
namespace to report at least one of the three identifies, the failure
mode for now having one is much more graceful than providing one that
is not unique or not persistent.

