Return-Path: <qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org>
X-Original-To: lists+qemu-devel@lfdr.de
Delivered-To: lists+qemu-devel@lfdr.de
Received: from lists.gnu.org (lists.gnu.org [209.51.188.17])
	by mail.lfdr.de (Postfix) with ESMTPS id 985B56AD52D
	for <lists+qemu-devel@lfdr.de>; Tue,  7 Mar 2023 03:59:56 +0100 (CET)
Received: from localhost ([::1] helo=lists1p.gnu.org)
	by lists.gnu.org with esmtp (Exim 4.90_1)
	(envelope-from <qemu-devel-bounces@nongnu.org>)
	id 1pZNXS-0000Xc-4R; Mon, 06 Mar 2023 21:58:54 -0500
Received: from eggs.gnu.org ([2001:470:142:3::10])
 by lists.gnu.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256)
 (Exim 4.90_1) (envelope-from <tsimpson@qualcomm.com>)
 id 1pZNXN-0000Ug-3j
 for qemu-devel@nongnu.org; Mon, 06 Mar 2023 21:58:49 -0500
Received: from mx0a-0031df01.pphosted.com ([205.220.168.131])
 by eggs.gnu.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256)
 (Exim 4.90_1) (envelope-from <tsimpson@qualcomm.com>)
 id 1pZNXK-0005nR-6Z
 for qemu-devel@nongnu.org; Mon, 06 Mar 2023 21:58:48 -0500
Received: from pps.filterd (m0279866.ppops.net [127.0.0.1])
 by mx0a-0031df01.pphosted.com (8.17.1.19/8.17.1.19) with ESMTP id
 3270pY6O002766; Tue, 7 Mar 2023 02:58:33 GMT
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=quicinc.com;
 h=from : to : cc :
 subject : date : message-id : in-reply-to : references : mime-version :
 content-type : content-transfer-encoding; s=qcppdkim1;
 bh=Ta7jUic9mL47lUSZAC8aNKRk05awJEyYh9gRQO4Qa+k=;
 b=bRijopeBV4kHaqY+1c0ONWYt1ewMeO7FWhclKtuBFjAdzmWmdTEcSfUbDwv7I08NGwfk
 1APDPMbChkLfLZ6krPxs0eUzDsfKFabwBm236PhG0lwETAaZXVRrq68nvmDlCy36/DOd
 NZM+5sTrBx8PwRatgsDpppUm2gMPlbO/YbQFDzli/HY24eQvbnWXmQjQMvgV9vO+IRLN
 xNF/KNM2Ka5j/jclP7XhuxpaJkO0qtNInQtvjB0J2RWm7QYDX0MscLxojAc7JULVB/Ht
 7cOZTSPpydwDypjHoRQ1Elp1tnGKxuLcqxoIwsenCx4xY0LIXsoaVDsp7GZHv3VIaXRZ LQ== 
Received: from nalasppmta01.qualcomm.com (Global_NAT1.qualcomm.com
 [129.46.96.20])
 by mx0a-0031df01.pphosted.com (PPS) with ESMTPS id 3p41916qpb-1
 (version=TLSv1.2 cipher=ECDHE-RSA-AES256-GCM-SHA384 bits=256 verify=NOT);
 Tue, 07 Mar 2023 02:58:33 +0000
Received: from pps.filterd (NALASPPMTA01.qualcomm.com [127.0.0.1])
 by NALASPPMTA01.qualcomm.com (8.17.1.5/8.17.1.5) with ESMTP id 3272uZEU000629; 
 Tue, 7 Mar 2023 02:58:32 GMT
Received: from pps.reinject (localhost [127.0.0.1])
 by NALASPPMTA01.qualcomm.com (PPS) with ESMTPS id 3p4fhbkh8x-1
 (version=TLSv1.2 cipher=ECDHE-RSA-AES256-GCM-SHA384 bits=256 verify=NOT);
 Tue, 07 Mar 2023 02:58:32 +0000
Received: from NALASPPMTA01.qualcomm.com (NALASPPMTA01.qualcomm.com
 [127.0.0.1])
 by pps.reinject (8.17.1.5/8.17.1.5) with ESMTP id 3272uYVw000610;
 Tue, 7 Mar 2023 02:58:32 GMT
Received: from hu-devc-sd-u20-a-1.qualcomm.com (hu-tsimpson-lv.qualcomm.com
 [10.47.204.221])
 by NALASPPMTA01.qualcomm.com (PPS) with ESMTPS id 3272wVnn002435
 (version=TLSv1.2 cipher=ECDHE-RSA-AES256-GCM-SHA384 bits=256 verify=NOT);
 Tue, 07 Mar 2023 02:58:31 +0000
Received: by hu-devc-sd-u20-a-1.qualcomm.com (Postfix, from userid 47164)
 id DE862A7D; Mon,  6 Mar 2023 18:58:30 -0800 (PST)
From: Taylor Simpson <tsimpson@quicinc.com>
To: qemu-devel@nongnu.org
Cc: tsimpson@quicinc.com, richard.henderson@linaro.org, philmd@linaro.org,
 ale@rev.ng, anjo@rev.ng, bcain@quicinc.com, quic_mathbern@quicinc.com
Subject: [PATCH v6 12/14] Hexagon (target/hexagon) Remove
 gen_log_predicated_reg_write[_pair]
Date: Mon,  6 Mar 2023 18:58:26 -0800
Message-Id: <20230307025828.1612809-13-tsimpson@quicinc.com>
X-Mailer: git-send-email 2.25.1
In-Reply-To: <20230307025828.1612809-1-tsimpson@quicinc.com>
References: <20230307025828.1612809-1-tsimpson@quicinc.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
X-QCInternal: smtphost
X-QCInternal: smtphost
X-Proofpoint-Virus-Version: vendor=nai engine=6200 definitions=5800
 signatures=585085
X-Proofpoint-Virus-Version: vendor=nai engine=6200 definitions=5800
 signatures=585085
X-Proofpoint-ORIG-GUID: JK51jwqLXiwBL8ZIcrbRXun4M6Dd7sK_
X-Proofpoint-GUID: JK51jwqLXiwBL8ZIcrbRXun4M6Dd7sK_
X-Proofpoint-Virus-Version: vendor=baseguard
 engine=ICAP:2.0.219,Aquarius:18.0.942,Hydra:6.0.573,FMLib:17.11.170.22
 definitions=2023-03-06_14,2023-03-06_01,2023-02-09_01
X-Proofpoint-Spam-Details: rule=outbound_notspam policy=outbound score=0
 adultscore=0
 lowpriorityscore=0 malwarescore=0 priorityscore=1501 mlxlogscore=896
 clxscore=1015 impostorscore=0 bulkscore=0 spamscore=0 phishscore=0
 suspectscore=0 mlxscore=0 classifier=spam adjust=0 reason=mlx scancount=1
 engine=8.12.0-2212070000 definitions=main-2303070025
Received-SPF: pass client-ip=205.220.168.131;
 envelope-from=tsimpson@qualcomm.com; helo=mx0a-0031df01.pphosted.com
X-Spam_score_int: -24
X-Spam_score: -2.5
X-Spam_bar: --
X-Spam_report: (-2.5 / 5.0 requ) BAYES_00=-1.9, DKIM_SIGNED=0.1,
 DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1, HEADER_FROM_DIFFERENT_DOMAINS=0.25,
 RCVD_IN_DNSWL_LOW=-0.7, SPF_HELO_NONE=0.001,
 SPF_PASS=-0.001 autolearn=ham autolearn_force=no
X-Spam_action: no action
X-BeenThere: qemu-devel@nongnu.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: <qemu-devel.nongnu.org>
List-Unsubscribe: <https://lists.nongnu.org/mailman/options/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=unsubscribe>
List-Archive: <https://lists.nongnu.org/archive/html/qemu-devel>
List-Post: <mailto:qemu-devel@nongnu.org>
List-Help: <mailto:qemu-devel-request@nongnu.org?subject=help>
List-Subscribe: <https://lists.nongnu.org/mailman/listinfo/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=subscribe>
Errors-To: qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org
Sender: qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org

V2UgYXNzaWduIHRoZSBpbnN0cnVjdGlvbiBkZXN0aW5hdGlvbiByZWdpc3RlciB0byBoZXhfbmV3
X3ZhbHVlW251bV0KaW5zdGVhZCBvZiBhIFRDRyB0ZW1wIHRoYXQgZ2V0cyBjb3BpZWQgYmFjayB0
byBoZXhfbmV3X3ZhbHVlW251bV0uCgpXZSBpbnRyb2R1Y2UgbmV3IGZ1bmN0aW9ucyBnZXRfcmVz
dWx0X2dwcltfcGFpcl0gdG8gZmFjaWxpdGF0ZSBnZXR0aW5nCnRoZSBwcm9wZXIgZGVzdGluYXRp
b24gcmVnaXN0ZXIuCgpTaW5jZSB3ZSBwcmVsb2FkIGhleF9uZXdfdmFsdWUgZm9yIHByZWRpY2F0
ZWQgaW5zdHJ1Y3Rpb25zLCB3ZSBkb24ndApuZWVkIHRoZSBjaGVjayBmb3Igc2xvdF9jYW5jZWxs
ZWQuICBTbywgd2UgY2FsbCBnZW5fbG9nX3JlZ193cml0ZSBpbnN0ZWFkLgoKV2UgdXBkYXRlIHRo
ZSBoZWxwZXIgZnVuY3Rpb24gZ2VuZXJhdGlvbiBhbmQgZ2VuX3RjZy5oIHRvIG1haW50YWluIHRo
ZQpkaXNhYmxlLWhleGFnb24taWRlZi1wYXJzZXIgY29uZmlndXJhdGlvbi4KCkhlcmUgaXMgYSBz
aW1wbGUgZXhhbXBsZSBvZiB0aGUgZGlmZmVyZW5jZXMgaW4gdGhlIFRDRyBjb2RlIGdlbmVyYXRl
ZDoKCklOOgoweDAwNDAwMDk0OiAgMHhmOTAwYzEwMiB7ICAgICAgIGlmIChQMCkgUjIgPSBhbmQo
UjAsUjEpIH0KCkJFRk9SRQogLS0tLSAwMDQwMDA5NAogbW92X2kzMiBzbG90X2NhbmNlbGxlZCwk
MHgwCiBtb3ZfaTMyIG5ld19yMixyMgogbW92X2kzMiBsb2MyLCQweDAKIGFuZF9pMzIgdG1wMCxw
MCwkMHgxCiBicmNvbmRfaTMyIHRtcDAsJDB4MCxlcSwkTDEKIGFuZF9pMzIgdG1wMCxyMCxyMQog
bW92X2kzMiBsb2MyLHRtcDAKIGJyICRMMgogc2V0X2xhYmVsICRMMQogb3JfaTMyIHNsb3RfY2Fu
Y2VsbGVkLHNsb3RfY2FuY2VsbGVkLCQweDgKIHNldF9sYWJlbCAkTDIKIGFuZF9pMzIgdG1wMCxz
bG90X2NhbmNlbGxlZCwkMHg4CiBtb3Zjb25kX2kzMiBuZXdfcjIsdG1wMCwkMHgwLGxvYzIsbmV3
X3IyLGVxCiBtb3ZfaTMyIHIyLG5ld19yMgoKQUZURVIKIC0tLS0gMDA0MDAwOTQKIG1vdl9pMzIg
c2xvdF9jYW5jZWxsZWQsJDB4MAogbW92X2kzMiBuZXdfcjIscjIKIGFuZF9pMzIgdG1wMCxwMCwk
MHgxCiBicmNvbmRfaTMyIHRtcDAsJDB4MCxlcSwkTDEKIGFuZF9pMzIgdG1wMCxyMCxyMQogbW92
X2kzMiBuZXdfcjIsdG1wMAogYnIgJEwyCiBzZXRfbGFiZWwgJEwxCiBvcl9pMzIgc2xvdF9jYW5j
ZWxsZWQsc2xvdF9jYW5jZWxsZWQsJDB4OAogc2V0X2xhYmVsICRMMgogbW92X2kzMiByMixuZXdf
cjIKCldlJ2xsIHJlbW92ZSB0aGUgdW5uZWNlc3NhcnkgbWFuaXB1bGF0aW9uIG9mIHNsb3RfY2Fu
Y2VsbGVkIGluIGEKc3Vic2VxdWVudCBwYXRjaC4KClNpZ25lZC1vZmYtYnk6IFRheWxvciBTaW1w
c29uIDx0c2ltcHNvbkBxdWljaW5jLmNvbT4KUmV2aWV3ZWQtYnk6IEFudG9uIEpvaGFuc3NvbiA8
YW5qb0ByZXYubmc+Ci0tLQogdGFyZ2V0L2hleGFnb24vZ2VuX3RjZy5oICAgICAgICAgICAgICAg
ICAgICB8ICAgNiArLQogdGFyZ2V0L2hleGFnb24vbWFjcm9zLmggICAgICAgICAgICAgICAgICAg
ICB8ICAxNSAtLS0KIHRhcmdldC9oZXhhZ29uL2dlbnB0ci5jICAgICAgICAgICAgICAgICAgICAg
fCAxMjEgKysrKystLS0tLS0tLS0tLS0tLS0KIHRhcmdldC9oZXhhZ29uL2lkZWYtcGFyc2VyL3Bh
cnNlci1oZWxwZXJzLmMgfCAgIDQgKy0KIHRhcmdldC9oZXhhZ29uL2dlbl9oZWxwZXJfZnVuY3Mu
cHkgICAgICAgICAgfCAgMTkgKystCiB0YXJnZXQvaGV4YWdvbi9nZW5faGVscGVyX3Byb3Rvcy5w
eSAgICAgICAgIHwgIDEyICstCiB0YXJnZXQvaGV4YWdvbi9nZW5fdGNnX2Z1bmNzLnB5ICAgICAg
ICAgICAgIHwgIDc2ICsrKysrKystLS0tLQogdGFyZ2V0L2hleGFnb24vaGV4X2NvbW1vbi5weSAg
ICAgICAgICAgICAgICB8ICAgOSArLQogOCBmaWxlcyBjaGFuZ2VkLCAxMTAgaW5zZXJ0aW9ucygr
KSwgMTUyIGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL3RhcmdldC9oZXhhZ29uL2dlbl90Y2cu
aCBiL3RhcmdldC9oZXhhZ29uL2dlbl90Y2cuaAppbmRleCA1NmJkYzY3MDg5Li5kNTE0YWEzNDQ4
IDEwMDY0NAotLS0gYS90YXJnZXQvaGV4YWdvbi9nZW5fdGNnLmgKKysrIGIvdGFyZ2V0L2hleGFn
b24vZ2VuX3RjZy5oCkBAIC0zMzIsOCArMzMyLDYgQEAKICAgICAgICAgdGNnX2dlbl9tb3ZpX3Rs
KEVBLCAwKTsgXAogICAgICAgICBQUkVEOyAgXAogICAgICAgICBDSEVDS19OT1NIVUZfUFJFRChH
RVRfRUEsIFNJWkUsIExTQik7IFwKLSAgICAgICAgUFJFRF9MT0FEX0NBTkNFTChMU0IsIEVBKTsg
XAotICAgICAgICB0Y2dfZ2VuX21vdmlfdGwoUmRWLCAwKTsgXAogICAgICAgICB0Y2dfZ2VuX2Jy
Y29uZGlfdGwoVENHX0NPTkRfRVEsIExTQiwgMCwgbGFiZWwpOyBcCiAgICAgICAgIGZMT0FEKDEs
IFNJWkUsIFNJR04sIEVBLCBSZFYpOyBcCiAgICAgICAgIGdlbl9zZXRfbGFiZWwobGFiZWwpOyBc
CkBAIC0zOTEsOCArMzg5LDYgQEAKICAgICAgICAgdGNnX2dlbl9tb3ZpX3RsKEVBLCAwKTsgXAog
ICAgICAgICBQUkVEOyAgXAogICAgICAgICBDSEVDS19OT1NIVUZfUFJFRChHRVRfRUEsIDgsIExT
Qik7IFwKLSAgICAgICAgUFJFRF9MT0FEX0NBTkNFTChMU0IsIEVBKTsgXAotICAgICAgICB0Y2df
Z2VuX21vdmlfaTY0KFJkZFYsIDApOyBcCiAgICAgICAgIHRjZ19nZW5fYnJjb25kaV90bChUQ0df
Q09ORF9FUSwgTFNCLCAwLCBsYWJlbCk7IFwKICAgICAgICAgZkxPQUQoMSwgOCwgdSwgRUEsIFJk
ZFYpOyBcCiAgICAgICAgIGdlbl9zZXRfbGFiZWwobGFiZWwpOyBcCkBAIC01MDQsNyArNTAwLDcg
QEAKICAqLwogI2RlZmluZSBmR0VOX1RDR19TTDJfcmV0dXJuKFNIT1JUQ09ERSkgXAogICAgIGRv
IHsgXAotICAgICAgICBUQ0d2X2k2NCBSZGRWID0gdGNnX3RlbXBfbmV3X2k2NCgpOyBcCisgICAg
ICAgIFRDR3ZfaTY0IFJkZFYgPSBnZXRfcmVzdWx0X2dwcl9wYWlyKGN0eCwgSEVYX1JFR19GUCk7
IFwKICAgICAgICAgZ2VuX3JldHVybihjdHgsIFJkZFYsIGhleF9ncHJbSEVYX1JFR19GUF0pOyBc
CiAgICAgICAgIGdlbl9sb2dfcmVnX3dyaXRlX3BhaXIoSEVYX1JFR19GUCwgUmRkVik7IFwKICAg
ICB9IHdoaWxlICgwKQpkaWZmIC0tZ2l0IGEvdGFyZ2V0L2hleGFnb24vbWFjcm9zLmggYi90YXJn
ZXQvaGV4YWdvbi9tYWNyb3MuaAppbmRleCA2OTc0ZWY2YzllLi4xZmE2MDU3ZDI3IDEwMDY0NAot
LS0gYS90YXJnZXQvaGV4YWdvbi9tYWNyb3MuaAorKysgYi90YXJnZXQvaGV4YWdvbi9tYWNyb3Mu
aApAQCAtMjEwLDIxICsyMTAsNiBAQCBzdGF0aWMgaW5saW5lIHZvaWQgZ2VuX2NhbmNlbCh1aW50
MzJfdCBzbG90KQogCiAjZGVmaW5lIExPQURfQ0FOQ0VMKEVBKSBkbyB7IENBTkNFTDsgfSB3aGls
ZSAoMCkKIAotI2lmZGVmIFFFTVVfR0VORVJBVEUKLXN0YXRpYyBpbmxpbmUgdm9pZCBnZW5fcHJl
ZF9jYW5jZWwoVENHdiBwcmVkLCB1aW50MzJfdCBzbG90X251bSkKLSB7Ci0gICAgVENHdiBzbG90
X21hc2sgPSB0Y2dfdGVtcF9uZXcoKTsKLSAgICBUQ0d2IHRtcCA9IHRjZ190ZW1wX25ldygpOwot
ICAgIFRDR3YgemVybyA9IHRjZ19jb25zdGFudF90bCgwKTsKLSAgICB0Y2dfZ2VuX29yaV90bChz
bG90X21hc2ssIGhleF9zbG90X2NhbmNlbGxlZCwgMSA8PCBzbG90X251bSk7Ci0gICAgdGNnX2dl
bl9hbmRpX3RsKHRtcCwgcHJlZCwgMSk7Ci0gICAgdGNnX2dlbl9tb3Zjb25kX3RsKFRDR19DT05E
X0VRLCBoZXhfc2xvdF9jYW5jZWxsZWQsIHRtcCwgemVybywKLSAgICAgICAgICAgICAgICAgICAg
ICAgc2xvdF9tYXNrLCBoZXhfc2xvdF9jYW5jZWxsZWQpOwotfQotI2RlZmluZSBQUkVEX0xPQURf
Q0FOQ0VMKFBSRUQsIEVBKSBcCi0gICAgZ2VuX3ByZWRfY2FuY2VsKFBSRUQsIGluc24tPmlzX2Vu
ZGxvb3AgPyA0IDogaW5zbi0+c2xvdCkKLSNlbmRpZgotCiAjZGVmaW5lIFNUT1JFX0NBTkNFTChF
QSkgeyBlbnYtPnNsb3RfY2FuY2VsbGVkIHw9ICgxIDw8IHNsb3QpOyB9CiAKICNkZWZpbmUgZk1B
WChBLCBCKSAoKChBKSA+IChCKSkgPyAoQSkgOiAoQikpCmRpZmYgLS1naXQgYS90YXJnZXQvaGV4
YWdvbi9nZW5wdHIuYyBiL3RhcmdldC9oZXhhZ29uL2dlbnB0ci5jCmluZGV4IDYxYWI5YWY5ZTQu
LmRhNWRiYzgzY2YgMTAwNjQ0Ci0tLSBhL3RhcmdldC9oZXhhZ29uL2dlbnB0ci5jCisrKyBiL3Rh
cmdldC9oZXhhZ29uL2dlbnB0ci5jCkBAIC02OCwyNiArNjgsMTcgQEAgc3RhdGljIGlubGluZSB2
b2lkIGdlbl9tYXNrZWRfcmVnX3dyaXRlKFRDR3YgbmV3X3ZhbCwgVENHdiBjdXJfdmFsLAogICAg
IH0KIH0KIAotc3RhdGljIGlubGluZSB2b2lkIGdlbl9sb2dfcHJlZGljYXRlZF9yZWdfd3JpdGUo
aW50IHJudW0sIFRDR3YgdmFsLAotICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgdWludDMyX3Qgc2xvdCkKK3N0YXRpYyBUQ0d2IGdldF9yZXN1bHRfZ3ByKERp
c2FzQ29udGV4dCAqY3R4LCBpbnQgcm51bSkKIHsKLSAgICBUQ0d2IHplcm8gPSB0Y2dfY29uc3Rh
bnRfdGwoMCk7Ci0gICAgVENHdiBzbG90X21hc2sgPSB0Y2dfdGVtcF9uZXcoKTsKKyAgICByZXR1
cm4gaGV4X25ld192YWx1ZVtybnVtXTsKK30KIAotICAgIHRjZ19nZW5fYW5kaV90bChzbG90X21h
c2ssIGhleF9zbG90X2NhbmNlbGxlZCwgMSA8PCBzbG90KTsKLSAgICB0Y2dfZ2VuX21vdmNvbmRf
dGwoVENHX0NPTkRfRVEsIGhleF9uZXdfdmFsdWVbcm51bV0sIHNsb3RfbWFzaywgemVybywKLSAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHZhbCwgaGV4X25ld192YWx1ZVtybnVtXSk7Ci0gICAg
aWYgKEhFWF9ERUJVRykgewotICAgICAgICAvKgotICAgICAgICAgKiBEbyB0aGlzIHNvIEhFTFBF
UihkZWJ1Z19jb21taXRfZW5kKSB3aWxsIGtub3cKLSAgICAgICAgICoKLSAgICAgICAgICogTm90
ZSB0aGF0IHNsb3RfbWFzayBpbmRpY2F0ZXMgdGhlIHZhbHVlIGlzIG5vdCB3cml0dGVuCi0gICAg
ICAgICAqIChpLmUuLCBzbG90IHdhcyBjYW5jZWxsZWQpLCBzbyB3ZSBjcmVhdGUgYSB0cnVlL2Zh
bHNlIHZhbHVlIGJlZm9yZQotICAgICAgICAgKiBvcidpbmcgd2l0aCBoZXhfcmVnX3dyaXR0ZW5b
cm51bV0uCi0gICAgICAgICAqLwotICAgICAgICB0Y2dfZ2VuX3NldGNvbmRfdGwoVENHX0NPTkRf
RVEsIHNsb3RfbWFzaywgc2xvdF9tYXNrLCB6ZXJvKTsKLSAgICAgICAgdGNnX2dlbl9vcl90bCho
ZXhfcmVnX3dyaXR0ZW5bcm51bV0sIGhleF9yZWdfd3JpdHRlbltybnVtXSwgc2xvdF9tYXNrKTsK
LSAgICB9CitzdGF0aWMgVENHdl9pNjQgZ2V0X3Jlc3VsdF9ncHJfcGFpcihEaXNhc0NvbnRleHQg
KmN0eCwgaW50IHJudW0pCit7CisgICAgVENHdl9pNjQgcmVzdWx0ID0gdGNnX3RlbXBfbmV3X2k2
NCgpOworICAgIHRjZ19nZW5fY29uY2F0X2kzMl9pNjQocmVzdWx0LCBoZXhfbmV3X3ZhbHVlW3Ju
dW1dLAorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZXhfbmV3X3ZhbHVlW3Ju
dW0gKyAxXSk7CisgICAgcmV0dXJuIHJlc3VsdDsKIH0KIAogdm9pZCBnZW5fbG9nX3JlZ193cml0
ZShpbnQgcm51bSwgVENHdiB2YWwpCkBAIC0xMDIsMzkgKzkzLDYgQEAgdm9pZCBnZW5fbG9nX3Jl
Z193cml0ZShpbnQgcm51bSwgVENHdiB2YWwpCiAgICAgfQogfQogCi1zdGF0aWMgdm9pZCBnZW5f
bG9nX3ByZWRpY2F0ZWRfcmVnX3dyaXRlX3BhaXIoaW50IHJudW0sIFRDR3ZfaTY0IHZhbCwKLSAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50MzJfdCBzbG90
KQotewotICAgIFRDR3YgdmFsMzIgPSB0Y2dfdGVtcF9uZXcoKTsKLSAgICBUQ0d2IHplcm8gPSB0
Y2dfY29uc3RhbnRfdGwoMCk7Ci0gICAgVENHdiBzbG90X21hc2sgPSB0Y2dfdGVtcF9uZXcoKTsK
LQotICAgIHRjZ19nZW5fYW5kaV90bChzbG90X21hc2ssIGhleF9zbG90X2NhbmNlbGxlZCwgMSA8
PCBzbG90KTsKLSAgICAvKiBMb3cgd29yZCAqLwotICAgIHRjZ19nZW5fZXh0cmxfaTY0X2kzMih2
YWwzMiwgdmFsKTsKLSAgICB0Y2dfZ2VuX21vdmNvbmRfdGwoVENHX0NPTkRfRVEsIGhleF9uZXdf
dmFsdWVbcm51bV0sCi0gICAgICAgICAgICAgICAgICAgICAgIHNsb3RfbWFzaywgemVybywKLSAg
ICAgICAgICAgICAgICAgICAgICAgdmFsMzIsIGhleF9uZXdfdmFsdWVbcm51bV0pOwotICAgIC8q
IEhpZ2ggd29yZCAqLwotICAgIHRjZ19nZW5fZXh0cmhfaTY0X2kzMih2YWwzMiwgdmFsKTsKLSAg
ICB0Y2dfZ2VuX21vdmNvbmRfdGwoVENHX0NPTkRfRVEsIGhleF9uZXdfdmFsdWVbcm51bSArIDFd
LAotICAgICAgICAgICAgICAgICAgICAgICBzbG90X21hc2ssIHplcm8sCi0gICAgICAgICAgICAg
ICAgICAgICAgIHZhbDMyLCBoZXhfbmV3X3ZhbHVlW3JudW0gKyAxXSk7Ci0gICAgaWYgKEhFWF9E
RUJVRykgewotICAgICAgICAvKgotICAgICAgICAgKiBEbyB0aGlzIHNvIEhFTFBFUihkZWJ1Z19j
b21taXRfZW5kKSB3aWxsIGtub3cKLSAgICAgICAgICoKLSAgICAgICAgICogTm90ZSB0aGF0IHNs
b3RfbWFzayBpbmRpY2F0ZXMgdGhlIHZhbHVlIGlzIG5vdCB3cml0dGVuCi0gICAgICAgICAqIChp
LmUuLCBzbG90IHdhcyBjYW5jZWxsZWQpLCBzbyB3ZSBjcmVhdGUgYSB0cnVlL2ZhbHNlIHZhbHVl
IGJlZm9yZQotICAgICAgICAgKiBvcidpbmcgd2l0aCBoZXhfcmVnX3dyaXR0ZW5bcm51bV0uCi0g
ICAgICAgICAqLwotICAgICAgICB0Y2dfZ2VuX3NldGNvbmRfdGwoVENHX0NPTkRfRVEsIHNsb3Rf
bWFzaywgc2xvdF9tYXNrLCB6ZXJvKTsKLSAgICAgICAgdGNnX2dlbl9vcl90bChoZXhfcmVnX3dy
aXR0ZW5bcm51bV0sIGhleF9yZWdfd3JpdHRlbltybnVtXSwgc2xvdF9tYXNrKTsKLSAgICAgICAg
dGNnX2dlbl9vcl90bChoZXhfcmVnX3dyaXR0ZW5bcm51bSArIDFdLCBoZXhfcmVnX3dyaXR0ZW5b
cm51bSArIDFdLAotICAgICAgICAgICAgICAgICAgICAgIHNsb3RfbWFzayk7Ci0gICAgfQotfQot
CiBzdGF0aWMgdm9pZCBnZW5fbG9nX3JlZ193cml0ZV9wYWlyKGludCBybnVtLCBUQ0d2X2k2NCB2
YWwpCiB7CiAgICAgY29uc3QgdGFyZ2V0X3Vsb25nIHJlZ19tYXNrX2xvdyA9IHJlZ19pbW11dF9t
YXNrc1tybnVtXTsKQEAgLTI5MCwxMSArMjQ4LDEyIEBAIHN0YXRpYyBpbmxpbmUgdm9pZCBnZW5f
d3JpdGVfY3RybF9yZWdfcGFpcihEaXNhc0NvbnRleHQgKmN0eCwgaW50IHJlZ19udW0sCiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVENHdl9pNjQgdmFsKQogewog
ICAgIGlmIChyZWdfbnVtID09IEhFWF9SRUdfUDNfMF9BTElBU0VEKSB7CisgICAgICAgIFRDR3Yg
cmVzdWx0ID0gZ2V0X3Jlc3VsdF9ncHIoY3R4LCByZWdfbnVtICsgMSk7CiAgICAgICAgIFRDR3Yg
dmFsMzIgPSB0Y2dfdGVtcF9uZXcoKTsKICAgICAgICAgdGNnX2dlbl9leHRybF9pNjRfaTMyKHZh
bDMyLCB2YWwpOwogICAgICAgICBnZW5fd3JpdGVfcDNfMChjdHgsIHZhbDMyKTsKICAgICAgICAg
dGNnX2dlbl9leHRyaF9pNjRfaTMyKHZhbDMyLCB2YWwpOwotICAgICAgICBnZW5fbG9nX3JlZ193
cml0ZShyZWdfbnVtICsgMSwgdmFsMzIpOworICAgICAgICB0Y2dfZ2VuX21vdl90bChyZXN1bHQs
IHZhbDMyKTsKICAgICB9IGVsc2UgewogICAgICAgICBnZW5fbG9nX3JlZ193cml0ZV9wYWlyKHJl
Z19udW0sIHZhbCk7CiAgICAgICAgIGlmIChyZWdfbnVtID09IEhFWF9SRUdfUUVNVV9QS1RfQ05U
KSB7CkBAIC02NzMsMzEgKzYzMiwyOCBAQCBzdGF0aWMgdm9pZCBnZW5fanVtcHIoRGlzYXNDb250
ZXh0ICpjdHgsIFRDR3YgbmV3X3BjKQogCiBzdGF0aWMgdm9pZCBnZW5fY2FsbChEaXNhc0NvbnRl
eHQgKmN0eCwgaW50IHBjX29mZikKIHsKLSAgICBUQ0d2IG5leHRfUEMgPQotICAgICAgICB0Y2df
Y29uc3RhbnRfdGwoY3R4LT5wa3QtPnBjICsgY3R4LT5wa3QtPmVuY29kX3BrdF9zaXplX2luX2J5
dGVzKTsKLSAgICBnZW5fbG9nX3JlZ193cml0ZShIRVhfUkVHX0xSLCBuZXh0X1BDKTsKKyAgICBU
Q0d2IGxyID0gZ2V0X3Jlc3VsdF9ncHIoY3R4LCBIRVhfUkVHX0xSKTsKKyAgICB0Y2dfZ2VuX21v
dmlfdGwobHIsIGN0eC0+bmV4dF9QQyk7CiAgICAgZ2VuX3dyaXRlX25ld19wY19wY3JlbChjdHgs
IHBjX29mZiwgVENHX0NPTkRfQUxXQVlTLCBOVUxMKTsKIH0KIAogc3RhdGljIHZvaWQgZ2VuX2Nh
bGxyKERpc2FzQ29udGV4dCAqY3R4LCBUQ0d2IG5ld19wYykKIHsKLSAgICBUQ0d2IG5leHRfUEMg
PSB0Y2dfY29uc3RhbnRfdGwoY3R4LT5uZXh0X1BDKTsKLSAgICBnZW5fbG9nX3JlZ193cml0ZShI
RVhfUkVHX0xSLCBuZXh0X1BDKTsKKyAgICBUQ0d2IGxyID0gZ2V0X3Jlc3VsdF9ncHIoY3R4LCBI
RVhfUkVHX0xSKTsKKyAgICB0Y2dfZ2VuX21vdmlfdGwobHIsIGN0eC0+bmV4dF9QQyk7CiAgICAg
Z2VuX3dyaXRlX25ld19wY19hZGRyKGN0eCwgbmV3X3BjLCBUQ0dfQ09ORF9BTFdBWVMsIE5VTEwp
OwogfQogCiBzdGF0aWMgdm9pZCBnZW5fY29uZF9jYWxsKERpc2FzQ29udGV4dCAqY3R4LCBUQ0d2
IHByZWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgIFRDR0NvbmQgY29uZCwgaW50IHBjX29m
ZikKIHsKLSAgICBUQ0d2IG5leHRfUEM7CisgICAgVENHdiBsciA9IGdldF9yZXN1bHRfZ3ByKGN0
eCwgSEVYX1JFR19MUik7CiAgICAgVENHdiBsc2IgPSB0Y2dfdGVtcF9uZXcoKTsKICAgICBUQ0dM
YWJlbCAqc2tpcCA9IGdlbl9uZXdfbGFiZWwoKTsKICAgICB0Y2dfZ2VuX2FuZGlfdGwobHNiLCBw
cmVkLCAxKTsKICAgICBnZW5fd3JpdGVfbmV3X3BjX3BjcmVsKGN0eCwgcGNfb2ZmLCBjb25kLCBs
c2IpOwogICAgIHRjZ19nZW5fYnJjb25kaV90bChjb25kLCBsc2IsIDAsIHNraXApOwotICAgIG5l
eHRfUEMgPQotICAgICAgICB0Y2dfY29uc3RhbnRfdGwoY3R4LT5wa3QtPnBjICsgY3R4LT5wa3Qt
PmVuY29kX3BrdF9zaXplX2luX2J5dGVzKTsKLSAgICBnZW5fbG9nX3JlZ193cml0ZShIRVhfUkVH
X0xSLCBuZXh0X1BDKTsKKyAgICB0Y2dfZ2VuX21vdmlfdGwobHIsIGN0eC0+bmV4dF9QQyk7CiAg
ICAgZ2VuX3NldF9sYWJlbChza2lwKTsKIH0KIApAQCAtNzI4LDggKzY4NCw3IEBAIHN0YXRpYyB2
b2lkIGdlbl9sb2FkX2ZyYW1lKERpc2FzQ29udGV4dCAqY3R4LCBUQ0d2X2k2NCBmcmFtZSwgVENH
diBFQSkKICAgICB0Y2dfZ2VuX3FlbXVfbGQ2NChmcmFtZSwgRUEsIGN0eC0+bWVtX2lkeCk7CiB9
CiAKLXN0YXRpYyB2b2lkIGdlbl9yZXR1cm5fYmFzZShEaXNhc0NvbnRleHQgKmN0eCwgVENHdl9p
NjQgZHN0LCBUQ0d2IHNyYywKLSAgICAgICAgICAgICAgICAgICAgICAgICAgICBUQ0d2IHIyOSkK
K3N0YXRpYyB2b2lkIGdlbl9yZXR1cm4oRGlzYXNDb250ZXh0ICpjdHgsIFRDR3ZfaTY0IGRzdCwg
VENHdiBzcmMpCiB7CiAgICAgLyoKICAgICAgKiBmcmFtZSA9ICpzcmMKQEAgLTczOSw2ICs2OTQs
NyBAQCBzdGF0aWMgdm9pZCBnZW5fcmV0dXJuX2Jhc2UoRGlzYXNDb250ZXh0ICpjdHgsIFRDR3Zf
aTY0IGRzdCwgVENHdiBzcmMsCiAgICAgICovCiAgICAgVENHdl9pNjQgZnJhbWUgPSB0Y2dfdGVt
cF9uZXdfaTY0KCk7CiAgICAgVENHdiByMzEgPSB0Y2dfdGVtcF9uZXcoKTsKKyAgICBUQ0d2IHIy
OSA9IGdldF9yZXN1bHRfZ3ByKGN0eCwgSEVYX1JFR19TUCk7CiAKICAgICBnZW5fbG9hZF9mcmFt
ZShjdHgsIGZyYW1lLCBzcmMpOwogICAgIGdlbl9mcmFtZV91bnNjcmFtYmxlKGZyYW1lKTsKQEAg
LTc0OCw0NSArNzA0LDI1IEBAIHN0YXRpYyB2b2lkIGdlbl9yZXR1cm5fYmFzZShEaXNhc0NvbnRl
eHQgKmN0eCwgVENHdl9pNjQgZHN0LCBUQ0d2IHNyYywKICAgICBnZW5fanVtcHIoY3R4LCByMzEp
OwogfQogCi1zdGF0aWMgdm9pZCBnZW5fcmV0dXJuKERpc2FzQ29udGV4dCAqY3R4LCBUQ0d2X2k2
NCBkc3QsIFRDR3Ygc3JjKQotewotICAgIFRDR3YgcjI5ID0gdGNnX3RlbXBfbmV3KCk7Ci0gICAg
Z2VuX3JldHVybl9iYXNlKGN0eCwgZHN0LCBzcmMsIHIyOSk7Ci0gICAgZ2VuX2xvZ19yZWdfd3Jp
dGUoSEVYX1JFR19TUCwgcjI5KTsKLX0KLQogLyogaWYgKHByZWQpIGRzdCA9IGRlYWxsb2NfcmV0
dXJuKHNyYyk6cmF3ICovCiBzdGF0aWMgdm9pZCBnZW5fY29uZF9yZXR1cm4oRGlzYXNDb250ZXh0
ICpjdHgsIFRDR3ZfaTY0IGRzdCwgVENHdiBzcmMsCiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgVENHdiBwcmVkLCBUQ0dDb25kIGNvbmQpCiB7CiAgICAgVENHdiBMU0IgPSB0Y2dfdGVtcF9u
ZXcoKTsKLSAgICBUQ0d2IG1hc2sgPSB0Y2dfdGVtcF9uZXcoKTsKLSAgICBUQ0d2IHIyOSA9IHRj
Z190ZW1wX25ldygpOwogICAgIFRDR0xhYmVsICpza2lwID0gZ2VuX25ld19sYWJlbCgpOwogICAg
IHRjZ19nZW5fYW5kaV90bChMU0IsIHByZWQsIDEpOwogCi0gICAgLyogSW5pdGlhbGl6ZSB0aGUg
cmVzdWx0cyBpbiBjYXNlIHRoZSBwcmVkaWNhdGUgaXMgZmFsc2UgKi8KLSAgICB0Y2dfZ2VuX21v
dmlfaTY0KGRzdCwgMCk7Ci0gICAgdGNnX2dlbl9tb3ZpX3RsKHIyOSwgMCk7Ci0KLSAgICAvKiBT
ZXQgdGhlIGJpdCBpbiBoZXhfc2xvdF9jYW5jZWxsZWQgaWYgdGhlIHByZWRpY2F0ZSBpcyBmbGFz
ZSAqLwotICAgIHRjZ19nZW5fbW92aV90bChtYXNrLCAxIDw8IGN0eC0+aW5zbi0+c2xvdCk7Ci0g
ICAgdGNnX2dlbl9vcl90bChtYXNrLCBoZXhfc2xvdF9jYW5jZWxsZWQsIG1hc2spOwotICAgIHRj
Z19nZW5fbW92Y29uZF90bChjb25kLCBoZXhfc2xvdF9jYW5jZWxsZWQsIExTQiwgdGNnX2NvbnN0
YW50X3RsKDApLAotICAgICAgICAgICAgICAgICAgICAgICBtYXNrLCBoZXhfc2xvdF9jYW5jZWxs
ZWQpOwotCiAgICAgdGNnX2dlbl9icmNvbmRpX3RsKGNvbmQsIExTQiwgMCwgc2tpcCk7Ci0gICAg
Z2VuX3JldHVybl9iYXNlKGN0eCwgZHN0LCBzcmMsIHIyOSk7CisgICAgZ2VuX3JldHVybihjdHgs
IGRzdCwgc3JjKTsKICAgICBnZW5fc2V0X2xhYmVsKHNraXApOwotICAgIGdlbl9sb2dfcHJlZGlj
YXRlZF9yZWdfd3JpdGUoSEVYX1JFR19TUCwgcjI5LCBjdHgtPmluc24tPnNsb3QpOwogfQogCiAv
KiBzdWItaW5zdHJ1Y3Rpb24gdmVyc2lvbiAobm8gUmRkViwgc28gaGFuZGxlIGl0IG1hbnVhbGx5
KSAqLwogc3RhdGljIHZvaWQgZ2VuX2NvbmRfcmV0dXJuX3N1Ymluc24oRGlzYXNDb250ZXh0ICpj
dHgsIFRDR0NvbmQgY29uZCwgVENHdiBwcmVkKQogewotICAgIFRDR3ZfaTY0IFJkZFYgPSB0Y2df
dGVtcF9uZXdfaTY0KCk7CisgICAgVENHdl9pNjQgUmRkViA9IGdldF9yZXN1bHRfZ3ByX3BhaXIo
Y3R4LCBIRVhfUkVHX0ZQKTsKICAgICBnZW5fY29uZF9yZXR1cm4oY3R4LCBSZGRWLCBoZXhfZ3By
W0hFWF9SRUdfRlBdLCBwcmVkLCBjb25kKTsKLSAgICBnZW5fbG9nX3ByZWRpY2F0ZWRfcmVnX3dy
aXRlX3BhaXIoSEVYX1JFR19GUCwgUmRkViwgY3R4LT5pbnNuLT5zbG90KTsKKyAgICBnZW5fbG9n
X3JlZ193cml0ZV9wYWlyKEhFWF9SRUdfRlAsIFJkZFYpOwogfQogCiBzdGF0aWMgdm9pZCBnZW5f
ZW5kbG9vcDAoRGlzYXNDb250ZXh0ICpjdHgpCkBAIC04MzYsOSArNzcyLDkgQEAgc3RhdGljIHZv
aWQgZ2VuX2VuZGxvb3AwKERpc2FzQ29udGV4dCAqY3R4KQogICAgICAgICBUQ0dMYWJlbCAqbGFi
ZWwzID0gZ2VuX25ld19sYWJlbCgpOwogICAgICAgICB0Y2dfZ2VuX2JyY29uZGlfdGwoVENHX0NP
TkRfTEVVLCBoZXhfZ3ByW0hFWF9SRUdfTEMwXSwgMSwgbGFiZWwzKTsKICAgICAgICAgeworICAg
ICAgICAgICAgVENHdiBsYzAgPSBnZXRfcmVzdWx0X2dwcihjdHgsIEhFWF9SRUdfTEMwKTsKICAg
ICAgICAgICAgIGdlbl9qdW1wcihjdHgsIGhleF9ncHJbSEVYX1JFR19TQTBdKTsKLSAgICAgICAg
ICAgIHRjZ19nZW5fc3ViaV90bChoZXhfbmV3X3ZhbHVlW0hFWF9SRUdfTEMwXSwKLSAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBoZXhfZ3ByW0hFWF9SRUdfTEMwXSwgMSk7CisgICAgICAgICAg
ICB0Y2dfZ2VuX3N1YmlfdGwobGMwLCBoZXhfZ3ByW0hFWF9SRUdfTEMwXSwgMSk7CiAgICAgICAg
IH0KICAgICAgICAgZ2VuX3NldF9sYWJlbChsYWJlbDMpOwogICAgIH0KQEAgLTg1NSw4ICs3OTEs
OSBAQCBzdGF0aWMgdm9pZCBnZW5fZW5kbG9vcDEoRGlzYXNDb250ZXh0ICpjdHgpCiAgICAgVENH
TGFiZWwgKmxhYmVsID0gZ2VuX25ld19sYWJlbCgpOwogICAgIHRjZ19nZW5fYnJjb25kaV90bChU
Q0dfQ09ORF9MRVUsIGhleF9ncHJbSEVYX1JFR19MQzFdLCAxLCBsYWJlbCk7CiAgICAgeworICAg
ICAgICBUQ0d2IGxjMSA9IGdldF9yZXN1bHRfZ3ByKGN0eCwgSEVYX1JFR19MQzEpOwogICAgICAg
ICBnZW5fanVtcHIoY3R4LCBoZXhfZ3ByW0hFWF9SRUdfU0ExXSk7Ci0gICAgICAgIHRjZ19nZW5f
c3ViaV90bChoZXhfbmV3X3ZhbHVlW0hFWF9SRUdfTEMxXSwgaGV4X2dwcltIRVhfUkVHX0xDMV0s
IDEpOworICAgICAgICB0Y2dfZ2VuX3N1YmlfdGwobGMxLCBoZXhfZ3ByW0hFWF9SRUdfTEMxXSwg
MSk7CiAgICAgfQogICAgIGdlbl9zZXRfbGFiZWwobGFiZWwpOwogfQpAQCAtOTA5LDE1ICs4NDYs
MTcgQEAgc3RhdGljIHZvaWQgZ2VuX2VuZGxvb3AwMShEaXNhc0NvbnRleHQgKmN0eCkKICAgICAg
Ki8KICAgICB0Y2dfZ2VuX2JyY29uZGlfdGwoVENHX0NPTkRfTEVVLCBoZXhfZ3ByW0hFWF9SRUdf
TEMwXSwgMSwgbGFiZWwzKTsKICAgICB7CisgICAgICAgIFRDR3YgbGMwID0gZ2V0X3Jlc3VsdF9n
cHIoY3R4LCBIRVhfUkVHX0xDMCk7CiAgICAgICAgIGdlbl9qdW1wcihjdHgsIGhleF9ncHJbSEVY
X1JFR19TQTBdKTsKLSAgICAgICAgdGNnX2dlbl9zdWJpX3RsKGhleF9uZXdfdmFsdWVbSEVYX1JF
R19MQzBdLCBoZXhfZ3ByW0hFWF9SRUdfTEMwXSwgMSk7CisgICAgICAgIHRjZ19nZW5fc3ViaV90
bChsYzAsIGhleF9ncHJbSEVYX1JFR19MQzBdLCAxKTsKICAgICAgICAgdGNnX2dlbl9icihkb25l
KTsKICAgICB9CiAgICAgZ2VuX3NldF9sYWJlbChsYWJlbDMpOwogICAgIHRjZ19nZW5fYnJjb25k
aV90bChUQ0dfQ09ORF9MRVUsIGhleF9ncHJbSEVYX1JFR19MQzFdLCAxLCBkb25lKTsKICAgICB7
CisgICAgICAgIFRDR3YgbGMxID0gZ2V0X3Jlc3VsdF9ncHIoY3R4LCBIRVhfUkVHX0xDMSk7CiAg
ICAgICAgIGdlbl9qdW1wcihjdHgsIGhleF9ncHJbSEVYX1JFR19TQTFdKTsKLSAgICAgICAgdGNn
X2dlbl9zdWJpX3RsKGhleF9uZXdfdmFsdWVbSEVYX1JFR19MQzFdLCBoZXhfZ3ByW0hFWF9SRUdf
TEMxXSwgMSk7CisgICAgICAgIHRjZ19nZW5fc3ViaV90bChsYzEsIGhleF9ncHJbSEVYX1JFR19M
QzFdLCAxKTsKICAgICB9CiAgICAgZ2VuX3NldF9sYWJlbChkb25lKTsKIH0KZGlmZiAtLWdpdCBh
L3RhcmdldC9oZXhhZ29uL2lkZWYtcGFyc2VyL3BhcnNlci1oZWxwZXJzLmMgYi90YXJnZXQvaGV4
YWdvbi9pZGVmLXBhcnNlci9wYXJzZXItaGVscGVycy5jCmluZGV4IDY0NGEyMmFmMzYuLmJhNGZj
Mzc3ZDIgMTAwNjQ0Ci0tLSBhL3RhcmdldC9oZXhhZ29uL2lkZWYtcGFyc2VyL3BhcnNlci1oZWxw
ZXJzLmMKKysrIGIvdGFyZ2V0L2hleGFnb24vaWRlZi1wYXJzZXIvcGFyc2VyLWhlbHBlcnMuYwpA
QCAtMTY3MSw5ICsxNjcxLDcgQEAgdm9pZCBnZW5faW5zdF9pbml0X2FyZ3MoQ29udGV4dCAqYywg
WVlMVFlQRSAqbG9jcCkKICAgICBmb3IgKHVuc2lnbmVkIGkgPSAwOyBpIDwgYy0+aW5zdC5pbml0
X2xpc3QtPmxlbjsgaSsrKSB7CiAgICAgICAgIEhleFZhbHVlICp2YWwgPSAmZ19hcnJheV9pbmRl
eChjLT5pbnN0LmluaXRfbGlzdCwgSGV4VmFsdWUsIGkpOwogICAgICAgICBpZiAodmFsLT50eXBl
ID09IFJFR0lTVEVSX0FSRykgewotICAgICAgICAgICAgY2hhciByZWdfaWRbNV07Ci0gICAgICAg
ICAgICByZWdfY29tcG9zZShjLCBsb2NwLCAmdmFsLT5yZWcsIHJlZ19pZCk7Ci0gICAgICAgICAg
ICBFTUlUX0hFQUQoYywgInRjZ19nZW5fbW92aV9pJXUoJXMsIDApO1xuIiwgdmFsLT5iaXRfd2lk
dGgsIHJlZ19pZCk7CisgICAgICAgICAgICAvKiBOb3RoaW5nIHRvIGRvIGhlcmUgKi8KICAgICAg
ICAgfSBlbHNlIGlmICh2YWwtPnR5cGUgPT0gUFJFRElDQVRFKSB7CiAgICAgICAgICAgICBjaGFy
IHN1ZmZpeCA9IHZhbC0+aXNfZG90bmV3ID8gJ04nIDogJ1YnOwogICAgICAgICAgICAgRU1JVF9I
RUFEKGMsICJ0Y2dfZ2VuX21vdmlfaSV1KFAlYyVjLCAwKTtcbiIsIHZhbC0+Yml0X3dpZHRoLApk
aWZmIC0tZ2l0IGEvdGFyZ2V0L2hleGFnb24vZ2VuX2hlbHBlcl9mdW5jcy5weSBiL3RhcmdldC9o
ZXhhZ29uL2dlbl9oZWxwZXJfZnVuY3MucHkKaW5kZXggMTllOTg4M2Y0Yy4uN2EyMjRiNjZlNiAx
MDA3NTUKLS0tIGEvdGFyZ2V0L2hleGFnb24vZ2VuX2hlbHBlcl9mdW5jcy5weQorKysgYi90YXJn
ZXQvaGV4YWdvbi9nZW5faGVscGVyX2Z1bmNzLnB5CkBAIC0xLDcgKzEsNyBAQAogIyEvdXNyL2Jp
bi9lbnYgcHl0aG9uMwogCiAjIwotIyMgIENvcHlyaWdodChjKSAyMDE5LTIwMjIgUXVhbGNvbW0g
SW5ub3ZhdGlvbiBDZW50ZXIsIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KKyMjICBDb3B5cmln
aHQoYykgMjAxOS0yMDIzIFF1YWxjb21tIElubm92YXRpb24gQ2VudGVyLCBJbmMuIEFsbCBSaWdo
dHMgUmVzZXJ2ZWQuCiAjIwogIyMgIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOyB5b3Ug
Y2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5CiAjIyAgaXQgdW5kZXIgdGhlIHRlcm1z
IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnkKQEAgLTIy
Niw2ICsyMjYsMTQgQEAgZGVmIGdlbl9oZWxwZXJfZnVuY3Rpb24oZiwgdGFnLCB0YWdyZWdzLCB0
YWdpbW1zKToKICAgICAgICAgICAgICAgICAgICAgcHJpbnQoIkJhZCByZWdpc3RlciBwYXJzZTog
IixyZWd0eXBlLHJlZ2lkLHRvc3MsbnVtcmVncykKICAgICAgICAgICAgICAgICBpICs9IDEKIAor
ICAgICAgICAjIyBGb3IgY29uZGl0aW9uYWwgaW5zdHJ1Y3Rpb25zLCB3ZSBwYXNzIGluIHRoZSBk
ZXN0aW5hdGlvbiByZWdpc3RlcgorICAgICAgICBpZiAnQV9DT05ERVhFQycgaW4gaGV4X2NvbW1v
bi5hdHRyaWJkaWN0W3RhZ106CisgICAgICAgICAgICBmb3IgcmVndHlwZSwgcmVnaWQsIHRvc3Ms
IG51bXJlZ3MgaW4gcmVnczoKKyAgICAgICAgICAgICAgICBpZiAoaGV4X2NvbW1vbi5pc193cml0
ZW9ubHkocmVnaWQpIGFuZAorICAgICAgICAgICAgICAgICAgICBub3QgaGV4X2NvbW1vbi5pc19o
dnhfcmVnKHJlZ3R5cGUpKToKKyAgICAgICAgICAgICAgICAgICAgZ2VuX2hlbHBlcl9hcmdfb3Bu
KGYsIHJlZ3R5cGUsIHJlZ2lkLCBpLCB0YWcpCisgICAgICAgICAgICAgICAgICAgIGkgKz0gMQor
CiAgICAgICAgICMjIEFyZ3VtZW50cyB0byB0aGUgaGVscGVyIGZ1bmN0aW9uIGFyZSB0aGUgc291
cmNlIHJlZ3MgYW5kIGltbWVkaWF0ZXMKICAgICAgICAgZm9yIHJlZ3R5cGUscmVnaWQsdG9zcyxu
dW1yZWdzIGluIHJlZ3M6CiAgICAgICAgICAgICBpZiAoaGV4X2NvbW1vbi5pc19yZWFkKHJlZ2lk
KSk6CkBAIC0yNjIsMTAgKzI3MCwxMSBAQCBkZWYgZ2VuX2hlbHBlcl9mdW5jdGlvbihmLCB0YWcs
IHRhZ3JlZ3MsIHRhZ2ltbXMpOgogICAgICAgICBpZiBoZXhfY29tbW9uLm5lZWRfZWEodGFnKTog
Z2VuX2RlY2xfZWEoZikKICAgICAgICAgIyMgRGVjbGFyZSB0aGUgcmV0dXJuIHZhcmlhYmxlCiAg
ICAgICAgIGk9MAotICAgICAgICBmb3IgcmVndHlwZSxyZWdpZCx0b3NzLG51bXJlZ3MgaW4gcmVn
czoKLSAgICAgICAgICAgIGlmIChoZXhfY29tbW9uLmlzX3dyaXRlb25seShyZWdpZCkpOgotICAg
ICAgICAgICAgICAgIGdlbl9oZWxwZXJfZGVzdF9kZWNsX29wbihmLHJlZ3R5cGUscmVnaWQsaSkK
LSAgICAgICAgICAgIGkgKz0gMQorICAgICAgICBpZiAnQV9DT05ERVhFQycgbm90IGluIGhleF9j
b21tb24uYXR0cmliZGljdFt0YWddOgorICAgICAgICAgICAgZm9yIHJlZ3R5cGUscmVnaWQsdG9z
cyxudW1yZWdzIGluIHJlZ3M6CisgICAgICAgICAgICAgICAgaWYgKGhleF9jb21tb24uaXNfd3Jp
dGVvbmx5KHJlZ2lkKSk6CisgICAgICAgICAgICAgICAgICAgIGdlbl9oZWxwZXJfZGVzdF9kZWNs
X29wbihmLHJlZ3R5cGUscmVnaWQsaSkKKyAgICAgICAgICAgICAgICBpICs9IDEKIAogICAgICAg
ICBmb3IgcmVndHlwZSxyZWdpZCx0b3NzLG51bXJlZ3MgaW4gcmVnczoKICAgICAgICAgICAgIGlm
IChoZXhfY29tbW9uLmlzX3JlYWQocmVnaWQpKToKZGlmZiAtLWdpdCBhL3RhcmdldC9oZXhhZ29u
L2dlbl9oZWxwZXJfcHJvdG9zLnB5IGIvdGFyZ2V0L2hleGFnb24vZ2VuX2hlbHBlcl9wcm90b3Mu
cHkKaW5kZXggNjc0YmYzNzBmYS4uZGRkZGM5ZTRmMCAxMDA3NTUKLS0tIGEvdGFyZ2V0L2hleGFn
b24vZ2VuX2hlbHBlcl9wcm90b3MucHkKKysrIGIvdGFyZ2V0L2hleGFnb24vZ2VuX2hlbHBlcl9w
cm90b3MucHkKQEAgLTEsNyArMSw3IEBACiAjIS91c3IvYmluL2VudiBweXRob24zCiAKICMjCi0j
IyAgQ29weXJpZ2h0KGMpIDIwMTktMjAyMiBRdWFsY29tbSBJbm5vdmF0aW9uIENlbnRlciwgSW5j
LiBBbGwgUmlnaHRzIFJlc2VydmVkLgorIyMgIENvcHlyaWdodChjKSAyMDE5LTIwMjMgUXVhbGNv
bW0gSW5ub3ZhdGlvbiBDZW50ZXIsIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICMjCiAjIyAg
VGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFu
ZC9vciBtb2RpZnkKICMjICBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1
YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieQpAQCAtODcsNiArODcsNyBAQCBkZWYgZ2VuX2hl
bHBlcl9wcm90b3R5cGUoZiwgdGFnLCB0YWdyZWdzLCB0YWdpbW1zKToKICAgICAgICAgICAgIGlm
IGhleF9jb21tb24ubmVlZF9zbG90KHRhZyk6IGRlZl9oZWxwZXJfc2l6ZSArPSAxCiAgICAgICAg
ICAgICBpZiBoZXhfY29tbW9uLm5lZWRfUEModGFnKTogZGVmX2hlbHBlcl9zaXplICs9IDEKICAg
ICAgICAgICAgIGlmIGhleF9jb21tb24uaGVscGVyX25lZWRzX25leHRfUEModGFnKTogZGVmX2hl
bHBlcl9zaXplICs9IDEKKyAgICAgICAgICAgIGlmIGhleF9jb21tb24ubmVlZF9jb25kZXhlY19y
ZWcodGFnLCByZWdzKTogZGVmX2hlbHBlcl9zaXplICs9IDEKICAgICAgICAgICAgIGYud3JpdGUo
J0RFRl9IRUxQRVJfJXMoJXMnICUgKGRlZl9oZWxwZXJfc2l6ZSwgdGFnKSkKICAgICAgICAgICAg
ICMjIFRoZSByZXR1cm4gdHlwZSBpcyB2b2lkCiAgICAgICAgICAgICBmLndyaXRlKCcsIHZvaWQn
ICkKQEAgLTk2LDYgKzk3LDcgQEAgZGVmIGdlbl9oZWxwZXJfcHJvdG90eXBlKGYsIHRhZywgdGFn
cmVncywgdGFnaW1tcyk6CiAgICAgICAgICAgICBpZiBoZXhfY29tbW9uLm5lZWRfcGFydDEodGFn
KTogZGVmX2hlbHBlcl9zaXplICs9IDEKICAgICAgICAgICAgIGlmIGhleF9jb21tb24ubmVlZF9z
bG90KHRhZyk6IGRlZl9oZWxwZXJfc2l6ZSArPSAxCiAgICAgICAgICAgICBpZiBoZXhfY29tbW9u
Lm5lZWRfUEModGFnKTogZGVmX2hlbHBlcl9zaXplICs9IDEKKyAgICAgICAgICAgIGlmIGhleF9j
b21tb24ubmVlZF9jb25kZXhlY19yZWcodGFnLCByZWdzKTogZGVmX2hlbHBlcl9zaXplICs9IDEK
ICAgICAgICAgICAgIGlmIGhleF9jb21tb24uaGVscGVyX25lZWRzX25leHRfUEModGFnKTogZGVm
X2hlbHBlcl9zaXplICs9IDEKICAgICAgICAgICAgIGYud3JpdGUoJ0RFRl9IRUxQRVJfJXMoJXMn
ICUgKGRlZl9oZWxwZXJfc2l6ZSwgdGFnKSkKIApAQCAtMTIxLDYgKzEyMywxNCBAQCBkZWYgZ2Vu
X2hlbHBlcl9wcm90b3R5cGUoZiwgdGFnLCB0YWdyZWdzLCB0YWdpbW1zKToKICAgICAgICAgICAg
ICAgICAgICAgZ2VuX2RlZl9oZWxwZXJfb3BuKGYsIHRhZywgcmVndHlwZSwgcmVnaWQsIHRvc3Ms
IG51bXJlZ3MsIGkpCiAgICAgICAgICAgICAgICAgICAgIGkgKz0gMQogCisgICAgICAgICMjIEZv
ciBjb25kaXRpb25hbCBpbnN0cnVjdGlvbnMsIHdlIHBhc3MgaW4gdGhlIGRlc3RpbmF0aW9uIHJl
Z2lzdGVyCisgICAgICAgIGlmICdBX0NPTkRFWEVDJyBpbiBoZXhfY29tbW9uLmF0dHJpYmRpY3Rb
dGFnXToKKyAgICAgICAgICAgIGZvciByZWd0eXBlLCByZWdpZCwgdG9zcywgbnVtcmVncyBpbiBy
ZWdzOgorICAgICAgICAgICAgICAgIGlmIChoZXhfY29tbW9uLmlzX3dyaXRlb25seShyZWdpZCkg
YW5kCisgICAgICAgICAgICAgICAgICAgIG5vdCBoZXhfY29tbW9uLmlzX2h2eF9yZWcocmVndHlw
ZSkpOgorICAgICAgICAgICAgICAgICAgICBnZW5fZGVmX2hlbHBlcl9vcG4oZiwgdGFnLCByZWd0
eXBlLCByZWdpZCwgdG9zcywgbnVtcmVncywgaSkKKyAgICAgICAgICAgICAgICAgICAgaSArPSAx
CisKICAgICAgICAgIyMgR2VuZXJhdGUgdGhlIHFlbXUgdHlwZSBmb3IgZWFjaCBpbnB1dCBvcGVy
YW5kIChyZWdzIGFuZCBpbW1lZGlhdGVzKQogICAgICAgICBmb3IgcmVndHlwZSxyZWdpZCx0b3Nz
LG51bXJlZ3MgaW4gcmVnczoKICAgICAgICAgICAgIGlmIChoZXhfY29tbW9uLmlzX3JlYWQocmVn
aWQpKToKZGlmZiAtLWdpdCBhL3RhcmdldC9oZXhhZ29uL2dlbl90Y2dfZnVuY3MucHkgYi90YXJn
ZXQvaGV4YWdvbi9nZW5fdGNnX2Z1bmNzLnB5CmluZGV4IDIyYmNiNTY5MTcuLjkzMzY1MjhlNTAg
MTAwNzU1Ci0tLSBhL3RhcmdldC9oZXhhZ29uL2dlbl90Y2dfZnVuY3MucHkKKysrIGIvdGFyZ2V0
L2hleGFnb24vZ2VuX3RjZ19mdW5jcy5weQpAQCAtMzAsMjMgKzMwLDMzIEBAIGRlZiBnZW5fZGVj
bF9lYV90Y2coZiwgdGFnKToKIAogZGVmIGdlbnB0cl9kZWNsX3BhaXJfd3JpdGFibGUoZiwgdGFn
LCByZWd0eXBlLCByZWdpZCwgcmVnbm8pOgogICAgIHJlZ049IiVzJXNOIiAlIChyZWd0eXBlLHJl
Z2lkKQotICAgIGYud3JpdGUoIiAgICBUQ0d2X2k2NCAlcyVzViA9IHRjZ190ZW1wX25ld19pNjQo
KTtcbiIgJSBcCi0gICAgICAgIChyZWd0eXBlLCByZWdpZCkpCi0gICAgaWYgKHJlZ3R5cGUgPT0g
IkMiKToKKyAgICBpZiAocmVndHlwZSA9PSAiUiIpOgorICAgICAgICBmLndyaXRlKCIgICAgY29u
c3QgaW50ICVzID0gaW5zbi0+cmVnbm9bJWRdO1xuIiAlIChyZWdOLCByZWdubykpCisgICAgZWxp
ZiAocmVndHlwZSA9PSAiQyIpOgogICAgICAgICBmLndyaXRlKCIgICAgY29uc3QgaW50ICVzID0g
aW5zbi0+cmVnbm9bJWRdICsgSEVYX1JFR19TQTA7XG4iICUgXAogICAgICAgICAgICAgKHJlZ04s
IHJlZ25vKSkKICAgICBlbHNlOgotICAgICAgICBmLndyaXRlKCIgICAgY29uc3QgaW50ICVzID0g
aW5zbi0+cmVnbm9bJWRdO1xuIiAlIChyZWdOLCByZWdubykpCisgICAgICAgIHByaW50KCJCYWQg
cmVnaXN0ZXIgcGFyc2U6ICIsIHJlZ3R5cGUsIHJlZ2lkKQorICAgIGYud3JpdGUoIiAgICBUQ0d2
X2k2NCAlcyVzViA9IGdldF9yZXN1bHRfZ3ByX3BhaXIoY3R4LCAlcyk7XG4iICUgXAorICAgICAg
ICAocmVndHlwZSwgcmVnaWQsIHJlZ04pKQogCiBkZWYgZ2VucHRyX2RlY2xfd3JpdGFibGUoZiwg
dGFnLCByZWd0eXBlLCByZWdpZCwgcmVnbm8pOgogICAgIHJlZ049IiVzJXNOIiAlIChyZWd0eXBl
LHJlZ2lkKQotICAgIGYud3JpdGUoIiAgICBUQ0d2ICVzJXNWID0gdGNnX3RlbXBfbmV3KCk7XG4i
ICUgXAotICAgICAgICAocmVndHlwZSwgcmVnaWQpKQotICAgIGlmIChyZWd0eXBlID09ICJDIik6
CisgICAgaWYgKHJlZ3R5cGUgPT0gIlIiKToKKyAgICAgICAgZi53cml0ZSgiICAgIGNvbnN0IGlu
dCAlcyA9IGluc24tPnJlZ25vWyVkXTtcbiIgJSAocmVnTiwgcmVnbm8pKQorICAgICAgICBmLndy
aXRlKCIgICAgVENHdiAlcyVzViA9IGdldF9yZXN1bHRfZ3ByKGN0eCwgJXMpO1xuIiAlIFwKKyAg
ICAgICAgICAgIChyZWd0eXBlLCByZWdpZCwgcmVnTikpCisgICAgZWxpZiAocmVndHlwZSA9PSAi
QyIpOgogICAgICAgICBmLndyaXRlKCIgICAgY29uc3QgaW50ICVzID0gaW5zbi0+cmVnbm9bJWRd
ICsgSEVYX1JFR19TQTA7XG4iICUgXAogICAgICAgICAgICAgKHJlZ04sIHJlZ25vKSkKLSAgICBl
bHNlOgorICAgICAgICBmLndyaXRlKCIgICAgVENHdiAlcyVzViA9IGdldF9yZXN1bHRfZ3ByKGN0
eCwgJXMpO1xuIiAlIFwKKyAgICAgICAgICAgIChyZWd0eXBlLCByZWdpZCwgcmVnTikpCisgICAg
ZWxpZiAocmVndHlwZSA9PSAiUCIpOgogICAgICAgICBmLndyaXRlKCIgICAgY29uc3QgaW50ICVz
ID0gaW5zbi0+cmVnbm9bJWRdO1xuIiAlIChyZWdOLCByZWdubykpCisgICAgICAgIGYud3JpdGUo
IiAgICBUQ0d2ICVzJXNWID0gdGNnX3RlbXBfbmV3KCk7XG4iICUgXAorICAgICAgICAgICAgKHJl
Z3R5cGUsIHJlZ2lkKSkKKyAgICBlbHNlOgorICAgICAgICBwcmludCgiQmFkIHJlZ2lzdGVyIHBh
cnNlOiAiLCByZWd0eXBlLCByZWdpZCkKIAogZGVmIGdlbnB0cl9kZWNsKGYsIHRhZywgcmVndHlw
ZSwgcmVnaWQsIHJlZ25vKToKICAgICByZWdOPSIlcyVzTiIgJSAocmVndHlwZSxyZWdpZCkKQEAg
LTI0OSw4ICsyNTksMTIgQEAgZGVmIGdlbnB0cl9zcmNfcmVhZChmLCB0YWcsIHJlZ3R5cGUsIHJl
Z2lkKToKICAgICAgICAgICAgIGYud3JpdGUoIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIGhleF9ncHJbJXMlc04gKyAxXSk7XG4iICUgXAogICAgICAgICAgICAgICAgIChyZWd0eXBl
LCByZWdpZCkpCiAgICAgICAgIGVsaWYgKHJlZ2lkIGluIHsieCIsICJ5In0pOgotICAgICAgICAg
ICAgZi53cml0ZSgiICAgIHRjZ19nZW5fbW92X3RsKCVzJXNWLCBoZXhfZ3ByWyVzJXNOXSk7XG4i
ICUgXAotICAgICAgICAgICAgICAgIChyZWd0eXBlLHJlZ2lkLHJlZ3R5cGUscmVnaWQpKQorICAg
ICAgICAgICAgIyMgRm9yIHJlYWQvd3JpdGUgcmVnaXN0ZXJzLCB3ZSBuZWVkIHRvIGdldCB0aGUg
b3JpZ2luYWwgdmFsdWUgaW50bworICAgICAgICAgICAgIyMgdGhlIHJlc3VsdCBUQ0d2LiAgRm9y
IGNvbmRpdGlvbmFsIGluc3RydWN0aW9ucywgdGhpcyBpcyBkb25lIGluCisgICAgICAgICAgICAj
IyBnZW5fc3RhcnRfcGFja2V0LiAgRm9yIHVuY29uZGl0aW9uYWwgaW5zdHJ1Y3Rpb25zLCB3ZSBk
byBpdCBoZXJlLgorICAgICAgICAgICAgaWYgKCdBX0NPTkRFWEVDJyBub3QgaW4gaGV4X2NvbW1v
bi5hdHRyaWJkaWN0W3RhZ10pOgorICAgICAgICAgICAgICAgIGYud3JpdGUoIiAgICB0Y2dfZ2Vu
X21vdl90bCglcyVzViwgaGV4X2dwclslcyVzTl0pO1xuIiAlIFwKKyAgICAgICAgICAgICAgICAg
ICAgKHJlZ3R5cGUsIHJlZ2lkLCByZWd0eXBlLCByZWdpZCkpCiAgICAgICAgIGVsaWYgKHJlZ2lk
IG5vdCBpbiB7InMiLCAidCIsICJ1IiwgInYifSk6CiAgICAgICAgICAgICBwcmludCgiQmFkIHJl
Z2lzdGVyIHBhcnNlOiAiLCByZWd0eXBlLCByZWdpZCkKICAgICBlbGlmIChyZWd0eXBlID09ICJQ
Iik6CkBAIC0zNjAsMjUgKzM3NCwxNiBAQCBkZWYgZ2VuX2hlbHBlcl9jYWxsX2ltbShmLGltbWxl
dHQpOgogICAgIGYud3JpdGUoIiwgdGNndl8lcyIgJSBoZXhfY29tbW9uLmltbV9uYW1lKGltbWxl
dHQpKQogCiBkZWYgZ2VucHRyX2RzdF93cml0ZV9wYWlyKGYsIHRhZywgcmVndHlwZSwgcmVnaWQp
OgotICAgIGlmICgnQV9DT05ERVhFQycgaW4gaGV4X2NvbW1vbi5hdHRyaWJkaWN0W3RhZ10pOgot
ICAgICAgICBmLndyaXRlKCIgICAgZ2VuX2xvZ19wcmVkaWNhdGVkX3JlZ193cml0ZV9wYWlyKCVz
JXNOLCAlcyVzViwgaW5zbi0+c2xvdCk7XG4iICUgXAotICAgICAgICAgICAgKHJlZ3R5cGUsIHJl
Z2lkLCByZWd0eXBlLCByZWdpZCkpCi0gICAgZWxzZToKLSAgICAgICAgZi53cml0ZSgiICAgIGdl
bl9sb2dfcmVnX3dyaXRlX3BhaXIoJXMlc04sICVzJXNWKTtcbiIgJSBcCi0gICAgICAgICAgICAo
cmVndHlwZSwgcmVnaWQsIHJlZ3R5cGUsIHJlZ2lkKSkKKyAgICBmLndyaXRlKCIgICAgZ2VuX2xv
Z19yZWdfd3JpdGVfcGFpciglcyVzTiwgJXMlc1YpO1xuIiAlIFwKKyAgICAgICAgKHJlZ3R5cGUs
IHJlZ2lkLCByZWd0eXBlLCByZWdpZCkpCiAKIGRlZiBnZW5wdHJfZHN0X3dyaXRlKGYsIHRhZywg
cmVndHlwZSwgcmVnaWQpOgogICAgIGlmIChyZWd0eXBlID09ICJSIik6CiAgICAgICAgIGlmIChy
ZWdpZCBpbiB7ImRkIiwgInh4IiwgInl5In0pOgogICAgICAgICAgICAgZ2VucHRyX2RzdF93cml0
ZV9wYWlyKGYsIHRhZywgcmVndHlwZSwgcmVnaWQpCiAgICAgICAgIGVsaWYgKHJlZ2lkIGluIHsi
ZCIsICJlIiwgIngiLCAieSJ9KToKLSAgICAgICAgICAgIGlmICgnQV9DT05ERVhFQycgaW4gaGV4
X2NvbW1vbi5hdHRyaWJkaWN0W3RhZ10pOgotICAgICAgICAgICAgICAgIGYud3JpdGUoIiAgICBn
ZW5fbG9nX3ByZWRpY2F0ZWRfcmVnX3dyaXRlKCVzJXNOLCAlcyVzVixcbiIgJSBcCi0gICAgICAg
ICAgICAgICAgICAgIChyZWd0eXBlLCByZWdpZCwgcmVndHlwZSwgcmVnaWQpKQotICAgICAgICAg
ICAgICAgIGYud3JpdGUoIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc24tPnNs
b3QpO1xuIikKLSAgICAgICAgICAgIGVsc2U6Ci0gICAgICAgICAgICAgICAgZi53cml0ZSgiICAg
IGdlbl9sb2dfcmVnX3dyaXRlKCVzJXNOLCAlcyVzVik7XG4iICUgXAotICAgICAgICAgICAgICAg
ICAgICAocmVndHlwZSwgcmVnaWQsIHJlZ3R5cGUsIHJlZ2lkKSkKKyAgICAgICAgICAgIGYud3Jp
dGUoIiAgICBnZW5fbG9nX3JlZ193cml0ZSglcyVzTiwgJXMlc1YpO1xuIiAlIFwKKyAgICAgICAg
ICAgICAgICAocmVndHlwZSwgcmVnaWQsIHJlZ3R5cGUsIHJlZ2lkKSkKICAgICAgICAgZWxzZToK
ICAgICAgICAgICAgIHByaW50KCJCYWQgcmVnaXN0ZXIgcGFyc2U6ICIsIHJlZ3R5cGUsIHJlZ2lk
KQogICAgIGVsaWYgKHJlZ3R5cGUgPT0gIlAiKToKQEAgLTQ2MiwxNCArNDY3LDE1IEBAIGRlZiBn
ZW5wdHJfZHN0X3dyaXRlX29wbihmLHJlZ3R5cGUsIHJlZ2lkLCB0YWcpOgogIyMgICAgIEZvciBB
Ml9hZGQ6IFJkMzI9YWRkKFJzMzIsUnQzMiksIHsgUmRWPVJzVitSdFY7fQogIyMgICAgIFdlIHBy
b2R1Y2U6CiAjIyAgICBzdGF0aWMgdm9pZCBnZW5lcmF0ZV9BMl9hZGQoRGlzYXNDb250ZXh0ICpj
dHgpCi0jIyAgICAgICB7Ci0jIyAgICAgICAgICAgVENHdiBSZFYgPSB0Y2dfdGVtcF9uZXcoKTsK
LSMjICAgICAgICAgICBjb25zdCBpbnQgUmROID0gaW5zbi0+cmVnbm9bMF07Ci0jIyAgICAgICAg
ICAgVENHdiBSc1YgPSBoZXhfZ3ByW2luc24tPnJlZ25vWzFdXTsKLSMjICAgICAgICAgICBUQ0d2
IFJ0ViA9IGhleF9ncHJbaW5zbi0+cmVnbm9bMl1dOwotIyMgICAgICAgICAgIDxHRU4+Ci0jIyAg
ICAgICAgICAgZ2VuX2xvZ19yZWdfd3JpdGUoUmROLCBSZFYpOwotIyMgICAgICAgfQorIyMgICAg
eworIyMgICAgICAgIEluc24gKmluc24gX19hdHRyaWJ1dGVfXygodW51c2VkKSkgPSBjdHgtPmlu
c247CisjIyAgICAgICAgY29uc3QgaW50IFJkTiA9IGluc24tPnJlZ25vWzBdOworIyMgICAgICAg
IFRDR3YgUmRWID0gZ2V0X3Jlc3VsdF9ncHIoY3R4LCBSZE4pOworIyMgICAgICAgIFRDR3YgUnNW
ID0gaGV4X2dwcltpbnNuLT5yZWdub1sxXV07CisjIyAgICAgICAgVENHdiBSdFYgPSBoZXhfZ3By
W2luc24tPnJlZ25vWzJdXTsKKyMjICAgICAgICA8R0VOPgorIyMgICAgICAgIGdlbl9sb2dfcmVn
X3dyaXRlKFJkTiwgUmRWKTsKKyMjICAgIH0KICMjCiAjIyAgICAgICB3aGVyZSA8R0VOPiBkZXBl
bmRzIG9uIGhleF9jb21tb24uc2tpcF9xZW11X2hlbHBlcih0YWcpCiAjIyAgICAgICBpZiBoZXhf
Y29tbW9uLnNraXBfcWVtdV9oZWxwZXIodGFnKSBpcyBUcnVlCkBAIC01NTMsNiArNTU5LDE0IEBA
IGRlZiBnZW5fdGNnX2Z1bmMoZiwgdGFnLCByZWdzLCBpbW1zKToKICAgICAgICAgaWYgKGkgPiAw
KTogZi53cml0ZSgiLCAiKQogICAgICAgICBmLndyaXRlKCJjcHVfZW52IikKICAgICAgICAgaT0x
CisgICAgICAgICMjIEZvciBjb25kaXRpb25hbCBpbnN0cnVjdGlvbnMsIHdlIHBhc3MgaW4gdGhl
IGRlc3RpbmF0aW9uIHJlZ2lzdGVyCisgICAgICAgIGlmICdBX0NPTkRFWEVDJyBpbiBoZXhfY29t
bW9uLmF0dHJpYmRpY3RbdGFnXToKKyAgICAgICAgICAgIGZvciByZWd0eXBlLCByZWdpZCwgdG9z
cywgbnVtcmVncyBpbiByZWdzOgorICAgICAgICAgICAgICAgIGlmIChoZXhfY29tbW9uLmlzX3dy
aXRlb25seShyZWdpZCkgYW5kCisgICAgICAgICAgICAgICAgICAgIG5vdCBoZXhfY29tbW9uLmlz
X2h2eF9yZWcocmVndHlwZSkpOgorICAgICAgICAgICAgICAgICAgICBnZW5faGVscGVyX2NhbGxf
b3BuKGYsIHRhZywgcmVndHlwZSwgcmVnaWQsIHRvc3MsIFwKKyAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBudW1yZWdzLCBpKQorICAgICAgICAgICAgICAgICAgICBpICs9
IDEKICAgICAgICAgZm9yIHJlZ3R5cGUscmVnaWQsdG9zcyxudW1yZWdzIGluIHJlZ3M6CiAgICAg
ICAgICAgICBpZiAoaGV4X2NvbW1vbi5pc193cml0dGVuKHJlZ2lkKSk6CiAgICAgICAgICAgICAg
ICAgaWYgKG5vdCBoZXhfY29tbW9uLmlzX2h2eF9yZWcocmVndHlwZSkpOgpkaWZmIC0tZ2l0IGEv
dGFyZ2V0L2hleGFnb24vaGV4X2NvbW1vbi5weSBiL3RhcmdldC9oZXhhZ29uL2hleF9jb21tb24u
cHkKaW5kZXggNzZkYTM2MmMxMS4uMDIwMGE2NmNiNiAxMDA3NTUKLS0tIGEvdGFyZ2V0L2hleGFn
b24vaGV4X2NvbW1vbi5weQorKysgYi90YXJnZXQvaGV4YWdvbi9oZXhfY29tbW9uLnB5CkBAIC0x
LDcgKzEsNyBAQAogIyEvdXNyL2Jpbi9lbnYgcHl0aG9uMwogCiAjIwotIyMgIENvcHlyaWdodChj
KSAyMDE5LTIwMjIgUXVhbGNvbW0gSW5ub3ZhdGlvbiBDZW50ZXIsIEluYy4gQWxsIFJpZ2h0cyBS
ZXNlcnZlZC4KKyMjICBDb3B5cmlnaHQoYykgMjAxOS0yMDIzIFF1YWxjb21tIElubm92YXRpb24g
Q2VudGVyLCBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAjIwogIyMgIFRoaXMgcHJvZ3JhbSBp
cyBmcmVlIHNvZnR3YXJlOyB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5CiAj
IyAgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBh
cyBwdWJsaXNoZWQgYnkKQEAgLTIzNyw2ICsyMzcsMTMgQEAgZGVmIGhlbHBlcl9uZWVkc19uZXh0
X1BDKHRhZyk6CiBkZWYgbmVlZF9wa3RfaGFzX211bHRpX2NvZih0YWcpOgogICAgIHJldHVybiAn
QV9DT0YnIGluIGF0dHJpYmRpY3RbdGFnXQogCitkZWYgbmVlZF9jb25kZXhlY19yZWcodGFnLCBy
ZWdzKToKKyAgICBpZiAnQV9DT05ERVhFQycgaW4gYXR0cmliZGljdFt0YWddOgorICAgICAgICBm
b3IgcmVndHlwZSwgcmVnaWQsIHRvc3MsIG51bXJlZ3MgaW4gcmVnczoKKyAgICAgICAgICAgIGlm
IGlzX3dyaXRlb25seShyZWdpZCkgYW5kIG5vdCBpc19odnhfcmVnKHJlZ3R5cGUpOgorICAgICAg
ICAgICAgICAgIHJldHVybiBUcnVlCisgICAgcmV0dXJuIEZhbHNlCisKIGRlZiBza2lwX3FlbXVf
aGVscGVyKHRhZyk6CiAgICAgcmV0dXJuIHRhZyBpbiBvdmVycmlkZXMua2V5cygpCiAKLS0gCjIu
MjUuMQoK

