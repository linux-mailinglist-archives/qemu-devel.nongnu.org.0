Return-Path: <qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org>
X-Original-To: lists+qemu-devel@lfdr.de
Delivered-To: lists+qemu-devel@lfdr.de
Received: from lists.gnu.org (lists.gnu.org [209.51.188.17])
	by mail.lfdr.de (Postfix) with ESMTPS id E786F444A59
	for <lists+qemu-devel@lfdr.de>; Wed,  3 Nov 2021 22:39:36 +0100 (CET)
Received: from localhost ([::1]:45094 helo=lists1p.gnu.org)
	by lists.gnu.org with esmtp (Exim 4.90_1)
	(envelope-from <qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org>)
	id 1miNyq-0002zR-0O
	for lists+qemu-devel@lfdr.de; Wed, 03 Nov 2021 17:39:36 -0400
Received: from eggs.gnu.org ([2001:470:142:3::10]:43488)
 by lists.gnu.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256)
 (Exim 4.90_1) (envelope-from <tsimpson@qualcomm.com>)
 id 1miNdf-0002vt-Ic
 for qemu-devel@nongnu.org; Wed, 03 Nov 2021 17:17:43 -0400
Received: from alexa-out-sd-01.qualcomm.com ([199.106.114.38]:52189)
 by eggs.gnu.org with esmtps (TLS1.2:RSA_AES_256_CBC_SHA1:256)
 (Exim 4.90_1) (envelope-from <tsimpson@qualcomm.com>)
 id 1miNdb-0007Cz-HA
 for qemu-devel@nongnu.org; Wed, 03 Nov 2021 17:17:43 -0400
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=quicinc.com; i=@quicinc.com; q=dns/txt; s=qcdkim;
 t=1635974259; x=1667510259;
 h=from:to:cc:subject:date:message-id:in-reply-to:
 references:mime-version:content-transfer-encoding;
 bh=ryjGjWvsh7ZpecZrSbA2dWQPLlRvhDv2pFTXfk+YiZY=;
 b=wzxycyEYEC9m+4EX7ujUJ73vDW1GxCMDO4Ehwac/3Wu3xSeaHiM8AqTH
 R6mzHVpLMvUr/FFf9oh7Rwy6B1GFFcSVoTsJ63ih9q1CxAgpGe97tr9yu
 ZJcEtUPRI/KB7fV1lW0iuU79MkIsgbXcf+sRmGl2TjvNiGH7VzHS73huy 4=;
Received: from unknown (HELO ironmsg01-sd.qualcomm.com) ([10.53.140.141])
 by alexa-out-sd-01.qualcomm.com with ESMTP; 03 Nov 2021 14:17:30 -0700
X-QCInternal: smtphost
Received: from vu-tsimpson-aus.qualcomm.com (HELO
 vu-tsimpson1-aus.qualcomm.com) ([10.222.150.1])
 by ironmsg01-sd.qualcomm.com with ESMTP; 03 Nov 2021 14:17:29 -0700
Received: by vu-tsimpson1-aus.qualcomm.com (Postfix, from userid 47164)
 id A79172537; Wed,  3 Nov 2021 16:17:28 -0500 (CDT)
From: Taylor Simpson <tsimpson@quicinc.com>
To: qemu-devel@nongnu.org
Subject: [PULL v2 08/30] Hexagon HVX (target/hexagon) semantics generator -
 part 2
Date: Wed,  3 Nov 2021 16:17:05 -0500
Message-Id: <1635974247-1820-9-git-send-email-tsimpson@quicinc.com>
X-Mailer: git-send-email 2.7.4
In-Reply-To: <1635974247-1820-1-git-send-email-tsimpson@quicinc.com>
References: <1635974247-1820-1-git-send-email-tsimpson@quicinc.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Received-SPF: pass client-ip=199.106.114.38;
 envelope-from=tsimpson@qualcomm.com; helo=alexa-out-sd-01.qualcomm.com
X-Spam_score_int: -40
X-Spam_score: -4.1
X-Spam_bar: ----
X-Spam_report: (-4.1 / 5.0 requ) BAYES_00=-1.9, DKIM_SIGNED=0.1,
 DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1, HEADER_FROM_DIFFERENT_DOMAINS=0.249,
 RCVD_IN_DNSWL_MED=-2.3, SPF_HELO_NONE=0.001,
 SPF_PASS=-0.001 autolearn=ham autolearn_force=no
X-Spam_action: no action
X-BeenThere: qemu-devel@nongnu.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: <qemu-devel.nongnu.org>
List-Unsubscribe: <https://lists.nongnu.org/mailman/options/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=unsubscribe>
List-Archive: <https://lists.nongnu.org/archive/html/qemu-devel>
List-Post: <mailto:qemu-devel@nongnu.org>
List-Help: <mailto:qemu-devel-request@nongnu.org?subject=help>
List-Subscribe: <https://lists.nongnu.org/mailman/listinfo/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=subscribe>
Cc: peter.maydell@linaro.org, tsimpson@quicinc.com,
 richard.henderson@linaro.org, f4bug@amsat.org
Errors-To: qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org
Sender: "Qemu-devel" <qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org>

QWNrZWQtYnk6IFJpY2hhcmQgSGVuZGVyc29uIDxyaWNoYXJkLmhlbmRlcnNvbkBsaW5hcm8ub3Jn
PgpTaWduZWQtb2ZmLWJ5OiBUYXlsb3IgU2ltcHNvbiA8dHNpbXBzb25AcXVpY2luYy5jb20+Ci0t
LQogdGFyZ2V0L2hleGFnb24vZ2VuX2hlbHBlcl9mdW5jcy5weSAgfCAxMTIgKysrKysrKysrKysr
KystLQogdGFyZ2V0L2hleGFnb24vZ2VuX2hlbHBlcl9wcm90b3MucHkgfCAgMTYgKystCiB0YXJn
ZXQvaGV4YWdvbi9nZW5fdGNnX2Z1bmNzLnB5ICAgICB8IDI1NCArKysrKysrKysrKysrKysrKysr
KysrKysrKysrKysrKysrLS0KIDMgZmlsZXMgY2hhbmdlZCwgMzYwIGluc2VydGlvbnMoKyksIDIy
IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL3RhcmdldC9oZXhhZ29uL2dlbl9oZWxwZXJfZnVu
Y3MucHkgYi90YXJnZXQvaGV4YWdvbi9nZW5faGVscGVyX2Z1bmNzLnB5CmluZGV4IDJiMWM1ZDgu
LmFjNWNlMTAgMTAwNzU1Ci0tLSBhL3RhcmdldC9oZXhhZ29uL2dlbl9oZWxwZXJfZnVuY3MucHkK
KysrIGIvdGFyZ2V0L2hleGFnb24vZ2VuX2hlbHBlcl9mdW5jcy5weQpAQCAtNDgsMTIgKzQ4LDI2
IEBAIGRlZiBnZW5faGVscGVyX2FyZ19wYWlyKGYscmVndHlwZSxyZWdpZCxyZWdubyk6CiAgICAg
aWYgcmVnbm8gPj0gMCA6IGYud3JpdGUoIiwgIikKICAgICBmLndyaXRlKCJpbnQ2NF90ICVzJXNW
IiAlIChyZWd0eXBlLHJlZ2lkKSkKIAorZGVmIGdlbl9oZWxwZXJfYXJnX2V4dChmLHJlZ3R5cGUs
cmVnaWQscmVnbm8pOgorICAgIGlmIHJlZ25vID4gMCA6IGYud3JpdGUoIiwgIikKKyAgICBmLndy
aXRlKCJ2b2lkIColcyVzVl92b2lkIiAlIChyZWd0eXBlLHJlZ2lkKSkKKworZGVmIGdlbl9oZWxw
ZXJfYXJnX2V4dF9wYWlyKGYscmVndHlwZSxyZWdpZCxyZWdubyk6CisgICAgaWYgcmVnbm8gPiAw
IDogZi53cml0ZSgiLCAiKQorICAgIGYud3JpdGUoInZvaWQgKiVzJXNWX3ZvaWQiICUgKHJlZ3R5
cGUscmVnaWQpKQorCiBkZWYgZ2VuX2hlbHBlcl9hcmdfb3BuKGYscmVndHlwZSxyZWdpZCxpLHRh
Zyk6CiAgICAgaWYgKGhleF9jb21tb24uaXNfcGFpcihyZWdpZCkpOgotICAgICAgICBnZW5faGVs
cGVyX2FyZ19wYWlyKGYscmVndHlwZSxyZWdpZCxpKQorICAgICAgICBpZiAoaGV4X2NvbW1vbi5p
c19odnhfcmVnKHJlZ3R5cGUpKToKKyAgICAgICAgICAgIGdlbl9oZWxwZXJfYXJnX2V4dF9wYWly
KGYscmVndHlwZSxyZWdpZCxpKQorICAgICAgICBlbHNlOgorICAgICAgICAgICAgZ2VuX2hlbHBl
cl9hcmdfcGFpcihmLHJlZ3R5cGUscmVnaWQsaSkKICAgICBlbGlmIChoZXhfY29tbW9uLmlzX3Np
bmdsZShyZWdpZCkpOgogICAgICAgICBpZiBoZXhfY29tbW9uLmlzX29sZF92YWwocmVndHlwZSwg
cmVnaWQsIHRhZyk6Ci0gICAgICAgICAgICBnZW5faGVscGVyX2FyZyhmLHJlZ3R5cGUscmVnaWQs
aSkKKyAgICAgICAgICAgIGlmIChoZXhfY29tbW9uLmlzX2h2eF9yZWcocmVndHlwZSkpOgorICAg
ICAgICAgICAgICAgIGdlbl9oZWxwZXJfYXJnX2V4dChmLHJlZ3R5cGUscmVnaWQsaSkKKyAgICAg
ICAgICAgIGVsc2U6CisgICAgICAgICAgICAgICAgZ2VuX2hlbHBlcl9hcmcoZixyZWd0eXBlLHJl
Z2lkLGkpCiAgICAgICAgIGVsaWYgaGV4X2NvbW1vbi5pc19uZXdfdmFsKHJlZ3R5cGUsIHJlZ2lk
LCB0YWcpOgogICAgICAgICAgICAgZ2VuX2hlbHBlcl9hcmdfbmV3KGYscmVndHlwZSxyZWdpZCxp
KQogICAgICAgICBlbHNlOgpAQCAtNzIsMjUgKzg2LDY3IEBAIGRlZiBnZW5faGVscGVyX2Rlc3Rf
ZGVjbF9wYWlyKGYscmVndHlwZSxyZWdpZCxyZWdubyxzdWJmaWVsZD0iIik6CiAgICAgZi53cml0
ZSgiICAgIGludDY0X3QgJXMlc1YlcyA9IDA7XG4iICUgXAogICAgICAgICAocmVndHlwZSxyZWdp
ZCxzdWJmaWVsZCkpCiAKK2RlZiBnZW5faGVscGVyX2Rlc3RfZGVjbF9leHQoZixyZWd0eXBlLHJl
Z2lkKToKKyAgICBpZiAocmVndHlwZSA9PSAiUSIpOgorICAgICAgICBmLndyaXRlKCIgICAgLyog
JXMlc1YgaXMgKihNTVFSZWcgKikoJXMlc1Zfdm9pZCkgKi9cbiIgJSBcCisgICAgICAgICAgICAo
cmVndHlwZSxyZWdpZCxyZWd0eXBlLHJlZ2lkKSkKKyAgICBlbHNlOgorICAgICAgICBmLndyaXRl
KCIgICAgLyogJXMlc1YgaXMgKihNTVZlY3RvciAqKSglcyVzVl92b2lkKSAqL1xuIiAlIFwKKyAg
ICAgICAgICAgIChyZWd0eXBlLHJlZ2lkLHJlZ3R5cGUscmVnaWQpKQorCitkZWYgZ2VuX2hlbHBl
cl9kZXN0X2RlY2xfZXh0X3BhaXIoZixyZWd0eXBlLHJlZ2lkLHJlZ25vKToKKyAgICBmLndyaXRl
KCIgICAgLyogJXMlc1YgaXMgKihNTVZlY3RvclBhaXIgKikpJXMlc1Zfdm9pZCkgKi9cbiIgJSBc
CisgICAgICAgIChyZWd0eXBlLHJlZ2lkLHJlZ3R5cGUsIHJlZ2lkKSkKKwogZGVmIGdlbl9oZWxw
ZXJfZGVzdF9kZWNsX29wbihmLHJlZ3R5cGUscmVnaWQsaSk6CiAgICAgaWYgKGhleF9jb21tb24u
aXNfcGFpcihyZWdpZCkpOgotICAgICAgICBnZW5faGVscGVyX2Rlc3RfZGVjbF9wYWlyKGYscmVn
dHlwZSxyZWdpZCxpKQorICAgICAgICBpZiAoaGV4X2NvbW1vbi5pc19odnhfcmVnKHJlZ3R5cGUp
KToKKyAgICAgICAgICAgIGdlbl9oZWxwZXJfZGVzdF9kZWNsX2V4dF9wYWlyKGYscmVndHlwZSxy
ZWdpZCwgaSkKKyAgICAgICAgZWxzZToKKyAgICAgICAgICAgIGdlbl9oZWxwZXJfZGVzdF9kZWNs
X3BhaXIoZixyZWd0eXBlLHJlZ2lkLGkpCiAgICAgZWxpZiAoaGV4X2NvbW1vbi5pc19zaW5nbGUo
cmVnaWQpKToKLSAgICAgICAgZ2VuX2hlbHBlcl9kZXN0X2RlY2woZixyZWd0eXBlLHJlZ2lkLGkp
CisgICAgICAgIGlmIChoZXhfY29tbW9uLmlzX2h2eF9yZWcocmVndHlwZSkpOgorICAgICAgICAg
ICAgZ2VuX2hlbHBlcl9kZXN0X2RlY2xfZXh0KGYscmVndHlwZSxyZWdpZCkKKyAgICAgICAgZWxz
ZToKKyAgICAgICAgICAgIGdlbl9oZWxwZXJfZGVzdF9kZWNsKGYscmVndHlwZSxyZWdpZCxpKQog
ICAgIGVsc2U6CiAgICAgICAgIHByaW50KCJCYWQgcmVnaXN0ZXIgcGFyc2U6ICIscmVndHlwZSxy
ZWdpZCx0b3NzLG51bXJlZ3MpCiAKK2RlZiBnZW5faGVscGVyX3NyY192YXJfZXh0KGYscmVndHlw
ZSxyZWdpZCk6CisgICAgaWYgKHJlZ3R5cGUgPT0gIlEiKToKKyAgICAgICBmLndyaXRlKCIgICAg
LyogJXMlc1YgaXMgKihNTVFSZWcgKikoJXMlc1Zfdm9pZCkgKi9cbiIgJSBcCisgICAgICAgICAg
IChyZWd0eXBlLHJlZ2lkLHJlZ3R5cGUscmVnaWQpKQorICAgIGVsc2U6CisgICAgICAgZi53cml0
ZSgiICAgIC8qICVzJXNWIGlzICooTU1WZWN0b3IgKikoJXMlc1Zfdm9pZCkgKi9cbiIgJSBcCisg
ICAgICAgICAgIChyZWd0eXBlLHJlZ2lkLHJlZ3R5cGUscmVnaWQpKQorCitkZWYgZ2VuX2hlbHBl
cl9zcmNfdmFyX2V4dF9wYWlyKGYscmVndHlwZSxyZWdpZCxyZWdubyk6CisgICAgZi53cml0ZSgi
ICAgIC8qICVzJXNWJXMgaXMgKihNTVZlY3RvclBhaXIgKikoJXMlc1Ylc192b2lkKSAqL1xuIiAl
IFwKKyAgICAgICAgKHJlZ3R5cGUscmVnaWQscmVnbm8scmVndHlwZSxyZWdpZCxyZWdubykpCisK
IGRlZiBnZW5faGVscGVyX3JldHVybihmLHJlZ3R5cGUscmVnaWQscmVnbm8pOgogICAgIGYud3Jp
dGUoIiAgICByZXR1cm4gJXMlc1Y7XG4iICUgKHJlZ3R5cGUscmVnaWQpKQogCiBkZWYgZ2VuX2hl
bHBlcl9yZXR1cm5fcGFpcihmLHJlZ3R5cGUscmVnaWQscmVnbm8pOgogICAgIGYud3JpdGUoIiAg
ICByZXR1cm4gJXMlc1Y7XG4iICUgKHJlZ3R5cGUscmVnaWQpKQogCitkZWYgZ2VuX2hlbHBlcl9k
c3Rfd3JpdGVfZXh0KGYscmVndHlwZSxyZWdpZCk6CisgICAgcmV0dXJuCisKK2RlZiBnZW5faGVs
cGVyX2RzdF93cml0ZV9leHRfcGFpcihmLHJlZ3R5cGUscmVnaWQpOgorICAgIHJldHVybgorCiBk
ZWYgZ2VuX2hlbHBlcl9yZXR1cm5fb3BuKGYsIHJlZ3R5cGUsIHJlZ2lkLCBpKToKICAgICBpZiAo
aGV4X2NvbW1vbi5pc19wYWlyKHJlZ2lkKSk6Ci0gICAgICAgIGdlbl9oZWxwZXJfcmV0dXJuX3Bh
aXIoZixyZWd0eXBlLHJlZ2lkLGkpCisgICAgICAgIGlmIChoZXhfY29tbW9uLmlzX2h2eF9yZWco
cmVndHlwZSkpOgorICAgICAgICAgICAgZ2VuX2hlbHBlcl9kc3Rfd3JpdGVfZXh0X3BhaXIoZixy
ZWd0eXBlLHJlZ2lkKQorICAgICAgICBlbHNlOgorICAgICAgICAgICAgZ2VuX2hlbHBlcl9yZXR1
cm5fcGFpcihmLHJlZ3R5cGUscmVnaWQsaSkKICAgICBlbGlmIChoZXhfY29tbW9uLmlzX3Npbmds
ZShyZWdpZCkpOgotICAgICAgICBnZW5faGVscGVyX3JldHVybihmLHJlZ3R5cGUscmVnaWQsaSkK
KyAgICAgICAgaWYgKGhleF9jb21tb24uaXNfaHZ4X3JlZyhyZWd0eXBlKSk6CisgICAgICAgICAg
ICBnZW5faGVscGVyX2RzdF93cml0ZV9leHQoZixyZWd0eXBlLHJlZ2lkKQorICAgICAgICBlbHNl
OgorICAgICAgICAgICAgZ2VuX2hlbHBlcl9yZXR1cm4oZixyZWd0eXBlLHJlZ2lkLGkpCiAgICAg
ZWxzZToKICAgICAgICAgcHJpbnQoIkJhZCByZWdpc3RlciBwYXJzZTogIixyZWd0eXBlLHJlZ2lk
LHRvc3MsbnVtcmVncykKIApAQCAtMTI5LDE0ICsxODUsMjAgQEAgZGVmIGdlbl9oZWxwZXJfZnVu
Y3Rpb24oZiwgdGFnLCB0YWdyZWdzLCB0YWdpbW1zKToKICAgICAgICAgICAgICAgICAlICh0YWcs
IHRhZykpCiAgICAgZWxzZToKICAgICAgICAgIyMgVGhlIHJldHVybiB0eXBlIG9mIHRoZSBmdW5j
dGlvbiBpcyB0aGUgdHlwZSBvZiB0aGUgZGVzdGluYXRpb24KLSAgICAgICAgIyMgcmVnaXN0ZXIK
KyAgICAgICAgIyMgcmVnaXN0ZXIgKGlmIHNjYWxhcikKICAgICAgICAgaT0wCiAgICAgICAgIGZv
ciByZWd0eXBlLHJlZ2lkLHRvc3MsbnVtcmVncyBpbiByZWdzOgogICAgICAgICAgICAgaWYgKGhl
eF9jb21tb24uaXNfd3JpdHRlbihyZWdpZCkpOgogICAgICAgICAgICAgICAgIGlmIChoZXhfY29t
bW9uLmlzX3BhaXIocmVnaWQpKToKLSAgICAgICAgICAgICAgICAgICAgZ2VuX2hlbHBlcl9yZXR1
cm5fdHlwZV9wYWlyKGYscmVndHlwZSxyZWdpZCxpKQorICAgICAgICAgICAgICAgICAgICBpZiAo
aGV4X2NvbW1vbi5pc19odnhfcmVnKHJlZ3R5cGUpKToKKyAgICAgICAgICAgICAgICAgICAgICAg
IGNvbnRpbnVlCisgICAgICAgICAgICAgICAgICAgIGVsc2U6CisgICAgICAgICAgICAgICAgICAg
ICAgICBnZW5faGVscGVyX3JldHVybl90eXBlX3BhaXIoZixyZWd0eXBlLHJlZ2lkLGkpCiAgICAg
ICAgICAgICAgICAgZWxpZiAoaGV4X2NvbW1vbi5pc19zaW5nbGUocmVnaWQpKToKLSAgICAgICAg
ICAgICAgICAgICAgZ2VuX2hlbHBlcl9yZXR1cm5fdHlwZShmLHJlZ3R5cGUscmVnaWQsaSkKKyAg
ICAgICAgICAgICAgICAgICAgaWYgKGhleF9jb21tb24uaXNfaHZ4X3JlZyhyZWd0eXBlKSk6Cisg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKKyAgICAgICAgICAgICAgICAgICAg
ZWxzZToKKyAgICAgICAgICAgICAgICAgICAgICAgIGdlbl9oZWxwZXJfcmV0dXJuX3R5cGUoZixy
ZWd0eXBlLHJlZ2lkLGkpCiAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAg
ICAgcHJpbnQoIkJhZCByZWdpc3RlciBwYXJzZTogIixyZWd0eXBlLHJlZ2lkLHRvc3MsbnVtcmVn
cykKICAgICAgICAgICAgIGkgKz0gMQpAQCAtMTQ1LDE2ICsyMDcsMzcgQEAgZGVmIGdlbl9oZWxw
ZXJfZnVuY3Rpb24oZiwgdGFnLCB0YWdyZWdzLCB0YWdpbW1zKToKICAgICAgICAgICAgIGYud3Jp
dGUoInZvaWQiKQogICAgICAgICBmLndyaXRlKCIgSEVMUEVSKCVzKShDUFVIZXhhZ29uU3RhdGUg
KmVudiIgJSB0YWcpCiAKKyAgICAgICAgIyMgQXJndW1lbnRzIGluY2x1ZGUgdGhlIHZlY3RvciBk
ZXN0aW5hdGlvbiBvcGVyYW5kcwogICAgICAgICBpID0gMQorICAgICAgICBmb3IgcmVndHlwZSxy
ZWdpZCx0b3NzLG51bXJlZ3MgaW4gcmVnczoKKyAgICAgICAgICAgIGlmIChoZXhfY29tbW9uLmlz
X3dyaXR0ZW4ocmVnaWQpKToKKyAgICAgICAgICAgICAgICBpZiAoaGV4X2NvbW1vbi5pc19wYWly
KHJlZ2lkKSk6CisgICAgICAgICAgICAgICAgICAgIGlmIChoZXhfY29tbW9uLmlzX2h2eF9yZWco
cmVndHlwZSkpOgorICAgICAgICAgICAgICAgICAgICAgICAgZ2VuX2hlbHBlcl9hcmdfZXh0X3Bh
aXIoZixyZWd0eXBlLHJlZ2lkLGkpCisgICAgICAgICAgICAgICAgICAgIGVsc2U6CisgICAgICAg
ICAgICAgICAgICAgICAgICBjb250aW51ZQorICAgICAgICAgICAgICAgIGVsaWYgKGhleF9jb21t
b24uaXNfc2luZ2xlKHJlZ2lkKSk6CisgICAgICAgICAgICAgICAgICAgIGlmIChoZXhfY29tbW9u
LmlzX2h2eF9yZWcocmVndHlwZSkpOgorICAgICAgICAgICAgICAgICAgICAgICAgZ2VuX2hlbHBl
cl9hcmdfZXh0KGYscmVndHlwZSxyZWdpZCxpKQorICAgICAgICAgICAgICAgICAgICBlbHNlOgor
ICAgICAgICAgICAgICAgICAgICAgICAgIyBUaGlzIGlzIHRoZSByZXR1cm4gdmFsdWUgb2YgdGhl
IGZ1bmN0aW9uCisgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQorICAgICAgICAgICAg
ICAgIGVsc2U6CisgICAgICAgICAgICAgICAgICAgIHByaW50KCJCYWQgcmVnaXN0ZXIgcGFyc2U6
ICIscmVndHlwZSxyZWdpZCx0b3NzLG51bXJlZ3MpCisgICAgICAgICAgICAgICAgaSArPSAxCiAK
ICAgICAgICAgIyMgQXJndW1lbnRzIHRvIHRoZSBoZWxwZXIgZnVuY3Rpb24gYXJlIHRoZSBzb3Vy
Y2UgcmVncyBhbmQgaW1tZWRpYXRlcwogICAgICAgICBmb3IgcmVndHlwZSxyZWdpZCx0b3NzLG51
bXJlZ3MgaW4gcmVnczoKICAgICAgICAgICAgIGlmIChoZXhfY29tbW9uLmlzX3JlYWQocmVnaWQp
KToKKyAgICAgICAgICAgICAgICBpZiAoaGV4X2NvbW1vbi5pc19odnhfcmVnKHJlZ3R5cGUpIGFu
ZAorICAgICAgICAgICAgICAgICAgICBoZXhfY29tbW9uLmlzX3JlYWR3cml0ZShyZWdpZCkpOgor
ICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgIGdlbl9oZWxwZXJf
YXJnX29wbihmLHJlZ3R5cGUscmVnaWQsaSx0YWcpCiAgICAgICAgICAgICAgICAgaSArPSAxCiAg
ICAgICAgIGZvciBpbW1sZXR0LGJpdHMsaW1tc2hpZnQgaW4gaW1tczoKICAgICAgICAgICAgIGdl
bl9oZWxwZXJfYXJnX2ltbShmLGltbWxldHQpCiAgICAgICAgICAgICBpICs9IDEKKwogICAgICAg
ICBpZiBoZXhfY29tbW9uLm5lZWRfc2xvdCh0YWcpOgogICAgICAgICAgICAgaWYgaSA+IDA6IGYu
d3JpdGUoIiwgIikKICAgICAgICAgICAgIGYud3JpdGUoInVpbnQzMl90IHNsb3QiKQpAQCAtMTcz
LDYgKzI1NiwxNyBAQCBkZWYgZ2VuX2hlbHBlcl9mdW5jdGlvbihmLCB0YWcsIHRhZ3JlZ3MsIHRh
Z2ltbXMpOgogICAgICAgICAgICAgICAgIGdlbl9oZWxwZXJfZGVzdF9kZWNsX29wbihmLHJlZ3R5
cGUscmVnaWQsaSkKICAgICAgICAgICAgIGkgKz0gMQogCisgICAgICAgIGZvciByZWd0eXBlLHJl
Z2lkLHRvc3MsbnVtcmVncyBpbiByZWdzOgorICAgICAgICAgICAgaWYgKGhleF9jb21tb24uaXNf
cmVhZChyZWdpZCkpOgorICAgICAgICAgICAgICAgIGlmIChoZXhfY29tbW9uLmlzX3BhaXIocmVn
aWQpKToKKyAgICAgICAgICAgICAgICAgICAgaWYgKGhleF9jb21tb24uaXNfaHZ4X3JlZyhyZWd0
eXBlKSk6CisgICAgICAgICAgICAgICAgICAgICAgICBnZW5faGVscGVyX3NyY192YXJfZXh0X3Bh
aXIoZixyZWd0eXBlLHJlZ2lkLGkpCisgICAgICAgICAgICAgICAgZWxpZiAoaGV4X2NvbW1vbi5p
c19zaW5nbGUocmVnaWQpKToKKyAgICAgICAgICAgICAgICAgICAgaWYgKGhleF9jb21tb24uaXNf
aHZ4X3JlZyhyZWd0eXBlKSk6CisgICAgICAgICAgICAgICAgICAgICAgICBnZW5faGVscGVyX3Ny
Y192YXJfZXh0KGYscmVndHlwZSxyZWdpZCkKKyAgICAgICAgICAgICAgICBlbHNlOgorICAgICAg
ICAgICAgICAgICAgICBwcmludCgiQmFkIHJlZ2lzdGVyIHBhcnNlOiAiLHJlZ3R5cGUscmVnaWQs
dG9zcyxudW1yZWdzKQorCiAgICAgICAgIGlmICdBX0ZQT1AnIGluIGhleF9jb21tb24uYXR0cmli
ZGljdFt0YWddOgogICAgICAgICAgICAgZi53cml0ZSgnICAgIGFyY2hfZnBvcF9zdGFydChlbnYp
O1xuJyk7CiAKZGlmZiAtLWdpdCBhL3RhcmdldC9oZXhhZ29uL2dlbl9oZWxwZXJfcHJvdG9zLnB5
IGIvdGFyZ2V0L2hleGFnb24vZ2VuX2hlbHBlcl9wcm90b3MucHkKaW5kZXggZWE0MTAwNy4uMjI5
ZWY4ZCAxMDA3NTUKLS0tIGEvdGFyZ2V0L2hleGFnb24vZ2VuX2hlbHBlcl9wcm90b3MucHkKKysr
IGIvdGFyZ2V0L2hleGFnb24vZ2VuX2hlbHBlcl9wcm90b3MucHkKQEAgLTk0LDE5ICs5NCwzMyBA
QCBkZWYgZ2VuX2hlbHBlcl9wcm90b3R5cGUoZiwgdGFnLCB0YWdyZWdzLCB0YWdpbW1zKToKICAg
ICAgICAgICAgIGYud3JpdGUoJ0RFRl9IRUxQRVJfJXMoJXMnICUgKGRlZl9oZWxwZXJfc2l6ZSwg
dGFnKSkKIAogICAgICAgICAjIyBHZW5lcmF0ZSB0aGUgcWVtdSBERUZfSEVMUEVSIHR5cGUgZm9y
IGVhY2ggcmVzdWx0CisgICAgICAgICMjIEl0ZXJhdGUgb3ZlciB0aGlzIGxpc3QgdHdpY2UKKyAg
ICAgICAgIyMgLSBFbWl0IHRoZSBzY2FsYXIgcmVzdWx0CisgICAgICAgICMjIC0gRW1pdCB0aGUg
dmVjdG9yIHJlc3VsdAogICAgICAgICBpPTAKICAgICAgICAgZm9yIHJlZ3R5cGUscmVnaWQsdG9z
cyxudW1yZWdzIGluIHJlZ3M6CiAgICAgICAgICAgICBpZiAoaGV4X2NvbW1vbi5pc193cml0dGVu
KHJlZ2lkKSk6Ci0gICAgICAgICAgICAgICAgZ2VuX2RlZl9oZWxwZXJfb3BuKGYsIHRhZywgcmVn
dHlwZSwgcmVnaWQsIHRvc3MsIG51bXJlZ3MsIGkpCisgICAgICAgICAgICAgICAgaWYgKG5vdCBo
ZXhfY29tbW9uLmlzX2h2eF9yZWcocmVndHlwZSkpOgorICAgICAgICAgICAgICAgICAgICBnZW5f
ZGVmX2hlbHBlcl9vcG4oZiwgdGFnLCByZWd0eXBlLCByZWdpZCwgdG9zcywgbnVtcmVncywgaSkK
ICAgICAgICAgICAgICAgICBpICs9IDEKIAogICAgICAgICAjIyBQdXQgdGhlIGVudiBiZXR3ZWVu
IHRoZSBvdXRwdXRzIGFuZCBpbnB1dHMKICAgICAgICAgZi53cml0ZSgnLCBlbnYnICkKICAgICAg
ICAgaSArPSAxCiAKKyAgICAgICAgIyBTZWNvbmQgcGFzcworICAgICAgICBmb3IgcmVndHlwZSxy
ZWdpZCx0b3NzLG51bXJlZ3MgaW4gcmVnczoKKyAgICAgICAgICAgIGlmIChoZXhfY29tbW9uLmlz
X3dyaXR0ZW4ocmVnaWQpKToKKyAgICAgICAgICAgICAgICBpZiAoaGV4X2NvbW1vbi5pc19odnhf
cmVnKHJlZ3R5cGUpKToKKyAgICAgICAgICAgICAgICAgICAgZ2VuX2RlZl9oZWxwZXJfb3BuKGYs
IHRhZywgcmVndHlwZSwgcmVnaWQsIHRvc3MsIG51bXJlZ3MsIGkpCisgICAgICAgICAgICAgICAg
ICAgIGkgKz0gMQorCiAgICAgICAgICMjIEdlbmVyYXRlIHRoZSBxZW11IHR5cGUgZm9yIGVhY2gg
aW5wdXQgb3BlcmFuZCAocmVncyBhbmQgaW1tZWRpYXRlcykKICAgICAgICAgZm9yIHJlZ3R5cGUs
cmVnaWQsdG9zcyxudW1yZWdzIGluIHJlZ3M6CiAgICAgICAgICAgICBpZiAoaGV4X2NvbW1vbi5p
c19yZWFkKHJlZ2lkKSk6CisgICAgICAgICAgICAgICAgaWYgKGhleF9jb21tb24uaXNfaHZ4X3Jl
ZyhyZWd0eXBlKSBhbmQKKyAgICAgICAgICAgICAgICAgICAgaGV4X2NvbW1vbi5pc19yZWFkd3Jp
dGUocmVnaWQpKToKKyAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAg
ICBnZW5fZGVmX2hlbHBlcl9vcG4oZiwgdGFnLCByZWd0eXBlLCByZWdpZCwgdG9zcywgbnVtcmVn
cywgaSkKICAgICAgICAgICAgICAgICBpICs9IDEKICAgICAgICAgZm9yIGltbWxldHQsYml0cyxp
bW1zaGlmdCBpbiBpbW1zOgpkaWZmIC0tZ2l0IGEvdGFyZ2V0L2hleGFnb24vZ2VuX3RjZ19mdW5j
cy5weSBiL3RhcmdldC9oZXhhZ29uL2dlbl90Y2dfZnVuY3MucHkKaW5kZXggZTNkNTlkZC4uNjkx
ZmY2YSAxMDA3NTUKLS0tIGEvdGFyZ2V0L2hleGFnb24vZ2VuX3RjZ19mdW5jcy5weQorKysgYi90
YXJnZXQvaGV4YWdvbi9nZW5fdGNnX2Z1bmNzLnB5CkBAIC0xMTksMTAgKzExOSw5NSBAQCBkZWYg
Z2VucHRyX2RlY2woZiwgdGFnLCByZWd0eXBlLCByZWdpZCwgcmVnbm8pOgogICAgICAgICAgICAg
ICAgIChyZWd0eXBlLCByZWdpZCwgcmVndHlwZSwgcmVnaWQpKQogICAgICAgICBlbHNlOgogICAg
ICAgICAgICAgcHJpbnQoIkJhZCByZWdpc3RlciBwYXJzZTogIiwgcmVndHlwZSwgcmVnaWQpCisg
ICAgZWxpZiAocmVndHlwZSA9PSAiViIpOgorICAgICAgICBpZiAocmVnaWQgaW4geyJkZCJ9KToK
KyAgICAgICAgICAgIGYud3JpdGUoIiAgICBjb25zdCBpbnQgJXMlc04gPSBpbnNuLT5yZWdub1sl
ZF07XG4iICVcCisgICAgICAgICAgICAgICAgKHJlZ3R5cGUsIHJlZ2lkLCByZWdubykpCisgICAg
ICAgICAgICBmLndyaXRlKCIgICAgY29uc3QgaW50cHRyX3QgJXMlc1Zfb2ZmID1cbiIgJVwKKyAg
ICAgICAgICAgICAgICAgKHJlZ3R5cGUsIHJlZ2lkKSkKKyAgICAgICAgICAgIGlmIChoZXhfY29t
bW9uLmlzX3RtcF9yZXN1bHQodGFnKSk6CisgICAgICAgICAgICAgICAgZi53cml0ZSgiICAgICAg
ICBjdHhfdG1wX3ZyZWdfb2ZmKGN0eCwgJXMlc04sIDIsIHRydWUpO1xuIiAlIFwKKyAgICAgICAg
ICAgICAgICAgICAgIChyZWd0eXBlLCByZWdpZCkpCisgICAgICAgICAgICBlbHNlOgorICAgICAg
ICAgICAgICAgIGYud3JpdGUoIiAgICAgICAgY3R4X2Z1dHVyZV92cmVnX29mZihjdHgsICVzJXNO
LCIgJSBcCisgICAgICAgICAgICAgICAgICAgICAocmVndHlwZSwgcmVnaWQpKQorICAgICAgICAg
ICAgICAgIGYud3JpdGUoIiAyLCB0cnVlKTtcbiIpCisgICAgICAgICAgICBpZiAobm90IGhleF9j
b21tb24uc2tpcF9xZW11X2hlbHBlcih0YWcpKToKKyAgICAgICAgICAgICAgICBmLndyaXRlKCIg
ICAgVENHdl9wdHIgJXMlc1YgPSB0Y2dfdGVtcF9uZXdfcHRyKCk7XG4iICUgXAorICAgICAgICAg
ICAgICAgICAgICAocmVndHlwZSwgcmVnaWQpKQorICAgICAgICAgICAgICAgIGYud3JpdGUoIiAg
ICB0Y2dfZ2VuX2FkZGlfcHRyKCVzJXNWLCBjcHVfZW52LCAlcyVzVl9vZmYpO1xuIiAlIFwKKyAg
ICAgICAgICAgICAgICAgICAgKHJlZ3R5cGUsIHJlZ2lkLCByZWd0eXBlLCByZWdpZCkpCisgICAg
ICAgIGVsaWYgKHJlZ2lkIGluIHsidXUiLCAidnYiLCAieHgifSk6CisgICAgICAgICAgICBmLndy
aXRlKCIgICAgY29uc3QgaW50ICVzJXNOID0gaW5zbi0+cmVnbm9bJWRdO1xuIiAlIFwKKyAgICAg
ICAgICAgICAgICAocmVndHlwZSwgcmVnaWQsIHJlZ25vKSkKKyAgICAgICAgICAgIGYud3JpdGUo
IiAgICBjb25zdCBpbnRwdHJfdCAlcyVzVl9vZmYgPVxuIiAlIFwKKyAgICAgICAgICAgICAgICAg
KHJlZ3R5cGUsIHJlZ2lkKSkKKyAgICAgICAgICAgIGYud3JpdGUoIiAgICAgICAgb2Zmc2V0b2Yo
Q1BVSGV4YWdvblN0YXRlLCAlcyVzVik7XG4iICUgXAorICAgICAgICAgICAgICAgICAocmVndHlw
ZSwgcmVnaWQpKQorICAgICAgICAgICAgaWYgKG5vdCBoZXhfY29tbW9uLnNraXBfcWVtdV9oZWxw
ZXIodGFnKSk6CisgICAgICAgICAgICAgICAgZi53cml0ZSgiICAgIFRDR3ZfcHRyICVzJXNWID0g
dGNnX3RlbXBfbmV3X3B0cigpO1xuIiAlIFwKKyAgICAgICAgICAgICAgICAgICAgKHJlZ3R5cGUs
IHJlZ2lkKSkKKyAgICAgICAgICAgICAgICBmLndyaXRlKCIgICAgdGNnX2dlbl9hZGRpX3B0cigl
cyVzViwgY3B1X2VudiwgJXMlc1Zfb2ZmKTtcbiIgJSBcCisgICAgICAgICAgICAgICAgICAgIChy
ZWd0eXBlLCByZWdpZCwgcmVndHlwZSwgcmVnaWQpKQorICAgICAgICBlbGlmIChyZWdpZCBpbiB7
InMiLCAidSIsICJ2IiwgIncifSk6CisgICAgICAgICAgICBmLndyaXRlKCIgICAgY29uc3QgaW50
ICVzJXNOID0gaW5zbi0+cmVnbm9bJWRdO1xuIiAlIFwKKyAgICAgICAgICAgICAgICAocmVndHlw
ZSwgcmVnaWQsIHJlZ25vKSkKKyAgICAgICAgICAgIGYud3JpdGUoIiAgICBjb25zdCBpbnRwdHJf
dCAlcyVzVl9vZmYgPVxuIiAlIFwKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChyZWd0
eXBlLCByZWdpZCkpCisgICAgICAgICAgICBmLndyaXRlKCIgICAgICAgIHZyZWdfc3JjX29mZihj
dHgsICVzJXNOKTtcbiIgJSBcCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocmVndHlw
ZSwgcmVnaWQpKQorICAgICAgICAgICAgaWYgKG5vdCBoZXhfY29tbW9uLnNraXBfcWVtdV9oZWxw
ZXIodGFnKSk6CisgICAgICAgICAgICAgICAgZi53cml0ZSgiICAgIFRDR3ZfcHRyICVzJXNWID0g
dGNnX3RlbXBfbmV3X3B0cigpO1xuIiAlIFwKKyAgICAgICAgICAgICAgICAgICAgKHJlZ3R5cGUs
IHJlZ2lkKSkKKyAgICAgICAgZWxpZiAocmVnaWQgaW4geyJkIiwgIngiLCAieSJ9KToKKyAgICAg
ICAgICAgIGYud3JpdGUoIiAgICBjb25zdCBpbnQgJXMlc04gPSBpbnNuLT5yZWdub1slZF07XG4i
ICUgXAorICAgICAgICAgICAgICAgIChyZWd0eXBlLCByZWdpZCwgcmVnbm8pKQorICAgICAgICAg
ICAgZi53cml0ZSgiICAgIGNvbnN0IGludHB0cl90ICVzJXNWX29mZiA9XG4iICUgXAorICAgICAg
ICAgICAgICAgIChyZWd0eXBlLCByZWdpZCkpCisgICAgICAgICAgICBpZiAoaGV4X2NvbW1vbi5p
c190bXBfcmVzdWx0KHRhZykpOgorICAgICAgICAgICAgICAgIGYud3JpdGUoIiAgICAgICAgY3R4
X3RtcF92cmVnX29mZihjdHgsICVzJXNOLCAxLCB0cnVlKTtcbiIgJSBcCisgICAgICAgICAgICAg
ICAgICAgIChyZWd0eXBlLCByZWdpZCkpCisgICAgICAgICAgICBlbHNlOgorICAgICAgICAgICAg
ICAgIGYud3JpdGUoIiAgICAgICAgY3R4X2Z1dHVyZV92cmVnX29mZihjdHgsICVzJXNOLCIgJSBc
CisgICAgICAgICAgICAgICAgICAgIChyZWd0eXBlLCByZWdpZCkpCisgICAgICAgICAgICAgICAg
Zi53cml0ZSgiIDEsIHRydWUpO1xuIik7CisgICAgICAgICAgICBpZiAobm90IGhleF9jb21tb24u
c2tpcF9xZW11X2hlbHBlcih0YWcpKToKKyAgICAgICAgICAgICAgICBmLndyaXRlKCIgICAgVENH
dl9wdHIgJXMlc1YgPSB0Y2dfdGVtcF9uZXdfcHRyKCk7XG4iICUgXAorICAgICAgICAgICAgICAg
ICAgICAocmVndHlwZSwgcmVnaWQpKQorICAgICAgICAgICAgICAgIGYud3JpdGUoIiAgICB0Y2df
Z2VuX2FkZGlfcHRyKCVzJXNWLCBjcHVfZW52LCAlcyVzVl9vZmYpO1xuIiAlIFwKKyAgICAgICAg
ICAgICAgICAgICAgKHJlZ3R5cGUsIHJlZ2lkLCByZWd0eXBlLCByZWdpZCkpCisgICAgICAgIGVs
c2U6CisgICAgICAgICAgICBwcmludCgiQmFkIHJlZ2lzdGVyIHBhcnNlOiAiLCByZWd0eXBlLCBy
ZWdpZCkKKyAgICBlbGlmIChyZWd0eXBlID09ICJRIik6CisgICAgICAgIGlmIChyZWdpZCBpbiB7
ImQiLCAiZSIsICJ4In0pOgorICAgICAgICAgICAgZi53cml0ZSgiICAgIGNvbnN0IGludCAlcyVz
TiA9IGluc24tPnJlZ25vWyVkXTtcbiIgJSBcCisgICAgICAgICAgICAgICAgKHJlZ3R5cGUsIHJl
Z2lkLCByZWdubykpCisgICAgICAgICAgICBmLndyaXRlKCIgICAgY29uc3QgaW50cHRyX3QgJXMl
c1Zfb2ZmID1cbiIgJSBcCisgICAgICAgICAgICAgICAgKHJlZ3R5cGUsIHJlZ2lkKSkKKyAgICAg
ICAgICAgIGYud3JpdGUoIiAgICAgICAgb2Zmc2V0b2YoQ1BVSGV4YWdvblN0YXRlLFxuIikKKyAg
ICAgICAgICAgIGYud3JpdGUoIiAgICAgICAgICAgICAgICAgZnV0dXJlX1FSZWdzWyVzJXNOXSk7
XG4iICUgXAorICAgICAgICAgICAgICAgIChyZWd0eXBlLCByZWdpZCkpCisgICAgICAgICAgICBp
ZiAobm90IGhleF9jb21tb24uc2tpcF9xZW11X2hlbHBlcih0YWcpKToKKyAgICAgICAgICAgICAg
ICBmLndyaXRlKCIgICAgVENHdl9wdHIgJXMlc1YgPSB0Y2dfdGVtcF9uZXdfcHRyKCk7XG4iICUg
XAorICAgICAgICAgICAgICAgICAgICAocmVndHlwZSwgcmVnaWQpKQorICAgICAgICAgICAgICAg
IGYud3JpdGUoIiAgICB0Y2dfZ2VuX2FkZGlfcHRyKCVzJXNWLCBjcHVfZW52LCAlcyVzVl9vZmYp
O1xuIiAlIFwKKyAgICAgICAgICAgICAgICAgICAgKHJlZ3R5cGUsIHJlZ2lkLCByZWd0eXBlLCBy
ZWdpZCkpCisgICAgICAgIGVsaWYgKHJlZ2lkIGluIHsicyIsICJ0IiwgInUiLCAidiJ9KToKKyAg
ICAgICAgICAgIGYud3JpdGUoIiAgICBjb25zdCBpbnQgJXMlc04gPSBpbnNuLT5yZWdub1slZF07
XG4iICUgXAorICAgICAgICAgICAgICAgIChyZWd0eXBlLCByZWdpZCwgcmVnbm8pKQorICAgICAg
ICAgICAgZi53cml0ZSgiICAgIGNvbnN0IGludHB0cl90ICVzJXNWX29mZiA9XG4iICVcCisgICAg
ICAgICAgICAgICAgKHJlZ3R5cGUsIHJlZ2lkKSkKKyAgICAgICAgICAgIGYud3JpdGUoIiAgICAg
ICAgb2Zmc2V0b2YoQ1BVSGV4YWdvblN0YXRlLCBRUmVnc1slcyVzTl0pO1xuIiAlIFwKKyAgICAg
ICAgICAgICAgICAocmVndHlwZSwgcmVnaWQpKQorICAgICAgICAgICAgaWYgKG5vdCBoZXhfY29t
bW9uLnNraXBfcWVtdV9oZWxwZXIodGFnKSk6CisgICAgICAgICAgICAgICAgZi53cml0ZSgiICAg
IFRDR3ZfcHRyICVzJXNWID0gdGNnX3RlbXBfbmV3X3B0cigpO1xuIiAlIFwKKyAgICAgICAgICAg
ICAgICAgICAgKHJlZ3R5cGUsIHJlZ2lkKSkKKyAgICAgICAgZWxzZToKKyAgICAgICAgICAgIHBy
aW50KCJCYWQgcmVnaXN0ZXIgcGFyc2U6ICIsIHJlZ3R5cGUsIHJlZ2lkKQogICAgIGVsc2U6CiAg
ICAgICAgIHByaW50KCJCYWQgcmVnaXN0ZXIgcGFyc2U6ICIsIHJlZ3R5cGUsIHJlZ2lkKQogCi1k
ZWYgZ2VucHRyX2RlY2xfbmV3KGYscmVndHlwZSxyZWdpZCxyZWdubyk6CitkZWYgZ2VucHRyX2Rl
Y2xfbmV3KGYsIHRhZywgcmVndHlwZSwgcmVnaWQsIHJlZ25vKToKICAgICBpZiAocmVndHlwZSA9
PSAiTiIpOgogICAgICAgICBpZiAocmVnaWQgaW4geyJzIiwgInQifSk6CiAgICAgICAgICAgICBm
LndyaXRlKCIgICAgVENHdiAlcyVzTiA9IGhleF9uZXdfdmFsdWVbaW5zbi0+cmVnbm9bJWRdXTtc
biIgJSBcCkBAIC0xMzUsNiArMjIwLDIxIEBAIGRlZiBnZW5wdHJfZGVjbF9uZXcoZixyZWd0eXBl
LHJlZ2lkLHJlZ25vKToKICAgICAgICAgICAgICAgICAocmVndHlwZSwgcmVnaWQsIHJlZ25vKSkK
ICAgICAgICAgZWxzZToKICAgICAgICAgICAgIHByaW50KCJCYWQgcmVnaXN0ZXIgcGFyc2U6ICIs
IHJlZ3R5cGUsIHJlZ2lkKQorICAgIGVsaWYgKHJlZ3R5cGUgPT0gIk8iKToKKyAgICAgICAgaWYg
KHJlZ2lkID09ICJzIik6CisgICAgICAgICAgICBmLndyaXRlKCIgICAgY29uc3QgaW50cHRyX3Qg
JXMlc05fbnVtID0gaW5zbi0+cmVnbm9bJWRdO1xuIiAlIFwKKyAgICAgICAgICAgICAgICAocmVn
dHlwZSwgcmVnaWQsIHJlZ25vKSkKKyAgICAgICAgICAgIGlmIChoZXhfY29tbW9uLnNraXBfcWVt
dV9oZWxwZXIodGFnKSk6CisgICAgICAgICAgICAgICAgZi53cml0ZSgiICAgIGNvbnN0IGludHB0
cl90ICVzJXNOX29mZiA9XG4iICUgXAorICAgICAgICAgICAgICAgICAgICAocmVndHlwZSwgcmVn
aWQpKQorICAgICAgICAgICAgICAgIGYud3JpdGUoIiAgICAgICAgIGN0eF9mdXR1cmVfdnJlZ19v
ZmYoY3R4LCAlcyVzTl9udW0sIiAlIFwKKyAgICAgICAgICAgICAgICAgICAgKHJlZ3R5cGUsIHJl
Z2lkKSkKKyAgICAgICAgICAgICAgICBmLndyaXRlKCIgMSwgdHJ1ZSk7XG4iKQorICAgICAgICAg
ICAgZWxzZToKKyAgICAgICAgICAgICAgICBmLndyaXRlKCIgICAgVENHdiAlcyVzTiA9IHRjZ19j
b25zdGFudF90bCglcyVzTl9udW0pO1xuIiAlIFwKKyAgICAgICAgICAgICAgICAgICAgKHJlZ3R5
cGUsIHJlZ2lkLCByZWd0eXBlLCByZWdpZCkpCisgICAgICAgIGVsc2U6CisgICAgICAgICAgICBw
cmludCgiQmFkIHJlZ2lzdGVyIHBhcnNlOiAiLCByZWd0eXBlLCByZWdpZCkKICAgICBlbHNlOgog
ICAgICAgICBwcmludCgiQmFkIHJlZ2lzdGVyIHBhcnNlOiAiLCByZWd0eXBlLCByZWdpZCkKIApA
QCAtMTQ1LDcgKzI0NSw3IEBAIGRlZiBnZW5wdHJfZGVjbF9vcG4oZiwgdGFnLCByZWd0eXBlLCBy
ZWdpZCwgdG9zcywgbnVtcmVncywgaSk6CiAgICAgICAgIGlmIGhleF9jb21tb24uaXNfb2xkX3Zh
bChyZWd0eXBlLCByZWdpZCwgdGFnKToKICAgICAgICAgICAgIGdlbnB0cl9kZWNsKGYsdGFnLCBy
ZWd0eXBlLCByZWdpZCwgaSkKICAgICAgICAgZWxpZiBoZXhfY29tbW9uLmlzX25ld192YWwocmVn
dHlwZSwgcmVnaWQsIHRhZyk6Ci0gICAgICAgICAgICBnZW5wdHJfZGVjbF9uZXcoZixyZWd0eXBl
LHJlZ2lkLGkpCisgICAgICAgICAgICBnZW5wdHJfZGVjbF9uZXcoZiwgdGFnLCByZWd0eXBlLCBy
ZWdpZCwgaSkKICAgICAgICAgZWxzZToKICAgICAgICAgICAgIHByaW50KCJCYWQgcmVnaXN0ZXIg
cGFyc2U6ICIscmVndHlwZSxyZWdpZCx0b3NzLG51bXJlZ3MpCiAgICAgZWxzZToKQEAgLTE1OSw3
ICsyNTksNyBAQCBkZWYgZ2VucHRyX2RlY2xfaW1tKGYsaW1tbGV0dCk6CiAgICAgZi53cml0ZSgi
ICAgIGludCAlcyA9IGluc24tPmltbWVkWyVkXTtcbiIgJSBcCiAgICAgICAgIChoZXhfY29tbW9u
LmltbV9uYW1lKGltbWxldHQpLCBpKSkKIAotZGVmIGdlbnB0cl9mcmVlKGYscmVndHlwZSxyZWdp
ZCxyZWdubyk6CitkZWYgZ2VucHRyX2ZyZWUoZiwgdGFnLCByZWd0eXBlLCByZWdpZCwgcmVnbm8p
OgogICAgIGlmIChyZWd0eXBlID09ICJSIik6CiAgICAgICAgIGlmIChyZWdpZCBpbiB7ImRkIiwg
InNzIiwgInR0IiwgInh4IiwgInl5In0pOgogICAgICAgICAgICAgZi53cml0ZSgiICAgIHRjZ190
ZW1wX2ZyZWVfaTY0KCVzJXNWKTtcbiIgJSAocmVndHlwZSwgcmVnaWQpKQpAQCAtMTgyLDMzICsy
ODIsNTEgQEAgZGVmIGdlbnB0cl9mcmVlKGYscmVndHlwZSxyZWdpZCxyZWdubyk6CiAgICAgZWxp
ZiAocmVndHlwZSA9PSAiTSIpOgogICAgICAgICBpZiAocmVnaWQgIT0gInUiKToKICAgICAgICAg
ICAgIHByaW50KCJCYWQgcmVnaXN0ZXIgcGFyc2U6ICIsIHJlZ3R5cGUsIHJlZ2lkKQorICAgIGVs
aWYgKHJlZ3R5cGUgPT0gIlYiKToKKyAgICAgICAgaWYgKHJlZ2lkIGluIHsiZGQiLCAidXUiLCAi
dnYiLCAieHgiLCBcCisgICAgICAgICAgICAgICAgICAgICAgImQiLCAicyIsICJ1IiwgInYiLCAi
dyIsICJ4IiwgInkifSk6CisgICAgICAgICAgICBpZiAobm90IGhleF9jb21tb24uc2tpcF9xZW11
X2hlbHBlcih0YWcpKToKKyAgICAgICAgICAgICAgICBmLndyaXRlKCIgICAgdGNnX3RlbXBfZnJl
ZV9wdHIoJXMlc1YpO1xuIiAlIFwKKyAgICAgICAgICAgICAgICAgICAgKHJlZ3R5cGUsIHJlZ2lk
KSkKKyAgICAgICAgZWxzZToKKyAgICAgICAgICAgIHByaW50KCJCYWQgcmVnaXN0ZXIgcGFyc2U6
ICIsIHJlZ3R5cGUsIHJlZ2lkKQorICAgIGVsaWYgKHJlZ3R5cGUgPT0gIlEiKToKKyAgICAgICAg
aWYgKHJlZ2lkIGluIHsiZCIsICJlIiwgInMiLCAidCIsICJ1IiwgInYiLCAieCJ9KToKKyAgICAg
ICAgICAgIGlmIChub3QgaGV4X2NvbW1vbi5za2lwX3FlbXVfaGVscGVyKHRhZykpOgorICAgICAg
ICAgICAgICAgIGYud3JpdGUoIiAgICB0Y2dfdGVtcF9mcmVlX3B0ciglcyVzVik7XG4iICUgXAor
ICAgICAgICAgICAgICAgICAgICAocmVndHlwZSwgcmVnaWQpKQorICAgICAgICBlbHNlOgorICAg
ICAgICAgICAgcHJpbnQoIkJhZCByZWdpc3RlciBwYXJzZTogIiwgcmVndHlwZSwgcmVnaWQpCiAg
ICAgZWxzZToKICAgICAgICAgcHJpbnQoIkJhZCByZWdpc3RlciBwYXJzZTogIiwgcmVndHlwZSwg
cmVnaWQpCiAKLWRlZiBnZW5wdHJfZnJlZV9uZXcoZixyZWd0eXBlLHJlZ2lkLHJlZ25vKToKK2Rl
ZiBnZW5wdHJfZnJlZV9uZXcoZiwgdGFnLCByZWd0eXBlLCByZWdpZCwgcmVnbm8pOgogICAgIGlm
IChyZWd0eXBlID09ICJOIik6CiAgICAgICAgIGlmIChyZWdpZCBub3QgaW4geyJzIiwgInQifSk6
CiAgICAgICAgICAgICBwcmludCgiQmFkIHJlZ2lzdGVyIHBhcnNlOiAiLCByZWd0eXBlLCByZWdp
ZCkKICAgICBlbGlmIChyZWd0eXBlID09ICJQIik6CiAgICAgICAgIGlmIChyZWdpZCBub3QgaW4g
eyJ0IiwgInUiLCAidiJ9KToKICAgICAgICAgICAgIHByaW50KCJCYWQgcmVnaXN0ZXIgcGFyc2U6
ICIsIHJlZ3R5cGUsIHJlZ2lkKQorICAgIGVsaWYgKHJlZ3R5cGUgPT0gIk8iKToKKyAgICAgICAg
aWYgKHJlZ2lkICE9ICJzIik6CisgICAgICAgICAgICBwcmludCgiQmFkIHJlZ2lzdGVyIHBhcnNl
OiAiLCByZWd0eXBlLCByZWdpZCkKICAgICBlbHNlOgogICAgICAgICBwcmludCgiQmFkIHJlZ2lz
dGVyIHBhcnNlOiAiLCByZWd0eXBlLCByZWdpZCkKIAogZGVmIGdlbnB0cl9mcmVlX29wbihmLHJl
Z3R5cGUscmVnaWQsaSx0YWcpOgogICAgIGlmIChoZXhfY29tbW9uLmlzX3BhaXIocmVnaWQpKToK
LSAgICAgICAgZ2VucHRyX2ZyZWUoZixyZWd0eXBlLHJlZ2lkLGkpCisgICAgICAgIGdlbnB0cl9m
cmVlKGYsIHRhZywgcmVndHlwZSwgcmVnaWQsIGkpCiAgICAgZWxpZiAoaGV4X2NvbW1vbi5pc19z
aW5nbGUocmVnaWQpKToKICAgICAgICAgaWYgaGV4X2NvbW1vbi5pc19vbGRfdmFsKHJlZ3R5cGUs
IHJlZ2lkLCB0YWcpOgotICAgICAgICAgICAgZ2VucHRyX2ZyZWUoZixyZWd0eXBlLHJlZ2lkLGkp
CisgICAgICAgICAgICBnZW5wdHJfZnJlZShmLCB0YWcsIHJlZ3R5cGUsIHJlZ2lkLCBpKQogICAg
ICAgICBlbGlmIGhleF9jb21tb24uaXNfbmV3X3ZhbChyZWd0eXBlLCByZWdpZCwgdGFnKToKLSAg
ICAgICAgICAgIGdlbnB0cl9mcmVlX25ldyhmLHJlZ3R5cGUscmVnaWQsaSkKKyAgICAgICAgICAg
IGdlbnB0cl9mcmVlX25ldyhmLCB0YWcsIHJlZ3R5cGUsIHJlZ2lkLCBpKQogICAgICAgICBlbHNl
OgogICAgICAgICAgICAgcHJpbnQoIkJhZCByZWdpc3RlciBwYXJzZTogIixyZWd0eXBlLHJlZ2lk
LHRvc3MsbnVtcmVncykKICAgICBlbHNlOgogICAgICAgICBwcmludCgiQmFkIHJlZ2lzdGVyIHBh
cnNlOiAiLHJlZ3R5cGUscmVnaWQsdG9zcyxudW1yZWdzKQogCi1kZWYgZ2VucHRyX3NyY19yZWFk
KGYscmVndHlwZSxyZWdpZCk6CitkZWYgZ2VucHRyX3NyY19yZWFkKGYsIHRhZywgcmVndHlwZSwg
cmVnaWQpOgogICAgIGlmIChyZWd0eXBlID09ICJSIik6CiAgICAgICAgIGlmIChyZWdpZCBpbiB7
InNzIiwgInR0IiwgInh4IiwgInl5In0pOgogICAgICAgICAgICAgZi53cml0ZSgiICAgIHRjZ19n
ZW5fY29uY2F0X2kzMl9pNjQoJXMlc1YsIGhleF9ncHJbJXMlc05dLFxuIiAlIFwKQEAgLTIzOCw2
ICszNTYsNDcgQEAgZGVmIGdlbnB0cl9zcmNfcmVhZChmLHJlZ3R5cGUscmVnaWQpOgogICAgIGVs
aWYgKHJlZ3R5cGUgPT0gIk0iKToKICAgICAgICAgaWYgKHJlZ2lkICE9ICJ1Iik6CiAgICAgICAg
ICAgICBwcmludCgiQmFkIHJlZ2lzdGVyIHBhcnNlOiAiLCByZWd0eXBlLCByZWdpZCkKKyAgICBl
bGlmIChyZWd0eXBlID09ICJWIik6CisgICAgICAgIGlmIChyZWdpZCBpbiB7InV1IiwgInZ2Iiwg
Inh4In0pOgorICAgICAgICAgICAgZi53cml0ZSgiICAgIHRjZ19nZW5fZ3ZlY19tb3YoTU9fNjQs
ICVzJXNWX29mZixcbiIgJSBcCisgICAgICAgICAgICAgICAgKHJlZ3R5cGUsIHJlZ2lkKSkKKyAg
ICAgICAgICAgIGYud3JpdGUoIiAgICAgICAgdnJlZ19zcmNfb2ZmKGN0eCwgJXMlc04pLFxuIiAl
IFwKKyAgICAgICAgICAgICAgICAocmVndHlwZSwgcmVnaWQpKQorICAgICAgICAgICAgZi53cml0
ZSgiICAgICAgICBzaXplb2YoTU1WZWN0b3IpLCBzaXplb2YoTU1WZWN0b3IpKTtcbiIpCisgICAg
ICAgICAgICBmLndyaXRlKCIgICAgdGNnX2dlbl9ndmVjX21vdihNT182NCxcbiIpCisgICAgICAg
ICAgICBmLndyaXRlKCIgICAgICAgICVzJXNWX29mZiArIHNpemVvZihNTVZlY3RvciksXG4iICUg
XAorICAgICAgICAgICAgICAgIChyZWd0eXBlLCByZWdpZCkpCisgICAgICAgICAgICBmLndyaXRl
KCIgICAgICAgIHZyZWdfc3JjX29mZihjdHgsICVzJXNOIF4gMSksXG4iICUgXAorICAgICAgICAg
ICAgICAgIChyZWd0eXBlLCByZWdpZCkpCisgICAgICAgICAgICBmLndyaXRlKCIgICAgICAgIHNp
emVvZihNTVZlY3RvciksIHNpemVvZihNTVZlY3RvcikpO1xuIikKKyAgICAgICAgZWxpZiAocmVn
aWQgaW4geyJzIiwgInUiLCAidiIsICJ3In0pOgorICAgICAgICAgICAgaWYgKG5vdCBoZXhfY29t
bW9uLnNraXBfcWVtdV9oZWxwZXIodGFnKSk6CisgICAgICAgICAgICAgICAgZi53cml0ZSgiICAg
IHRjZ19nZW5fYWRkaV9wdHIoJXMlc1YsIGNwdV9lbnYsICVzJXNWX29mZik7XG4iICUgXAorICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHJlZ3R5cGUsIHJlZ2lkLCByZWd0eXBlLCBy
ZWdpZCkpCisgICAgICAgIGVsaWYgKHJlZ2lkIGluIHsieCIsICJ5In0pOgorICAgICAgICAgICAg
Zi53cml0ZSgiICAgIHRjZ19nZW5fZ3ZlY19tb3YoTU9fNjQsICVzJXNWX29mZixcbiIgJSBcCisg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIChyZWd0eXBlLCByZWdpZCkpCisgICAgICAgICAg
ICBmLndyaXRlKCIgICAgICAgIHZyZWdfc3JjX29mZihjdHgsICVzJXNOKSxcbiIgJSBcCisgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIChyZWd0eXBlLCByZWdpZCkpCisgICAgICAgICAgICBm
LndyaXRlKCIgICAgICAgIHNpemVvZihNTVZlY3RvciksIHNpemVvZihNTVZlY3RvcikpO1xuIikK
KyAgICAgICAgICAgIGlmIChub3QgaGV4X2NvbW1vbi5za2lwX3FlbXVfaGVscGVyKHRhZykpOgor
ICAgICAgICAgICAgICAgIGYud3JpdGUoIiAgICB0Y2dfZ2VuX2FkZGlfcHRyKCVzJXNWLCBjcHVf
ZW52LCAlcyVzVl9vZmYpO1xuIiAlIFwKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IChyZWd0eXBlLCByZWdpZCwgcmVndHlwZSwgcmVnaWQpKQorICAgICAgICBlbHNlOgorICAgICAg
ICAgICAgcHJpbnQoIkJhZCByZWdpc3RlciBwYXJzZTogIiwgcmVndHlwZSwgcmVnaWQpCisgICAg
ZWxpZiAocmVndHlwZSA9PSAiUSIpOgorICAgICAgICBpZiAocmVnaWQgaW4geyJzIiwgInQiLCAi
dSIsICJ2In0pOgorICAgICAgICAgICAgaWYgKG5vdCBoZXhfY29tbW9uLnNraXBfcWVtdV9oZWxw
ZXIodGFnKSk6CisgICAgICAgICAgICAgICAgZi53cml0ZSgiICAgIHRjZ19nZW5fYWRkaV9wdHIo
JXMlc1YsIGNwdV9lbnYsICVzJXNWX29mZik7XG4iICUgXAorICAgICAgICAgICAgICAgICAgICAo
cmVndHlwZSwgcmVnaWQsIHJlZ3R5cGUsIHJlZ2lkKSkKKyAgICAgICAgZWxpZiAocmVnaWQgaW4g
eyJ4In0pOgorICAgICAgICAgICAgZi53cml0ZSgiICAgIHRjZ19nZW5fZ3ZlY19tb3YoTU9fNjQs
ICVzJXNWX29mZixcbiIgJSBcCisgICAgICAgICAgICAgICAgKHJlZ3R5cGUsIHJlZ2lkKSkKKyAg
ICAgICAgICAgIGYud3JpdGUoIiAgICAgICAgb2Zmc2V0b2YoQ1BVSGV4YWdvblN0YXRlLCBRUmVn
c1slcyVzTl0pLFxuIiAlIFwKKyAgICAgICAgICAgICAgICAocmVndHlwZSwgcmVnaWQpKQorICAg
ICAgICAgICAgZi53cml0ZSgiICAgICAgICBzaXplb2YoTU1RUmVnKSwgc2l6ZW9mKE1NUVJlZykp
O1xuIikKKyAgICAgICAgZWxzZToKKyAgICAgICAgICAgIHByaW50KCJCYWQgcmVnaXN0ZXIgcGFy
c2U6ICIsIHJlZ3R5cGUsIHJlZ2lkKQogICAgIGVsc2U6CiAgICAgICAgIHByaW50KCJCYWQgcmVn
aXN0ZXIgcGFyc2U6ICIsIHJlZ3R5cGUsIHJlZ2lkKQogCkBAIC0yNDgsMTUgKzQwNywxOCBAQCBk
ZWYgZ2VucHRyX3NyY19yZWFkX25ldyhmLHJlZ3R5cGUscmVnaWQpOgogICAgIGVsaWYgKHJlZ3R5
cGUgPT0gIlAiKToKICAgICAgICAgaWYgKHJlZ2lkIG5vdCBpbiB7InQiLCAidSIsICJ2In0pOgog
ICAgICAgICAgICAgcHJpbnQoIkJhZCByZWdpc3RlciBwYXJzZTogIiwgcmVndHlwZSwgcmVnaWQp
CisgICAgZWxpZiAocmVndHlwZSA9PSAiTyIpOgorICAgICAgICBpZiAocmVnaWQgIT0gInMiKToK
KyAgICAgICAgICAgIHByaW50KCJCYWQgcmVnaXN0ZXIgcGFyc2U6ICIsIHJlZ3R5cGUsIHJlZ2lk
KQogICAgIGVsc2U6CiAgICAgICAgIHByaW50KCJCYWQgcmVnaXN0ZXIgcGFyc2U6ICIsIHJlZ3R5
cGUsIHJlZ2lkKQogCiBkZWYgZ2VucHRyX3NyY19yZWFkX29wbihmLHJlZ3R5cGUscmVnaWQsdGFn
KToKICAgICBpZiAoaGV4X2NvbW1vbi5pc19wYWlyKHJlZ2lkKSk6Ci0gICAgICAgIGdlbnB0cl9z
cmNfcmVhZChmLHJlZ3R5cGUscmVnaWQpCisgICAgICAgIGdlbnB0cl9zcmNfcmVhZChmLCB0YWcs
IHJlZ3R5cGUsIHJlZ2lkKQogICAgIGVsaWYgKGhleF9jb21tb24uaXNfc2luZ2xlKHJlZ2lkKSk6
CiAgICAgICAgIGlmIGhleF9jb21tb24uaXNfb2xkX3ZhbChyZWd0eXBlLCByZWdpZCwgdGFnKToK
LSAgICAgICAgICAgIGdlbnB0cl9zcmNfcmVhZChmLHJlZ3R5cGUscmVnaWQpCisgICAgICAgICAg
ICBnZW5wdHJfc3JjX3JlYWQoZiwgdGFnLCByZWd0eXBlLCByZWdpZCkKICAgICAgICAgZWxpZiBo
ZXhfY29tbW9uLmlzX25ld192YWwocmVndHlwZSwgcmVnaWQsIHRhZyk6CiAgICAgICAgICAgICBn
ZW5wdHJfc3JjX3JlYWRfbmV3KGYscmVndHlwZSxyZWdpZCkKICAgICAgICAgZWxzZToKQEAgLTMz
MSwxMSArNDkzLDY4IEBAIGRlZiBnZW5wdHJfZHN0X3dyaXRlKGYsIHRhZywgcmVndHlwZSwgcmVn
aWQpOgogICAgIGVsc2U6CiAgICAgICAgIHByaW50KCJCYWQgcmVnaXN0ZXIgcGFyc2U6ICIsIHJl
Z3R5cGUsIHJlZ2lkKQogCitkZWYgZ2VucHRyX2RzdF93cml0ZV9leHQoZiwgdGFnLCByZWd0eXBl
LCByZWdpZCwgbmV3dj0iRVhUX0RGTCIpOgorICAgIGlmIChyZWd0eXBlID09ICJWIik6CisgICAg
ICAgIGlmIChyZWdpZCBpbiB7ImRkIiwgInh4IiwgInl5In0pOgorICAgICAgICAgICAgaWYgKCdB
X0NPTkRFWEVDJyBpbiBoZXhfY29tbW9uLmF0dHJpYmRpY3RbdGFnXSk6CisgICAgICAgICAgICAg
ICAgaXNfcHJlZGljYXRlZCA9ICJ0cnVlIgorICAgICAgICAgICAgZWxzZToKKyAgICAgICAgICAg
ICAgICBpc19wcmVkaWNhdGVkID0gImZhbHNlIgorICAgICAgICAgICAgZi53cml0ZSgiICAgIGdl
bl9sb2dfdnJlZ193cml0ZV9wYWlyKGN0eCwgJXMlc1Zfb2ZmLCAlcyVzTiwgIiAlIFwKKyAgICAg
ICAgICAgICAgICAocmVndHlwZSwgcmVnaWQsIHJlZ3R5cGUsIHJlZ2lkKSkKKyAgICAgICAgICAg
IGYud3JpdGUoIiVzLCBpbnNuLT5zbG90LCAlcyk7XG4iICUgXAorICAgICAgICAgICAgICAgIChu
ZXd2LCBpc19wcmVkaWNhdGVkKSkKKyAgICAgICAgICAgIGYud3JpdGUoIiAgICBjdHhfbG9nX3Zy
ZWdfd3JpdGVfcGFpcihjdHgsICVzJXNOLCAlcyxcbiIgJSBcCisgICAgICAgICAgICAgICAgKHJl
Z3R5cGUsIHJlZ2lkLCBuZXd2KSkKKyAgICAgICAgICAgIGYud3JpdGUoIiAgICAgICAgJXMpO1xu
IiAlIChpc19wcmVkaWNhdGVkKSkKKyAgICAgICAgZWxpZiAocmVnaWQgaW4geyJkIiwgIngiLCAi
eSJ9KToKKyAgICAgICAgICAgIGlmICgnQV9DT05ERVhFQycgaW4gaGV4X2NvbW1vbi5hdHRyaWJk
aWN0W3RhZ10pOgorICAgICAgICAgICAgICAgIGlzX3ByZWRpY2F0ZWQgPSAidHJ1ZSIKKyAgICAg
ICAgICAgIGVsc2U6CisgICAgICAgICAgICAgICAgaXNfcHJlZGljYXRlZCA9ICJmYWxzZSIKKyAg
ICAgICAgICAgIGYud3JpdGUoIiAgICBnZW5fbG9nX3ZyZWdfd3JpdGUoY3R4LCAlcyVzVl9vZmYs
ICVzJXNOLCAlcywgIiAlIFwKKyAgICAgICAgICAgICAgICAocmVndHlwZSwgcmVnaWQsIHJlZ3R5
cGUsIHJlZ2lkLCBuZXd2KSkKKyAgICAgICAgICAgIGYud3JpdGUoImluc24tPnNsb3QsICVzKTtc
biIgJSBcCisgICAgICAgICAgICAgICAgKGlzX3ByZWRpY2F0ZWQpKQorICAgICAgICAgICAgZi53
cml0ZSgiICAgIGN0eF9sb2dfdnJlZ193cml0ZShjdHgsICVzJXNOLCAlcywgJXMpO1xuIiAlIFwK
KyAgICAgICAgICAgICAgICAocmVndHlwZSwgcmVnaWQsIG5ld3YsIGlzX3ByZWRpY2F0ZWQpKQor
ICAgICAgICBlbHNlOgorICAgICAgICAgICAgcHJpbnQoIkJhZCByZWdpc3RlciBwYXJzZTogIiwg
cmVndHlwZSwgcmVnaWQpCisgICAgZWxpZiAocmVndHlwZSA9PSAiUSIpOgorICAgICAgICBpZiAo
cmVnaWQgaW4geyJkIiwgImUiLCAieCJ9KToKKyAgICAgICAgICAgIGlmICgnQV9DT05ERVhFQycg
aW4gaGV4X2NvbW1vbi5hdHRyaWJkaWN0W3RhZ10pOgorICAgICAgICAgICAgICAgIGlzX3ByZWRp
Y2F0ZWQgPSAidHJ1ZSIKKyAgICAgICAgICAgIGVsc2U6CisgICAgICAgICAgICAgICAgaXNfcHJl
ZGljYXRlZCA9ICJmYWxzZSIKKyAgICAgICAgICAgIGYud3JpdGUoIiAgICBnZW5fbG9nX3FyZWdf
d3JpdGUoJXMlc1Zfb2ZmLCAlcyVzTiwgJXMsICIgJSBcCisgICAgICAgICAgICAgICAgKHJlZ3R5
cGUsIHJlZ2lkLCByZWd0eXBlLCByZWdpZCwgbmV3dikpCisgICAgICAgICAgICBmLndyaXRlKCJp
bnNuLT5zbG90LCAlcyk7XG4iICUgKGlzX3ByZWRpY2F0ZWQpKQorICAgICAgICAgICAgZi53cml0
ZSgiICAgIGN0eF9sb2dfcXJlZ193cml0ZShjdHgsICVzJXNOLCAlcyk7XG4iICUgXAorICAgICAg
ICAgICAgICAgIChyZWd0eXBlLCByZWdpZCwgaXNfcHJlZGljYXRlZCkpCisgICAgICAgIGVsc2U6
CisgICAgICAgICAgICBwcmludCgiQmFkIHJlZ2lzdGVyIHBhcnNlOiAiLCByZWd0eXBlLCByZWdp
ZCkKKyAgICBlbHNlOgorICAgICAgICBwcmludCgiQmFkIHJlZ2lzdGVyIHBhcnNlOiAiLCByZWd0
eXBlLCByZWdpZCkKKwogZGVmIGdlbnB0cl9kc3Rfd3JpdGVfb3BuKGYscmVndHlwZSwgcmVnaWQs
IHRhZyk6CiAgICAgaWYgKGhleF9jb21tb24uaXNfcGFpcihyZWdpZCkpOgotICAgICAgICBnZW5w
dHJfZHN0X3dyaXRlKGYsIHRhZywgcmVndHlwZSwgcmVnaWQpCisgICAgICAgIGlmIChoZXhfY29t
bW9uLmlzX2h2eF9yZWcocmVndHlwZSkpOgorICAgICAgICAgICAgaWYgKGhleF9jb21tb24uaXNf
dG1wX3Jlc3VsdCh0YWcpKToKKyAgICAgICAgICAgICAgICBnZW5wdHJfZHN0X3dyaXRlX2V4dChm
LCB0YWcsIHJlZ3R5cGUsIHJlZ2lkLCAiRVhUX1RNUCIpCisgICAgICAgICAgICBlbHNlOgorICAg
ICAgICAgICAgICAgIGdlbnB0cl9kc3Rfd3JpdGVfZXh0KGYsIHRhZywgcmVndHlwZSwgcmVnaWQp
CisgICAgICAgIGVsc2U6CisgICAgICAgICAgICBnZW5wdHJfZHN0X3dyaXRlKGYsIHRhZywgcmVn
dHlwZSwgcmVnaWQpCiAgICAgZWxpZiAoaGV4X2NvbW1vbi5pc19zaW5nbGUocmVnaWQpKToKLSAg
ICAgICAgZ2VucHRyX2RzdF93cml0ZShmLCB0YWcsIHJlZ3R5cGUsIHJlZ2lkKQorICAgICAgICBp
ZiAoaGV4X2NvbW1vbi5pc19odnhfcmVnKHJlZ3R5cGUpKToKKyAgICAgICAgICAgIGlmIChoZXhf
Y29tbW9uLmlzX25ld19yZXN1bHQodGFnKSk6CisgICAgICAgICAgICAgICAgZ2VucHRyX2RzdF93
cml0ZV9leHQoZiwgdGFnLCByZWd0eXBlLCByZWdpZCwgIkVYVF9ORVciKQorICAgICAgICAgICAg
aWYgKGhleF9jb21tb24uaXNfdG1wX3Jlc3VsdCh0YWcpKToKKyAgICAgICAgICAgICAgICBnZW5w
dHJfZHN0X3dyaXRlX2V4dChmLCB0YWcsIHJlZ3R5cGUsIHJlZ2lkLCAiRVhUX1RNUCIpCisgICAg
ICAgICAgICBlbHNlOgorICAgICAgICAgICAgICAgIGdlbnB0cl9kc3Rfd3JpdGVfZXh0KGYsIHRh
ZywgcmVndHlwZSwgcmVnaWQsICJFWFRfREZMIikKKyAgICAgICAgZWxzZToKKyAgICAgICAgICAg
IGdlbnB0cl9kc3Rfd3JpdGUoZiwgdGFnLCByZWd0eXBlLCByZWdpZCkKICAgICBlbHNlOgogICAg
ICAgICBwcmludCgiQmFkIHJlZ2lzdGVyIHBhcnNlOiAiLHJlZ3R5cGUscmVnaWQsdG9zcyxudW1y
ZWdzKQogCkBAIC00MDYsMTMgKzYyNSwyNCBAQCBkZWYgZ2VuX3RjZ19mdW5jKGYsIHRhZywgcmVn
cywgaW1tcyk6CiAgICAgICAgICMjIElmIHRoZXJlIGlzIGEgc2NhbGFyIHJlc3VsdCwgaXQgaXMg
dGhlIHJldHVybiB0eXBlCiAgICAgICAgIGZvciByZWd0eXBlLHJlZ2lkLHRvc3MsbnVtcmVncyBp
biByZWdzOgogICAgICAgICAgICAgaWYgKGhleF9jb21tb24uaXNfd3JpdHRlbihyZWdpZCkpOgor
ICAgICAgICAgICAgICAgIGlmIChoZXhfY29tbW9uLmlzX2h2eF9yZWcocmVndHlwZSkpOgorICAg
ICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgIGdlbl9oZWxwZXJfY2Fs
bF9vcG4oZiwgdGFnLCByZWd0eXBlLCByZWdpZCwgdG9zcywgbnVtcmVncywgaSkKICAgICAgICAg
ICAgICAgICBpICs9IDEKICAgICAgICAgaWYgKGkgPiAwKTogZi53cml0ZSgiLCAiKQogICAgICAg
ICBmLndyaXRlKCJjcHVfZW52IikKICAgICAgICAgaT0xCiAgICAgICAgIGZvciByZWd0eXBlLHJl
Z2lkLHRvc3MsbnVtcmVncyBpbiByZWdzOgorICAgICAgICAgICAgaWYgKGhleF9jb21tb24uaXNf
d3JpdHRlbihyZWdpZCkpOgorICAgICAgICAgICAgICAgIGlmIChub3QgaGV4X2NvbW1vbi5pc19o
dnhfcmVnKHJlZ3R5cGUpKToKKyAgICAgICAgICAgICAgICAgICAgY29udGludWUKKyAgICAgICAg
ICAgICAgICBnZW5faGVscGVyX2NhbGxfb3BuKGYsIHRhZywgcmVndHlwZSwgcmVnaWQsIHRvc3Ms
IG51bXJlZ3MsIGkpCisgICAgICAgICAgICAgICAgaSArPSAxCisgICAgICAgIGZvciByZWd0eXBl
LHJlZ2lkLHRvc3MsbnVtcmVncyBpbiByZWdzOgogICAgICAgICAgICAgaWYgKGhleF9jb21tb24u
aXNfcmVhZChyZWdpZCkpOgorICAgICAgICAgICAgICAgIGlmIChoZXhfY29tbW9uLmlzX2h2eF9y
ZWcocmVndHlwZSkgYW5kCisgICAgICAgICAgICAgICAgICAgIGhleF9jb21tb24uaXNfcmVhZHdy
aXRlKHJlZ2lkKSk6CisgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAg
ICAgZ2VuX2hlbHBlcl9jYWxsX29wbihmLCB0YWcsIHJlZ3R5cGUsIHJlZ2lkLCB0b3NzLCBudW1y
ZWdzLCBpKQogICAgICAgICAgICAgICAgIGkgKz0gMQogICAgICAgICBmb3IgaW1tbGV0dCxiaXRz
LGltbXNoaWZ0IGluIGltbXM6Ci0tIAoyLjcuNAoK

