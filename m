Return-Path: <qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org>
X-Original-To: lists+qemu-devel@lfdr.de
Delivered-To: lists+qemu-devel@lfdr.de
Received: from lists.gnu.org (lists.gnu.org [209.51.188.17])
	by mail.lfdr.de (Postfix) with ESMTPS id 1F1756839D0
	for <lists+qemu-devel@lfdr.de>; Tue, 31 Jan 2023 23:58:33 +0100 (CET)
Received: from localhost ([::1] helo=lists1p.gnu.org)
	by lists.gnu.org with esmtp (Exim 4.90_1)
	(envelope-from <qemu-devel-bounces@nongnu.org>)
	id 1pMzYw-0000nY-4S; Tue, 31 Jan 2023 17:57:14 -0500
Received: from eggs.gnu.org ([2001:470:142:3::10])
 by lists.gnu.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256)
 (Exim 4.90_1) (envelope-from <tsimpson@qualcomm.com>)
 id 1pMzYl-0000fc-PS
 for qemu-devel@nongnu.org; Tue, 31 Jan 2023 17:57:04 -0500
Received: from mx0b-0031df01.pphosted.com ([205.220.180.131])
 by eggs.gnu.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256)
 (Exim 4.90_1) (envelope-from <tsimpson@qualcomm.com>)
 id 1pMzYg-0003tX-Oe
 for qemu-devel@nongnu.org; Tue, 31 Jan 2023 17:57:03 -0500
Received: from pps.filterd (m0279870.ppops.net [127.0.0.1])
 by mx0a-0031df01.pphosted.com (8.17.1.19/8.17.1.19) with ESMTP id
 30VMlfwU004964; Tue, 31 Jan 2023 22:56:55 GMT
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=quicinc.com;
 h=from : to : cc :
 subject : date : message-id : in-reply-to : references : mime-version :
 content-type : content-transfer-encoding; s=qcppdkim1;
 bh=cpBqNbRxSj0UaGvorsJ44qxe3PRSc4AEsI9mfhSN/e8=;
 b=jVJHBCv3jHzVf/6gd4c9wnnLrvDruIkybV+YkCcbv49x2Rnh9C7pUnnY7s53w2SYQPFQ
 wT6VcGFTCu/h5moBT8y6S0bQNYJCc8irSnNBulpwry1EIKRjzL8ZqRMND+bcAV32R/I3
 KE/hbAKldQ22MBCn2U8cz7zRuS2uHpwIv++BduaCnP7T9f+e5KdaccctwT0CdCsSYYxj
 n3YLB8rA1PIiB+Y20OVJ8KmhHDya/sS1JOVrZnKdr+AajqTlAqGCqHG8NSJr9iVTzZGt
 j4Mj1ZinkBlKolPRlMbids7CkJCraWXn1AYjBxjGFUhe6pI2oQev3Wl+mCtqUakkZK5p 8w== 
Received: from nalasppmta03.qualcomm.com (Global_NAT1.qualcomm.com
 [129.46.96.20])
 by mx0a-0031df01.pphosted.com (PPS) with ESMTPS id 3neua9agr7-1
 (version=TLSv1.2 cipher=ECDHE-RSA-AES256-GCM-SHA384 bits=256 verify=NOT);
 Tue, 31 Jan 2023 22:56:55 +0000
Received: from pps.filterd (NALASPPMTA03.qualcomm.com [127.0.0.1])
 by NALASPPMTA03.qualcomm.com (8.17.1.5/8.17.1.5) with ESMTP id 30VMusVl016261; 
 Tue, 31 Jan 2023 22:56:54 GMT
Received: from pps.reinject (localhost [127.0.0.1])
 by NALASPPMTA03.qualcomm.com (PPS) with ESMTPS id 3ncvskts06-1
 (version=TLSv1.2 cipher=ECDHE-RSA-AES256-GCM-SHA384 bits=256 verify=NO);
 Tue, 31 Jan 2023 22:56:54 +0000
Received: from NALASPPMTA03.qualcomm.com (NALASPPMTA03.qualcomm.com
 [127.0.0.1])
 by pps.reinject (8.17.1.5/8.17.1.5) with ESMTP id 30VMuskj016238;
 Tue, 31 Jan 2023 22:56:54 GMT
Received: from hu-devc-lv-u18-c.qualcomm.com (hu-tsimpson-lv.qualcomm.com
 [10.47.235.220])
 by NALASPPMTA03.qualcomm.com (PPS) with ESMTP id 30VMurot016235;
 Tue, 31 Jan 2023 22:56:54 +0000
Received: by hu-devc-lv-u18-c.qualcomm.com (Postfix, from userid 47164)
 id 1790B50011A; Tue, 31 Jan 2023 14:56:53 -0800 (PST)
From: Taylor Simpson <tsimpson@quicinc.com>
To: qemu-devel@nongnu.org
Cc: tsimpson@quicinc.com, richard.henderson@linaro.org, philmd@linaro.org,
 ale@rev.ng, anjo@rev.ng, bcain@quicinc.com, quic_mathbern@quicinc.com
Subject: [PATCH v5 13/14] Hexagon (target/hexagon) Reduce manipulation of
 slot_cancelled
Date: Tue, 31 Jan 2023 14:56:46 -0800
Message-Id: <20230131225647.25274-14-tsimpson@quicinc.com>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20230131225647.25274-1-tsimpson@quicinc.com>
References: <20230131225647.25274-1-tsimpson@quicinc.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
X-QCInternal: smtphost
X-QCInternal: smtphost
X-Proofpoint-Virus-Version: vendor=nai engine=6200 definitions=5800
 signatures=585085
X-Proofpoint-Virus-Version: vendor=nai engine=6200 definitions=5800
 signatures=585085
X-Proofpoint-GUID: jjJnsB8b12dX62EAjAlgYjeJHoRE7lCp
X-Proofpoint-ORIG-GUID: jjJnsB8b12dX62EAjAlgYjeJHoRE7lCp
X-Proofpoint-Virus-Version: vendor=baseguard
 engine=ICAP:2.0.219,Aquarius:18.0.930,Hydra:6.0.562,FMLib:17.11.122.1
 definitions=2023-01-31_08,2023-01-31_01,2022-06-22_01
X-Proofpoint-Spam-Details: rule=outbound_notspam policy=outbound score=0
 bulkscore=0 impostorscore=0
 mlxscore=0 suspectscore=0 adultscore=0 lowpriorityscore=0 malwarescore=0
 phishscore=0 priorityscore=1501 clxscore=1015 spamscore=0 mlxlogscore=486
 classifier=spam adjust=0 reason=mlx scancount=1 engine=8.12.0-2212070000
 definitions=main-2301310197
Received-SPF: pass client-ip=205.220.180.131;
 envelope-from=tsimpson@qualcomm.com; helo=mx0b-0031df01.pphosted.com
X-Spam_score_int: -17
X-Spam_score: -1.8
X-Spam_bar: -
X-Spam_report: (-1.8 / 5.0 requ) BAYES_00=-1.9, DKIM_SIGNED=0.1,
 DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1, HEADER_FROM_DIFFERENT_DOMAINS=0.25,
 SPF_HELO_NONE=0.001, SPF_PASS=-0.001 autolearn=no autolearn_force=no
X-Spam_action: no action
X-BeenThere: qemu-devel@nongnu.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: <qemu-devel.nongnu.org>
List-Unsubscribe: <https://lists.nongnu.org/mailman/options/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=unsubscribe>
List-Archive: <https://lists.nongnu.org/archive/html/qemu-devel>
List-Post: <mailto:qemu-devel@nongnu.org>
List-Help: <mailto:qemu-devel-request@nongnu.org?subject=help>
List-Subscribe: <https://lists.nongnu.org/mailman/listinfo/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=subscribe>
Errors-To: qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org
Sender: qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org

V2Ugb25seSBuZWVkIHRvIHRyYWNrIHNsb3QgZm9yIHByZWRpY2F0ZWQgc3RvcmVzIGFuZCBwcmVk
aWNhdGVkIEhWWAppbnN0cnVjdGlvbnMuCgpBZGQgYXJndW1lbnRzIHRvIHRoZSBwcm9iZSBoZWxw
ZXIgZnVuY3Rpb25zIHRvIGluZGljYXRlIGlmIHRoZSBzbG90CmlzIHByZWRpY2F0ZWQuCgpIZXJl
IGlzIGEgc2ltcGxlIGV4YW1wbGUgb2YgdGhlIGRpZmZlcmVuY2VzIGluIHRoZSBUQ0cgY29kZSBn
ZW5lcmF0ZWQ6CgpJTjoKMHgwMDQwMDA5NDogIDB4ZjkwMGMxMDIgeyAgICAgICBpZiAoUDApIFIy
ID0gYW5kKFIwLFIxKSB9CgpCRUZPUkUKIC0tLS0gMDA0MDAwOTQKIG1vdl9pMzIgc2xvdF9jYW5j
ZWxsZWQsJDB4MAogbW92X2kzMiBuZXdfcjIscjIKIGFuZF9pMzIgdG1wMCxwMCwkMHgxCiBicmNv
bmRfaTMyIHRtcDAsJDB4MCxlcSwkTDEKIGFuZF9pMzIgdG1wMCxyMCxyMQogbW92X2kzMiBuZXdf
cjIsdG1wMAogYnIgJEwyCiBzZXRfbGFiZWwgJEwxCiBvcl9pMzIgc2xvdF9jYW5jZWxsZWQsc2xv
dF9jYW5jZWxsZWQsJDB4OAogc2V0X2xhYmVsICRMMgogbW92X2kzMiByMixuZXdfcjIKCkFGVEVS
CiAtLS0tIDAwNDAwMDk0CiBtb3ZfaTMyIG5ld19yMixyMgogYW5kX2kzMiB0bXAwLHAwLCQweDEK
IGJyY29uZF9pMzIgdG1wMCwkMHgwLGVxLCRMMQogYW5kX2kzMiB0bXAwLHIwLHIxCiBtb3ZfaTMy
IG5ld19yMix0bXAwCiBiciAkTDIKIHNldF9sYWJlbCAkTDEKIHNldF9sYWJlbCAkTDIKIG1vdl9p
MzIgcjIsbmV3X3IyCgpTaWduZWQtb2ZmLWJ5OiBUYXlsb3IgU2ltcHNvbiA8dHNpbXBzb25AcXVp
Y2luYy5jb20+Ci0tLQogdGFyZ2V0L2hleGFnb24vbWFjcm9zLmggICAgICAgICAgICAgICAgICAg
ICB8ICAyICstCiB0YXJnZXQvaGV4YWdvbi9vcF9oZWxwZXIuaCAgICAgICAgICAgICAgICAgIHwg
IDMgKy0tCiB0YXJnZXQvaGV4YWdvbi9pZGVmLXBhcnNlci9wYXJzZXItaGVscGVycy5jIHwgIDEg
LQogdGFyZ2V0L2hleGFnb24vb3BfaGVscGVyLmMgICAgICAgICAgICAgICAgICB8IDIzICsrKysr
KysrKy0tLS0tLS0tLS0KIHRhcmdldC9oZXhhZ29uL3RyYW5zbGF0ZS5jICAgICAgICAgICAgICAg
ICAgfCAyNSArKysrKysrKysrKysrKysrKystLS0KIHRhcmdldC9oZXhhZ29uL2lkZWYtcGFyc2Vy
L2lkZWYtcGFyc2VyLmxleCAgfCAgNCArKy0tCiB0YXJnZXQvaGV4YWdvbi9pZGVmLXBhcnNlci9p
ZGVmLXBhcnNlci55ICAgIHwgIDcgKysrLS0tCiA3IGZpbGVzIGNoYW5nZWQsIDQxIGluc2VydGlv
bnMoKyksIDI0IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL3RhcmdldC9oZXhhZ29uL21hY3Jv
cy5oIGIvdGFyZ2V0L2hleGFnb24vbWFjcm9zLmgKaW5kZXggZjVmZjkyM2JiZC4uODBkYzc2OGU2
MiAxMDA2NDQKLS0tIGEvdGFyZ2V0L2hleGFnb24vbWFjcm9zLmgKKysrIGIvdGFyZ2V0L2hleGFn
b24vbWFjcm9zLmgKQEAgLTIwNSw3ICsyMDUsNyBAQCBzdGF0aWMgaW5saW5lIHZvaWQgZ2VuX2Nh
bmNlbCh1aW50MzJfdCBzbG90KQogCiAjZGVmaW5lIENBTkNFTCBnZW5fY2FuY2VsKHNsb3QpOwog
I2Vsc2UKLSNkZWZpbmUgQ0FOQ0VMIGNhbmNlbF9zbG90KGVudiwgc2xvdCkKKyNkZWZpbmUgQ0FO
Q0VMIGRvIHsgfSB3aGlsZSAoMCkKICNlbmRpZgogCiAjZGVmaW5lIExPQURfQ0FOQ0VMKEVBKSBk
byB7IENBTkNFTDsgfSB3aGlsZSAoMCkKZGlmZiAtLWdpdCBhL3RhcmdldC9oZXhhZ29uL29wX2hl
bHBlci5oIGIvdGFyZ2V0L2hleGFnb24vb3BfaGVscGVyLmgKaW5kZXggMDIzNDdlZGVlOC4uMzRi
M2E1Mzk3NSAxMDA2NDQKLS0tIGEvdGFyZ2V0L2hleGFnb24vb3BfaGVscGVyLmgKKysrIGIvdGFy
Z2V0L2hleGFnb24vb3BfaGVscGVyLmgKQEAgLTEsNSArMSw1IEBACiAvKgotICogIENvcHlyaWdo
dChjKSAyMDE5LTIwMjEgUXVhbGNvbW0gSW5ub3ZhdGlvbiBDZW50ZXIsIEluYy4gQWxsIFJpZ2h0
cyBSZXNlcnZlZC4KKyAqICBDb3B5cmlnaHQoYykgMjAxOS0yMDIzIFF1YWxjb21tIElubm92YXRp
b24gQ2VudGVyLCBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAgKgogICogIFRoaXMgcHJvZ3Jh
bSBpcyBmcmVlIHNvZnR3YXJlOyB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5
CiAgKiAgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5z
ZSBhcyBwdWJsaXNoZWQgYnkKQEAgLTE5LDcgKzE5LDYgQEAKICNkZWZpbmUgSEVYQUdPTl9PUF9I
RUxQRVJfSAogCiAvKiBNaXNjIGZ1bmN0aW9ucyAqLwotdm9pZCBjYW5jZWxfc2xvdChDUFVIZXhh
Z29uU3RhdGUgKmVudiwgdWludDMyX3Qgc2xvdCk7CiB2b2lkIHdyaXRlX25ld19wYyhDUFVIZXhh
Z29uU3RhdGUgKmVudiwgYm9vbCBwa3RfaGFzX211bHRpX2NvZiwgdGFyZ2V0X3Vsb25nIGFkZHIp
OwogCiB1aW50OF90IG1lbV9sb2FkMShDUFVIZXhhZ29uU3RhdGUgKmVudiwgdWludDMyX3Qgc2xv
dCwgdGFyZ2V0X3Vsb25nIHZhZGRyKTsKZGlmZiAtLWdpdCBhL3RhcmdldC9oZXhhZ29uL2lkZWYt
cGFyc2VyL3BhcnNlci1oZWxwZXJzLmMgYi90YXJnZXQvaGV4YWdvbi9pZGVmLXBhcnNlci9wYXJz
ZXItaGVscGVycy5jCmluZGV4IGViNjUyZDZhN2EuLmM0NGQzYTIzOGYgMTAwNjQ0Ci0tLSBhL3Rh
cmdldC9oZXhhZ29uL2lkZWYtcGFyc2VyL3BhcnNlci1oZWxwZXJzLmMKKysrIGIvdGFyZ2V0L2hl
eGFnb24vaWRlZi1wYXJzZXIvcGFyc2VyLWhlbHBlcnMuYwpAQCAtMTkwMSw3ICsxOTAxLDYgQEAg
dm9pZCBnZW5fY2FuY2VsKENvbnRleHQgKmMsIFlZTFRZUEUgKmxvY3ApCiAKIHZvaWQgZ2VuX2xv
YWRfY2FuY2VsKENvbnRleHQgKmMsIFlZTFRZUEUgKmxvY3ApCiB7Ci0gICAgZ2VuX2NhbmNlbChj
LCBsb2NwKTsKICAgICBPVVQoYywgbG9jcCwgImlmIChpbnNuLT5zbG90ID09IDAgJiYgcGt0LT5w
a3RfaGFzX3N0b3JlX3MxKSB7XG4iKTsKICAgICBPVVQoYywgbG9jcCwgImN0eC0+czFfc3RvcmVf
cHJvY2Vzc2VkID0gZmFsc2U7XG4iKTsKICAgICBPVVQoYywgbG9jcCwgInByb2Nlc3Nfc3RvcmUo
Y3R4LCAxKTtcbiIpOwpkaWZmIC0tZ2l0IGEvdGFyZ2V0L2hleGFnb24vb3BfaGVscGVyLmMgYi90
YXJnZXQvaGV4YWdvbi9vcF9oZWxwZXIuYwppbmRleCA5NDI1OTQxYzY5Li5mNjJkNjUxYTY1IDEw
MDY0NAotLS0gYS90YXJnZXQvaGV4YWdvbi9vcF9oZWxwZXIuYworKysgYi90YXJnZXQvaGV4YWdv
bi9vcF9oZWxwZXIuYwpAQCAtNDE1LDkgKzQxNSwxMCBAQCBpbnQzMl90IEhFTFBFUih2YWNzaF9w
cmVkKShDUFVIZXhhZ29uU3RhdGUgKmVudiwKICAgICByZXR1cm4gUGVWOwogfQogCi1zdGF0aWMg
dm9pZCBwcm9iZV9zdG9yZShDUFVIZXhhZ29uU3RhdGUgKmVudiwgaW50IHNsb3QsIGludCBtbXVf
aWR4KQorc3RhdGljIHZvaWQgcHJvYmVfc3RvcmUoQ1BVSGV4YWdvblN0YXRlICplbnYsIGludCBz
bG90LCBpbnQgbW11X2lkeCwKKyAgICAgICAgICAgICAgICAgICAgICAgIGJvb2wgaXNfcHJlZGlj
YXRlZCkKIHsKLSAgICBpZiAoIShlbnYtPnNsb3RfY2FuY2VsbGVkICYgKDEgPDwgc2xvdCkpKSB7
CisgICAgaWYgKCFpc19wcmVkaWNhdGVkIHx8ICEoZW52LT5zbG90X2NhbmNlbGxlZCAmICgxIDw8
IHNsb3QpKSkgewogICAgICAgICBzaXplMXVfdCB3aWR0aCA9IGVudi0+bWVtX2xvZ19zdG9yZXNb
c2xvdF0ud2lkdGg7CiAgICAgICAgIHRhcmdldF91bG9uZyB2YSA9IGVudi0+bWVtX2xvZ19zdG9y
ZXNbc2xvdF0udmE7CiAgICAgICAgIHVpbnRwdHJfdCByYSA9IEdFVFBDKCk7CkBAIC00MzcsOSAr
NDM4LDExIEBAIHZvaWQgSEVMUEVSKHByb2JlX25vc2h1Zl9sb2FkKShDUFVIZXhhZ29uU3RhdGUg
KmVudiwgdGFyZ2V0X3Vsb25nIHZhLAogfQogCiAvKiBDYWxsZWQgZHVyaW5nIHBhY2tldCBjb21t
aXQgd2hlbiB0aGVyZSBhcmUgdHdvIHNjYWxhciBzdG9yZXMgKi8KLXZvaWQgSEVMUEVSKHByb2Jl
X3BrdF9zY2FsYXJfc3RvcmVfczApKENQVUhleGFnb25TdGF0ZSAqZW52LCBpbnQgbW11X2lkeCkK
K3ZvaWQgSEVMUEVSKHByb2JlX3BrdF9zY2FsYXJfc3RvcmVfczApKENQVUhleGFnb25TdGF0ZSAq
ZW52LCBpbnQgYXJncykKIHsKLSAgICBwcm9iZV9zdG9yZShlbnYsIDAsIG1tdV9pZHgpOworICAg
IGludCBtbXVfaWR4ID0gYXJncyAmIDB4MzsKKyAgICBib29sIGlzX3ByZWRpY2F0ZWQgPSAoYXJn
cyA+PiAyKSAmIDE7CisgICAgcHJvYmVfc3RvcmUoZW52LCAwLCBtbXVfaWR4LCBpc19wcmVkaWNh
dGVkKTsKIH0KIAogdm9pZCBIRUxQRVIocHJvYmVfaHZ4X3N0b3JlcykoQ1BVSGV4YWdvblN0YXRl
ICplbnYsIGludCBtbXVfaWR4KQpAQCAtNDg5LDEyICs0OTIsMTQgQEAgdm9pZCBIRUxQRVIocHJv
YmVfcGt0X3NjYWxhcl9odnhfc3RvcmVzKShDUFVIZXhhZ29uU3RhdGUgKmVudiwgaW50IG1hc2ss
CiAgICAgYm9vbCBoYXNfc3QwICAgICAgICA9IChtYXNrID4+IDApICYgMTsKICAgICBib29sIGhh
c19zdDEgICAgICAgID0gKG1hc2sgPj4gMSkgJiAxOwogICAgIGJvb2wgaGFzX2h2eF9zdG9yZXMg
PSAobWFzayA+PiAyKSAmIDE7CisgICAgYm9vbCBzMF9pc19wcmVkICAgICA9IChtYXNrID4+IDMp
ICYgMTsKKyAgICBib29sIHMxX2lzX3ByZWQgICAgID0gKG1hc2sgPj4gNCkgJiAxOwogCiAgICAg
aWYgKGhhc19zdDApIHsKLSAgICAgICAgcHJvYmVfc3RvcmUoZW52LCAwLCBtbXVfaWR4KTsKKyAg
ICAgICAgcHJvYmVfc3RvcmUoZW52LCAwLCBtbXVfaWR4LCBzMF9pc19wcmVkKTsKICAgICB9CiAg
ICAgaWYgKGhhc19zdDEpIHsKLSAgICAgICAgcHJvYmVfc3RvcmUoZW52LCAxLCBtbXVfaWR4KTsK
KyAgICAgICAgcHJvYmVfc3RvcmUoZW52LCAxLCBtbXVfaWR4LCBzMV9pc19wcmVkKTsKICAgICB9
CiAgICAgaWYgKGhhc19odnhfc3RvcmVzKSB7CiAgICAgICAgIEhFTFBFUihwcm9iZV9odnhfc3Rv
cmVzKShlbnYsIG1tdV9pZHgpOwpAQCAtMTQ0NCwxMiArMTQ0OSw2IEBAIHZvaWQgSEVMUEVSKHZ3
aGlzdDEyOHFtKShDUFVIZXhhZ29uU3RhdGUgKmVudiwgaW50MzJfdCB1aVYpCiAgICAgfQogfQog
Ci12b2lkIGNhbmNlbF9zbG90KENQVUhleGFnb25TdGF0ZSAqZW52LCB1aW50MzJfdCBzbG90KQot
ewotICAgIEhFWF9ERUJVR19MT0coIlNsb3QgJWQgY2FuY2VsbGVkXG4iLCBzbG90KTsKLSAgICBl
bnYtPnNsb3RfY2FuY2VsbGVkIHw9ICgxIDw8IHNsb3QpOwotfQotCiAvKiBUaGVzZSBtYWNyb3Mg
Y2FuIGJlIHJlZmVyZW5jZWQgaW4gdGhlIGdlbmVyYXRlZCBoZWxwZXIgZnVuY3Rpb25zICovCiAj
ZGVmaW5lIHdhcm4oLi4uKSAvKiBOb3RoaW5nICovCiAjZGVmaW5lIGZhdGFsKC4uLikgZ19hc3Nl
cnRfbm90X3JlYWNoZWQoKTsKZGlmZiAtLWdpdCBhL3RhcmdldC9oZXhhZ29uL3RyYW5zbGF0ZS5j
IGIvdGFyZ2V0L2hleGFnb24vdHJhbnNsYXRlLmMKaW5kZXggNTNmZDkzNWRiNy4uNmVlODc4NDkx
MCAxMDA2NDQKLS0tIGEvdGFyZ2V0L2hleGFnb24vdHJhbnNsYXRlLmMKKysrIGIvdGFyZ2V0L2hl
eGFnb24vdHJhbnNsYXRlLmMKQEAgLTI0OCw3ICsyNDgsMTYgQEAgc3RhdGljIGJvb2wgY2hlY2tf
Zm9yX2F0dHJpYihQYWNrZXQgKnBrdCwgaW50IGF0dHJpYikKIAogc3RhdGljIGJvb2wgbmVlZF9z
bG90X2NhbmNlbGxlZChQYWNrZXQgKnBrdCkKIHsKLSAgICByZXR1cm4gY2hlY2tfZm9yX2F0dHJp
Yihwa3QsIEFfQ09OREVYRUMpOworICAgIC8qIFdlIG9ubHkgbmVlZCBzbG90X2NhbmNlbGxlZCBm
b3IgY29uZGl0aW9uYWwgc3RvcmUgYW5kIEhWWCBpbnN0cnVjdGlvbnMgKi8KKyAgICBmb3IgKGlu
dCBpID0gMDsgaSA8IHBrdC0+bnVtX2luc25zOyBpKyspIHsKKyAgICAgICAgdWludDE2X3Qgb3Bj
b2RlID0gcGt0LT5pbnNuW2ldLm9wY29kZTsKKyAgICAgICAgaWYgKEdFVF9BVFRSSUIob3Bjb2Rl
LCBBX0NPTkRFWEVDKSAmJgorICAgICAgICAgICAgKEdFVF9BVFRSSUIob3Bjb2RlLCBBX1NUT1JF
KSB8fAorICAgICAgICAgICAgIEdFVF9BVFRSSUIob3Bjb2RlLCBBX0NWSSkpKSB7CisgICAgICAg
ICAgICByZXR1cm4gdHJ1ZTsKKyAgICAgICAgfQorICAgIH0KKyAgICByZXR1cm4gZmFsc2U7CiB9
CiAKIHN0YXRpYyBib29sIG5lZWRfcHJlZF93cml0dGVuKFBhY2tldCAqcGt0KQpAQCAtODYwLDYg
Kzg2OSwxMiBAQCBzdGF0aWMgdm9pZCBnZW5fY29tbWl0X3BhY2tldChEaXNhc0NvbnRleHQgKmN0
eCkKICAgICAgICAgICAgIGlmIChoYXNfaHZ4X3N0b3JlKSB7CiAgICAgICAgICAgICAgICAgbWFz
ayB8PSAoMSA8PCAyKTsKICAgICAgICAgICAgIH0KKyAgICAgICAgICAgIGlmIChoYXNfc3RvcmVf
czAgJiYgc2xvdF9pc19wcmVkaWNhdGVkKHBrdCwgMCkpIHsKKyAgICAgICAgICAgICAgICBtYXNr
IHw9ICgxIDw8IDMpOworICAgICAgICAgICAgfQorICAgICAgICAgICAgaWYgKGhhc19zdG9yZV9z
MSAmJiBzbG90X2lzX3ByZWRpY2F0ZWQocGt0LCAxKSkgeworICAgICAgICAgICAgICAgIG1hc2sg
fD0gKDEgPDwgNCk7CisgICAgICAgICAgICB9CiAgICAgICAgICAgICBtYXNrX3RjZ3YgPSB0Y2df
Y29uc3RhbnRfdGwobWFzayk7CiAgICAgICAgICAgICBnZW5faGVscGVyX3Byb2JlX3BrdF9zY2Fs
YXJfaHZ4X3N0b3JlcyhjcHVfZW52LCBtYXNrX3RjZ3YsIG1lbV9pZHgpOwogICAgICAgICB9CkBA
IC04NjgsOCArODgzLDEyIEBAIHN0YXRpYyB2b2lkIGdlbl9jb21taXRfcGFja2V0KERpc2FzQ29u
dGV4dCAqY3R4KQogICAgICAgICAgKiBwcm9jZXNzX3N0b3JlX2xvZyB3aWxsIGV4ZWN1dGUgdGhl
IHNsb3QgMSBzdG9yZSBmaXJzdCwKICAgICAgICAgICogc28gd2Ugb25seSBoYXZlIHRvIHByb2Jl
IHRoZSBzdG9yZSBpbiBzbG90IDAKICAgICAgICAgICovCi0gICAgICAgIFRDR3YgbWVtX2lkeCA9
IHRjZ19jb25zdGFudF90bChjdHgtPm1lbV9pZHgpOwotICAgICAgICBnZW5faGVscGVyX3Byb2Jl
X3BrdF9zY2FsYXJfc3RvcmVfczAoY3B1X2VudiwgbWVtX2lkeCk7CisgICAgICAgIGludCBhcmdz
ID0gY3R4LT5tZW1faWR4OworICAgICAgICBpZiAoc2xvdF9pc19wcmVkaWNhdGVkKHBrdCwgMCkp
IHsKKyAgICAgICAgICAgIGFyZ3MgfD0gKDEgPDwgMik7CisgICAgICAgIH0KKyAgICAgICAgVENH
diBhcmdzX3RjZ3YgPSB0Y2dfY29uc3RhbnRfdGwoYXJncyk7CisgICAgICAgIGdlbl9oZWxwZXJf
cHJvYmVfcGt0X3NjYWxhcl9zdG9yZV9zMChjcHVfZW52LCBhcmdzX3RjZ3YpOwogICAgIH0KIAog
ICAgIHByb2Nlc3Nfc3RvcmVfbG9nKGN0eCk7CmRpZmYgLS1naXQgYS90YXJnZXQvaGV4YWdvbi9p
ZGVmLXBhcnNlci9pZGVmLXBhcnNlci5sZXggYi90YXJnZXQvaGV4YWdvbi9pZGVmLXBhcnNlci9p
ZGVmLXBhcnNlci5sZXgKaW5kZXggZmY4N2EwMmMzYS4uMTFhMzI3YzI1OSAxMDA2NDQKLS0tIGEv
dGFyZ2V0L2hleGFnb24vaWRlZi1wYXJzZXIvaWRlZi1wYXJzZXIubGV4CisrKyBiL3RhcmdldC9o
ZXhhZ29uL2lkZWYtcGFyc2VyL2lkZWYtcGFyc2VyLmxleApAQCAtNSw3ICs1LDcgQEAKIAogJXsK
IC8qCi0gKiAgQ29weXJpZ2h0KGMpIDIwMTktMjAyMiByZXYubmcgTGFicyBTcmwuIEFsbCBSaWdo
dHMgUmVzZXJ2ZWQuCisgKiAgQ29weXJpZ2h0KGMpIDIwMTktMjAyMyByZXYubmcgTGFicyBTcmwu
IEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAgKgogICogIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3
YXJlOyB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5CiAgKiAgaXQgdW5kZXIg
dGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQg
YnkKQEAgLTMxOSw3ICszMTksNyBAQCBTVFJJTkdfTElUICAgICAgICAgICAgICAgXCIoXFwufFte
IlxcXSkqXCIKICJmR0VUX0xQQ0ZHIiAgICAgICAgICAgICB8CiAiVVNSLkxQQ0ZHIiAgICAgICAg
ICAgICAgeyByZXR1cm4gTFBDRkc7IH0KICJMT0FEX0NBTkNFTChFQSkiICAgICAgICB7IHJldHVy
biBMT0FEX0NBTkNFTDsgfQotIlNUT1JFX0NBTkNFTChFQSkiICAgICAgIHwKKyJTVE9SRV9DQU5D
RUwoRUEpIiAgICAgICB7IHJldHVybiBTVE9SRV9DQU5DRUw7IH0KICJDQU5DRUwiICAgICAgICAg
ICAgICAgICB7IHJldHVybiBDQU5DRUw7IH0KICJOIntMT1dFUl9JRH0iTiIgICAgICAgICB7IHl5
bHZhbC0+cnZhbHVlLnR5cGUgPSBSRUdJU1RFUl9BUkc7CiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICB5eWx2YWwtPnJ2YWx1ZS5yZWcudHlwZSA9IERPVE5FVzsKZGlmZiAtLWdpdCBhL3Rhcmdl
dC9oZXhhZ29uL2lkZWYtcGFyc2VyL2lkZWYtcGFyc2VyLnkgYi90YXJnZXQvaGV4YWdvbi9pZGVm
LXBhcnNlci9pZGVmLXBhcnNlci55CmluZGV4IGMxNGNiMzk1MDAuLmMwYmFmMTZlYzQgMTAwNjQ0
Ci0tLSBhL3RhcmdldC9oZXhhZ29uL2lkZWYtcGFyc2VyL2lkZWYtcGFyc2VyLnkKKysrIGIvdGFy
Z2V0L2hleGFnb24vaWRlZi1wYXJzZXIvaWRlZi1wYXJzZXIueQpAQCAtMSw2ICsxLDYgQEAKICV7
CiAvKgotICogIENvcHlyaWdodChjKSAyMDE5LTIwMjIgcmV2Lm5nIExhYnMgU3JsLiBBbGwgUmln
aHRzIFJlc2VydmVkLgorICogIENvcHlyaWdodChjKSAyMDE5LTIwMjMgcmV2Lm5nIExhYnMgU3Js
LiBBbGwgUmlnaHRzIFJlc2VydmVkLgogICoKICAqICBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0
ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCwKICAqICBidXQgV0lUSE9VVCBB
TlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZgpAQCAtNTMs
NyArNTMsNyBAQAogJXRva2VuIEFCUyBDUk9VTkQgUk9VTkQgQ0lSQ0FERCBDT1VOVE9ORVMgSU5D
IERFQyBBTkRBIE9SQSBYT1JBIFBMVVNQTFVTIEFTTAogJXRva2VuIEFTUiBMU1IgRVEgTkVRIExU
RSBHVEUgTUlOIE1BWCBBTkRMIEZPUiBJQ0lSQyBJRiBNVU4gRlNDUiBGQ0hLIFNYVAogJXRva2Vu
IFpYVCBDT05TVEVYVCBMT0NOVCBCUkVWIFNJR04gTE9BRCBTVE9SRSBQQyBOUEMgTFBDRkcKLSV0
b2tlbiBMT0FEX0NBTkNFTCBDQU5DRUwgSURFTlRJVFkgUEFSVDEgUk9UTCBJTlNCSVRTIFNFVEJJ
VFMgRVhUUkFOR0UKKyV0b2tlbiBMT0FEX0NBTkNFTCBTVE9SRV9DQU5DRUwgQ0FOQ0VMIElERU5U
SVRZIFBBUlQxIFJPVEwgSU5TQklUUyBTRVRCSVRTIEVYVFJBTkdFCiAldG9rZW4gQ0FTVDRfOFUg
RkFJTCBDQVJSWV9GUk9NX0FERCBBRERTQVQ2NCBMU0JORVcKICV0b2tlbiBUWVBFX1NJWkVfVCBU
WVBFX0lOVCBUWVBFX1NJR05FRCBUWVBFX1VOU0lHTkVEIFRZUEVfTE9ORwogCkBAIC00MzEsMTAg
KzQzMSwxMSBAQCBjYW5jZWxfc3RhdGVtZW50IDogTE9BRF9DQU5DRUwKICAgICAgICAgICAgICAg
ICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGdlbl9sb2FkX2NhbmNlbChjLCAmQDEpOwog
ICAgICAgICAgICAgICAgICAgIH0KLSAgICAgICAgICAgICAgICAgfCBDQU5DRUwKKyAgICAgICAg
ICAgICAgICAgfCBTVE9SRV9DQU5DRUwKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAg
ICAgICAgICAgICAgIGdlbl9jYW5jZWwoYywgJkAxKTsKICAgICAgICAgICAgICAgICAgICB9Cisg
ICAgICAgICAgICAgICAgIHwgQ0FOQ0VMCiAgICAgICAgICAgICAgICAgIDsKIAogaWZfc3RhdGVt
ZW50IDogaWZfc3RtdAotLSAKMi4xNy4xCgo=

