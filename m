Return-Path: <qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org>
X-Original-To: lists+qemu-devel@lfdr.de
Delivered-To: lists+qemu-devel@lfdr.de
Received: from lists.gnu.org (lists.gnu.org [209.51.188.17])
	by mail.lfdr.de (Postfix) with ESMTPS id 2798A6EAF84
	for <lists+qemu-devel@lfdr.de>; Fri, 21 Apr 2023 18:51:22 +0200 (CEST)
Received: from localhost ([::1] helo=lists1p.gnu.org)
	by lists.gnu.org with esmtp (Exim 4.90_1)
	(envelope-from <qemu-devel-bounces@nongnu.org>)
	id 1pptx5-0005tK-BA; Fri, 21 Apr 2023 12:49:39 -0400
Received: from eggs.gnu.org ([2001:470:142:3::10])
 by lists.gnu.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256)
 (Exim 4.90_1) (envelope-from <tsimpson@qualcomm.com>)
 id 1pptx1-0005ry-80
 for qemu-devel@nongnu.org; Fri, 21 Apr 2023 12:49:35 -0400
Received: from mx0b-0031df01.pphosted.com ([205.220.180.131])
 by eggs.gnu.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256)
 (Exim 4.90_1) (envelope-from <tsimpson@qualcomm.com>)
 id 1pptwy-00044D-Ny
 for qemu-devel@nongnu.org; Fri, 21 Apr 2023 12:49:34 -0400
Received: from pps.filterd (m0279870.ppops.net [127.0.0.1])
 by mx0a-0031df01.pphosted.com (8.17.1.19/8.17.1.19) with ESMTP id
 33LEq1Tv004116; Fri, 21 Apr 2023 16:49:29 GMT
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=quicinc.com;
 h=from : to : cc :
 subject : date : message-id : in-reply-to : references : mime-version :
 content-type : content-transfer-encoding; s=qcppdkim1;
 bh=RZoM6gjNQ8qqLwdBWoCT1Eczc/BszQVSDXPoNeXK/UA=;
 b=gd4iVtR+1vU2S8dFqnSTe5gHValFviBTY4U0dSZhQ/h3IkxAjZafO8sqid0hTxxkTYkm
 xyEMNUd0ef+xAHqgPczf9Elnq/gZwuV5o5yI9SEHtr2jP8j+39Q+NumJlwS+GSjzIOKl
 AJtgJfpwoQhXfNNTn7vRpJNuzAUDHPWrKX1/3lcJmDgro0kJ86OoyZh/P8eCKUE3pnem
 vygnIKwL43GskhWLxjlk+xVKN5nwBVbLgDxliF/4z5YrnRycNmSUTWCFmfZKVoZKa90v
 N2LZAeie9tr4Zm9ehxsNGjzsR41DzKapkboclUSOvkbK+QEZbj+PYw82dFgxrDHl5FcY 8w== 
Received: from nalasppmta04.qualcomm.com (Global_NAT1.qualcomm.com
 [129.46.96.20])
 by mx0a-0031df01.pphosted.com (PPS) with ESMTPS id 3q3dcmj6cj-1
 (version=TLSv1.2 cipher=ECDHE-RSA-AES256-GCM-SHA384 bits=256 verify=NOT);
 Fri, 21 Apr 2023 16:49:28 +0000
Received: from pps.filterd (NALASPPMTA04.qualcomm.com [127.0.0.1])
 by NALASPPMTA04.qualcomm.com (8.17.1.5/8.17.1.5) with ESMTP id 33LGnRLU006554; 
 Fri, 21 Apr 2023 16:49:27 GMT
Received: from pps.reinject (localhost [127.0.0.1])
 by NALASPPMTA04.qualcomm.com (PPS) with ESMTPS id 3q3ncvu2t0-1
 (version=TLSv1.2 cipher=ECDHE-RSA-AES256-GCM-SHA384 bits=256 verify=NOT);
 Fri, 21 Apr 2023 16:49:27 +0000
Received: from NALASPPMTA04.qualcomm.com (NALASPPMTA04.qualcomm.com
 [127.0.0.1])
 by pps.reinject (8.17.1.5/8.17.1.5) with ESMTP id 33LGlJdo003204;
 Fri, 21 Apr 2023 16:49:27 GMT
Received: from hu-devc-sd-u20-a-1.qualcomm.com (hu-tsimpson-lv.qualcomm.com
 [10.47.204.221])
 by NALASPPMTA04.qualcomm.com (PPS) with ESMTPS id 33LGnQed006510
 (version=TLSv1.2 cipher=ECDHE-RSA-AES256-GCM-SHA384 bits=256 verify=NOT);
 Fri, 21 Apr 2023 16:49:27 +0000
Received: by hu-devc-sd-u20-a-1.qualcomm.com (Postfix, from userid 47164)
 id 28A07694; Fri, 21 Apr 2023 09:49:26 -0700 (PDT)
From: Taylor Simpson <tsimpson@quicinc.com>
To: qemu-devel@nongnu.org
Cc: tsimpson@quicinc.com, richard.henderson@linaro.org, philmd@linaro.org,
 peter.maydell@linaro.org, bcain@quicinc.com, quic_mathbern@quicinc.com,
 stefanha@redhat.com, ale@rev.ng, anjo@rev.ng, quic_mliebel@quicinc.com
Subject: [PULL v2 07/10] Hexagon (target/hexagon) Updates to USR should use
 get_result_gpr
Date: Fri, 21 Apr 2023 09:49:19 -0700
Message-Id: <20230421164922.3608183-8-tsimpson@quicinc.com>
X-Mailer: git-send-email 2.25.1
In-Reply-To: <20230421164922.3608183-1-tsimpson@quicinc.com>
References: <20230421164922.3608183-1-tsimpson@quicinc.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
X-QCInternal: smtphost
X-QCInternal: smtphost
X-Proofpoint-Virus-Version: vendor=nai engine=6200 definitions=5800
 signatures=585085
X-Proofpoint-Virus-Version: vendor=nai engine=6200 definitions=5800
 signatures=585085
X-Proofpoint-ORIG-GUID: DGb6APBQrwBcEEW2WRtc7F16p8s4Os-y
X-Proofpoint-GUID: DGb6APBQrwBcEEW2WRtc7F16p8s4Os-y
X-Proofpoint-Virus-Version: vendor=baseguard
 engine=ICAP:2.0.254,Aquarius:18.0.942,Hydra:6.0.573,FMLib:17.11.170.22
 definitions=2023-04-21_08,2023-04-21_01,2023-02-09_01
X-Proofpoint-Spam-Details: rule=outbound_notspam policy=outbound score=0
 priorityscore=1501
 lowpriorityscore=0 adultscore=0 phishscore=0 spamscore=0 impostorscore=0
 mlxlogscore=999 malwarescore=0 suspectscore=0 clxscore=1015 mlxscore=0
 bulkscore=0 classifier=spam adjust=0 reason=mlx scancount=1
 engine=8.12.0-2303200000 definitions=main-2304210147
Received-SPF: pass client-ip=205.220.180.131;
 envelope-from=tsimpson@qualcomm.com; helo=mx0b-0031df01.pphosted.com
X-Spam_score_int: -17
X-Spam_score: -1.8
X-Spam_bar: -
X-Spam_report: (-1.8 / 5.0 requ) BAYES_00=-1.9, DKIM_SIGNED=0.1,
 DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1, HEADER_FROM_DIFFERENT_DOMAINS=0.25,
 SPF_HELO_NONE=0.001, SPF_PASS=-0.001,
 T_SCC_BODY_TEXT_LINE=-0.01 autolearn=no autolearn_force=no
X-Spam_action: no action
X-BeenThere: qemu-devel@nongnu.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: <qemu-devel.nongnu.org>
List-Unsubscribe: <https://lists.nongnu.org/mailman/options/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=unsubscribe>
List-Archive: <https://lists.nongnu.org/archive/html/qemu-devel>
List-Post: <mailto:qemu-devel@nongnu.org>
List-Help: <mailto:qemu-devel-request@nongnu.org?subject=help>
List-Subscribe: <https://lists.nongnu.org/mailman/listinfo/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=subscribe>
Errors-To: qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org
Sender: qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org

U2lnbmVkLW9mZi1ieTogVGF5bG9yIFNpbXBzb24gPHRzaW1wc29uQHF1aWNpbmMuY29tPgpSZXZp
ZXdlZC1ieTogQW50b24gSm9oYW5zc29uIDxhbmpvQHJldi5uZz4KTWVzc2FnZS1JZDogPDIwMjMw
NDA1MTY0MjExLjMwMDE1LTMtdHNpbXBzb25AcXVpY2luYy5jb20+Ci0tLQogdGFyZ2V0L2hleGFn
b24vZ2VuX3RjZy5oICAgICAgICAgICAgICAgICAgICB8ICA0ICstCiB0YXJnZXQvaGV4YWdvbi9n
ZW5wdHIuaCAgICAgICAgICAgICAgICAgICAgIHwgMTAgKystLS0KIHRhcmdldC9oZXhhZ29uL21h
Y3Jvcy5oICAgICAgICAgICAgICAgICAgICAgfCAgOCAtLS0tCiB0YXJnZXQvaGV4YWdvbi9nZW5w
dHIuYyAgICAgICAgICAgICAgICAgICAgIHwgNDkgKysrKysrKysrKy0tLS0tLS0tLS0tCiB0YXJn
ZXQvaGV4YWdvbi9pZGVmLXBhcnNlci9wYXJzZXItaGVscGVycy5jIHwgIDUgKystCiB0YXJnZXQv
aGV4YWdvbi9pZGVmLXBhcnNlci9pZGVmLXBhcnNlci55ICAgIHwgIDIgKy0KIDYgZmlsZXMgY2hh
bmdlZCwgMzQgaW5zZXJ0aW9ucygrKSwgNDQgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvdGFy
Z2V0L2hleGFnb24vZ2VuX3RjZy5oIGIvdGFyZ2V0L2hleGFnb24vZ2VuX3RjZy5oCmluZGV4IDQ1
ZjkyYWRmNmMuLmIxODlmNzI1ZDcgMTAwNjQ0Ci0tLSBhL3RhcmdldC9oZXhhZ29uL2dlbl90Y2cu
aAorKysgYi90YXJnZXQvaGV4YWdvbi9nZW5fdGNnLmgKQEAgLTEwMzksMTEgKzEwMzksMTEgQEAK
IAogLyogcjAgPSBhc3IocjEsIHIyKTpzYXQgKi8KICNkZWZpbmUgZkdFTl9UQ0dfUzJfYXNyX3Jf
cl9zYXQoU0hPUlRDT0RFKSBcCi0gICAgZ2VuX2Fzcl9yX3Jfc2F0KFJkViwgUnNWLCBSdFYpCisg
ICAgZ2VuX2Fzcl9yX3Jfc2F0KGN0eCwgUmRWLCBSc1YsIFJ0VikKIAogLyogcjAgPSBhc2wocjEs
IHIyKTpzYXQgKi8KICNkZWZpbmUgZkdFTl9UQ0dfUzJfYXNsX3Jfcl9zYXQoU0hPUlRDT0RFKSBc
Ci0gICAgZ2VuX2FzbF9yX3Jfc2F0KFJkViwgUnNWLCBSdFYpCisgICAgZ2VuX2FzbF9yX3Jfc2F0
KGN0eCwgUmRWLCBSc1YsIFJ0VikKIAogI2RlZmluZSBmR0VOX1RDR19TTDJfanVtcHIzMShTSE9S
VENPREUpIFwKICAgICBnZW5fanVtcHIoY3R4LCBoZXhfZ3ByW0hFWF9SRUdfTFJdKQpkaWZmIC0t
Z2l0IGEvdGFyZ2V0L2hleGFnb24vZ2VucHRyLmggYi90YXJnZXQvaGV4YWdvbi9nZW5wdHIuaApp
bmRleCA1OTFiMDU5Njk4Li43NmU0OTdhYTQ4IDEwMDY0NAotLS0gYS90YXJnZXQvaGV4YWdvbi9n
ZW5wdHIuaAorKysgYi90YXJnZXQvaGV4YWdvbi9nZW5wdHIuaApAQCAtMSw1ICsxLDUgQEAKIC8q
Ci0gKiAgQ29weXJpZ2h0KGMpIDIwMTktMjAyMSBRdWFsY29tbSBJbm5vdmF0aW9uIENlbnRlciwg
SW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLgorICogIENvcHlyaWdodChjKSAyMDE5LTIwMjMgUXVh
bGNvbW0gSW5ub3ZhdGlvbiBDZW50ZXIsIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICAqCiAg
KiAgVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0
IGFuZC9vciBtb2RpZnkKICAqICBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFs
IFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieQpAQCAtMzcsOSArMzcsOSBAQCBUQ0d2IGdl
bl9yZWFkX3JlZyhUQ0d2IHJlc3VsdCwgaW50IG51bSk7CiBUQ0d2IGdlbl9yZWFkX3ByZWcoVENH
diBwcmVkLCB1aW50OF90IG51bSk7CiB2b2lkIGdlbl9sb2dfcmVnX3dyaXRlKGludCBybnVtLCBU
Q0d2IHZhbCk7CiB2b2lkIGdlbl9sb2dfcHJlZF93cml0ZShEaXNhc0NvbnRleHQgKmN0eCwgaW50
IHBudW0sIFRDR3YgdmFsKTsKLXZvaWQgZ2VuX3NldF91c3JfZmllbGQoaW50IGZpZWxkLCBUQ0d2
IHZhbCk7Ci12b2lkIGdlbl9zZXRfdXNyX2ZpZWxkaShpbnQgZmllbGQsIGludCB4KTsKLXZvaWQg
Z2VuX3NldF91c3JfZmllbGRfaWYoaW50IGZpZWxkLCBUQ0d2IHZhbCk7Cit2b2lkIGdlbl9zZXRf
dXNyX2ZpZWxkKERpc2FzQ29udGV4dCAqY3R4LCBpbnQgZmllbGQsIFRDR3YgdmFsKTsKK3ZvaWQg
Z2VuX3NldF91c3JfZmllbGRpKERpc2FzQ29udGV4dCAqY3R4LCBpbnQgZmllbGQsIGludCB4KTsK
K3ZvaWQgZ2VuX3NldF91c3JfZmllbGRfaWYoRGlzYXNDb250ZXh0ICpjdHgsIGludCBmaWVsZCwg
VENHdiB2YWwpOwogdm9pZCBnZW5fc2F0X2kzMihUQ0d2IGRlc3QsIFRDR3Ygc291cmNlLCBpbnQg
d2lkdGgpOwogdm9pZCBnZW5fc2F0X2kzMl9vdmZsKFRDR3Ygb3ZmbCwgVENHdiBkZXN0LCBUQ0d2
IHNvdXJjZSwgaW50IHdpZHRoKTsKIHZvaWQgZ2VuX3NhdHVfaTMyKFRDR3YgZGVzdCwgVENHdiBz
b3VyY2UsIGludCB3aWR0aCk7CkBAIC00OCw3ICs0OCw3IEBAIHZvaWQgZ2VuX3NhdF9pNjQoVENH
dl9pNjQgZGVzdCwgVENHdl9pNjQgc291cmNlLCBpbnQgd2lkdGgpOwogdm9pZCBnZW5fc2F0X2k2
NF9vdmZsKFRDR3Ygb3ZmbCwgVENHdl9pNjQgZGVzdCwgVENHdl9pNjQgc291cmNlLCBpbnQgd2lk
dGgpOwogdm9pZCBnZW5fc2F0dV9pNjQoVENHdl9pNjQgZGVzdCwgVENHdl9pNjQgc291cmNlLCBp
bnQgd2lkdGgpOwogdm9pZCBnZW5fc2F0dV9pNjRfb3ZmbChUQ0d2IG92ZmwsIFRDR3ZfaTY0IGRl
c3QsIFRDR3ZfaTY0IHNvdXJjZSwgaW50IHdpZHRoKTsKLXZvaWQgZ2VuX2FkZF9zYXRfaTY0KFRD
R3ZfaTY0IHJldCwgVENHdl9pNjQgYSwgVENHdl9pNjQgYik7Cit2b2lkIGdlbl9hZGRfc2F0X2k2
NChEaXNhc0NvbnRleHQgKmN0eCwgVENHdl9pNjQgcmV0LCBUQ0d2X2k2NCBhLCBUQ0d2X2k2NCBi
KTsKIFRDR3YgZ2VuXzhiaXRzb2YoVENHdiByZXN1bHQsIFRDR3YgdmFsdWUpOwogdm9pZCBnZW5f
c2V0X2J5dGVfaTY0KGludCBOLCBUQ0d2X2k2NCByZXN1bHQsIFRDR3Ygc3JjKTsKIFRDR3YgZ2Vu
X2dldF9ieXRlKFRDR3YgcmVzdWx0LCBpbnQgTiwgVENHdiBzcmMsIGJvb2wgc2lnbik7CmRpZmYg
LS1naXQgYS90YXJnZXQvaGV4YWdvbi9tYWNyb3MuaCBiL3RhcmdldC9oZXhhZ29uL21hY3Jvcy5o
CmluZGV4IGY1ZjMxYjY5MzAuLjIxYjViNWEwNmMgMTAwNjQ0Ci0tLSBhL3RhcmdldC9oZXhhZ29u
L21hY3Jvcy5oCisrKyBiL3RhcmdldC9oZXhhZ29uL21hY3Jvcy5oCkBAIC0zOCwxNCArMzgsNiBA
QAogI2RlZmluZSBUWVBFX0lOVChYKSAgICAgICAgICBfX2J1aWx0aW5fdHlwZXNfY29tcGF0aWJs
ZV9wKHR5cGVvZihYKSwgaW50KQogI2RlZmluZSBUWVBFX1RDR1YoWCkgICAgICAgICBfX2J1aWx0
aW5fdHlwZXNfY29tcGF0aWJsZV9wKHR5cGVvZihYKSwgVENHdikKICNkZWZpbmUgVFlQRV9UQ0dW
X0k2NChYKSAgICAgX19idWlsdGluX3R5cGVzX2NvbXBhdGlibGVfcCh0eXBlb2YoWCksIFRDR3Zf
aTY0KQotCi0jZGVmaW5lIFNFVF9VU1JfRklFTERfRlVOQyhYKSBcCi0gICAgX19idWlsdGluX2No
b29zZV9leHByKFRZUEVfSU5UKFgpLCBcCi0gICAgICAgIGdlbl9zZXRfdXNyX2ZpZWxkaSwgXAot
ICAgICAgICBfX2J1aWx0aW5fY2hvb3NlX2V4cHIoVFlQRV9UQ0dWKFgpLCBcCi0gICAgICAgICAg
ICBnZW5fc2V0X3Vzcl9maWVsZCwgKHZvaWQpMCkpCi0jZGVmaW5lIFNFVF9VU1JfRklFTEQoRklF
TEQsIFZBTCkgXAotICAgIFNFVF9VU1JfRklFTERfRlVOQyhWQUwpKEZJRUxELCBWQUwpCiAjZWxz
ZQogI2RlZmluZSBHRVRfVVNSX0ZJRUxEKEZJRUxEKSBcCiAgICAgZkVYVFJBQ1RVX0JJVFMoZW52
LT5ncHJbSEVYX1JFR19VU1JdLCByZWdfZmllbGRfaW5mb1tGSUVMRF0ud2lkdGgsIFwKZGlmZiAt
LWdpdCBhL3RhcmdldC9oZXhhZ29uL2dlbnB0ci5jIGIvdGFyZ2V0L2hleGFnb24vZ2VucHRyLmMK
aW5kZXggYmIyNzRkNGE3MS4uNTAyYzg1YWUzNSAxMDA2NDQKLS0tIGEvdGFyZ2V0L2hleGFnb24v
Z2VucHRyLmMKKysrIGIvdGFyZ2V0L2hleGFnb24vZ2VucHRyLmMKQEAgLTQ4NiwzMCArNDg2LDI3
IEBAIHN0YXRpYyB2b2lkIGdlbl93cml0ZV9uZXdfcGNfcGNyZWwoRGlzYXNDb250ZXh0ICpjdHgs
IGludCBwY19vZmYsCiAgICAgfQogfQogCi12b2lkIGdlbl9zZXRfdXNyX2ZpZWxkKGludCBmaWVs
ZCwgVENHdiB2YWwpCit2b2lkIGdlbl9zZXRfdXNyX2ZpZWxkKERpc2FzQ29udGV4dCAqY3R4LCBp
bnQgZmllbGQsIFRDR3YgdmFsKQogewotICAgIHRjZ19nZW5fZGVwb3NpdF90bChoZXhfbmV3X3Zh
bHVlW0hFWF9SRUdfVVNSXSwgaGV4X25ld192YWx1ZVtIRVhfUkVHX1VTUl0sCi0gICAgICAgICAg
ICAgICAgICAgICAgIHZhbCwKKyAgICBUQ0d2IHVzciA9IGdldF9yZXN1bHRfZ3ByKGN0eCwgSEVY
X1JFR19VU1IpOworICAgIHRjZ19nZW5fZGVwb3NpdF90bCh1c3IsIHVzciwgdmFsLAogICAgICAg
ICAgICAgICAgICAgICAgICByZWdfZmllbGRfaW5mb1tmaWVsZF0ub2Zmc2V0LAogICAgICAgICAg
ICAgICAgICAgICAgICByZWdfZmllbGRfaW5mb1tmaWVsZF0ud2lkdGgpOwogfQogCi12b2lkIGdl
bl9zZXRfdXNyX2ZpZWxkaShpbnQgZmllbGQsIGludCB4KQordm9pZCBnZW5fc2V0X3Vzcl9maWVs
ZGkoRGlzYXNDb250ZXh0ICpjdHgsIGludCBmaWVsZCwgaW50IHgpCiB7CiAgICAgaWYgKHJlZ19m
aWVsZF9pbmZvW2ZpZWxkXS53aWR0aCA9PSAxKSB7CisgICAgICAgIFRDR3YgdXNyID0gZ2V0X3Jl
c3VsdF9ncHIoY3R4LCBIRVhfUkVHX1VTUik7CiAgICAgICAgIHRhcmdldF91bG9uZyBiaXQgPSAx
IDw8IHJlZ19maWVsZF9pbmZvW2ZpZWxkXS5vZmZzZXQ7CiAgICAgICAgIGlmICgoeCAmIDEpID09
IDEpIHsKLSAgICAgICAgICAgIHRjZ19nZW5fb3JpX3RsKGhleF9uZXdfdmFsdWVbSEVYX1JFR19V
U1JdLAotICAgICAgICAgICAgICAgICAgICAgICAgICAgaGV4X25ld192YWx1ZVtIRVhfUkVHX1VT
Ul0sCi0gICAgICAgICAgICAgICAgICAgICAgICAgICBiaXQpOworICAgICAgICAgICAgdGNnX2dl
bl9vcmlfdGwodXNyLCB1c3IsIGJpdCk7CiAgICAgICAgIH0gZWxzZSB7Ci0gICAgICAgICAgICB0
Y2dfZ2VuX2FuZGlfdGwoaGV4X25ld192YWx1ZVtIRVhfUkVHX1VTUl0sCi0gICAgICAgICAgICAg
ICAgICAgICAgICAgICAgaGV4X25ld192YWx1ZVtIRVhfUkVHX1VTUl0sCi0gICAgICAgICAgICAg
ICAgICAgICAgICAgICAgfmJpdCk7CisgICAgICAgICAgICB0Y2dfZ2VuX2FuZGlfdGwodXNyLCB1
c3IsIH5iaXQpOwogICAgICAgICB9CiAgICAgfSBlbHNlIHsKICAgICAgICAgVENHdiB2YWwgPSB0
Y2dfY29uc3RhbnRfdGwoeCk7Ci0gICAgICAgIGdlbl9zZXRfdXNyX2ZpZWxkKGZpZWxkLCB2YWwp
OworICAgICAgICBnZW5fc2V0X3Vzcl9maWVsZChjdHgsIGZpZWxkLCB2YWwpOwogICAgIH0KIH0K
IApAQCAtNzU0LDcgKzc1MSw3IEBAIHN0YXRpYyB2b2lkIGdlbl9lbmRsb29wMChEaXNhc0NvbnRl
eHQgKmN0eCkKICAgICB0Y2dfZ2VuX2JyY29uZGlfdGwoVENHX0NPTkRfRVEsIGxwY2ZnLCAwLCBs
YWJlbDIpOwogICAgIHsKICAgICAgICAgdGNnX2dlbl9zdWJpX3RsKGxwY2ZnLCBscGNmZywgMSk7
Ci0gICAgICAgIFNFVF9VU1JfRklFTEQoVVNSX0xQQ0ZHLCBscGNmZyk7CisgICAgICAgIGdlbl9z
ZXRfdXNyX2ZpZWxkKGN0eCwgVVNSX0xQQ0ZHLCBscGNmZyk7CiAgICAgfQogICAgIGdlbl9zZXRf
bGFiZWwobGFiZWwyKTsKIApAQCAtODI5LDcgKzgyNiw3IEBAIHN0YXRpYyB2b2lkIGdlbl9lbmRs
b29wMDEoRGlzYXNDb250ZXh0ICpjdHgpCiAgICAgdGNnX2dlbl9icmNvbmRpX3RsKFRDR19DT05E
X0VRLCBscGNmZywgMCwgbGFiZWwyKTsKICAgICB7CiAgICAgICAgIHRjZ19nZW5fc3ViaV90bChs
cGNmZywgbHBjZmcsIDEpOwotICAgICAgICBTRVRfVVNSX0ZJRUxEKFVTUl9MUENGRywgbHBjZmcp
OworICAgICAgICBnZW5fc2V0X3Vzcl9maWVsZChjdHgsIFVTUl9MUENGRywgbHBjZmcpOwogICAg
IH0KICAgICBnZW5fc2V0X2xhYmVsKGxhYmVsMik7CiAKQEAgLTg3OCw4ICs4NzUsOSBAQCBzdGF0
aWMgdm9pZCBnZW5fY21waV9qdW1wbnYoRGlzYXNDb250ZXh0ICpjdHgsCiB9CiAKIC8qIFNoaWZ0
IGxlZnQgd2l0aCBzYXR1cmF0aW9uICovCi1zdGF0aWMgdm9pZCBnZW5fc2hsX3NhdChUQ0d2IGRz
dCwgVENHdiBzcmMsIFRDR3Ygc2hpZnRfYW10KQorc3RhdGljIHZvaWQgZ2VuX3NobF9zYXQoRGlz
YXNDb250ZXh0ICpjdHgsIFRDR3YgZHN0LCBUQ0d2IHNyYywgVENHdiBzaGlmdF9hbXQpCiB7Cisg
ICAgVENHdiB1c3IgPSBnZXRfcmVzdWx0X2dwcihjdHgsIEhFWF9SRUdfVVNSKTsKICAgICBUQ0d2
IHNoMzIgPSB0Y2dfdGVtcF9uZXcoKTsKICAgICBUQ0d2IGRzdF9zYXIgPSB0Y2dfdGVtcF9uZXco
KTsKICAgICBUQ0d2IG92ZiA9IHRjZ190ZW1wX25ldygpOwpAQCAtOTExLDcgKzkwOSw3IEBAIHN0
YXRpYyB2b2lkIGdlbl9zaGxfc2F0KFRDR3YgZHN0LCBUQ0d2IHNyYywgVENHdiBzaGlmdF9hbXQp
CiAKICAgICB0Y2dfZ2VuX3NldGNvbmRfdGwoVENHX0NPTkRfTkUsIG92ZiwgZHN0X3Nhciwgc3Jj
KTsKICAgICB0Y2dfZ2VuX3NobGlfdGwob3ZmLCBvdmYsIHJlZ19maWVsZF9pbmZvW1VTUl9PVkZd
Lm9mZnNldCk7Ci0gICAgdGNnX2dlbl9vcl90bChoZXhfbmV3X3ZhbHVlW0hFWF9SRUdfVVNSXSwg
aGV4X25ld192YWx1ZVtIRVhfUkVHX1VTUl0sIG92Zik7CisgICAgdGNnX2dlbl9vcl90bCh1c3Is
IHVzciwgb3ZmKTsKIAogICAgIHRjZ19nZW5fbW92Y29uZF90bChUQ0dfQ09ORF9FUSwgZHN0LCBk
c3Rfc2FyLCBzcmMsIGRzdCwgc2F0dmFsKTsKIH0KQEAgLTkyOCw3ICs5MjYsNyBAQCBzdGF0aWMg
dm9pZCBnZW5fc2FyKFRDR3YgZHN0LCBUQ0d2IHNyYywgVENHdiBzaGlmdF9hbXQpCiB9CiAKIC8q
IEJpZGlyZWN0aW9uYWwgc2hpZnQgcmlnaHQgd2l0aCBzYXR1cmF0aW9uICovCi1zdGF0aWMgdm9p
ZCBnZW5fYXNyX3Jfcl9zYXQoVENHdiBSZFYsIFRDR3YgUnNWLCBUQ0d2IFJ0VikKK3N0YXRpYyB2
b2lkIGdlbl9hc3Jfcl9yX3NhdChEaXNhc0NvbnRleHQgKmN0eCwgVENHdiBSZFYsIFRDR3YgUnNW
LCBUQ0d2IFJ0VikKIHsKICAgICBUQ0d2IHNoaWZ0X2FtdCA9IHRjZ190ZW1wX25ldygpOwogICAg
IFRDR0xhYmVsICpwb3NpdGl2ZSA9IGdlbl9uZXdfbGFiZWwoKTsKQEAgLTkzOSw3ICs5MzcsNyBA
QCBzdGF0aWMgdm9pZCBnZW5fYXNyX3Jfcl9zYXQoVENHdiBSZFYsIFRDR3YgUnNWLCBUQ0d2IFJ0
VikKIAogICAgIC8qIE5lZ2F0aXZlIHNoaWZ0IGFtb3VudCA9PiBzaGlmdCBsZWZ0ICovCiAgICAg
dGNnX2dlbl9uZWdfdGwoc2hpZnRfYW10LCBzaGlmdF9hbXQpOwotICAgIGdlbl9zaGxfc2F0KFJk
ViwgUnNWLCBzaGlmdF9hbXQpOworICAgIGdlbl9zaGxfc2F0KGN0eCwgUmRWLCBSc1YsIHNoaWZ0
X2FtdCk7CiAgICAgdGNnX2dlbl9icihkb25lKTsKIAogICAgIGdlbl9zZXRfbGFiZWwocG9zaXRp
dmUpOwpAQCAtOTUwLDcgKzk0OCw3IEBAIHN0YXRpYyB2b2lkIGdlbl9hc3Jfcl9yX3NhdChUQ0d2
IFJkViwgVENHdiBSc1YsIFRDR3YgUnRWKQogfQogCiAvKiBCaWRpcmVjdGlvbmFsIHNoaWZ0IGxl
ZnQgd2l0aCBzYXR1cmF0aW9uICovCi1zdGF0aWMgdm9pZCBnZW5fYXNsX3Jfcl9zYXQoVENHdiBS
ZFYsIFRDR3YgUnNWLCBUQ0d2IFJ0VikKK3N0YXRpYyB2b2lkIGdlbl9hc2xfcl9yX3NhdChEaXNh
c0NvbnRleHQgKmN0eCwgVENHdiBSZFYsIFRDR3YgUnNWLCBUQ0d2IFJ0VikKIHsKICAgICBUQ0d2
IHNoaWZ0X2FtdCA9IHRjZ190ZW1wX25ldygpOwogICAgIFRDR0xhYmVsICpwb3NpdGl2ZSA9IGdl
bl9uZXdfbGFiZWwoKTsKQEAgLTk2Niw3ICs5NjQsNyBAQCBzdGF0aWMgdm9pZCBnZW5fYXNsX3Jf
cl9zYXQoVENHdiBSZFYsIFRDR3YgUnNWLCBUQ0d2IFJ0VikKIAogICAgIGdlbl9zZXRfbGFiZWwo
cG9zaXRpdmUpOwogICAgIC8qIFBvc2l0aXZlIHNoaWZ0IGFtb3VudCA9PiBzaGlmdCBsZWZ0ICov
Ci0gICAgZ2VuX3NobF9zYXQoUmRWLCBSc1YsIHNoaWZ0X2FtdCk7CisgICAgZ2VuX3NobF9zYXQo
Y3R4LCBSZFYsIFJzViwgc2hpZnRfYW10KTsKIAogICAgIGdlbl9zZXRfbGFiZWwoZG9uZSk7CiB9
CkBAIC0xMTA5LDIwICsxMTA3LDE5IEBAIHZvaWQgcHJvYmVfbm9zaHVmX2xvYWQoVENHdiB2YSwg
aW50IHMsIGludCBtaSkKICAqIE5vdGU6IFNpbmNlIHRoaXMgZnVuY3Rpb24gbWlnaHQgYnJhbmNo
LCBgdmFsYCBpcwogICogcmVxdWlyZWQgdG8gYmUgYSBgdGNnX3RlbXBfbG9jYWxgLgogICovCi12
b2lkIGdlbl9zZXRfdXNyX2ZpZWxkX2lmKGludCBmaWVsZCwgVENHdiB2YWwpCit2b2lkIGdlbl9z
ZXRfdXNyX2ZpZWxkX2lmKERpc2FzQ29udGV4dCAqY3R4LCBpbnQgZmllbGQsIFRDR3YgdmFsKQog
ewogICAgIC8qIFNldHMgdGhlIFVTUiBmaWVsZCBpZiBgdmFsYCBpcyBub24temVybyAqLwogICAg
IGlmIChyZWdfZmllbGRfaW5mb1tmaWVsZF0ud2lkdGggPT0gMSkgeworICAgICAgICBUQ0d2IHVz
ciA9IGdldF9yZXN1bHRfZ3ByKGN0eCwgSEVYX1JFR19VU1IpOwogICAgICAgICBUQ0d2IHRtcCA9
IHRjZ190ZW1wX25ldygpOwogICAgICAgICB0Y2dfZ2VuX2V4dHJhY3RfdGwodG1wLCB2YWwsIDAs
IHJlZ19maWVsZF9pbmZvW2ZpZWxkXS53aWR0aCk7CiAgICAgICAgIHRjZ19nZW5fc2hsaV90bCh0
bXAsIHRtcCwgcmVnX2ZpZWxkX2luZm9bZmllbGRdLm9mZnNldCk7Ci0gICAgICAgIHRjZ19nZW5f
b3JfdGwoaGV4X25ld192YWx1ZVtIRVhfUkVHX1VTUl0sCi0gICAgICAgICAgICAgICAgICAgICAg
aGV4X25ld192YWx1ZVtIRVhfUkVHX1VTUl0sCi0gICAgICAgICAgICAgICAgICAgICAgdG1wKTsK
KyAgICAgICAgdGNnX2dlbl9vcl90bCh1c3IsIHVzciwgdG1wKTsKICAgICB9IGVsc2UgewogICAg
ICAgICBUQ0dMYWJlbCAqc2tpcF9sYWJlbCA9IGdlbl9uZXdfbGFiZWwoKTsKICAgICAgICAgdGNn
X2dlbl9icmNvbmRpX3RsKFRDR19DT05EX0VRLCB2YWwsIDAsIHNraXBfbGFiZWwpOwotICAgICAg
ICBnZW5fc2V0X3Vzcl9maWVsZChmaWVsZCwgdmFsKTsKKyAgICAgICAgZ2VuX3NldF91c3JfZmll
bGQoY3R4LCBmaWVsZCwgdmFsKTsKICAgICAgICAgZ2VuX3NldF9sYWJlbChza2lwX2xhYmVsKTsK
ICAgICB9CiB9CkBAIC0xMTkwLDcgKzExODcsNyBAQCB2b2lkIGdlbl9zYXR1X2k2NF9vdmZsKFRD
R3Ygb3ZmbCwgVENHdl9pNjQgZGVzdCwgVENHdl9pNjQgc291cmNlLCBpbnQgd2lkdGgpCiB9CiAK
IC8qIEltcGxlbWVudHMgdGhlIGZBRERTQVQ2NCBtYWNybyBpbiBUQ0cgKi8KLXZvaWQgZ2VuX2Fk
ZF9zYXRfaTY0KFRDR3ZfaTY0IHJldCwgVENHdl9pNjQgYSwgVENHdl9pNjQgYikKK3ZvaWQgZ2Vu
X2FkZF9zYXRfaTY0KERpc2FzQ29udGV4dCAqY3R4LCBUQ0d2X2k2NCByZXQsIFRDR3ZfaTY0IGEs
IFRDR3ZfaTY0IGIpCiB7CiAgICAgVENHdl9pNjQgc3VtID0gdGNnX3RlbXBfbmV3X2k2NCgpOwog
ICAgIFRDR3ZfaTY0IHhvciA9IHRjZ190ZW1wX25ld19pNjQoKTsKQEAgLTEyMjcsNyArMTIyNCw3
IEBAIHZvaWQgZ2VuX2FkZF9zYXRfaTY0KFRDR3ZfaTY0IHJldCwgVENHdl9pNjQgYSwgVENHdl9p
NjQgYikKICAgICBnZW5fc2V0X2xhYmVsKG92ZmxfbGFiZWwpOwogICAgIHRjZ19nZW5fYW5kX2k2
NChjb25kMywgc3VtLCBtYXNrKTsKICAgICB0Y2dfZ2VuX21vdmNvbmRfaTY0KFRDR19DT05EX05F
LCByZXQsIGNvbmQzLCB6ZXJvLCBtYXhfcG9zLCBtYXhfbmVnKTsKLSAgICBTRVRfVVNSX0ZJRUxE
KFVTUl9PVkYsIDEpOworICAgIGdlbl9zZXRfdXNyX2ZpZWxkaShjdHgsIFVTUl9PVkYsIDEpOwog
CiAgICAgZ2VuX3NldF9sYWJlbChyZXRfbGFiZWwpOwogfQpkaWZmIC0tZ2l0IGEvdGFyZ2V0L2hl
eGFnb24vaWRlZi1wYXJzZXIvcGFyc2VyLWhlbHBlcnMuYyBiL3RhcmdldC9oZXhhZ29uL2lkZWYt
cGFyc2VyL3BhcnNlci1oZWxwZXJzLmMKaW5kZXggMThjZGU2YTFiZS4uODY1MTFlZmI2MiAxMDA2
NDQKLS0tIGEvdGFyZ2V0L2hleGFnb24vaWRlZi1wYXJzZXIvcGFyc2VyLWhlbHBlcnMuYworKysg
Yi90YXJnZXQvaGV4YWdvbi9pZGVmLXBhcnNlci9wYXJzZXItaGVscGVycy5jCkBAIC0xNjQwLDcg
KzE2NDAsOCBAQCB2b2lkIGdlbl9hZGRzYXQ2NChDb250ZXh0ICpjLAogewogICAgIEhleFZhbHVl
IG9wMV9tID0gcnZhbHVlX21hdGVyaWFsaXplKGMsIGxvY3AsIG9wMSk7CiAgICAgSGV4VmFsdWUg
b3AyX20gPSBydmFsdWVfbWF0ZXJpYWxpemUoYywgbG9jcCwgb3AyKTsKLSAgICBPVVQoYywgbG9j
cCwgImdlbl9hZGRfc2F0X2k2NCgiLCBkc3QsICIsICIsICZvcDFfbSwgIiwgIiwgJm9wMl9tLCAi
KTtcbiIpOworICAgIE9VVChjLCBsb2NwLCAiZ2VuX2FkZF9zYXRfaTY0KGN0eCwgIiwgZHN0LCAi
LCAiLCAmb3AxX20sICIsICIsCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJm9w
Ml9tLCAiKTtcbiIpOwogfQogCiB2b2lkIGdlbl9pbnN0KENvbnRleHQgKmMsIEdTdHJpbmcgKmlu
YW1lKQpAQCAtMTk3MSw3ICsxOTcyLDcgQEAgSGV4VmFsdWUgZ2VuX3J2YWx1ZV9zYXQoQ29udGV4
dCAqYywgWVlMVFlQRSAqbG9jcCwgSGV4U2F0ICpzYXQsCiAgICAgT1VUKGMsIGxvY3AsICJnZW5f
c2F0IiwgdW5zaWduZWRfc3RyLCAiXyIsIGJpdF9zdWZmaXgsICJfb3ZmbCgiKTsKICAgICBPVVQo
YywgbG9jcCwgJm92ZmwsICIsICIsICZyZXMsICIsICIsIHZhbHVlLCAiLCAiLCAmd2lkdGgtPmlt
bS52YWx1ZSwKICAgICAgICAgIik7XG4iKTsKLSAgICBPVVQoYywgbG9jcCwgImdlbl9zZXRfdXNy
X2ZpZWxkX2lmKFVTUl9PVkYsIiwgJm92ZmwsICIpO1xuIik7CisgICAgT1VUKGMsIGxvY3AsICJn
ZW5fc2V0X3Vzcl9maWVsZF9pZihjdHgsIFVTUl9PVkYsIiwgJm92ZmwsICIpO1xuIik7CiAKICAg
ICByZXR1cm4gcmVzOwogfQpkaWZmIC0tZ2l0IGEvdGFyZ2V0L2hleGFnb24vaWRlZi1wYXJzZXIv
aWRlZi1wYXJzZXIueSBiL3RhcmdldC9oZXhhZ29uL2lkZWYtcGFyc2VyL2lkZWYtcGFyc2VyLnkK
aW5kZXggN2QwNTc3M2I2Ny4uNTQ0NGZkNDc0OSAxMDA2NDQKLS0tIGEvdGFyZ2V0L2hleGFnb24v
aWRlZi1wYXJzZXIvaWRlZi1wYXJzZXIueQorKysgYi90YXJnZXQvaGV4YWdvbi9pZGVmLXBhcnNl
ci9pZGVmLXBhcnNlci55CkBAIC0zNjIsNyArMzYyLDcgQEAgYXNzaWduX3N0YXRlbWVudCA6IGx2
YWx1ZSAnPScgcnZhbHVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJBc3NpZ25t
ZW50IHNpZGUtZWZmZWN0IG5vdCBtb2RlbGVkISIpOwogICAgICAgICAgICAgICAgICAgICAgICAk
MyA9IGdlbl9ydmFsdWVfdHJ1bmNhdGUoYywgJkAxLCAmJDMpOwogICAgICAgICAgICAgICAgICAg
ICAgICAkMyA9IHJ2YWx1ZV9tYXRlcmlhbGl6ZShjLCAmQDEsICYkMyk7Ci0gICAgICAgICAgICAg
ICAgICAgICAgIE9VVChjLCAmQDEsICJTRVRfVVNSX0ZJRUxEKFVTUl9MUENGRywgIiwgJiQzLCAi
KTtcbiIpOworICAgICAgICAgICAgICAgICAgICAgICBPVVQoYywgJkAxLCAiZ2VuX3NldF91c3Jf
ZmllbGQoY3R4LCBVU1JfTFBDRkcsICIsICYkMywgIik7XG4iKTsKICAgICAgICAgICAgICAgICAg
ICB9CiAgICAgICAgICAgICAgICAgIHwgREVQT1NJVCAnKCcgcnZhbHVlICcsJyBydmFsdWUgJywn
IHJ2YWx1ZSAnKScKICAgICAgICAgICAgICAgICAgICB7Ci0tIAoyLjI1LjEKCg==

