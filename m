Return-Path: <qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org>
X-Original-To: lists+qemu-devel@lfdr.de
Delivered-To: lists+qemu-devel@lfdr.de
Received: from lists.gnu.org (lists.gnu.org [209.51.188.17])
	by mail.lfdr.de (Postfix) with ESMTPS id 516C92AF5A3
	for <lists+qemu-devel@lfdr.de>; Wed, 11 Nov 2020 17:00:10 +0100 (CET)
Received: from localhost ([::1]:40920 helo=lists1p.gnu.org)
	by lists.gnu.org with esmtp (Exim 4.90_1)
	(envelope-from <qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org>)
	id 1kcsXZ-0003TC-8y
	for lists+qemu-devel@lfdr.de; Wed, 11 Nov 2020 11:00:09 -0500
Received: from eggs.gnu.org ([2001:470:142:3::10]:59794)
 by lists.gnu.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256)
 (Exim 4.90_1) (envelope-from <stefanha@redhat.com>)
 id 1kcsUj-0008VH-23
 for qemu-devel@nongnu.org; Wed, 11 Nov 2020 10:57:14 -0500
Received: from us-smtp-delivery-124.mimecast.com ([63.128.21.124]:60384)
 by eggs.gnu.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_CBC_SHA1:256)
 (Exim 4.90_1) (envelope-from <stefanha@redhat.com>)
 id 1kcsUe-0000aZ-Rm
 for qemu-devel@nongnu.org; Wed, 11 Nov 2020 10:57:12 -0500
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=redhat.com;
 s=mimecast20190719; t=1605110227;
 h=from:from:reply-to:subject:subject:date:date:message-id:message-id:
 to:to:cc:cc:mime-version:mime-version:content-type:content-type:
 content-transfer-encoding:content-transfer-encoding:
 in-reply-to:in-reply-to:references:references;
 bh=h8+ZnRtFvoo542xcHmKysseK1uama+Tl50UvbQas9jU=;
 b=VmT5MEQpR7E9pTRgw9zEe7kh0DhNqzzLuGd9+C4T2tmyRqAPmDbKunkrhKzHybR0im6kup
 qL/retlTvgR6kOpotKZ+3ZpzvBc0884FmlHHmKUL/JdqzP/Hd8IHLI8gnvosVg+kZh/iAK
 vt5+fhEm07CU6FUkyf1mI8DkO4ZgqJo=
Received: from mimecast-mx01.redhat.com (mimecast-mx01.redhat.com
 [209.132.183.4]) (Using TLS) by relay.mimecast.com with ESMTP id
 us-mta-500-nHTUX0wcMIiKsdgJ9vZ2XA-1; Wed, 11 Nov 2020 10:57:05 -0500
X-MC-Unique: nHTUX0wcMIiKsdgJ9vZ2XA-1
Received: from smtp.corp.redhat.com (int-mx07.intmail.prod.int.phx2.redhat.com
 [10.5.11.22])
 (using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by mimecast-mx01.redhat.com (Postfix) with ESMTPS id 468D4188C138;
 Wed, 11 Nov 2020 15:57:04 +0000 (UTC)
Received: from localhost (ovpn-112-222.ams2.redhat.com [10.36.112.222])
 by smtp.corp.redhat.com (Postfix) with ESMTP id 8E6E9100239F;
 Wed, 11 Nov 2020 15:57:00 +0000 (UTC)
From: Stefan Hajnoczi <stefanha@redhat.com>
To: qemu-devel@nongnu.org
Subject: [PULL for-5.2 1/2] trace: remove argument from trace_init_file
Date: Wed, 11 Nov 2020 15:56:53 +0000
Message-Id: <20201111155654.1430860-2-stefanha@redhat.com>
In-Reply-To: <20201111155654.1430860-1-stefanha@redhat.com>
References: <20201111155654.1430860-1-stefanha@redhat.com>
MIME-Version: 1.0
X-Scanned-By: MIMEDefang 2.84 on 10.5.11.22
Authentication-Results: relay.mimecast.com;
 auth=pass smtp.auth=CUSA124A263 smtp.mailfrom=stefanha@redhat.com
X-Mimecast-Spam-Score: 0
X-Mimecast-Originator: redhat.com
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="US-ASCII"
Received-SPF: pass client-ip=63.128.21.124; envelope-from=stefanha@redhat.com;
 helo=us-smtp-delivery-124.mimecast.com
X-detected-operating-system: by eggs.gnu.org: First seen = 2020/11/11 01:42:46
X-ACL-Warn: Detected OS   = Linux 2.2.x-3.x [generic] [fuzzy]
X-Spam_score_int: -3
X-Spam_score: -0.4
X-Spam_bar: /
X-Spam_report: (-0.4 / 5.0 requ) BAYES_00=-1.9, DKIMWL_WL_HIGH=-0.001,
 DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1, DKIM_VALID_EF=-0.1,
 MIME_BASE64_TEXT=1.741, RCVD_IN_DNSWL_NONE=-0.0001, RCVD_IN_MSPIKE_H5=0.001,
 RCVD_IN_MSPIKE_WL=0.001, SPF_HELO_NONE=0.001,
 SPF_PASS=-0.001 autolearn=ham autolearn_force=no
X-Spam_action: no action
X-BeenThere: qemu-devel@nongnu.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: <qemu-devel.nongnu.org>
List-Unsubscribe: <https://lists.nongnu.org/mailman/options/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=unsubscribe>
List-Archive: <https://lists.nongnu.org/archive/html/qemu-devel>
List-Post: <mailto:qemu-devel@nongnu.org>
List-Help: <mailto:qemu-devel-request@nongnu.org?subject=help>
List-Subscribe: <https://lists.nongnu.org/mailman/listinfo/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=subscribe>
Cc: Peter Maydell <peter.maydell@linaro.org>, qemu-block@nongnu.org,
 Stefan Hajnoczi <stefanha@redhat.com>, Paolo Bonzini <pbonzini@redhat.com>
Errors-To: qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org
Sender: "Qemu-devel" <qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org>

RnJvbTogUGFvbG8gQm9uemluaSA8cGJvbnppbmlAcmVkaGF0LmNvbT4KCkl0IGlzIG5vdCBuZWVk
ZWQsIGFsbCB0aGUgY2FsbGVycyBhcmUganVzdCBzYXZpbmcgd2hhdCB3YXMKcmV0cmlldmVkIGZy
b20gLXRyYWNlIGFuZCB0cmFjZV9pbml0X2ZpbGUgY2FuIHJldHJpZXZlIGl0Cm9uIGl0cyBvd24u
CgpTaWduZWQtb2ZmLWJ5OiBQYW9sbyBCb256aW5pIDxwYm9uemluaUByZWRoYXQuY29tPgpNZXNz
YWdlLWlkOiAyMDIwMTEwMjExNTg0MS40MDE3NjkyLTEtcGJvbnppbmlAcmVkaGF0LmNvbQpTaWdu
ZWQtb2ZmLWJ5OiBTdGVmYW4gSGFqbm9jemkgPHN0ZWZhbmhhQHJlZGhhdC5jb20+Ci0tLQogdHJh
Y2UvY29udHJvbC5oICAgICAgICAgICAgICAgICAgICAgIHwgMTIgKysrLS0tLS0tLS0tCiBic2Qt
dXNlci9tYWluLmMgICAgICAgICAgICAgICAgICAgICAgfCAgNiArKy0tLS0KIGxpbnV4LXVzZXIv
bWFpbi5jICAgICAgICAgICAgICAgICAgICB8ICA2ICsrLS0tLQogcWVtdS1pbWcuYyAgICAgICAg
ICAgICAgICAgICAgICAgICAgIHwgIDYgKystLS0tCiBxZW11LWlvLmMgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgfCAgNiArKy0tLS0KIHFlbXUtbmJkLmMgICAgICAgICAgICAgICAgICAgICAg
ICAgICB8ICA2ICsrLS0tLQogc2NzaS9xZW11LXByLWhlbHBlci5jICAgICAgICAgICAgICAgIHwg
IDYgKystLS0tCiBzb2Z0bW11L3ZsLmMgICAgICAgICAgICAgICAgICAgICAgICAgfCAgNiArKy0t
LS0KIHN0b3JhZ2UtZGFlbW9uL3FlbXUtc3RvcmFnZS1kYWVtb24uYyB8ICA5ICsrKy0tLS0tLQog
dHJhY2UvY29udHJvbC5jICAgICAgICAgICAgICAgICAgICAgIHwgMTAgKysrKy0tLS0tLQogMTAg
ZmlsZXMgY2hhbmdlZCwgMjQgaW5zZXJ0aW9ucygrKSwgNDkgZGVsZXRpb25zKC0pCgpkaWZmIC0t
Z2l0IGEvdHJhY2UvY29udHJvbC5oIGIvdHJhY2UvY29udHJvbC5oCmluZGV4IDFmODFjNDkxYjYu
LjA1Yjk1ZWE0NTMgMTAwNjQ0Ci0tLSBhL3RyYWNlL2NvbnRyb2wuaAorKysgYi90cmFjZS9jb250
cm9sLmgKQEAgLTE2Nyw4ICsxNjcsNiBAQCB2b2lkIHRyYWNlX2V2ZW50X3NldF92Y3B1X3N0YXRl
X2R5bmFtaWMoQ1BVU3RhdGUgKnZjcHUsCiAKIC8qKgogICogdHJhY2VfaW5pdF9iYWNrZW5kczoK
LSAqIEBmaWxlOiAgIE5hbWUgb2YgdHJhY2Ugb3V0cHV0IGZpbGU7IG1heSBiZSBOVUxMLgotICog
ICAgICAgICAgQ29ycmVzcG9uZHMgdG8gY29tbWFuZGxpbmUgb3B0aW9uICItLXRyYWNlIGZpbGU9
Li4uIi4KICAqCiAgKiBJbml0aWFsaXplIHRoZSB0cmFjaW5nIGJhY2tlbmQuCiAgKgpAQCAtMTc4
LDE0ICsxNzYsMTIgQEAgYm9vbCB0cmFjZV9pbml0X2JhY2tlbmRzKHZvaWQpOwogCiAvKioKICAq
IHRyYWNlX2luaXRfZmlsZToKLSAqIEBmaWxlOiAgIE5hbWUgb2YgdHJhY2Ugb3V0cHV0IGZpbGU7
IG1heSBiZSBOVUxMLgotICogICAgICAgICAgQ29ycmVzcG9uZHMgdG8gY29tbWFuZGxpbmUgb3B0
aW9uICItLXRyYWNlIGZpbGU9Li4uIi4KICAqCiAgKiBSZWNvcmQgdGhlIG5hbWUgb2YgdGhlIG91
dHB1dCBmaWxlIGZvciB0aGUgdHJhY2luZyBiYWNrZW5kLgogICogRXhpdHMgaWYgbm8gc2VsZWN0
ZWQgYmFja2VuZCBkb2VzIG5vdCBzdXBwb3J0IHNwZWNpZnlpbmcgdGhlCi0gKiBvdXRwdXQgZmls
ZSwgYW5kIGEgbm9uLU5VTEwgZmlsZSB3YXMgcGFzc2VkLgorICogb3V0cHV0IGZpbGUsIGFuZCBh
IGZpbGUgd2FzIHNwZWNpZmllZCB3aXRoICItdHJhY2UgZmlsZT0uLi4iLgogICovCi12b2lkIHRy
YWNlX2luaXRfZmlsZShjb25zdCBjaGFyICpmaWxlKTsKK3ZvaWQgdHJhY2VfaW5pdF9maWxlKHZv
aWQpOwogCiAvKioKICAqIHRyYWNlX2luaXRfdmNwdToKQEAgLTIyOSwxMCArMjI1LDggQEAgZXh0
ZXJuIFFlbXVPcHRzTGlzdCBxZW11X3RyYWNlX29wdHM7CiAgKiBAb3B0YXJnOiBBIHN0cmluZyBh
cmd1bWVudCBvZiAtLXRyYWNlIGNvbW1hbmQgbGluZSBhcmd1bWVudAogICoKICAqIEluaXRpYWxp
emUgdHJhY2luZyBzdWJzeXN0ZW0uCi0gKgotICogUmV0dXJucyB0aGUgZmlsZW5hbWUgdG8gc2F2
ZSB0cmFjZSB0by4gIEl0IG11c3QgYmUgZnJlZWQgd2l0aCBnX2ZyZWUoKS4KICAqLwotY2hhciAq
dHJhY2Vfb3B0X3BhcnNlKGNvbnN0IGNoYXIgKm9wdGFyZyk7Cit2b2lkIHRyYWNlX29wdF9wYXJz
ZShjb25zdCBjaGFyICpvcHRhcmcpOwogCiAvKioKICAqIHRyYWNlX2dldF92Y3B1X2V2ZW50X2Nv
dW50OgpkaWZmIC0tZ2l0IGEvYnNkLXVzZXIvbWFpbi5jIGIvYnNkLXVzZXIvbWFpbi5jCmluZGV4
IGFjNDBkNzliZmEuLjBhOTE4ZThmNzQgMTAwNjQ0Ci0tLSBhL2JzZC11c2VyL21haW4uYworKysg
Yi9ic2QtdXNlci9tYWluLmMKQEAgLTc0NSw3ICs3NDUsNiBAQCBpbnQgbWFpbihpbnQgYXJnYywg
Y2hhciAqKmFyZ3YpCiAgICAgY29uc3QgY2hhciAqZ2Ric3R1YiA9IE5VTEw7CiAgICAgY2hhciAq
KnRhcmdldF9lbnZpcm9uLCAqKndyazsKICAgICBlbnZsaXN0X3QgKmVudmxpc3QgPSBOVUxMOwot
ICAgIGNoYXIgKnRyYWNlX2ZpbGUgPSBOVUxMOwogICAgIGJzZF90eXBlID0gdGFyZ2V0X29wZW5i
c2Q7CiAKICAgICBpZiAoYXJnYyA8PSAxKQpAQCAtODUxLDggKzg1MCw3IEBAIGludCBtYWluKGlu
dCBhcmdjLCBjaGFyICoqYXJndikKICAgICAgICAgfSBlbHNlIGlmICghc3RyY21wKHIsICJzdHJh
Y2UiKSkgewogICAgICAgICAgICAgZG9fc3RyYWNlID0gMTsKICAgICAgICAgfSBlbHNlIGlmICgh
c3RyY21wKHIsICJ0cmFjZSIpKSB7Ci0gICAgICAgICAgICBnX2ZyZWUodHJhY2VfZmlsZSk7Ci0g
ICAgICAgICAgICB0cmFjZV9maWxlID0gdHJhY2Vfb3B0X3BhcnNlKG9wdGFyZyk7CisgICAgICAg
ICAgICB0cmFjZV9vcHRfcGFyc2Uob3B0YXJnKTsKICAgICAgICAgfSBlbHNlIHsKICAgICAgICAg
ICAgIHVzYWdlKCk7CiAgICAgICAgIH0KQEAgLTg4MCw3ICs4NzgsNyBAQCBpbnQgbWFpbihpbnQg
YXJnYywgY2hhciAqKmFyZ3YpCiAgICAgaWYgKCF0cmFjZV9pbml0X2JhY2tlbmRzKCkpIHsKICAg
ICAgICAgZXhpdCgxKTsKICAgICB9Ci0gICAgdHJhY2VfaW5pdF9maWxlKHRyYWNlX2ZpbGUpOwor
ICAgIHRyYWNlX2luaXRfZmlsZSgpOwogCiAgICAgLyogWmVybyBvdXQgcmVncyAqLwogICAgIG1l
bXNldChyZWdzLCAwLCBzaXplb2Yoc3RydWN0IHRhcmdldF9wdF9yZWdzKSk7CmRpZmYgLS1naXQg
YS9saW51eC11c2VyL21haW4uYyBiL2xpbnV4LXVzZXIvbWFpbi5jCmluZGV4IDc1Yzk3ODUxNTcu
LjI0ZDFlYjczYWQgMTAwNjQ0Ci0tLSBhL2xpbnV4LXVzZXIvbWFpbi5jCisrKyBiL2xpbnV4LXVz
ZXIvbWFpbi5jCkBAIC0zODYsMTEgKzM4Niw5IEBAIHN0YXRpYyB2b2lkIGhhbmRsZV9hcmdfdmVy
c2lvbihjb25zdCBjaGFyICphcmcpCiAgICAgZXhpdChFWElUX1NVQ0NFU1MpOwogfQogCi1zdGF0
aWMgY2hhciAqdHJhY2VfZmlsZTsKIHN0YXRpYyB2b2lkIGhhbmRsZV9hcmdfdHJhY2UoY29uc3Qg
Y2hhciAqYXJnKQogewotICAgIGdfZnJlZSh0cmFjZV9maWxlKTsKLSAgICB0cmFjZV9maWxlID0g
dHJhY2Vfb3B0X3BhcnNlKGFyZyk7CisgICAgdHJhY2Vfb3B0X3BhcnNlKGFyZyk7CiB9CiAKICNp
ZiBkZWZpbmVkKFRBUkdFVF9YVEVOU0EpCkBAIC02NzIsNyArNjcwLDcgQEAgaW50IG1haW4oaW50
IGFyZ2MsIGNoYXIgKiphcmd2LCBjaGFyICoqZW52cCkKICAgICBpZiAoIXRyYWNlX2luaXRfYmFj
a2VuZHMoKSkgewogICAgICAgICBleGl0KDEpOwogICAgIH0KLSAgICB0cmFjZV9pbml0X2ZpbGUo
dHJhY2VfZmlsZSk7CisgICAgdHJhY2VfaW5pdF9maWxlKCk7CiAgICAgaWYgKHFlbXVfcGx1Z2lu
X2xvYWRfbGlzdCgmcGx1Z2lucykpIHsKICAgICAgICAgZXhpdCgxKTsKICAgICB9CmRpZmYgLS1n
aXQgYS9xZW11LWltZy5jIGIvcWVtdS1pbWcuYwppbmRleCBjMmM1NmZjNzk3Li44YmRlYTQwYjU4
IDEwMDY0NAotLS0gYS9xZW11LWltZy5jCisrKyBiL3FlbXUtaW1nLmMKQEAgLTU0NjYsNyArNTQ2
Niw2IEBAIGludCBtYWluKGludCBhcmdjLCBjaGFyICoqYXJndikKICAgICBjb25zdCBpbWdfY21k
X3QgKmNtZDsKICAgICBjb25zdCBjaGFyICpjbWRuYW1lOwogICAgIEVycm9yICpsb2NhbF9lcnJv
ciA9IE5VTEw7Ci0gICAgY2hhciAqdHJhY2VfZmlsZSA9IE5VTEw7CiAgICAgaW50IGM7CiAgICAg
c3RhdGljIGNvbnN0IHN0cnVjdCBvcHRpb24gbG9uZ19vcHRpb25zW10gPSB7CiAgICAgICAgIHsi
aGVscCIsIG5vX2FyZ3VtZW50LCAwLCAnaCd9LApAQCAtNTUxNiw4ICs1NTE1LDcgQEAgaW50IG1h
aW4oaW50IGFyZ2MsIGNoYXIgKiphcmd2KQogICAgICAgICAgICAgcHJpbnRmKFFFTVVfSU1HX1ZF
UlNJT04pOwogICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgIGNhc2UgJ1QnOgotICAgICAg
ICAgICAgZ19mcmVlKHRyYWNlX2ZpbGUpOwotICAgICAgICAgICAgdHJhY2VfZmlsZSA9IHRyYWNl
X29wdF9wYXJzZShvcHRhcmcpOworICAgICAgICAgICAgdHJhY2Vfb3B0X3BhcnNlKG9wdGFyZyk7
CiAgICAgICAgICAgICBicmVhazsKICAgICAgICAgfQogICAgIH0KQEAgLTU1MzUsNyArNTUzMyw3
IEBAIGludCBtYWluKGludCBhcmdjLCBjaGFyICoqYXJndikKICAgICBpZiAoIXRyYWNlX2luaXRf
YmFja2VuZHMoKSkgewogICAgICAgICBleGl0KDEpOwogICAgIH0KLSAgICB0cmFjZV9pbml0X2Zp
bGUodHJhY2VfZmlsZSk7CisgICAgdHJhY2VfaW5pdF9maWxlKCk7CiAgICAgcWVtdV9zZXRfbG9n
KExPR19UUkFDRSk7CiAKICAgICAvKiBmaW5kIHRoZSBjb21tYW5kICovCmRpZmYgLS1naXQgYS9x
ZW11LWlvLmMgYi9xZW11LWlvLmMKaW5kZXggN2NjODMyYjNkNi4uYWM4OGQ4YmQ0MCAxMDA2NDQK
LS0tIGEvcWVtdS1pby5jCisrKyBiL3FlbXUtaW8uYwpAQCAtNTM2LDcgKzUzNiw2IEBAIGludCBt
YWluKGludCBhcmdjLCBjaGFyICoqYXJndikKICAgICBFcnJvciAqbG9jYWxfZXJyb3IgPSBOVUxM
OwogICAgIFFEaWN0ICpvcHRzID0gTlVMTDsKICAgICBjb25zdCBjaGFyICpmb3JtYXQgPSBOVUxM
OwotICAgIGNoYXIgKnRyYWNlX2ZpbGUgPSBOVUxMOwogICAgIGJvb2wgZm9yY2Vfc2hhcmUgPSBm
YWxzZTsKIAogI2lmZGVmIENPTkZJR19QT1NJWApAQCAtNjAxLDggKzYwMCw3IEBAIGludCBtYWlu
KGludCBhcmdjLCBjaGFyICoqYXJndikKICAgICAgICAgICAgIH0KICAgICAgICAgICAgIGJyZWFr
OwogICAgICAgICBjYXNlICdUJzoKLSAgICAgICAgICAgIGdfZnJlZSh0cmFjZV9maWxlKTsKLSAg
ICAgICAgICAgIHRyYWNlX2ZpbGUgPSB0cmFjZV9vcHRfcGFyc2Uob3B0YXJnKTsKKyAgICAgICAg
ICAgIHRyYWNlX29wdF9wYXJzZShvcHRhcmcpOwogICAgICAgICAgICAgYnJlYWs7CiAgICAgICAg
IGNhc2UgJ1YnOgogICAgICAgICAgICAgcHJpbnRmKCIlcyB2ZXJzaW9uICIgUUVNVV9GVUxMX1ZF
UlNJT04gIlxuIgpAQCAtNjUzLDcgKzY1MSw3IEBAIGludCBtYWluKGludCBhcmdjLCBjaGFyICoq
YXJndikKICAgICBpZiAoIXRyYWNlX2luaXRfYmFja2VuZHMoKSkgewogICAgICAgICBleGl0KDEp
OwogICAgIH0KLSAgICB0cmFjZV9pbml0X2ZpbGUodHJhY2VfZmlsZSk7CisgICAgdHJhY2VfaW5p
dF9maWxlKCk7CiAgICAgcWVtdV9zZXRfbG9nKExPR19UUkFDRSk7CiAKICAgICAvKiBpbml0aWFs
aXplIGNvbW1hbmRzICovCmRpZmYgLS1naXQgYS9xZW11LW5iZC5jIGIvcWVtdS1uYmQuYwppbmRl
eCA3NWNlZDY1MDMwLi5hNzA3NWM1NDE5IDEwMDY0NAotLS0gYS9xZW11LW5iZC5jCisrKyBiL3Fl
bXUtbmJkLmMKQEAgLTU4MSw3ICs1ODEsNiBAQCBpbnQgbWFpbihpbnQgYXJnYywgY2hhciAqKmFy
Z3YpCiAgICAgY29uc3QgY2hhciAqdGxzY3JlZHNpZCA9IE5VTEw7CiAgICAgYm9vbCBpbWFnZU9w
dHMgPSBmYWxzZTsKICAgICBib29sIHdyaXRldGhyb3VnaCA9IHRydWU7Ci0gICAgY2hhciAqdHJh
Y2VfZmlsZSA9IE5VTEw7CiAgICAgYm9vbCBmb3JrX3Byb2Nlc3MgPSBmYWxzZTsKICAgICBib29s
IGxpc3QgPSBmYWxzZTsKICAgICBpbnQgb2xkX3N0ZGVyciA9IC0xOwpAQCAtNzY4LDggKzc2Nyw3
IEBAIGludCBtYWluKGludCBhcmdjLCBjaGFyICoqYXJndikKICAgICAgICAgICAgIGltYWdlT3B0
cyA9IHRydWU7CiAgICAgICAgICAgICBicmVhazsKICAgICAgICAgY2FzZSAnVCc6Ci0gICAgICAg
ICAgICBnX2ZyZWUodHJhY2VfZmlsZSk7Ci0gICAgICAgICAgICB0cmFjZV9maWxlID0gdHJhY2Vf
b3B0X3BhcnNlKG9wdGFyZyk7CisgICAgICAgICAgICB0cmFjZV9vcHRfcGFyc2Uob3B0YXJnKTsK
ICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICBjYXNlIFFFTVVfTkJEX09QVF9UTFNBVVRIWjoK
ICAgICAgICAgICAgIHRsc2F1dGh6ID0gb3B0YXJnOwpAQCAtODE2LDcgKzgxNCw3IEBAIGludCBt
YWluKGludCBhcmdjLCBjaGFyICoqYXJndikKICAgICBpZiAoIXRyYWNlX2luaXRfYmFja2VuZHMo
KSkgewogICAgICAgICBleGl0KDEpOwogICAgIH0KLSAgICB0cmFjZV9pbml0X2ZpbGUodHJhY2Vf
ZmlsZSk7CisgICAgdHJhY2VfaW5pdF9maWxlKCk7CiAgICAgcWVtdV9zZXRfbG9nKExPR19UUkFD
RSk7CiAKICAgICBzb2NrZXRfYWN0aXZhdGlvbiA9IGNoZWNrX3NvY2tldF9hY3RpdmF0aW9uKCk7
CmRpZmYgLS1naXQgYS9zY3NpL3FlbXUtcHItaGVscGVyLmMgYi9zY3NpL3FlbXUtcHItaGVscGVy
LmMKaW5kZXggZDI2ZmFhZjkxZS4uMjczM2Q5MmYyZCAxMDA2NDQKLS0tIGEvc2NzaS9xZW11LXBy
LWhlbHBlci5jCisrKyBiL3Njc2kvcWVtdS1wci1oZWxwZXIuYwpAQCAtODg0LDcgKzg4NCw2IEBA
IGludCBtYWluKGludCBhcmdjLCBjaGFyICoqYXJndikKICAgICBpbnQgcXVpZXQgPSAwOwogICAg
IGludCBjaDsKICAgICBFcnJvciAqbG9jYWxfZXJyID0gTlVMTDsKLSAgICBjaGFyICp0cmFjZV9m
aWxlID0gTlVMTDsKICAgICBib29sIGRhZW1vbml6ZSA9IGZhbHNlOwogICAgIGJvb2wgcGlkZmls
ZV9zcGVjaWZpZWQgPSBmYWxzZTsKICAgICBib29sIHNvY2tldF9wYXRoX3NwZWNpZmllZCA9IGZh
bHNlOwpAQCAtOTY4LDggKzk2Nyw3IEBAIGludCBtYWluKGludCBhcmdjLCBjaGFyICoqYXJndikK
ICAgICAgICAgICAgICsrbG9nbGV2ZWw7CiAgICAgICAgICAgICBicmVhazsKICAgICAgICAgY2Fz
ZSAnVCc6Ci0gICAgICAgICAgICBnX2ZyZWUodHJhY2VfZmlsZSk7Ci0gICAgICAgICAgICB0cmFj
ZV9maWxlID0gdHJhY2Vfb3B0X3BhcnNlKG9wdGFyZyk7CisgICAgICAgICAgICB0cmFjZV9vcHRf
cGFyc2Uob3B0YXJnKTsKICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICBjYXNlICdWJzoKICAg
ICAgICAgICAgIHZlcnNpb24oYXJndlswXSk7CkBAIC05OTIsNyArOTkwLDcgQEAgaW50IG1haW4o
aW50IGFyZ2MsIGNoYXIgKiphcmd2KQogICAgIGlmICghdHJhY2VfaW5pdF9iYWNrZW5kcygpKSB7
CiAgICAgICAgIGV4aXQoRVhJVF9GQUlMVVJFKTsKICAgICB9Ci0gICAgdHJhY2VfaW5pdF9maWxl
KHRyYWNlX2ZpbGUpOworICAgIHRyYWNlX2luaXRfZmlsZSgpOwogICAgIHFlbXVfc2V0X2xvZyhM
T0dfVFJBQ0UpOwogCiAjaWZkZWYgQ09ORklHX01QQVRICmRpZmYgLS1naXQgYS9zb2Z0bW11L3Zs
LmMgYi9zb2Z0bW11L3ZsLmMKaW5kZXggYTcxMTY0NDk0ZS4uNDJlNmQxMDU3YiAxMDA2NDQKLS0t
IGEvc29mdG1tdS92bC5jCisrKyBiL3NvZnRtbXUvdmwuYwpAQCAtMjg4Niw3ICsyODg2LDYgQEAg
dm9pZCBxZW11X2luaXQoaW50IGFyZ2MsIGNoYXIgKiphcmd2LCBjaGFyICoqZW52cCkKICAgICBp
bnQgZGlzcGxheV9yZW1vdGUgPSAwOwogICAgIGNvbnN0IGNoYXIgKmxvZ19tYXNrID0gTlVMTDsK
ICAgICBjb25zdCBjaGFyICpsb2dfZmlsZSA9IE5VTEw7Ci0gICAgY2hhciAqdHJhY2VfZmlsZSA9
IE5VTEw7CiAgICAgcmFtX2FkZHJfdCBtYXhyYW1fc2l6ZTsKICAgICB1aW50NjRfdCByYW1fc2xv
dHMgPSAwOwogICAgIEZJTEUgKnZtc3RhdGVfZHVtcF9maWxlID0gTlVMTDsKQEAgLTM2ODgsOCAr
MzY4Nyw3IEBAIHZvaWQgcWVtdV9pbml0KGludCBhcmdjLCBjaGFyICoqYXJndiwgY2hhciAqKmVu
dnApCiAgICAgICAgICAgICAgICAgeGVuX2RvbWlkX3Jlc3RyaWN0ID0gdHJ1ZTsKICAgICAgICAg
ICAgICAgICBicmVhazsKICAgICAgICAgICAgIGNhc2UgUUVNVV9PUFRJT05fdHJhY2U6Ci0gICAg
ICAgICAgICAgICAgZ19mcmVlKHRyYWNlX2ZpbGUpOwotICAgICAgICAgICAgICAgIHRyYWNlX2Zp
bGUgPSB0cmFjZV9vcHRfcGFyc2Uob3B0YXJnKTsKKyAgICAgICAgICAgICAgICB0cmFjZV9vcHRf
cGFyc2Uob3B0YXJnKTsKICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgIGNhc2Ug
UUVNVV9PUFRJT05fcGx1Z2luOgogICAgICAgICAgICAgICAgIHFlbXVfcGx1Z2luX29wdF9wYXJz
ZShvcHRhcmcsICZwbHVnaW5fbGlzdCk7CkBAIC0zOTM5LDcgKzM5MzcsNyBAQCB2b2lkIHFlbXVf
aW5pdChpbnQgYXJnYywgY2hhciAqKmFyZ3YsIGNoYXIgKiplbnZwKQogICAgIGlmICghdHJhY2Vf
aW5pdF9iYWNrZW5kcygpKSB7CiAgICAgICAgIGV4aXQoMSk7CiAgICAgfQotICAgIHRyYWNlX2lu
aXRfZmlsZSh0cmFjZV9maWxlKTsKKyAgICB0cmFjZV9pbml0X2ZpbGUoKTsKIAogICAgIC8qIE9w
ZW4gdGhlIGxvZ2ZpbGUgYXQgdGhpcyBwb2ludCBhbmQgc2V0IHRoZSBsb2cgbWFzayBpZiBuZWNl
c3NhcnkuCiAgICAgICovCmRpZmYgLS1naXQgYS9zdG9yYWdlLWRhZW1vbi9xZW11LXN0b3JhZ2Ut
ZGFlbW9uLmMgYi9zdG9yYWdlLWRhZW1vbi9xZW11LXN0b3JhZ2UtZGFlbW9uLmMKaW5kZXggZTQx
OWJhOWYxOS4uN2M5MTRiMGRjMSAxMDA2NDQKLS0tIGEvc3RvcmFnZS1kYWVtb24vcWVtdS1zdG9y
YWdlLWRhZW1vbi5jCisrKyBiL3N0b3JhZ2UtZGFlbW9uL3FlbXUtc3RvcmFnZS1kYWVtb24uYwpA
QCAtMTgwLDEyICsxODAsOSBAQCBzdGF0aWMgdm9pZCBwcm9jZXNzX29wdGlvbnMoaW50IGFyZ2Ms
IGNoYXIgKmFyZ3ZbXSkKICAgICAgICAgICAgIGhlbHAoKTsKICAgICAgICAgICAgIGV4aXQoRVhJ
VF9TVUNDRVNTKTsKICAgICAgICAgY2FzZSAnVCc6Ci0gICAgICAgICAgICB7Ci0gICAgICAgICAg
ICAgICAgY2hhciAqdHJhY2VfZmlsZSA9IHRyYWNlX29wdF9wYXJzZShvcHRhcmcpOwotICAgICAg
ICAgICAgICAgIHRyYWNlX2luaXRfZmlsZSh0cmFjZV9maWxlKTsKLSAgICAgICAgICAgICAgICBn
X2ZyZWUodHJhY2VfZmlsZSk7Ci0gICAgICAgICAgICAgICAgYnJlYWs7Ci0gICAgICAgICAgICB9
CisgICAgICAgICAgICB0cmFjZV9vcHRfcGFyc2Uob3B0YXJnKTsKKyAgICAgICAgICAgIHRyYWNl
X2luaXRfZmlsZSgpOworICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgIGNhc2UgJ1YnOgogICAg
ICAgICAgICAgcHJpbnRmKCJxZW11LXN0b3JhZ2UtZGFlbW9uIHZlcnNpb24gIgogICAgICAgICAg
ICAgICAgICAgIFFFTVVfRlVMTF9WRVJTSU9OICJcbiIgUUVNVV9DT1BZUklHSFQgIlxuIik7CmRp
ZmYgLS1naXQgYS90cmFjZS9jb250cm9sLmMgYi90cmFjZS9jb250cm9sLmMKaW5kZXggNTY2OWRi
N2VlYS4uYjgyZmI4NzMxNiAxMDA2NDQKLS0tIGEvdHJhY2UvY29udHJvbC5jCisrKyBiL3RyYWNl
L2NvbnRyb2wuYwpAQCAtMjIyLDggKzIyMiwxMCBAQCBzdGF0aWMgdm9pZCB0cmFjZV9pbml0X2V2
ZW50cyhjb25zdCBjaGFyICpmbmFtZSkKICAgICBsb2NfcG9wKCZsb2MpOwogfQogCi12b2lkIHRy
YWNlX2luaXRfZmlsZShjb25zdCBjaGFyICpmaWxlKQordm9pZCB0cmFjZV9pbml0X2ZpbGUodm9p
ZCkKIHsKKyAgICBRZW11T3B0cyAqb3B0cyA9IHFlbXVfZmluZF9vcHRzX3NpbmdsZXRvbigidHJh
Y2UiKTsKKyAgICBjb25zdCBjaGFyICpmaWxlID0gcWVtdV9vcHRfZ2V0KG9wdHMsICJmaWxlIik7
CiAjaWZkZWYgQ09ORklHX1RSQUNFX1NJTVBMRQogICAgIHN0X3NldF90cmFjZV9maWxlKGZpbGUp
OwogICAgIGlmIChpbml0X3RyYWNlX29uX3N0YXJ0dXApIHsKQEAgLTI4OSw5ICsyOTEsOCBAQCBi
b29sIHRyYWNlX2luaXRfYmFja2VuZHModm9pZCkKICAgICByZXR1cm4gdHJ1ZTsKIH0KIAotY2hh
ciAqdHJhY2Vfb3B0X3BhcnNlKGNvbnN0IGNoYXIgKm9wdGFyZykKK3ZvaWQgdHJhY2Vfb3B0X3Bh
cnNlKGNvbnN0IGNoYXIgKm9wdGFyZykKIHsKLSAgICBjaGFyICp0cmFjZV9maWxlOwogICAgIFFl
bXVPcHRzICpvcHRzID0gcWVtdV9vcHRzX3BhcnNlX25vaXNpbHkocWVtdV9maW5kX29wdHMoInRy
YWNlIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRh
cmcsIHRydWUpOwogICAgIGlmICghb3B0cykgewpAQCAtMzAxLDExICszMDIsOCBAQCBjaGFyICp0
cmFjZV9vcHRfcGFyc2UoY29uc3QgY2hhciAqb3B0YXJnKQogICAgICAgICB0cmFjZV9lbmFibGVf
ZXZlbnRzKHFlbXVfb3B0X2dldChvcHRzLCAiZW5hYmxlIikpOwogICAgIH0KICAgICB0cmFjZV9p
bml0X2V2ZW50cyhxZW11X29wdF9nZXQob3B0cywgImV2ZW50cyIpKTsKLSAgICB0cmFjZV9maWxl
ID0gZ19zdHJkdXAocWVtdV9vcHRfZ2V0KG9wdHMsICJmaWxlIikpOwogICAgIGluaXRfdHJhY2Vf
b25fc3RhcnR1cCA9IHRydWU7CiAgICAgcWVtdV9vcHRzX2RlbChvcHRzKTsKLQotICAgIHJldHVy
biB0cmFjZV9maWxlOwogfQogCiB1aW50MzJfdCB0cmFjZV9nZXRfdmNwdV9ldmVudF9jb3VudCh2
b2lkKQotLSAKMi4yOC4wCgo=


