Return-Path: <qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org>
X-Original-To: lists+qemu-devel@lfdr.de
Delivered-To: lists+qemu-devel@lfdr.de
Received: from lists.gnu.org (lists.gnu.org [209.51.188.17])
	by mail.lfdr.de (Postfix) with ESMTPS id 9B30A4A62D4
	for <lists+qemu-devel@lfdr.de>; Tue,  1 Feb 2022 18:46:32 +0100 (CET)
Received: from localhost ([::1]:45724 helo=lists1p.gnu.org)
	by lists.gnu.org with esmtp (Exim 4.90_1)
	(envelope-from <qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org>)
	id 1nExEd-0003cv-Mn
	for lists+qemu-devel@lfdr.de; Tue, 01 Feb 2022 12:46:31 -0500
Received: from eggs.gnu.org ([209.51.188.92]:59162)
 by lists.gnu.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256)
 (Exim 4.90_1) (envelope-from <ysato@users.sourceforge.jp>)
 id 1nEvS3-0004tZ-4q
 for qemu-devel@nongnu.org; Tue, 01 Feb 2022 10:52:15 -0500
Received: from mail08.asahi-net.or.jp ([202.224.55.48]:58193)
 by eggs.gnu.org with esmtp (Exim 4.90_1)
 (envelope-from <ysato@users.sourceforge.jp>) id 1nEvS1-0001Vx-6q
 for qemu-devel@nongnu.org; Tue, 01 Feb 2022 10:52:14 -0500
Received: from sakura.ysato.name (ik1-413-38519.vs.sakura.ne.jp
 [153.127.30.23]) (Authenticated sender: PQ4Y-STU)
 by mail08.asahi-net.or.jp (Postfix) with ESMTPA id 2554920C0A;
 Wed,  2 Feb 2022 00:52:08 +0900 (JST)
Received: from localhost.ysato.ml (b150065.dynamic.ppp.asahi-net.or.jp
 [202.213.150.65])
 by sakura.ysato.name (Postfix) with ESMTPSA id 4BD221C00DA;
 Wed,  2 Feb 2022 00:52:08 +0900 (JST)
Date: Wed, 02 Feb 2022 00:52:03 +0900
Message-ID: <s3x5ypy1t5o.wl-ysato@users.sourceforge.jp>
From: Yoshinori Sato <ysato@users.sourceforge.jp>
To: Thomas Huth <thuth@redhat.com>
Subject: Re: [PATCH 1/2] hw/char/renesas_sci: Add fifo buffer to backend
 interface.
In-Reply-To: <de031f36-963c-8828-6724-450e9fbf48d6@redhat.com>
References: <20220131094246.772550-1-ysato@users.sourceforge.jp>
 <de031f36-963c-8828-6724-450e9fbf48d6@redhat.com>
User-Agent: Wanderlust/2.15.9 (Almost Unreal) SEMI-EPG/1.14.7 (Harue)
 FLIM-LB/1.14.9 (=?ISO-8859-4?Q?Goj=F2?=) APEL-LB/10.8 EasyPG/1.0.0
 Emacs/27.2 (arm-unknown-linux-androideabi) MULE/6.0 (HANACHIRUSATO)
MIME-Version: 1.0 (generated by SEMI-EPG 1.14.7 - "Harue")
Content-Type: text/plain; charset=US-ASCII
Received-SPF: softfail client-ip=202.224.55.48;
 envelope-from=ysato@users.sourceforge.jp; helo=mail08.asahi-net.or.jp
X-Spam_score_int: -11
X-Spam_score: -1.2
X-Spam_bar: -
X-Spam_report: (-1.2 / 5.0 requ) BAYES_00=-1.9, RCVD_IN_MSPIKE_H2=-0.001,
 SPF_HELO_NONE=0.001, SPF_SOFTFAIL=0.665,
 T_SCC_BODY_TEXT_LINE=-0.01 autolearn=no autolearn_force=no
X-Spam_action: no action
X-BeenThere: qemu-devel@nongnu.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: <qemu-devel.nongnu.org>
List-Unsubscribe: <https://lists.nongnu.org/mailman/options/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=unsubscribe>
List-Archive: <https://lists.nongnu.org/archive/html/qemu-devel>
List-Post: <mailto:qemu-devel@nongnu.org>
List-Help: <mailto:qemu-devel-request@nongnu.org?subject=help>
List-Subscribe: <https://lists.nongnu.org/mailman/listinfo/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=subscribe>
Cc: =?ISO-8859-1?Q?Marc-Andr=E9?= Lureau <marcandre.lureau@redhat.com>,
 Paolo Bonzini <pbonzini@redhat.com>, Magnus Damm <magnus.damm@gmail.com>,
 qemu-devel@nongnu.org,
 Philippe =?ISO-8859-1?Q?Mathieu-Daud=E9?= <f4bug@amsat.org>
Errors-To: qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org
Sender: "Qemu-devel" <qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org>

On Tue, 01 Feb 2022 15:48:58 +0900,
Thomas Huth wrote:
> 
> On 31/01/2022 10.42, Yoshinori Sato wrote:
> > SCI does not have a fifo, it is necessary to send and receive
> >   at a bit rate speed.
> > But, qemu's chardev backend does not have a buffer,
> >   so it sends received data continuously.
> > By buffering the received data with the FIFO, continuous
> >   received data can be received.
> 
>  Hi!
> 
> If you describe it like this, it sounds like you're now emulating a
> buffer that is not there with real hardware? Is that really what you
> want here, i.e. wouldn't this hide problems with the real hardware
> that are mitigated in QEMU with this buffer?

There is no such buffer in the real hardware.
It's not possible with real hardware, but the chardev backend passes
data faster than the bitrate.
There is no problem if the received data is supplied at the timing when
it can be received, but since it is difficult to match the timing accurately,
we expect that the buffer will absorb the difference in timing.

> Anyway, please use scripts/get_maintainer.pl to get a list of people
> who should be put on CC:, otherwise your patches might get lost in the
> high traffic of the mailing list.

OK.

> 
>  Thomas
> 
> 

--
Yoshinori Sato

