Return-Path: <qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org>
X-Original-To: lists+qemu-devel@lfdr.de
Delivered-To: lists+qemu-devel@lfdr.de
Received: from lists.gnu.org (lists.gnu.org [209.51.188.17])
	by mail.lfdr.de (Postfix) with ESMTPS id 51EEE60534C
	for <lists+qemu-devel@lfdr.de>; Thu, 20 Oct 2022 00:45:35 +0200 (CEST)
Received: from localhost ([::1]:39862 helo=lists1p.gnu.org)
	by lists.gnu.org with esmtp (Exim 4.90_1)
	(envelope-from <qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org>)
	id 1olHob-000583-Ft
	for lists+qemu-devel@lfdr.de; Wed, 19 Oct 2022 18:45:33 -0400
Received: from eggs.gnu.org ([2001:470:142:3::10]:44214)
 by lists.gnu.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256)
 (Exim 4.90_1) (envelope-from <tsimpson@qualcomm.com>)
 id 1olHhB-0002Cz-Mv
 for qemu-devel@nongnu.org; Wed, 19 Oct 2022 18:37:54 -0400
Received: from mx0a-0031df01.pphosted.com ([205.220.168.131]:45834)
 by eggs.gnu.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256)
 (Exim 4.90_1) (envelope-from <tsimpson@qualcomm.com>)
 id 1olHh7-00029p-Pe
 for qemu-devel@nongnu.org; Wed, 19 Oct 2022 18:37:52 -0400
Received: from pps.filterd (m0279863.ppops.net [127.0.0.1])
 by mx0a-0031df01.pphosted.com (8.17.1.5/8.17.1.5) with ESMTP id 29JILrCx013414;
 Wed, 19 Oct 2022 22:37:44 GMT
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=quicinc.com;
 h=from : to : cc :
 subject : date : message-id : in-reply-to : references : mime-version :
 content-type : content-transfer-encoding; s=qcppdkim1;
 bh=p7sKAoTYK1mk0in0DPLEwK0hG8WSXUeUUMjk+2UmXds=;
 b=F2A2mSNDgYUA9jzzwvH7hJNpM+T2L90q3tDwEbcvDJorFWodV3bOTTAXUe9nyx7VV5ym
 sQVw0uhtWWatYhMf5m/zRgQYZr1CY3luBDFnB1pY9OCx2NDYfFx8aO2tptix3hxn9Maf
 RcJE0+/ny2QXDUr8UWiaMyl1QHUj5df1QNHRo/dwP394JSwoD8zq066u4hWW5Grso/FX
 EhSkMWAdH8udWBLGd4YZJ6y3icMw9pJRkJ2f6lklF1FSbbzRvQbQVhTm5x3Mflx2RoY/
 DMkDlUHZmg1bLS1Uc6ofGBZBRL5/P0Cdbf09MM8vA+TvhpDh/zhBAAHRj4/IPSMRAvHC 5g== 
Received: from nalasppmta05.qualcomm.com (Global_NAT1.qualcomm.com
 [129.46.96.20])
 by mx0a-0031df01.pphosted.com (PPS) with ESMTPS id 3kaknjh9mg-1
 (version=TLSv1.2 cipher=ECDHE-RSA-AES256-GCM-SHA384 bits=256 verify=NOT);
 Wed, 19 Oct 2022 22:37:43 +0000
Received: from pps.filterd (NALASPPMTA05.qualcomm.com [127.0.0.1])
 by NALASPPMTA05.qualcomm.com (8.17.1.5/8.17.1.5) with ESMTP id 29JMbg8u004635; 
 Wed, 19 Oct 2022 22:37:42 GMT
Received: from pps.reinject (localhost [127.0.0.1])
 by NALASPPMTA05.qualcomm.com (PPS) with ESMTPS id 3k7nxkwacf-1
 (version=TLSv1.2 cipher=ECDHE-RSA-AES256-GCM-SHA384 bits=256 verify=NO);
 Wed, 19 Oct 2022 22:37:42 +0000
Received: from NALASPPMTA05.qualcomm.com (NALASPPMTA05.qualcomm.com
 [127.0.0.1])
 by pps.reinject (8.17.1.5/8.17.1.5) with ESMTP id 29JMbgMV004619;
 Wed, 19 Oct 2022 22:37:42 GMT
Received: from hu-devc-lv-u18-c.qualcomm.com (hu-tsimpson-lv.qualcomm.com
 [10.47.235.220])
 by NALASPPMTA05.qualcomm.com (PPS) with ESMTP id 29JMbfX9004616;
 Wed, 19 Oct 2022 22:37:42 +0000
Received: by hu-devc-lv-u18-c.qualcomm.com (Postfix, from userid 47164)
 id B5DFD5000AE; Wed, 19 Oct 2022 15:37:41 -0700 (PDT)
From: Taylor Simpson <tsimpson@quicinc.com>
To: qemu-devel@nongnu.org
Cc: tsimpson@quicinc.com, richard.henderson@linaro.org, philmd@linaro.org,
 ale@rev.ng, anjo@rev.ng, bcain@quicinc.com, quic_mathbern@quicinc.com
Subject: [PATCH 2/8] Hexagon (target/hexagon) Remove PC from the runtime state
Date: Wed, 19 Oct 2022 15:37:33 -0700
Message-Id: <20221019223739.3868-3-tsimpson@quicinc.com>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20221019223739.3868-1-tsimpson@quicinc.com>
References: <20221019223739.3868-1-tsimpson@quicinc.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
X-QCInternal: smtphost
X-QCInternal: smtphost
X-Proofpoint-Virus-Version: vendor=nai engine=6200 definitions=5800
 signatures=585085
X-Proofpoint-Virus-Version: vendor=nai engine=6200 definitions=5800
 signatures=585085
X-Proofpoint-GUID: LQ9st9kezJOfiPBsEC-TlSXLP_CyzRm8
X-Proofpoint-ORIG-GUID: LQ9st9kezJOfiPBsEC-TlSXLP_CyzRm8
X-Proofpoint-Virus-Version: vendor=baseguard
 engine=ICAP:2.0.205,Aquarius:18.0.895,Hydra:6.0.545,FMLib:17.11.122.1
 definitions=2022-10-19_12,2022-10-19_04,2022-06-22_01
X-Proofpoint-Spam-Details: rule=outbound_notspam policy=outbound score=0
 spamscore=0 bulkscore=0
 mlxscore=0 adultscore=0 malwarescore=0 suspectscore=0 mlxlogscore=733
 impostorscore=0 priorityscore=1501 clxscore=1015 phishscore=0
 lowpriorityscore=0 classifier=spam adjust=0 reason=mlx scancount=1
 engine=8.12.0-2209130000 definitions=main-2210190125
Received-SPF: pass client-ip=205.220.168.131;
 envelope-from=tsimpson@qualcomm.com; helo=mx0a-0031df01.pphosted.com
X-Spam_score_int: -24
X-Spam_score: -2.5
X-Spam_bar: --
X-Spam_report: (-2.5 / 5.0 requ) BAYES_00=-1.9, DKIM_SIGNED=0.1,
 DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1, HEADER_FROM_DIFFERENT_DOMAINS=0.25,
 RCVD_IN_DNSWL_LOW=-0.7, SPF_HELO_NONE=0.001,
 SPF_PASS=-0.001 autolearn=ham autolearn_force=no
X-Spam_action: no action
X-BeenThere: qemu-devel@nongnu.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: <qemu-devel.nongnu.org>
List-Unsubscribe: <https://lists.nongnu.org/mailman/options/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=unsubscribe>
List-Archive: <https://lists.nongnu.org/archive/html/qemu-devel>
List-Post: <mailto:qemu-devel@nongnu.org>
List-Help: <mailto:qemu-devel-request@nongnu.org?subject=help>
List-Subscribe: <https://lists.nongnu.org/mailman/listinfo/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=subscribe>
Errors-To: qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org
Sender: "Qemu-devel" <qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org>

QWRkIHBjIGZpZWxkIHRvIFBhY2tldCBzdHJ1Y3R1cmUKRm9yIGhlbHBlcnMgdGhhdCBuZWVkIFBD
LCBwYXNzIGFuIGV4dHJhIGFyZ3VtZW50ClJlbW92ZSBzbG90IGFyZyBmcm9tIGNvbmRpdGlvbmFs
IGp1bXAgaGVscGVycwpPbiBhIHRyYXAwLCBjb3B5IHBrdC0+cGMgaW50byBoZXhfZ3ByW0hFWF9S
RUdfUENdCgpTaWduZWQtb2ZmLWJ5OiBUYXlsb3IgU2ltcHNvbiA8dHNpbXBzb25AcXVpY2luYy5j
b20+Ci0tLQogdGFyZ2V0L2hleGFnb24vZ2VuX3RjZy5oICAgICAgICAgICAgfCA3ICsrKysrKysK
IHRhcmdldC9oZXhhZ29uL2luc24uaCAgICAgICAgICAgICAgIHwgMSArCiB0YXJnZXQvaGV4YWdv
bi9tYWNyb3MuaCAgICAgICAgICAgICB8IDIgKy0KIHRhcmdldC9oZXhhZ29uL3RyYW5zbGF0ZS5j
ICAgICAgICAgIHwgOSArLS0tLS0tLS0KIHRhcmdldC9oZXhhZ29uL2dlbl9oZWxwZXJfZnVuY3Mu
cHkgIHwgNCArKysrCiB0YXJnZXQvaGV4YWdvbi9nZW5faGVscGVyX3Byb3Rvcy5weSB8IDMgKysr
CiB0YXJnZXQvaGV4YWdvbi9nZW5fdGNnX2Z1bmNzLnB5ICAgICB8IDMgKysrCiB0YXJnZXQvaGV4
YWdvbi9oZXhfY29tbW9uLnB5ICAgICAgICB8IDYgKysrKystCiA4IGZpbGVzIGNoYW5nZWQsIDI1
IGluc2VydGlvbnMoKyksIDEwIGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL3RhcmdldC9oZXhh
Z29uL2dlbl90Y2cuaCBiL3RhcmdldC9oZXhhZ29uL2dlbl90Y2cuaAppbmRleCA1MDYzNGFjNDU5
Li43ZjBiYTI3ZWI2IDEwMDY0NAotLS0gYS90YXJnZXQvaGV4YWdvbi9nZW5fdGNnLmgKKysrIGIv
dGFyZ2V0L2hleGFnb24vZ2VuX3RjZy5oCkBAIC03NDIsNCArNzQyLDExIEBACiAgICAgICAgIFJz
ViA9IFJzVjsgXAogICAgIH0gd2hpbGUgKDApCiAKKyNkZWZpbmUgZkdFTl9UQ0dfSjJfdHJhcDAo
U0hPUlRDT0RFKSBcCisgICAgZG8geyBcCisgICAgICAgIHVpViA9IHVpVjsgXAorICAgICAgICB0
Y2dfZ2VuX21vdmlfdGwoaGV4X2dwcltIRVhfUkVHX1BDXSwgcGt0LT5wYyk7IFwKKyAgICAgICAg
VENHdiBleGNwID0gdGNnX2NvbnN0YW50X3RsKEhFWF9FWENQX1RSQVAwKTsgXAorICAgICAgICBn
ZW5faGVscGVyX3JhaXNlX2V4Y2VwdGlvbihjcHVfZW52LCBleGNwKTsgXAorICAgIH0gd2hpbGUg
KDApCiAjZW5kaWYKZGlmZiAtLWdpdCBhL3RhcmdldC9oZXhhZ29uL2luc24uaCBiL3RhcmdldC9o
ZXhhZ29uL2luc24uaAppbmRleCA4NTdhN2NlYjc1Li5iMzI2MGQxZjBiIDEwMDY0NAotLS0gYS90
YXJnZXQvaGV4YWdvbi9pbnNuLmgKKysrIGIvdGFyZ2V0L2hleGFnb24vaW5zbi5oCkBAIC01Nyw2
ICs1Nyw3IEBAIHR5cGVkZWYgc3RydWN0IEluc3RydWN0aW9uIEluc247CiBzdHJ1Y3QgUGFja2V0
IHsKICAgICB1aW50MTZfdCBudW1faW5zbnM7CiAgICAgdWludDE2X3QgZW5jb2RfcGt0X3NpemVf
aW5fYnl0ZXM7CisgICAgdWludDMyX3QgcGM7CiAKICAgICAvKiBQcmUtZGVjb2RlcyBhYm91dCBD
T0YgKi8KICAgICBib29sIHBrdF9oYXNfY29mOyAgICAgICAgICAvKiBIYXMgYW55IGNoYW5nZS1v
Zi1mbG93ICovCmRpZmYgLS1naXQgYS90YXJnZXQvaGV4YWdvbi9tYWNyb3MuaCBiL3RhcmdldC9o
ZXhhZ29uL21hY3Jvcy5oCmluZGV4IGU5MDg0MDVkODIuLjQ2OWRmYTU1NzEgMTAwNjQ0Ci0tLSBh
L3RhcmdldC9oZXhhZ29uL21hY3Jvcy5oCisrKyBiL3RhcmdldC9oZXhhZ29uL21hY3Jvcy5oCkBA
IC0zOTgsNyArMzk4LDcgQEAgc3RhdGljIGlubGluZSBUQ0d2IGdlbl9yZWFkX2lyZWcoVENHdiBy
ZXN1bHQsIFRDR3YgdmFsLCBpbnQgc2hpZnQpCiAjZWxzZQogI2RlZmluZSBmUkVBRF9HUCgpIFJF
QURfUkVHKEhFWF9SRUdfR1ApCiAjZW5kaWYKLSNkZWZpbmUgZlJFQURfUEMoKSAoUkVBRF9SRUco
SEVYX1JFR19QQykpCisjZGVmaW5lIGZSRUFEX1BDKCkgKFBDKQogCiAjZGVmaW5lIGZSRUFEX05Q
QygpIChlbnYtPm5leHRfUEMgJiAoMHhmZmZmZmZmZSkpCiAKZGlmZiAtLWdpdCBhL3RhcmdldC9o
ZXhhZ29uL3RyYW5zbGF0ZS5jIGIvdGFyZ2V0L2hleGFnb24vdHJhbnNsYXRlLmMKaW5kZXggMmU0
NmNjMDY4MC4uZmQ0ZjBlZmEyNiAxMDA2NDQKLS0tIGEvdGFyZ2V0L2hleGFnb24vdHJhbnNsYXRl
LmMKKysrIGIvdGFyZ2V0L2hleGFnb24vdHJhbnNsYXRlLmMKQEAgLTE5NCwxMSArMTk0LDYgQEAg
c3RhdGljIGJvb2wgY2hlY2tfZm9yX2F0dHJpYihQYWNrZXQgKnBrdCwgaW50IGF0dHJpYikKICAg
ICByZXR1cm4gZmFsc2U7CiB9CiAKLXN0YXRpYyBib29sIG5lZWRfcGMoUGFja2V0ICpwa3QpCi17
Ci0gICAgcmV0dXJuIGNoZWNrX2Zvcl9hdHRyaWIocGt0LCBBX0lNUExJQ0lUX1JFQURTX1BDKTsK
LX0KLQogc3RhdGljIGJvb2wgbmVlZF9zbG90X2NhbmNlbGxlZChQYWNrZXQgKnBrdCkKIHsKICAg
ICByZXR1cm4gY2hlY2tfZm9yX2F0dHJpYihwa3QsIEFfQ09OREVYRUMpOwpAQCAtMjQwLDkgKzIz
NSw2IEBAIHN0YXRpYyB2b2lkIGdlbl9zdGFydF9wYWNrZXQoRGlzYXNDb250ZXh0ICpjdHgsIFBh
Y2tldCAqcGt0KQogICAgIH0KIAogICAgIC8qIEluaXRpYWxpemUgdGhlIHJ1bnRpbWUgc3RhdGUg
Zm9yIHBhY2tldCBzZW1hbnRpY3MgKi8KLSAgICBpZiAobmVlZF9wYyhwa3QpKSB7Ci0gICAgICAg
IHRjZ19nZW5fbW92aV90bChoZXhfZ3ByW0hFWF9SRUdfUENdLCBjdHgtPmJhc2UucGNfbmV4dCk7
Ci0gICAgfQogICAgIGlmIChuZWVkX3Nsb3RfY2FuY2VsbGVkKHBrdCkpIHsKICAgICAgICAgdGNn
X2dlbl9tb3ZpX3RsKGhleF9zbG90X2NhbmNlbGxlZCwgMCk7CiAgICAgfQpAQCAtNzY4LDYgKzc2
MCw3IEBAIHN0YXRpYyB2b2lkIGRlY29kZV9hbmRfdHJhbnNsYXRlX3BhY2tldChDUFVIZXhhZ29u
U3RhdGUgKmVudiwgRGlzYXNDb250ZXh0ICpjdHgpCiAgICAgfQogCiAgICAgaWYgKGRlY29kZV9w
YWNrZXQobndvcmRzLCB3b3JkcywgJnBrdCwgZmFsc2UpID4gMCkgeworICAgICAgICBwa3QucGMg
PSBjdHgtPmJhc2UucGNfbmV4dDsKICAgICAgICAgSEVYX0RFQlVHX1BSSU5UX1BLVCgmcGt0KTsK
ICAgICAgICAgZ2VuX3N0YXJ0X3BhY2tldChjdHgsICZwa3QpOwogICAgICAgICBmb3IgKGkgPSAw
OyBpIDwgcGt0Lm51bV9pbnNuczsgaSsrKSB7CmRpZmYgLS1naXQgYS90YXJnZXQvaGV4YWdvbi9n
ZW5faGVscGVyX2Z1bmNzLnB5IGIvdGFyZ2V0L2hleGFnb24vZ2VuX2hlbHBlcl9mdW5jcy5weQpp
bmRleCBmN2MxYTgyZTlmLi44YWIxNDRiMjBhIDEwMDc1NQotLS0gYS90YXJnZXQvaGV4YWdvbi9n
ZW5faGVscGVyX2Z1bmNzLnB5CisrKyBiL3RhcmdldC9oZXhhZ29uL2dlbl9oZWxwZXJfZnVuY3Mu
cHkKQEAgLTI0MSw2ICsyNDEsMTAgQEAgZGVmIGdlbl9oZWxwZXJfZnVuY3Rpb24oZiwgdGFnLCB0
YWdyZWdzLCB0YWdpbW1zKToKICAgICAgICAgaWYgKGhleF9jb21tb24ubmVlZF9wa3RfaGFzX211
bHRpX2NvZih0YWcpKToKICAgICAgICAgICAgIGYud3JpdGUoIiwgdWludDMyX3QgcGt0X2hhc19t
dWx0aV9jb2YiKQogCisgICAgICAgIGlmIGhleF9jb21tb24ubmVlZF9QQyh0YWcpOgorICAgICAg
ICAgICAgaWYgaSA+IDA6IGYud3JpdGUoIiwgIikKKyAgICAgICAgICAgIGYud3JpdGUoInRhcmdl
dF91bG9uZyBQQyIpCisgICAgICAgICAgICBpICs9IDEKICAgICAgICAgaWYgaGV4X2NvbW1vbi5u
ZWVkX3Nsb3QodGFnKToKICAgICAgICAgICAgIGlmIGkgPiAwOiBmLndyaXRlKCIsICIpCiAgICAg
ICAgICAgICBmLndyaXRlKCJ1aW50MzJfdCBzbG90IikKZGlmZiAtLWdpdCBhL3RhcmdldC9oZXhh
Z29uL2dlbl9oZWxwZXJfcHJvdG9zLnB5IGIvdGFyZ2V0L2hleGFnb24vZ2VuX2hlbHBlcl9wcm90
b3MucHkKaW5kZXggNDUzMGQ3YmE4ZC4uMjM4NTcxN2RkYSAxMDA3NTUKLS0tIGEvdGFyZ2V0L2hl
eGFnb24vZ2VuX2hlbHBlcl9wcm90b3MucHkKKysrIGIvdGFyZ2V0L2hleGFnb24vZ2VuX2hlbHBl
cl9wcm90b3MucHkKQEAgLTg1LDYgKzg1LDcgQEAgZGVmIGdlbl9oZWxwZXJfcHJvdG90eXBlKGYs
IHRhZywgdGFncmVncywgdGFnaW1tcyk6CiAgICAgICAgICAgICBpZiBoZXhfY29tbW9uLm5lZWRf
cGt0X2hhc19tdWx0aV9jb2YodGFnKTogZGVmX2hlbHBlcl9zaXplICs9IDEKICAgICAgICAgICAg
IGlmIGhleF9jb21tb24ubmVlZF9wYXJ0MSh0YWcpOiBkZWZfaGVscGVyX3NpemUgKz0gMQogICAg
ICAgICAgICAgaWYgaGV4X2NvbW1vbi5uZWVkX3Nsb3QodGFnKTogZGVmX2hlbHBlcl9zaXplICs9
IDEKKyAgICAgICAgICAgIGlmIGhleF9jb21tb24ubmVlZF9QQyh0YWcpOiBkZWZfaGVscGVyX3Np
emUgKz0gMQogICAgICAgICAgICAgZi53cml0ZSgnREVGX0hFTFBFUl8lcyglcycgJSAoZGVmX2hl
bHBlcl9zaXplLCB0YWcpKQogICAgICAgICAgICAgIyMgVGhlIHJldHVybiB0eXBlIGlzIHZvaWQK
ICAgICAgICAgICAgIGYud3JpdGUoJywgdm9pZCcgKQpAQCAtOTMsNiArOTQsNyBAQCBkZWYgZ2Vu
X2hlbHBlcl9wcm90b3R5cGUoZiwgdGFnLCB0YWdyZWdzLCB0YWdpbW1zKToKICAgICAgICAgICAg
IGlmIGhleF9jb21tb24ubmVlZF9wa3RfaGFzX211bHRpX2NvZih0YWcpOiBkZWZfaGVscGVyX3Np
emUgKz0gMQogICAgICAgICAgICAgaWYgaGV4X2NvbW1vbi5uZWVkX3BhcnQxKHRhZyk6IGRlZl9o
ZWxwZXJfc2l6ZSArPSAxCiAgICAgICAgICAgICBpZiBoZXhfY29tbW9uLm5lZWRfc2xvdCh0YWcp
OiBkZWZfaGVscGVyX3NpemUgKz0gMQorICAgICAgICAgICAgaWYgaGV4X2NvbW1vbi5uZWVkX1BD
KHRhZyk6IGRlZl9oZWxwZXJfc2l6ZSArPSAxCiAgICAgICAgICAgICBmLndyaXRlKCdERUZfSEVM
UEVSXyVzKCVzJyAlIChkZWZfaGVscGVyX3NpemUsIHRhZykpCiAKICAgICAgICAgIyMgR2VuZXJh
dGUgdGhlIHFlbXUgREVGX0hFTFBFUiB0eXBlIGZvciBlYWNoIHJlc3VsdApAQCAtMTMxLDYgKzEz
Myw3IEBAIGRlZiBnZW5faGVscGVyX3Byb3RvdHlwZShmLCB0YWcsIHRhZ3JlZ3MsIHRhZ2ltbXMp
OgogICAgICAgICAjIyBBZGQgdGhlIGFyZ3VtZW50cyBmb3IgdGhlIGluc3RydWN0aW9uIHBrdF9o
YXNfbXVsdGlfY29mLCBzbG90IGFuZAogICAgICAgICAjIyBwYXJ0MSAoaWYgbmVlZGVkKQogICAg
ICAgICBpZiBoZXhfY29tbW9uLm5lZWRfcGt0X2hhc19tdWx0aV9jb2YodGFnKTogZi53cml0ZSgn
LCBpMzInKQorICAgICAgICBpZiBoZXhfY29tbW9uLm5lZWRfUEModGFnKTogZi53cml0ZSgnLCBp
MzInKQogICAgICAgICBpZiBoZXhfY29tbW9uLm5lZWRfc2xvdCh0YWcpOiBmLndyaXRlKCcsIGkz
MicgKQogICAgICAgICBpZiBoZXhfY29tbW9uLm5lZWRfcGFydDEodGFnKTogZi53cml0ZSgnICwg
aTMyJyApCiAgICAgICAgIGYud3JpdGUoJylcbicpCmRpZmYgLS1naXQgYS90YXJnZXQvaGV4YWdv
bi9nZW5fdGNnX2Z1bmNzLnB5IGIvdGFyZ2V0L2hleGFnb24vZ2VuX3RjZ19mdW5jcy5weQppbmRl
eCA2NzA0NWM4MGJiLi4yMjI1YmIwOGRhIDEwMDc1NQotLS0gYS90YXJnZXQvaGV4YWdvbi9nZW5f
dGNnX2Z1bmNzLnB5CisrKyBiL3RhcmdldC9oZXhhZ29uL2dlbl90Y2dfZnVuY3MucHkKQEAgLTYy
Miw2ICs2MjIsOCBAQCBkZWYgZ2VuX3RjZ19mdW5jKGYsIHRhZywgcmVncywgaW1tcyk6CiAgICAg
ICAgICAgICBmLndyaXRlKCIgICAgVENHdiBwYXJ0MSA9IHRjZ19jb25zdGFudF90bChpbnNuLT5w
YXJ0MSk7XG4iKQogICAgICAgICBpZiBoZXhfY29tbW9uLm5lZWRfc2xvdCh0YWcpOgogICAgICAg
ICAgICAgZi53cml0ZSgiICAgIFRDR3Ygc2xvdCA9IHRjZ19jb25zdGFudF90bChpbnNuLT5zbG90
KTtcbiIpCisgICAgICAgIGlmIGhleF9jb21tb24ubmVlZF9QQyh0YWcpOgorICAgICAgICAgICAg
Zi53cml0ZSgiICAgIFRDR3YgUEMgPSB0Y2dfY29uc3RhbnRfdGwocGt0LT5wYyk7XG4iKQogICAg
ICAgICBmLndyaXRlKCIgICAgZ2VuX2hlbHBlcl8lcygiICUgKHRhZykpCiAgICAgICAgIGk9MAog
ICAgICAgICAjIyBJZiB0aGVyZSBpcyBhIHNjYWxhciByZXN1bHQsIGl0IGlzIHRoZSByZXR1cm4g
dHlwZQpAQCAtNjUyLDYgKzY1NCw3IEBAIGRlZiBnZW5fdGNnX2Z1bmMoZiwgdGFnLCByZWdzLCBp
bW1zKToKIAogICAgICAgICBpZiBoZXhfY29tbW9uLm5lZWRfcGt0X2hhc19tdWx0aV9jb2YodGFn
KToKICAgICAgICAgICAgIGYud3JpdGUoIiwgcGt0X2hhc19tdWx0aV9jb2YiKQorICAgICAgICBp
ZiBoZXhfY29tbW9uLm5lZWRfUEModGFnKTogZi53cml0ZSgiLCBQQyIpCiAgICAgICAgIGlmIGhl
eF9jb21tb24ubmVlZF9zbG90KHRhZyk6IGYud3JpdGUoIiwgc2xvdCIpCiAgICAgICAgIGlmIGhl
eF9jb21tb24ubmVlZF9wYXJ0MSh0YWcpOiBmLndyaXRlKCIsIHBhcnQxIiApCiAgICAgICAgIGYu
d3JpdGUoIik7XG4iKQpkaWZmIC0tZ2l0IGEvdGFyZ2V0L2hleGFnb24vaGV4X2NvbW1vbi5weSBi
L3RhcmdldC9oZXhhZ29uL2hleF9jb21tb24ucHkKaW5kZXggNmE2YmVlNzU1MS4uNDZiNjY3MWJm
YSAxMDA3NTUKLS0tIGEvdGFyZ2V0L2hleGFnb24vaGV4X2NvbW1vbi5weQorKysgYi90YXJnZXQv
aGV4YWdvbi9oZXhfY29tbW9uLnB5CkBAIC0xOTQsNyArMTk0LDggQEAgZGVmIGlzX25ld192YWwo
cmVndHlwZSwgcmVnaWQsIHRhZyk6CiAgICAgcmV0dXJuIHJlZ3R5cGUrcmVnaWQrJ04nIGluIHNl
bWRpY3RbdGFnXQogCiBkZWYgbmVlZF9zbG90KHRhZyk6Ci0gICAgaWYgKCdBX0NPTkRFWEVDJyBp
biBhdHRyaWJkaWN0W3RhZ10gb3IKKyAgICBpZiAoKCdBX0NPTkRFWEVDJyBpbiBhdHRyaWJkaWN0
W3RhZ10gYW5kCisgICAgICAgICAnQV9KVU1QJyBub3QgaW4gYXR0cmliZGljdFt0YWddKSBvcgog
ICAgICAgICAnQV9TVE9SRScgaW4gYXR0cmliZGljdFt0YWddIG9yCiAgICAgICAgICdBX0xPQUQn
IGluIGF0dHJpYmRpY3RbdGFnXSk6CiAgICAgICAgIHJldHVybiAxCkBAIC0yMDcsNiArMjA4LDkg
QEAgZGVmIG5lZWRfcGFydDEodGFnKToKIGRlZiBuZWVkX2VhKHRhZyk6CiAgICAgcmV0dXJuIHJl
LmNvbXBpbGUociJcYkVBXGIiKS5zZWFyY2goc2VtZGljdFt0YWddKQogCitkZWYgbmVlZF9QQyh0
YWcpOgorICAgIHJldHVybiAnQV9JTVBMSUNJVF9SRUFEU19QQycgaW4gYXR0cmliZGljdFt0YWdd
CisKIGRlZiBuZWVkX3BrdF9oYXNfbXVsdGlfY29mKHRhZyk6CiAgICAgaWYgKCdBX0pVTVAnIGlu
IGF0dHJpYmRpY3RbdGFnXSBvcgogICAgICAgICAnQV9DQUxMJyBpbiBhdHRyaWJkaWN0W3RhZ10g
b3IKLS0gCjIuMTcuMQoK

