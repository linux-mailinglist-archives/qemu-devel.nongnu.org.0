Return-Path: <qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org>
X-Original-To: lists+qemu-devel@lfdr.de
Delivered-To: lists+qemu-devel@lfdr.de
Received: from lists.gnu.org (lists.gnu.org [209.51.188.17])
	by mail.lfdr.de (Postfix) with ESMTPS id 8B8ED57A15B
	for <lists+qemu-devel@lfdr.de>; Tue, 19 Jul 2022 16:25:40 +0200 (CEST)
Received: from localhost ([::1]:52650 helo=lists1p.gnu.org)
	by lists.gnu.org with esmtp (Exim 4.90_1)
	(envelope-from <qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org>)
	id 1oDoAN-0003zt-Hg
	for lists+qemu-devel@lfdr.de; Tue, 19 Jul 2022 10:25:39 -0400
Received: from eggs.gnu.org ([2001:470:142:3::10]:56860)
 by lists.gnu.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256)
 (Exim 4.90_1) (envelope-from <victor.colombo@eldorado.org.br>)
 id 1oDo59-00057O-Cd; Tue, 19 Jul 2022 10:20:16 -0400
Received: from [200.168.210.66] (port=32746 helo=outlook.eldorado.org.br)
 by eggs.gnu.org with esmtp (Exim 4.90_1)
 (envelope-from <victor.colombo@eldorado.org.br>)
 id 1oDo56-0007dL-Vf; Tue, 19 Jul 2022 10:20:15 -0400
Received: from p9ibm ([10.10.71.235]) by outlook.eldorado.org.br over TLS
 secured channel with Microsoft SMTPSVC(8.5.9600.16384); 
 Tue, 19 Jul 2022 11:20:07 -0300
Received: from [127.0.0.1] (unknown [10.10.70.45])
 by p9ibm (Postfix) with ESMTPS id 48A3E800131;
 Tue, 19 Jul 2022 11:20:07 -0300 (-03)
Message-ID: <d3957528-313e-42c9-8f46-32e68267f0b6@eldorado.org.br>
Date: Tue, 19 Jul 2022 11:20:07 -0300
MIME-Version: 1.0
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:91.0) Gecko/20100101
 Thunderbird/91.11.0
Subject: Re: [PATCH] target/ppc: Implement new wait variants
Content-Language: en-US
To: Nicholas Piggin <npiggin@gmail.com>, qemu-ppc@nongnu.org
Cc: qemu-devel@nongnu.org
References: <20220719113843.429600-1-npiggin@gmail.com>
From: =?UTF-8?Q?V=c3=adctor_Colombo?= <victor.colombo@eldorado.org.br>
In-Reply-To: <20220719113843.429600-1-npiggin@gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: base64
X-OriginalArrivalTime: 19 Jul 2022 14:20:07.0623 (UTC)
 FILETIME=[A5BAD570:01D89B7A]
X-Host-Lookup-Failed: Reverse DNS lookup failed for 200.168.210.66 (failed)
Received-SPF: pass client-ip=200.168.210.66;
 envelope-from=victor.colombo@eldorado.org.br; helo=outlook.eldorado.org.br
X-Spam_score_int: -4
X-Spam_score: -0.5
X-Spam_bar: /
X-Spam_report: (-0.5 / 5.0 requ) BAYES_00=-1.9, NICE_REPLY_A=-0.001,
 PDS_HP_HELO_NORDNS=0.659, RDNS_NONE=0.793, SPF_HELO_NONE=0.001,
 SPF_PASS=-0.001, T_SCC_BODY_TEXT_LINE=-0.01 autolearn=no autolearn_force=no
X-Spam_action: no action
X-BeenThere: qemu-devel@nongnu.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: <qemu-devel.nongnu.org>
List-Unsubscribe: <https://lists.nongnu.org/mailman/options/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=unsubscribe>
List-Archive: <https://lists.nongnu.org/archive/html/qemu-devel>
List-Post: <mailto:qemu-devel@nongnu.org>
List-Help: <mailto:qemu-devel-request@nongnu.org?subject=help>
List-Subscribe: <https://lists.nongnu.org/mailman/listinfo/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=subscribe>
Errors-To: qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org
Sender: "Qemu-devel" <qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org>

SGVsbG8gTmljaG9sYXMsDQoNCk9uIDE5LzA3LzIwMjIgMDg6MzgsIE5pY2hvbGFzIFBpZ2dp
biB3cm90ZToNCj4gSVNBIHYyLjA2IGFkZHMgbmV3IHZhcmlhdGlvbnMgb2Ygd2FpdCwgc3Bl
Y2lmaWVkIGJ5IHRoZSBXQyBmaWVsZC4gVGhlc2UNCj4gYXJlIG5vdCBjb21wYXRpYmxlIHdp
dGggdGhlIHdhaXQgMCBpbXBsZW1lbnRhdGlvbiwgYmVjYXVzZSB0aGV5IGFkZA0KPiBhZGRp
dGlvbmFsIGNvbmRpdGlvbnMgdGhhdCBjYXVzZSB0aGUgcHJvY2Vzc29yIHRvIHJlc3VtZSwg
d2hpY2ggY2FuDQo+IGNhdXNlIHNvZnR3YXJlIHRvIGhhbmcgb3IgcnVuIHZlcnkgc2xvd2x5
Lg0KPiANCj4gSVNBIHYzLjAgY2hhbmdlZCB0aGUgd2FpdCBvcGNvZGUuDQo+IA0KPiBJU0Eg
djMuMSBhZGRlZCBuZXcgV0MgdmFsdWVzIHRvIHRoZSBuZXcgd2FpdCBvcGNvZGUsIGFuZCBh
ZGRlZCBhIFBMDQo+IGZpZWxkLg0KPiANCj4gVGhpcyBpbXBsZW1lbnRzIHRoZSBuZXcgd2Fp
dCBlbmNvZGluZyBhbmQgc3VwcG9ydHMgV0MgdmFyaWFudHMgd2l0aA0KPiBuby1vcCBpbXBs
ZW1lbnRhdGlvbnMsIHdoaWNoIGlzIHByb3ZpZGVzIGJhc2ljIGNvcnJlY3RuZXNzIGFzIGV4
cGxhaW5lZC4NCj4gDQo+IFNpZ25lZC1vZmYtYnk6IE5pY2hvbGFzIFBpZ2dpbiA8bnBpZ2dp
bkBnbWFpbC5jb20+DQo+IC0tLQ0KPiAgIHRhcmdldC9wcGMvdHJhbnNsYXRlLmMgfCA4NCAr
KysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKy0tLS0NCj4gICAxIGZpbGUg
Y2hhbmdlZCwgNzYgaW5zZXJ0aW9ucygrKSwgOCBkZWxldGlvbnMoLSkNCj4gDQo+IGRpZmYg
LS1naXQgYS90YXJnZXQvcHBjL3RyYW5zbGF0ZS5jIGIvdGFyZ2V0L3BwYy90cmFuc2xhdGUu
Yw0KPiBpbmRleCAxZDZkYWE0NjA4Li5jZTRhYTg0ZjFkIDEwMDY0NA0KPiAtLS0gYS90YXJn
ZXQvcHBjL3RyYW5zbGF0ZS5jDQo+ICsrKyBiL3RhcmdldC9wcGMvdHJhbnNsYXRlLmMNCj4g
QEAgLTQwNjYsMTIgKzQwNjYsNzkgQEAgc3RhdGljIHZvaWQgZ2VuX3N5bmMoRGlzYXNDb250
ZXh0ICpjdHgpDQo+ICAgLyogd2FpdCAqLw0KPiAgIHN0YXRpYyB2b2lkIGdlbl93YWl0KERp
c2FzQ29udGV4dCAqY3R4KQ0KPiAgIHsNCj4gLSAgICBUQ0d2X2kzMiB0MCA9IHRjZ19jb25z
dF9pMzIoMSk7DQo+IC0gICAgdGNnX2dlbl9zdF9pMzIodDAsIGNwdV9lbnYsDQo+IC0gICAg
ICAgICAgICAgICAgICAgLW9mZnNldG9mKFBvd2VyUENDUFUsIGVudikgKyBvZmZzZXRvZihD
UFVTdGF0ZSwgaGFsdGVkKSk7DQo+IC0gICAgdGNnX3RlbXBfZnJlZV9pMzIodDApOw0KPiAt
ICAgIC8qIFN0b3AgdHJhbnNsYXRpb24sIGFzIHRoZSBDUFUgaXMgc3VwcG9zZWQgdG8gc2xl
ZXAgZnJvbSBub3cgKi8NCj4gLSAgICBnZW5fZXhjZXB0aW9uX25pcChjdHgsIEVYQ1BfSExU
LCBjdHgtPmJhc2UucGNfbmV4dCk7DQo+ICsgICAgdWludDMyX3Qgd2MgPSAoY3R4LT5vcGNv
ZGUgPj4gMjEpICYgMzsNCj4gKyAgICB1aW50MzJfdCBwbCA9IChjdHgtPm9wY29kZSA+PiAx
NikgJiAzOw0KDQpJIHRoaW5rIHRoZSBiZXN0IGhlcmUgd291bGQgYmUgdG8gbW92ZSB0aGlz
IGluc3RydWN0aW9uIHRvIGRlY29kZXRyZWUuDQpIb3dldmVyLCB0aGlzIGNhbiBiZSBhIGJp
dCBvZiBleHRyYSB3b3JrIGFuZCBvdXQgb2YgdGhlIHNjb3BlIHlvdSB0aG91Z2gNCmZvciB0
aGlzIHBhdGNoLiBXaGF0IGRvIHlvdSB0aGluayBhYm91dCBhZGRpbmcgYSBFWFRSQUNUX0hF
TFBFUiB0bw0KdGFyZ2V0L3BwYy9pbnRlcm5hbC5oPw0KDQo+ICsNCj4gKyAgICAvKiB2My4w
IGFuZCBsYXRlciB1c2UgdGhlIElTQSBmbGFnIGZvciB3YWl0IHJhdGhlciB0aGFuIGEgUE0g
ZmxhZyAqLw0KPiArICAgIGlmICghKGN0eC0+aW5zbnNfZmxhZ3MyICYgUFBDMl9QTV9JU0Ey
MDYpICYmDQo+ICsgICAgICAgICEoY3R4LT5pbnNuc19mbGFnczIgJiBQUEMyX0lTQTMwMCkp
IHsNCj4gKyAgICAgICAgLyogd2MgZmllbGQgd2FzIGludHJvZHVjZWQgaW4gSVNBIHYyLjA2
ICovDQo+ICsgICAgICAgIGlmICh3Yykgew0KPiArICAgICAgICAgICAgZ2VuX2ludmFsaWQo
Y3R4KTsNCj4gKyAgICAgICAgICAgIHJldHVybjsNCj4gKyAgICAgICAgfQ0KPiArICAgIH0N
Cj4gKw0KPiArICAgIGlmICghKGN0eC0+aW5zbnNfZmxhZ3MyICYgUFBDMl9JU0EzMTApKSB7
DQo+ICsgICAgICAgIC8qIHBsIGZpZWxkIHdhcyBpbnRyb2R1Y2VkIGluIElTQSB2My4xICov
DQo+ICsgICAgICAgIGlmIChwbCkgew0KPiArICAgICAgICAgICAgZ2VuX2ludmFsaWQoY3R4
KTsNCj4gKyAgICAgICAgICAgIHJldHVybjsNCj4gKyAgICAgICAgfQ0KDQpJSVVDIHRoZSBJ
U0Egc2F5cyB0aGF0ICJSZXNlcnZlZCBmaWVsZHMgaW4gaW5zdHJ1Y3Rpb25zIGFyZSBpZ25v
cmVkIGJ5DQp0aGUgcHJvY2Vzc29yIi4gU28gdGhpcyBjaGVjayBpcyBpbmNvcnJlY3QsIEkg
Z3Vlc3MsIGFzIHdlIHNob3VsZCBhbGxvdw0KdGhlIGluc3RydWN0aW9uIHRvIGNvbnRpbnVl
Lg0KDQo+ICsNCj4gKyAgICAgICAgaWYgKGN0eC0+aW5zbnNfZmxhZ3MyICYgUFBDMl9JU0Ez
MDApIHsNCj4gKyAgICAgICAgICAgIC8qIHdjID4gMCBpcyByZXNlcnZlZCBpbiB2My4wICov
DQo+ICsgICAgICAgICAgICBpZiAod2MgPiAwKSB7DQoNClRoaXMgaG93ZXZlciBpcyBjb3Jy
ZWN0DQoNCj4gKyAgICAgICAgICAgICAgICBnZW5faW52YWxpZChjdHgpOw0KPiArICAgICAg
ICAgICAgICAgIHJldHVybjsNCj4gKyAgICAgICAgICAgIH0NCj4gKyAgICAgICAgfQ0KPiAr
ICAgIH0NCj4gKw0KPiArICAgIC8qIHdjPTMgaXMgcmVzZXJ2ZWQgYW5kIHBsPTEtMyBhcmUg
cmVzZXJ2ZWQgaW4gdjMuMS4gKi8NCj4gKyAgICBpZiAod2MgPT0gMyB8fCBwbCA+IDApIHsN
Cg0KVGhpcyBjYW4gY2F1c2UgYSBzaXR1YXRpb24gd2hlcmUgdGhlIGZpZWxkIGlzIHJlc2Vy
dmUgaW4gYSBwcmV2aW91cyBJU0ENCmFuZCBzaG91bGQgYmUgaWdub3JlZC4gSSB0aGluayB0
aGUgYmVzdCBvcHRpb24gaXMgdG8gcHV0IHRoZXNlIGNoZWNrcw0KaW5zaWRlIGEgY29uZGl0
aW9uYWwgZm9yIGVhY2ggZGlmZmVyZW50IElTQS4gT3RoZXJ3aXNlIGl0J3MgZ2V0dGluZyBh
DQpiaXQgaGFyZCB0byBmb2xsb3cgd2hhdCBzaG91bGQgaGFwcGVuIGluIGVhY2ggc2l0dWF0
aW9uLg0KDQo+ICsgICAgICAgIGdlbl9pbnZhbGlkKGN0eCk7DQo+ICsgICAgICAgIHJldHVy
bjsNCj4gKyAgICB9DQo+ICsNCj4gKyAgICAvKiB3YWl0IDAgd2FpdHMgZm9yIGFuIGV4Y2Vw
dGlvbiB0byBvY2N1ci4gKi8NCj4gKyAgICBpZiAod2MgPT0gMCkgew0KPiArICAgICAgICBU
Q0d2X2kzMiB0MCA9IHRjZ19jb25zdF9pMzIoMSk7DQo+ICsgICAgICAgIHRjZ19nZW5fc3Rf
aTMyKHQwLCBjcHVfZW52LA0KPiArICAgICAgICAgICAgICAgICAgICAgICAtb2Zmc2V0b2Yo
UG93ZXJQQ0NQVSwgZW52KSArIG9mZnNldG9mKENQVVN0YXRlLCBoYWx0ZWQpKTsNCj4gKyAg
ICAgICAgdGNnX3RlbXBfZnJlZV9pMzIodDApOw0KPiArICAgICAgICAvKiBTdG9wIHRyYW5z
bGF0aW9uLCBhcyB0aGUgQ1BVIGlzIHN1cHBvc2VkIHRvIHNsZWVwIGZyb20gbm93ICovDQo+
ICsgICAgICAgIGdlbl9leGNlcHRpb25fbmlwKGN0eCwgRVhDUF9ITFQsIGN0eC0+YmFzZS5w
Y19uZXh0KTsNCj4gKyAgICB9DQo+ICsNCj4gKyAgICAvKg0KPiArICAgICAqIE90aGVyIHdh
aXQgdHlwZXMgbXVzdCBub3QganVzdCB3YWl0IHVudGlsIGFuIGV4Y2VwdGlvbiBvY2N1cnMg
YmVjYXVzZQ0KPiArICAgICAqIGlnbm9yaW5nIHRoZWlyIG90aGVyIHdha2UtdXAgY29uZGl0
aW9ucyBjb3VsZCBjYXVzZSBhIGhhbmcuDQo+ICsgICAgICoNCj4gKyAgICAgKiBGb3IgdjIu
MDYgYW5kIDIuMDcsIHdjPTEsMiBhcmUgYXJjaGl0ZWN0ZWQgYnV0IG1heSBiZSBpbXBsZW1l
bnRlZCBhcw0KPiArICAgICAqIG5vLW9wcy4NCj4gKyAgICAgKg0KPiArICAgICAqIHdjPTEg
KHdhaXRyc3YpIHdhaXRzIGZvciBhbiBleGNlcHRpb24gb3IgYSByZXNlcnZhdGlvbiB0byBi
ZSBsb3N0Lg0KPiArICAgICAqIFJlc2VydmF0aW9uLWxvc3MgbWF5IGhhdmUgaW1wbGVtZW50
YXRpb24tc3BlY2lmaWMgY29uZGl0aW9ucywgc28gaXQNCj4gKyAgICAgKiBjYW4gYmUgaW1w
bGVtZW50ZWQgYXMgYSBuby1vcC4NCj4gKyAgICAgKg0KPiArICAgICAqIHdjPTIgd2FpdHMg
Zm9yIGFuIGltcGxlbWVudGF0aW9uLXNwZWNpZmljIGNvbmRpdGlvbiB3aGljaCBjb3VsZCBi
ZQ0KPiArICAgICAqIGFsd2F5cyB0cnVlLCBzbyBpdCBjYW4gYmUgaW1wbGVtZW50ZWQgYXMg
YSBuby1vcC4NCj4gKyAgICAgKg0KPiArICAgICAqIEZvciB2My4xLCB3Yz0xLDIgYXJlIGFy
Y2hpdGVjdGVkIGJ1dCBtYXkgYmUgaW1wbGVtZW50ZWQgYXMgbm8tb3BzLg0KPiArICAgICAq
DQo+ICsgICAgICogd2M9MSBzaW1pbGFybHkgdG8gdjIuMDYgYW5kIHYyLjA3Lg0KPiArICAg
ICAqDQo+ICsgICAgICogd2M9MiB3YWl0cyBmb3IgYW4gZXhjZXB0aW9uIG9yIGFuIGFtb3Vu
dCBvZiB0aW1lIHRvIHBhc3MuIFRoaXMNCj4gKyAgICAgKiBhbW91bnQgaXMgaW1wbGVtZW50
YXRpb24tc3BlY2lmaWMgc28gaXQgY2FuIGJlIGltcGxlbWVudGVkIGFzIGENCj4gKyAgICAg
KiBuby1vcC4NCj4gKyAgICAgKg0KPiArICAgICAqIElTQSB2My4xIGRvZXMgYWxsb3cgZm9y
IGV4ZWN1dGlvbiB0byByZXN1bWUgImluIHRoZSByYXJlIGNhc2Ugb2YNCj4gKyAgICAgKiBh
biBpbXBsZW1lbnRhdGlvbi1kZXBlbmRlbnQgZXZlbnQiLCBzbyBpbiBhbnkgY2FzZSBzb2Z0
d2FyZSBtdXN0DQo+ICsgICAgICogbm90IGRlcGVuZCBvbiB0aGUgYXJjaGl0ZWN0ZWQgcmVz
dW1wdGlvbiBjb25kaXRpb24gdG8gYmVjb21lDQo+ICsgICAgICogdHJ1ZSwgc28gbm8tb3Ag
aW1wbGVtZW50YXRpb25zIHNob3VsZCBiZSBhcmNoaXRlY3R1cmFsbHkgY29ycmVjdA0KPiAr
ICAgICAqIChpZiBzdWJvcHRpbWFsKS4NCj4gKyAgICAgKi8NCj4gICB9DQo+IA0KPiAgICNp
ZiBkZWZpbmVkKFRBUkdFVF9QUEM2NCkNCj4gQEAgLTY4NTIsOCArNjkxOSw5IEBAIEdFTl9I
QU5ETEVSMihzdGRjeF8sICJzdGRjeC4iLCAweDFGLCAweDE2LCAweDA2LCAweDAwMDAwMDAw
LCBQUENfNjRCKSwNCj4gICBHRU5fSEFORExFUl9FKHN0cWN4XywgMHgxRiwgMHgxNiwgMHgw
NSwgMCwgUFBDX05PTkUsIFBQQzJfTFNRX0lTQTIwNyksDQo+ICAgI2VuZGlmDQo+ICAgR0VO
X0hBTkRMRVIoc3luYywgMHgxRiwgMHgxNiwgMHgxMiwgMHgwMzlGRjgwMSwgUFBDX01FTV9T
WU5DKSwNCj4gLUdFTl9IQU5ETEVSKHdhaXQsIDB4MUYsIDB4MUUsIDB4MDEsIDB4MDNGRkY4
MDEsIFBQQ19XQUlUKSwNCj4gLUdFTl9IQU5ETEVSX0Uod2FpdCwgMHgxRiwgMHgxRSwgMHgw
MCwgMHgwMzlGRjgwMSwgUFBDX05PTkUsIFBQQzJfSVNBMzAwKSwNCj4gKy8qIElTQSB2My4w
IGNoYW5nZWQgdGhlIGV4dGVuZGVkIG9wY29kZSBmcm9tIDYyIHRvIDMwICovDQo+ICtHRU5f
SEFORExFUih3YWl0LCAweDFGLCAweDFFLCAweDAxLCAweDAzOUZGODAxLCBQUENfV0FJVCks
DQo+ICtHRU5fSEFORExFUl9FKHdhaXQsIDB4MUYsIDB4MUUsIDB4MDAsIDB4MDM5Q0Y4MDEs
IFBQQ19OT05FLCBQUEMyX0lTQTMwMCksDQoNCkRvZXMgdGhpcyBjb250aW51ZSB0byB3b3Jr
IGZvciB0aGUgcHJldmlvdXMgSVNBcz8gSSdtIGhhdmluZyBhIGhhcmQgdGltZQ0KdGVzdGlu
ZyB0aGlzIGluc3RydWN0aW9uIGZvciBwcmV2aW91cyBjcHVzLCBldmVuIHdpdGhvdXQgdGhp
cyBwYXRjaA0KDQo+ICAgR0VOX0hBTkRMRVIoYiwgMHgxMiwgMHhGRiwgMHhGRiwgMHgwMDAw
MDAwMCwgUFBDX0ZMT1cpLA0KPiAgIEdFTl9IQU5ETEVSKGJjLCAweDEwLCAweEZGLCAweEZG
LCAweDAwMDAwMDAwLCBQUENfRkxPVyksDQo+ICAgR0VOX0hBTkRMRVIoYmNjdHIsIDB4MTMs
IDB4MTAsIDB4MTAsIDB4MDAwMDAwMDAsIFBQQ19GTE9XKSwNCj4gLS0NCj4gMi4zNS4xDQo+
IA0KPiANCg0KQmVzdCByZWdhcmRzLA0KDQotLSANClbDrWN0b3IgQ29yYSBDb2xvbWJvDQpJ
bnN0aXR1dG8gZGUgUGVzcXVpc2FzIEVMRE9SQURPDQpBdmlzbyBMZWdhbCAtIERpc2NsYWlt
ZXIgPGh0dHBzOi8vd3d3LmVsZG9yYWRvLm9yZy5ici9kaXNjbGFpbWVyLmh0bWw+DQo=

