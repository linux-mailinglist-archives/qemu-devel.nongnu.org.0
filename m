Return-Path: <qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org>
X-Original-To: lists+qemu-devel@lfdr.de
Delivered-To: lists+qemu-devel@lfdr.de
Received: from lists.gnu.org (lists.gnu.org [209.51.188.17])
	by mail.lfdr.de (Postfix) with ESMTPS id 886C31587E6
	for <lists+qemu-devel@lfdr.de>; Tue, 11 Feb 2020 02:22:55 +0100 (CET)
Received: from localhost ([::1]:42116 helo=lists1p.gnu.org)
	by lists.gnu.org with esmtp (Exim 4.90_1)
	(envelope-from <qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org>)
	id 1j1KGM-00056E-K2
	for lists+qemu-devel@lfdr.de; Mon, 10 Feb 2020 20:22:54 -0500
Received: from eggs.gnu.org ([2001:470:142:3::10]:34949)
 by lists.gnu.org with esmtp (Exim 4.90_1)
 (envelope-from <tsimpson@qualcomm.com>) id 1j1JdB-00036n-DO
 for qemu-devel@nongnu.org; Mon, 10 Feb 2020 19:42:27 -0500
Received: from Debian-exim by eggs.gnu.org with spam-scanned (Exim 4.71)
 (envelope-from <tsimpson@qualcomm.com>) id 1j1Jd8-0004kk-PZ
 for qemu-devel@nongnu.org; Mon, 10 Feb 2020 19:42:25 -0500
Received: from alexa-out-sd-02.qualcomm.com ([199.106.114.39]:59203)
 by eggs.gnu.org with esmtps (TLS1.0:RSA_AES_256_CBC_SHA1:32)
 (Exim 4.71) (envelope-from <tsimpson@qualcomm.com>)
 id 1j1Jd5-0004tJ-1F
 for qemu-devel@nongnu.org; Mon, 10 Feb 2020 19:42:22 -0500
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple;
 d=quicinc.com; i=@quicinc.com; q=dns/txt; s=qcdkim;
 t=1581381739; x=1612917739;
 h=from:to:cc:subject:date:message-id:in-reply-to:
 references:mime-version:content-transfer-encoding;
 bh=EKkSE+Pyt43lFoTSBeXACdE/BKVJchtricPAg4go+Aw=;
 b=Xcrtp+rchcKEt5bHkaaAreNblMQWHACsSK92XAmC9usigXEp/xhrOyfI
 cBhJVZetMpq5jWC9ZYM9loEdonDf7MaYNdzBrOrYdlcWlvj7/Ido+WwhZ
 Eusbhs6Kb5HqVz3we64DJWK/Bk1q+GlmDgwTgWaUraM7JBRNPElB5arhv k=;
Received: from unknown (HELO ironmsg05-sd.qualcomm.com) ([10.53.140.145])
 by alexa-out-sd-02.qualcomm.com with ESMTP; 10 Feb 2020 16:41:04 -0800
Received: from vu-tsimpson-aus.qualcomm.com (HELO
 vu-tsimpson1-aus.qualcomm.com) ([10.222.150.1])
 by ironmsg05-sd.qualcomm.com with ESMTP; 10 Feb 2020 16:41:03 -0800
Received: by vu-tsimpson1-aus.qualcomm.com (Postfix, from userid 47164)
 id 6EB2E1B48; Mon, 10 Feb 2020 18:41:03 -0600 (CST)
From: Taylor Simpson <tsimpson@quicinc.com>
To: qemu-devel@nongnu.org
Subject: [RFC PATCH 60/66] Hexagon HVX instruction utility functions
Date: Mon, 10 Feb 2020 18:40:38 -0600
Message-Id: <1581381644-13678-61-git-send-email-tsimpson@quicinc.com>
X-Mailer: git-send-email 2.7.4
In-Reply-To: <1581381644-13678-1-git-send-email-tsimpson@quicinc.com>
References: <1581381644-13678-1-git-send-email-tsimpson@quicinc.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
X-detected-operating-system: by eggs.gnu.org: FreeBSD 9.x [fuzzy]
X-Received-From: 199.106.114.39
X-BeenThere: qemu-devel@nongnu.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: <qemu-devel.nongnu.org>
List-Unsubscribe: <https://lists.nongnu.org/mailman/options/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=unsubscribe>
List-Archive: <https://lists.nongnu.org/archive/html/qemu-devel>
List-Post: <mailto:qemu-devel@nongnu.org>
List-Help: <mailto:qemu-devel-request@nongnu.org?subject=help>
List-Subscribe: <https://lists.nongnu.org/mailman/listinfo/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=subscribe>
Cc: riku.voipio@iki.fi, richard.henderson@linaro.org, laurent@vivier.eu,
 Taylor Simpson <tsimpson@quicinc.com>, philmd@redhat.com,
 aleksandar.m.mail@gmail.com
Errors-To: qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org
Sender: "Qemu-devel" <qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org>

RnVuY3Rpb25zIHRvIHN1cHBvcnQgc2NhdHRlci9nYXRoZXIKClNpZ25lZC1vZmYtYnk6IFRheWxv
ciBTaW1wc29uIDx0c2ltcHNvbkBxdWljaW5jLmNvbT4KLS0tCiB0YXJnZXQvaGV4YWdvbi9tbXZl
Yy9zeXN0ZW1fZXh0X21tdmVjLmMgfCAyNjUgKysrKysrKysrKysrKysrKysrKysrKysrKysrKysr
KysKIHRhcmdldC9oZXhhZ29uL21tdmVjL3N5c3RlbV9leHRfbW12ZWMuaCB8ICAzOCArKysrKwog
MiBmaWxlcyBjaGFuZ2VkLCAzMDMgaW5zZXJ0aW9ucygrKQogY3JlYXRlIG1vZGUgMTAwNjQ0IHRh
cmdldC9oZXhhZ29uL21tdmVjL3N5c3RlbV9leHRfbW12ZWMuYwogY3JlYXRlIG1vZGUgMTAwNjQ0
IHRhcmdldC9oZXhhZ29uL21tdmVjL3N5c3RlbV9leHRfbW12ZWMuaAoKZGlmZiAtLWdpdCBhL3Rh
cmdldC9oZXhhZ29uL21tdmVjL3N5c3RlbV9leHRfbW12ZWMuYyBiL3RhcmdldC9oZXhhZ29uL21t
dmVjL3N5c3RlbV9leHRfbW12ZWMuYwpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAw
Li5mODBhZTNkCi0tLSAvZGV2L251bGwKKysrIGIvdGFyZ2V0L2hleGFnb24vbW12ZWMvc3lzdGVt
X2V4dF9tbXZlYy5jCkBAIC0wLDAgKzEsMjY1IEBACisvKgorICogIENvcHlyaWdodCAoYykgMjAx
OSBRdWFsY29tbSBJbm5vdmF0aW9uIENlbnRlciwgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLgor
ICoKKyAqICBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTsgeW91IGNhbiByZWRpc3RyaWJ1
dGUgaXQgYW5kL29yIG1vZGlmeQorICogIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdl
bmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5CisgKiAgdGhlIEZyZWUgU29mdHdh
cmUgRm91bmRhdGlvbjsgZWl0aGVyIHZlcnNpb24gMiBvZiB0aGUgTGljZW5zZSwgb3IKKyAqICAo
YXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLgorICoKKyAqICBUaGlzIHByb2dyYW0g
aXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCwKKyAqICBi
dXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50
eSBvZgorICogIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVS
UE9TRS4gIFNlZSB0aGUKKyAqICBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBk
ZXRhaWxzLgorICoKKyAqICBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBH
TlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZQorICogIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtOyBp
ZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uCisgKi8KKworI2luY2x1
ZGUgPHN0ZGlvLmg+CisjaW5jbHVkZSA8c3RyaW5nLmg+CisjaW5jbHVkZSAicWVtdS9vc2RlcC5o
IgorI2luY2x1ZGUgIm9wY29kZXMuaCIKKyNpbmNsdWRlICJpbnNuLmgiCisjaW5jbHVkZSAibW12
ZWMvbWFjcm9zLmgiCisjaW5jbHVkZSAicWVtdS5oIgorCisjZGVmaW5lIFRZUEVfTE9BRCAnTCcK
KyNkZWZpbmUgVFlQRV9TVE9SRSAnUycKKyNkZWZpbmUgVFlQRV9GRVRDSCAnRicKKyNkZWZpbmUg
VFlQRV9JQ0lOVkEgJ0knCisKK2VudW0gbWVtX2FjY2Vzc190eXBlcyB7CisgICAgYWNjZXNzX3R5
cGVfSU5WQUxJRCA9IDAsCisgICAgYWNjZXNzX3R5cGVfdW5rbm93biA9IDEsCisgICAgYWNjZXNz
X3R5cGVfbG9hZCA9IDIsCisgICAgYWNjZXNzX3R5cGVfc3RvcmUgPSAzLAorICAgIGFjY2Vzc190
eXBlX2ZldGNoID0gNCwKKyAgICBhY2Nlc3NfdHlwZV9kY3plcm9hID0gNSwKKyAgICBhY2Nlc3Nf
dHlwZV9kY2NsZWFuYSA9IDYsCisgICAgYWNjZXNzX3R5cGVfZGNpbnZhID0gNywKKyAgICBhY2Nl
c3NfdHlwZV9kY2NsZWFuaW52YSA9IDgsCisgICAgYWNjZXNzX3R5cGVfaWNpbnZhID0gOSwKKyAg
ICBhY2Nlc3NfdHlwZV9pY3RhZ3IgPSAxMCwKKyAgICBhY2Nlc3NfdHlwZV9pY3RhZ3cgPSAxMSwK
KyAgICBhY2Nlc3NfdHlwZV9pY2RhdGFyID0gMTIsCisgICAgYWNjZXNzX3R5cGVfZGNmZXRjaCA9
IDEzLAorICAgIGFjY2Vzc190eXBlX2wyZmV0Y2ggPSAxNCwKKyAgICBhY2Nlc3NfdHlwZV9sMmNs
ZWFuaWR4ID0gMTUsCisgICAgYWNjZXNzX3R5cGVfbDJjbGVhbmludmlkeCA9IDE2LAorICAgIGFj
Y2Vzc190eXBlX2wydGFnciA9IDE3LAorICAgIGFjY2Vzc190eXBlX2wydGFndyA9IDE4LAorICAg
IGFjY2Vzc190eXBlX2RjY2xlYW5pZHggPSAxOSwKKyAgICBhY2Nlc3NfdHlwZV9kY2ludmlkeCA9
IDIwLAorICAgIGFjY2Vzc190eXBlX2RjY2xlYW5pbnZpZHggPSAyMSwKKyAgICBhY2Nlc3NfdHlw
ZV9kY3RhZ3IgPSAyMiwKKyAgICBhY2Nlc3NfdHlwZV9kY3RhZ3cgPSAyMywKKyAgICBhY2Nlc3Nf
dHlwZV9rMHVubG9jayA9IDI0LAorICAgIGFjY2Vzc190eXBlX2wybG9ja2EgPSAyNSwKKyAgICBh
Y2Nlc3NfdHlwZV9sMnVubG9ja2EgPSAyNiwKKyAgICBhY2Nlc3NfdHlwZV9sMmtpbGwgPSAyNywK
KyAgICBhY2Nlc3NfdHlwZV9sMmdjbGVhbiA9IDI4LAorICAgIGFjY2Vzc190eXBlX2wyZ2NsZWFu
aW52ID0gMjksCisgICAgYWNjZXNzX3R5cGVfbDJndW5sb2NrID0gMzAsCisgICAgYWNjZXNzX3R5
cGVfc3luY2ggPSAzMSwKKyAgICBhY2Nlc3NfdHlwZV9pc3luYyA9IDMyLAorICAgIGFjY2Vzc190
eXBlX3BhdXNlID0gMzMsCisgICAgYWNjZXNzX3R5cGVfbG9hZF9waHlzID0gMzQsCisgICAgYWNj
ZXNzX3R5cGVfbG9hZF9sb2NrZWQgPSAzNSwKKyAgICBhY2Nlc3NfdHlwZV9zdG9yZV9jb25kaXRp
b25hbCA9IDM2LAorICAgIGFjY2Vzc190eXBlX2JhcnJpZXIgPSAzNywKKyAgICBhY2Nlc3NfdHlw
ZV9tZW1jcHlfbG9hZCA9IDM5LAorICAgIGFjY2Vzc190eXBlX21lbWNweV9zdG9yZSA9IDQwLAor
CisgICAgTlVNX0NPUkVfQUNDRVNTX1RZUEVTCit9OworCitlbnVtIGV4dF9tZW1fYWNjZXNzX3R5
cGVzIHsKKyAgICBhY2Nlc3NfdHlwZV92bG9hZCA9IE5VTV9DT1JFX0FDQ0VTU19UWVBFUywKKyAg
ICBhY2Nlc3NfdHlwZV92c3RvcmUsCisgICAgYWNjZXNzX3R5cGVfdmxvYWRfbnQsCisgICAgYWNj
ZXNzX3R5cGVfdnN0b3JlX250LAorICAgIGFjY2Vzc190eXBlX3ZnYXRoZXJfbG9hZCwKKyAgICBh
Y2Nlc3NfdHlwZV92c2NhdHRlcl9zdG9yZSwKKyAgICBhY2Nlc3NfdHlwZV92c2NhdHRlcl9yZWxl
YXNlLAorICAgIGFjY2Vzc190eXBlX3ZnYXRoZXJfcmVsZWFzZSwKKyAgICBhY2Nlc3NfdHlwZV92
ZmV0Y2gsCisgICAgTlVNX0VYVF9BQ0NFU1NfVFlQRVMKK307CisKK3N0YXRpYyBpbmxpbmUKK3Rh
cmdldF91bG9uZyBtZW1faW5pdF9hY2Nlc3MoQ1BVSGV4YWdvblN0YXRlICplbnYsIGludCBzbG90
LCBzaXplNHVfdCB2YWRkciwKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50IHdpZHRo
LCBlbnVtIG1lbV9hY2Nlc3NfdHlwZXMgbXR5cGUsCisgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIGludCB0eXBlX2Zvcl94bGF0ZSkKK3sKKyNpZmRlZiBDT05GSUdfVVNFUl9PTkxZCisgICAg
LyogTm90aGluZyB0byBkbyBmb3IgTGludXggdXNlciBtb2RlIGluIHFlbXUgKi8KKyAgICByZXR1
cm4gdmFkZHI7CisjZWxzZQorI2Vycm9yIFN5c3RlbSBtb2RlIG5vdCB5ZXQgaW1wbGVtZW50ZWQg
Zm9yIEhleGFnb24KKyNlbmRpZgorfQorCitzdGF0aWMgaW5saW5lIGludCBjaGVja19nYXRoZXJf
c3RvcmUoQ1BVSGV4YWdvblN0YXRlICplbnYpCit7CisgICAgLyogRmlyc3QgY2hlY2sgdG8gc2Vl
IGlmIHRlbXAgdnJlZyBoYXMgYmVlbiB1cGRhdGVkICovCisgICAgaW50IGNoZWNrICA9IGVudi0+
Z2F0aGVyX2lzc3VlZDsKKyAgICBjaGVjayAmPSBlbnYtPmlzX2dhdGhlcl9zdG9yZV9pbnNuOwor
CisgICAgLyogSW4gY2FzZSB3ZSBkb24ndCBoYXZlIHN0b3JlLCBzdXBwcmVzcyBnYXRoZXIgKi8K
KyAgICBpZiAoIWNoZWNrKSB7CisgICAgICAgIGVudi0+Z2F0aGVyX2lzc3VlZCA9IDA7CisgICAg
ICAgIGVudi0+dnRjbV9wZW5kaW5nID0gMDsgICAvKiBTdXBwcmVzcyBhbnkgZ2F0aGVyIHdyaXRl
cyB0byBtZW1vcnkgKi8KKyAgICB9CisgICAgcmV0dXJuIGNoZWNrOworfQorCit2b2lkIG1lbV9z
dG9yZV92ZWN0b3Jfb2RkdmEoQ1BVSGV4YWdvblN0YXRlICplbnYsIHZhZGRyX3QgdmFkZHIsCisg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFkZHJfdCBsb29rdXBfdmFkZHIsIGludCBzbG90
LCBpbnQgc2l6ZSwKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaXplMXVfdCAqZGF0YSwg
c2l6ZTF1X3QgKm1hc2ssIHVuc2lnbmVkIGludmVydCwKKyAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBpbnQgdXNlX2Z1bGxfdmEpCit7CisgICAgaW50IGk7CisKKyAgICBpZiAoIXVzZV9mdWxs
X3ZhKSB7CisgICAgICAgIGxvb2t1cF92YWRkciA9IHZhZGRyOworICAgIH0KKworICAgIGlmICgh
c2l6ZSkgeworICAgICAgICByZXR1cm47CisgICAgfQorCisgICAgaW50IGlzX2dhdGhlcl9zdG9y
ZSA9IGNoZWNrX2dhdGhlcl9zdG9yZShlbnYpOworICAgIGlmIChpc19nYXRoZXJfc3RvcmUpIHsK
KyAgICAgICAgbWVtY3B5KGRhdGEsICZlbnYtPnRtcF9WUmVnc1swXS51YlswXSwgc2l6ZSk7Cisg
ICAgICAgIGVudi0+VlJlZ3NfdXBkYXRlZF90bXAgPSAwOworICAgICAgICBlbnYtPmdhdGhlcl9p
c3N1ZWQgPSAwOworICAgIH0KKworICAgIC8qCisgICAgICogSWYgaXQncyBhIGdhdGhlciBzdG9y
ZSB1cGRhdGUgc3RvcmUgZGF0YSBmcm9tIHRlbXBvcmFyeSByZWdpc3RlcgorICAgICAqIEFuZCBj
bGVhciBmbGFnCisgICAgICovCisgICAgZW52LT52c3RvcmVfcGVuZGluZ1tzbG90XSA9IDE7Cisg
ICAgZW52LT52c3RvcmVbc2xvdF0udmEgICA9IHZhZGRyOworICAgIGVudi0+dnN0b3JlW3Nsb3Rd
LnNpemUgPSBzaXplOworICAgIG1lbWNweSgmZW52LT52c3RvcmVbc2xvdF0uZGF0YS51YlswXSwg
ZGF0YSwgc2l6ZSk7CisgICAgaWYgKCFtYXNrKSB7CisgICAgICAgIG1lbXNldCgmZW52LT52c3Rv
cmVbc2xvdF0ubWFzay51YlswXSwgaW52ZXJ0ID8gMCA6IC0xLCBzaXplKTsKKyAgICB9IGVsc2Ug
aWYgKGludmVydCkgeworICAgICAgICBmb3IgKGkgPSAwOyBpIDwgc2l6ZTsgaSsrKSB7CisgICAg
ICAgICAgICBlbnYtPnZzdG9yZVtzbG90XS5tYXNrLnViW2ldID0gIW1hc2tbaV07CisgICAgICAg
IH0KKyAgICB9IGVsc2UgeworICAgICAgICBtZW1jcHkoJmVudi0+dnN0b3JlW3Nsb3RdLm1hc2su
dWJbMF0sIG1hc2ssIHNpemUpOworICAgIH0KKyAgICAvKiBPbiBhIGdhdGhlciBzdG9yZSwgb3Zl
cndyaXRlIHRoZSBzdG9yZSBtYXNrIHRvIGVtdWxhdGUgZHJvcHBlZCBnYXRoZXJzICovCisgICAg
aWYgKGlzX2dhdGhlcl9zdG9yZSkgeworICAgICAgICBtZW1jcHkoJmVudi0+dnN0b3JlW3Nsb3Rd
Lm1hc2sudWJbMF0sICZlbnYtPnZ0Y21fbG9nLm1hc2sudWJbMF0sIHNpemUpOworICAgIH0KKyAg
ICBmb3IgKGkgPSAwOyBpIDwgc2l6ZTsgaSsrKSB7CisgICAgICAgIGVudi0+bWVtX2FjY2Vzc1tz
bG90XS5jZGF0YVtpXSA9IGRhdGFbaV07CisgICAgfQorfQorCit2b2lkIG1lbV9sb2FkX3ZlY3Rv
cl9vZGR2YShDUFVIZXhhZ29uU3RhdGUgKmVudiwgdmFkZHJfdCB2YWRkciwKKyAgICAgICAgICAg
ICAgICAgICAgICAgICAgIHZhZGRyX3QgbG9va3VwX3ZhZGRyLCBpbnQgc2xvdCwgaW50IHNpemUs
CisgICAgICAgICAgICAgICAgICAgICAgICAgICBzaXplMXVfdCAqZGF0YSwgaW50IHVzZV9mdWxs
X3ZhKQoreworICAgIGludCBpOworCisgICAgaWYgKCF1c2VfZnVsbF92YSkgeworICAgICAgICBs
b29rdXBfdmFkZHIgPSB2YWRkcjsKKyAgICB9CisKKyAgICBpZiAoIXNpemUpIHsKKyAgICAgICAg
cmV0dXJuOworICAgIH0KKworICAgIGZvciAoaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKKyAgICAg
ICAgZ2V0X3VzZXJfdTgoZGF0YVtpXSwgdmFkZHIpOworICAgICAgICB2YWRkcisrOworICAgIH0K
K30KKwordm9pZCBtZW1fdmVjdG9yX3NjYXR0ZXJfaW5pdChDUFVIZXhhZ29uU3RhdGUgKmVudiwg
aW50IHNsb3QsIHZhZGRyX3QgYmFzZV92YWRkciwKKyAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgaW50IGxlbmd0aCwgaW50IGVsZW1lbnRfc2l6ZSkKK3sKKyAgICBlbnVtIGV4dF9tZW1fYWNj
ZXNzX3R5cGVzIGFjY2Vzc190eXBlID0gYWNjZXNzX3R5cGVfdnNjYXR0ZXJfc3RvcmU7CisgICAg
aW50IGk7CisKKyAgICAvKiBUcmFuc2xhdGlvbiBmb3IgU3RvcmUgQWRkcmVzcyBvbiBTbG90IDEg
LSBtYXliZSBhbnkgc2xvdD8gKi8KKyAgICBtZW1faW5pdF9hY2Nlc3MoZW52LCBzbG90LCBiYXNl
X3ZhZGRyLCAxLCBhY2Nlc3NfdHlwZSwgVFlQRV9TVE9SRSk7CisgICAgbWVtX2FjY2Vzc19pbmZv
X3QgKm1hcHRyID0gJmVudi0+bWVtX2FjY2Vzc1tzbG90XTsKKyAgICBpZiAoRVhDRVBUSU9OX0RF
VEVDVEVEKSB7CisgICAgICAgIHJldHVybjsKKyAgICB9CisKKyAgICBtYXB0ci0+cmFuZ2UgPSBs
ZW5ndGg7CisKKyAgICBmb3IgKGkgPSAwOyBpIDwgZlZFQ1NJWkUoKTsgaSsrKSB7CisgICAgICAg
IGVudi0+dnRjbV9sb2cub2Zmc2V0cy51YltpXSA9IDA7IC8qIE1hcmsgaW52YWxpZCAqLworICAg
ICAgICBlbnYtPnZ0Y21fbG9nLmRhdGEudWJbaV0gPSAwOworICAgICAgICBlbnYtPnZ0Y21fbG9n
Lm1hc2sudWJbaV0gPSAwOworICAgIH0KKyAgICBlbnYtPnZ0Y21fbG9nLnZhX2Jhc2UgPSBiYXNl
X3ZhZGRyOworCisgICAgZW52LT52dGNtX3BlbmRpbmcgPSAxOworICAgIGVudi0+dnRjbV9sb2cu
b29iX2FjY2VzcyA9IDA7CisgICAgZW52LT52dGNtX2xvZy5vcCA9IDA7CisgICAgZW52LT52dGNt
X2xvZy5vcF9zaXplID0gMDsKKyAgICByZXR1cm47Cit9CisKK3ZvaWQgbWVtX3ZlY3Rvcl9nYXRo
ZXJfaW5pdChDUFVIZXhhZ29uU3RhdGUgKmVudiwgaW50IHNsb3QsIHZhZGRyX3QgYmFzZV92YWRk
ciwKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnQgbGVuZ3RoLCBpbnQgZWxlbWVudF9z
aXplKQoreworICAgIGVudW0gZXh0X21lbV9hY2Nlc3NfdHlwZXMgYWNjZXNzX3R5cGUgPSBhY2Nl
c3NfdHlwZV92Z2F0aGVyX2xvYWQ7CisgICAgaW50IGk7CisKKyAgICBtZW1faW5pdF9hY2Nlc3Mo
ZW52LCBzbG90LCBiYXNlX3ZhZGRyLCAxLCAgYWNjZXNzX3R5cGUsIFRZUEVfTE9BRCk7CisgICAg
bWVtX2FjY2Vzc19pbmZvX3QgKm1hcHRyID0gJmVudi0+bWVtX2FjY2Vzc1tzbG90XTsKKworICAg
IGlmIChFWENFUFRJT05fREVURUNURUQpIHsKKyAgICAgICAgcmV0dXJuOworICAgIH0KKworICAg
IG1hcHRyLT5yYW5nZSA9IGxlbmd0aDsKKworICAgIGZvciAoaSA9IDA7IGkgPCAyICogZlZFQ1NJ
WkUoKTsgaSsrKSB7CisgICAgICAgIGVudi0+dnRjbV9sb2cub2Zmc2V0cy51YltpXSA9IDB4MDsK
KyAgICB9CisgICAgZm9yIChpID0gMDsgaSA8IGZWRUNTSVpFKCk7IGkrKykgeworICAgICAgICBl
bnYtPnZ0Y21fbG9nLmRhdGEudWJbaV0gPSAwOworICAgICAgICBlbnYtPnZ0Y21fbG9nLm1hc2su
dWJbaV0gPSAwOworICAgICAgICBlbnYtPnZ0Y21fbG9nLnZhW2ldID0gMDsKKyAgICAgICAgZW52
LT50bXBfVlJlZ3NbMF0udWJbaV0gPSAwOworICAgIH0KKyAgICBlbnYtPnZ0Y21fbG9nLm9vYl9h
Y2Nlc3MgPSAwOworICAgIGVudi0+dnRjbV9sb2cub3AgPSAwOworICAgIGVudi0+dnRjbV9sb2cu
b3Bfc2l6ZSA9IDA7CisKKyAgICBlbnYtPnZ0Y21fbG9nLnZhX2Jhc2UgPSBiYXNlX3ZhZGRyOwor
CisgICAgLyoKKyAgICAgKiBUZW1wIFJlZyBnZXRzIHVwZGF0ZWQKKyAgICAgKiBUaGlzIGFsbG93
cyBTdG9yZSAubmV3IHRvIGdyYWIgdGhlIGNvcnJlY3QgcmVzdWx0CisgICAgICovCisgICAgZW52
LT5WUmVnc191cGRhdGVkX3RtcCA9IDE7CisgICAgZW52LT5nYXRoZXJfaXNzdWVkID0gMTsKKwor
ICAgIHJldHVybjsKK30KKwordm9pZCBtZW1fdmVjdG9yX3NjYXR0ZXJfZmluaXNoKENQVUhleGFn
b25TdGF0ZSAqZW52LCBpbnQgc2xvdCwgaW50IG9wKQoreworICAgIGVudi0+c3RvcmVfcGVuZGlu
Z1tzbG90XSA9IDA7CisgICAgZW52LT52c3RvcmVfcGVuZGluZ1tzbG90XSA9IDA7CisgICAgZW52
LT52dGNtX2xvZy5zaXplID0gZlZFQ1NJWkUoKTsKKworICAgIG1lbWNweShlbnYtPm1lbV9hY2Nl
c3Nbc2xvdF0uY2RhdGEsICZlbnYtPnZ0Y21fbG9nLm9mZnNldHMudWJbMF0sIDI1Nik7Cit9CisK
K3ZvaWQgbWVtX3ZlY3Rvcl9nYXRoZXJfZmluaXNoKENQVUhleGFnb25TdGF0ZSAqZW52LCBpbnQg
c2xvdCkKK3sKKyAgICBtZW1jcHkoZW52LT5tZW1fYWNjZXNzW3Nsb3RdLmNkYXRhLCAmZW52LT52
dGNtX2xvZy5vZmZzZXRzLnViWzBdLCAyNTYpOworfQpkaWZmIC0tZ2l0IGEvdGFyZ2V0L2hleGFn
b24vbW12ZWMvc3lzdGVtX2V4dF9tbXZlYy5oIGIvdGFyZ2V0L2hleGFnb24vbW12ZWMvc3lzdGVt
X2V4dF9tbXZlYy5oCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAuLjY4NjdiNDQK
LS0tIC9kZXYvbnVsbAorKysgYi90YXJnZXQvaGV4YWdvbi9tbXZlYy9zeXN0ZW1fZXh0X21tdmVj
LmgKQEAgLTAsMCArMSwzOCBAQAorLyoKKyAqICBDb3B5cmlnaHQgKGMpIDIwMTkgUXVhbGNvbW0g
SW5ub3ZhdGlvbiBDZW50ZXIsIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KKyAqCisgKiAgVGhp
cyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9v
ciBtb2RpZnkKKyAqICBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1Ymxp
YyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieQorICogIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRp
b247IGVpdGhlciB2ZXJzaW9uIDIgb2YgdGhlIExpY2Vuc2UsIG9yCisgKiAgKGF0IHlvdXIgb3B0
aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi4KKyAqCisgKiAgVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1
dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsCisgKiAgYnV0IFdJVEhPVVQg
QU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2YKKyAqICBN
RVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUg
dGhlCisgKiAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy4KKyAq
CisgKiAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwg
UHVibGljIExpY2Vuc2UKKyAqICBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbTsgaWYgbm90LCBzZWUg
PGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LgorICovCisKKyNpZm5kZWYgU1lTVEVNX0VY
VF9NTVZFQ19ICisjZGVmaW5lIFNZU1RFTV9FWFRfTU1WRUNfSAorCitleHRlcm4gdm9pZCBtZW1f
bG9hZF92ZWN0b3Jfb2RkdmEoQ1BVSGV4YWdvblN0YXRlICplbnYsIHZhZGRyX3QgdmFkZHIsCisg
ICAgICAgICAgICAgICAgICAgICAgICAgICB2YWRkcl90IGxvb2t1cF92YWRkciwgaW50IHNsb3Qs
IGludCBzaXplLAorICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZTF1X3QgKmRhdGEsIGlu
dCB1c2VfZnVsbF92YSk7CitleHRlcm4gdm9pZCBtZW1fc3RvcmVfdmVjdG9yX29kZHZhKENQVUhl
eGFnb25TdGF0ZSAqZW52LCB2YWRkcl90IHZhZGRyLAorICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIHZhZGRyX3QgbG9va3VwX3ZhZGRyLCBpbnQgc2xvdCwgaW50IHNpemUsCisgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgc2l6ZTF1X3QgKmRhdGEsIHNpemUxdV90KiBtYXNrLCB1bnNpZ25l
ZCBpbnZlcnQsCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50IHVzZV9mdWxsX3ZhKTsK
K2V4dGVybiB2b2lkIG1lbV92ZWN0b3Jfc2NhdHRlcl9pbml0KENQVUhleGFnb25TdGF0ZSAqZW52
LCBpbnQgc2xvdCwKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhZGRyX3Qg
YmFzZV92YWRkciwgaW50IGxlbmd0aCwKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIGludCBlbGVtZW50X3NpemUpOworZXh0ZXJuIHZvaWQgbWVtX3ZlY3Rvcl9zY2F0dGVyX2Zp
bmlzaChDUFVIZXhhZ29uU3RhdGUgKmVudiwgaW50IHNsb3QsIGludCBvcCk7CitleHRlcm4gdm9p
ZCBtZW1fdmVjdG9yX2dhdGhlcl9maW5pc2goQ1BVSGV4YWdvblN0YXRlICplbnYsIGludCBzbG90
KTsKK2V4dGVybiB2b2lkIG1lbV92ZWN0b3JfZ2F0aGVyX2luaXQoQ1BVSGV4YWdvblN0YXRlICpl
bnYsIGludCBzbG90LAorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWRkcl90
IGJhc2VfdmFkZHIsIGludCBsZW5ndGgsCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIGludCBlbGVtZW50X3NpemUpOworCisKKyNlbmRpZgotLSAKMi43LjQKCg==

