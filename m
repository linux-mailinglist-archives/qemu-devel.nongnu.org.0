Return-Path: <qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org>
X-Original-To: lists+qemu-devel@lfdr.de
Delivered-To: lists+qemu-devel@lfdr.de
Received: from lists.gnu.org (lists.gnu.org [209.51.188.17])
	by mail.lfdr.de (Postfix) with ESMTPS id 71BFD65F697
	for <lists+qemu-devel@lfdr.de>; Thu,  5 Jan 2023 23:20:34 +0100 (CET)
Received: from localhost ([::1] helo=lists1p.gnu.org)
	by lists.gnu.org with esmtp (Exim 4.90_1)
	(envelope-from <qemu-devel-bounces@nongnu.org>)
	id 1pDYUc-00071H-HG; Thu, 05 Jan 2023 17:13:46 -0500
Received: from eggs.gnu.org ([2001:470:142:3::10])
 by lists.gnu.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256)
 (Exim 4.90_1) (envelope-from <tsimpson@qualcomm.com>)
 id 1pDYUX-0006x2-Vd
 for qemu-devel@nongnu.org; Thu, 05 Jan 2023 17:13:41 -0500
Received: from mx0a-0031df01.pphosted.com ([205.220.168.131])
 by eggs.gnu.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256)
 (Exim 4.90_1) (envelope-from <tsimpson@qualcomm.com>)
 id 1pDYUU-000288-Ao
 for qemu-devel@nongnu.org; Thu, 05 Jan 2023 17:13:41 -0500
Received: from pps.filterd (m0279865.ppops.net [127.0.0.1])
 by mx0a-0031df01.pphosted.com (8.17.1.19/8.17.1.19) with ESMTP id
 305Luilx013584; Thu, 5 Jan 2023 22:13:36 GMT
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=quicinc.com;
 h=from : to : cc :
 subject : date : message-id : in-reply-to : references : mime-version :
 content-type : content-transfer-encoding; s=qcppdkim1;
 bh=CDAPYuj4LjnC9b1fTx08cXtgdcwbYJhNcC2qESzGJLw=;
 b=THDxa19Z8kCBm/mUUkUUlkhcNM0lptCzHIq8tLJV0asH5IUTK2Tdm7cchqEtbWpkb+58
 b8tqBBKUo8HzkHubL0iGzHyj3JYUmjJ9ANWbSGgEFbywtlEw3kOyQs9JvqbzSAD97bmH
 YWdbS4NxSqvKvyIJAbg7TbuN3K6K3m7H/Hr+TJ+OkgWDQVgkghL8lVVPWtkXNz+auU9m
 8qHDrAycFDDmhFNzKHTa3IqTyD0OqOqpnRjeUIUrkExGjAj5FXqeeg7Rnol+xez7meT5
 yjPfibu1i3bU8hV67CFXtTZL12m77b2AdQp8e+hDFFeIyTzatMe1DnlJ5EheCsAOUD4W GA== 
Received: from nalasppmta05.qualcomm.com (Global_NAT1.qualcomm.com
 [129.46.96.20])
 by mx0a-0031df01.pphosted.com (PPS) with ESMTPS id 3mwwfs97xm-1
 (version=TLSv1.2 cipher=ECDHE-RSA-AES256-GCM-SHA384 bits=256 verify=NOT);
 Thu, 05 Jan 2023 22:13:35 +0000
Received: from pps.filterd (NALASPPMTA05.qualcomm.com [127.0.0.1])
 by NALASPPMTA05.qualcomm.com (8.17.1.5/8.17.1.5) with ESMTP id 305MDZit031218; 
 Thu, 5 Jan 2023 22:13:35 GMT
Received: from pps.reinject (localhost [127.0.0.1])
 by NALASPPMTA05.qualcomm.com (PPS) with ESMTP id 3mx2kp91ah-1;
 Thu, 05 Jan 2023 22:13:35 +0000
Received: from NALASPPMTA05.qualcomm.com (NALASPPMTA05.qualcomm.com
 [127.0.0.1])
 by pps.reinject (8.17.1.5/8.17.1.5) with ESMTP id 305MDYrS031201;
 Thu, 5 Jan 2023 22:13:34 GMT
Received: from hu-devc-lv-u18-c.qualcomm.com (hu-tsimpson-lv.qualcomm.com
 [10.47.235.220])
 by NALASPPMTA05.qualcomm.com (PPS) with ESMTP id 305MDYRE031199;
 Thu, 05 Jan 2023 22:13:34 +0000
Received: by hu-devc-lv-u18-c.qualcomm.com (Postfix, from userid 47164)
 id 3DE8C5000B0; Thu,  5 Jan 2023 14:13:34 -0800 (PST)
From: Taylor Simpson <tsimpson@quicinc.com>
To: qemu-devel@nongnu.org
Cc: tsimpson@quicinc.com, richard.henderson@linaro.org, philmd@linaro.org,
 ale@rev.ng, anjo@rev.ng, bcain@quicinc.com, quic_mathbern@quicinc.com
Subject: [PATCH v3 4/9] Hexagon (target/hexagon) Add overrides for
 dealloc-return instructions
Date: Thu,  5 Jan 2023 14:13:26 -0800
Message-Id: <20230105221331.12069-5-tsimpson@quicinc.com>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20230105221331.12069-1-tsimpson@quicinc.com>
References: <20230105221331.12069-1-tsimpson@quicinc.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
X-QCInternal: smtphost
X-QCInternal: smtphost
X-Proofpoint-Virus-Version: vendor=nai engine=6200 definitions=5800
 signatures=585085
X-Proofpoint-Virus-Version: vendor=nai engine=6200 definitions=5800
 signatures=585085
X-Proofpoint-GUID: zOTnqKFY3Y36SY76960ZnZi6ekblM3uw
X-Proofpoint-ORIG-GUID: zOTnqKFY3Y36SY76960ZnZi6ekblM3uw
X-Proofpoint-Virus-Version: vendor=baseguard
 engine=ICAP:2.0.205,Aquarius:18.0.923,Hydra:6.0.545,FMLib:17.11.122.1
 definitions=2023-01-05_12,2023-01-05_02,2022-06-22_01
X-Proofpoint-Spam-Details: rule=outbound_notspam policy=outbound score=1
 spamscore=1 suspectscore=0
 phishscore=0 impostorscore=0 clxscore=1015 priorityscore=1501
 mlxlogscore=202 mlxscore=1 adultscore=0 bulkscore=0 malwarescore=0
 lowpriorityscore=0 classifier=spam adjust=0 reason=mlx scancount=1
 engine=8.12.0-2212070000 definitions=main-2301050174
Received-SPF: pass client-ip=205.220.168.131;
 envelope-from=tsimpson@qualcomm.com; helo=mx0a-0031df01.pphosted.com
X-Spam_score_int: -24
X-Spam_score: -2.5
X-Spam_bar: --
X-Spam_report: (-2.5 / 5.0 requ) BAYES_00=-1.9, DKIM_SIGNED=0.1,
 DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1, HEADER_FROM_DIFFERENT_DOMAINS=0.25,
 RCVD_IN_DNSWL_LOW=-0.7, SPF_HELO_NONE=0.001,
 SPF_PASS=-0.001 autolearn=ham autolearn_force=no
X-Spam_action: no action
X-BeenThere: qemu-devel@nongnu.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: <qemu-devel.nongnu.org>
List-Unsubscribe: <https://lists.nongnu.org/mailman/options/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=unsubscribe>
List-Archive: <https://lists.nongnu.org/archive/html/qemu-devel>
List-Post: <mailto:qemu-devel@nongnu.org>
List-Help: <mailto:qemu-devel-request@nongnu.org?subject=help>
List-Subscribe: <https://lists.nongnu.org/mailman/listinfo/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=subscribe>
Errors-To: qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org
Sender: qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org

VGhlc2UgaW5zdHJ1Y3Rpb25zIHBlcmZvcm0gYSBkZWFsbG9jZnJhbWUrcmV0dXJuIChqdW1wciBy
MzEpCgpBZGQgb3ZlcnJpZGVzIGZvcgogICAgTDRfcmV0dXJuCiAgICBTTDJfcmV0dXJuCiAgICBM
NF9yZXR1cm5fdAogICAgTDRfcmV0dXJuX2YKICAgIEw0X3JldHVybl90bmV3X3B0CiAgICBMNF9y
ZXR1cm5fZm5ld19wdAogICAgTDRfcmV0dXJuX3RuZXdfcG50CiAgICBMNF9yZXR1cm5fZm5ld19w
bnQKICAgIFNMMl9yZXR1cm5fdAogICAgU0wyX3JldHVybl9mCiAgICBTTDJfcmV0dXJuX3RuZXcK
ICAgIFNMMl9yZXR1cm5fZm5ldwoKVGhpcyBwYXRjaCBlbGltaW5hdGVzIHRoZSBsYXN0IGhlbHBl
ciB0aGF0IHVzZXMgd3JpdGVfbmV3X3BjLCBzbyB3ZQpyZW1vdmUgaXQgZnJvbSBvcF9oZWxwZXIu
YwoKU2lnbmVkLW9mZi1ieTogVGF5bG9yIFNpbXBzb24gPHRzaW1wc29uQHF1aWNpbmMuY29tPgot
LS0KIHRhcmdldC9oZXhhZ29uL2dlbl90Y2cuaCAgIHwgNTQgKysrKysrKysrKysrKysrKysrKysr
KysrCiB0YXJnZXQvaGV4YWdvbi9nZW5wdHIuYyAgICB8IDg2ICsrKysrKysrKysrKysrKysrKysr
KysrKysrKysrKysrKysrKysrCiB0YXJnZXQvaGV4YWdvbi9vcF9oZWxwZXIuYyB8IDI2ICstLS0t
LS0tLS0tLQogMyBmaWxlcyBjaGFuZ2VkLCAxNDEgaW5zZXJ0aW9ucygrKSwgMjUgZGVsZXRpb25z
KC0pCgpkaWZmIC0tZ2l0IGEvdGFyZ2V0L2hleGFnb24vZ2VuX3RjZy5oIGIvdGFyZ2V0L2hleGFn
b24vZ2VuX3RjZy5oCmluZGV4IDYyNjdmNTFjY2MuLjgyODJmZjNmYzUgMTAwNjQ0Ci0tLSBhL3Rh
cmdldC9oZXhhZ29uL2dlbl90Y2cuaAorKysgYi90YXJnZXQvaGV4YWdvbi9nZW5fdGNnLmgKQEAg
LTUwOCw2ICs1MDgsNjAgQEAKICNkZWZpbmUgZkdFTl9UQ0dfUzJfc3RvcmVyaW5ld19wY3IoU0hP
UlRDT0RFKSBcCiAgICAgZkdFTl9UQ0dfU1RPUkVfcGNyKDIsIGZTVE9SRSgxLCA0LCBFQSwgTnRO
KSkKIAorLyoKKyAqIGRlYWxsb2NfcmV0dXJuCisgKiBBc3NlbWJsZXIgbWFwcGVkIHRvCisgKiBy
MzE6MzAgPSBkZWFsbG9jX3JldHVybihyMzApOnJhdworICovCisjZGVmaW5lIGZHRU5fVENHX0w0
X3JldHVybihTSE9SVENPREUpIFwKKyAgICBnZW5fcmV0dXJuKGN0eCwgUmRkViwgUnNWKQorCisv
KgorICogc3ViLWluc3RydWN0aW9uIHZlcnNpb24gKG5vIFJkZFYsIHNvIGhhbmRsZSBpdCBtYW51
YWxseSkKKyAqLworI2RlZmluZSBmR0VOX1RDR19TTDJfcmV0dXJuKFNIT1JUQ09ERSkgXAorICAg
IGRvIHsgXAorICAgICAgICBUQ0d2X2k2NCBSZGRWID0gdGNnX3RlbXBfbmV3X2k2NCgpOyBcCisg
ICAgICAgIGdlbl9yZXR1cm4oY3R4LCBSZGRWLCBoZXhfZ3ByW0hFWF9SRUdfRlBdKTsgXAorICAg
ICAgICBnZW5fbG9nX3JlZ193cml0ZV9wYWlyKEhFWF9SRUdfRlAsIFJkZFYpOyBcCisgICAgICAg
IHRjZ190ZW1wX2ZyZWVfaTY0KFJkZFYpOyBcCisgICAgfSB3aGlsZSAoMCkKKworLyoKKyAqIENv
bmRpdGlvbmFsIHJldHVybnMgZm9sbG93IHRoaXMgbmFtaW5nIGNvbnZlbnRpb24KKyAqICAgICBf
dCAgICAgICAgICAgICAgICAgcHJlZGljYXRlIHRydWUKKyAqICAgICBfZiAgICAgICAgICAgICAg
ICAgcHJlZGljYXRlIGZhbHNlCisgKiAgICAgX3RuZXdfcHQgICAgICAgICAgIHByZWRpY2F0ZS5u
ZXcgdHJ1ZSBwcmVkaWN0IHRha2VuCisgKiAgICAgX2ZuZXdfcHQgICAgICAgICAgIHByZWRpY2F0
ZS5uZXcgZmFsc2UgcHJlZGljdCB0YWtlbgorICogICAgIF90bmV3X3BudCAgICAgICAgICBwcmVk
aWNhdGUubmV3IHRydWUgcHJlZGljdCBub3QgdGFrZW4KKyAqICAgICBfZm5ld19wbnQgICAgICAg
ICAgcHJlZGljYXRlLm5ldyBmYWxzZSBwcmVkaWN0IG5vdCB0YWtlbgorICogUHJlZGljdGlvbnMg
YXJlIG5vdCBtb2RlbGxlZCBpbiBRRU1VCisgKgorICogRXhhbXBsZToKKyAqICAgICBpZiAocDEp
IHIzMTozMCA9IGRlYWxsb2NfcmV0dXJuKHIzMCk6cmF3CisgKi8KKyNkZWZpbmUgZkdFTl9UQ0df
TDRfcmV0dXJuX3QoU0hPUlRDT0RFKSBcCisgICAgZ2VuX2NvbmRfcmV0dXJuKGN0eCwgUmRkViwg
UnNWLCBQdlYsIFRDR19DT05EX0VRKTsKKyNkZWZpbmUgZkdFTl9UQ0dfTDRfcmV0dXJuX2YoU0hP
UlRDT0RFKSBcCisgICAgZ2VuX2NvbmRfcmV0dXJuKGN0eCwgUmRkViwgUnNWLCBQdlYsIFRDR19D
T05EX05FKQorI2RlZmluZSBmR0VOX1RDR19MNF9yZXR1cm5fdG5ld19wdChTSE9SVENPREUpIFwK
KyAgICBnZW5fY29uZF9yZXR1cm4oY3R4LCBSZGRWLCBSc1YsIFB2TiwgVENHX0NPTkRfRVEpCisj
ZGVmaW5lIGZHRU5fVENHX0w0X3JldHVybl9mbmV3X3B0KFNIT1JUQ09ERSkgXAorICAgIGdlbl9j
b25kX3JldHVybihjdHgsIFJkZFYsIFJzViwgUHZOLCBUQ0dfQ09ORF9ORSkKKyNkZWZpbmUgZkdF
Tl9UQ0dfTDRfcmV0dXJuX3RuZXdfcG50KFNIT1JUQ09ERSkgXAorICAgIGdlbl9jb25kX3JldHVy
bihjdHgsIFJkZFYsIFJzViwgUHZOLCBUQ0dfQ09ORF9FUSkKKyNkZWZpbmUgZkdFTl9UQ0dfTDRf
cmV0dXJuX2ZuZXdfcG50KFNIT1JUQ09ERSkgXAorICAgIGdlbl9jb25kX3JldHVybihjdHgsIFJk
ZFYsIFJzViwgUHZOLCBUQ0dfQ09ORF9ORSkKKworI2RlZmluZSBmR0VOX1RDR19TTDJfcmV0dXJu
X3QoU0hPUlRDT0RFKSBcCisgICAgZ2VuX2NvbmRfcmV0dXJuX3N1Ymluc24oY3R4LCBUQ0dfQ09O
RF9FUSwgaGV4X3ByZWRbMF0pCisjZGVmaW5lIGZHRU5fVENHX1NMMl9yZXR1cm5fZihTSE9SVENP
REUpIFwKKyAgICBnZW5fY29uZF9yZXR1cm5fc3ViaW5zbihjdHgsIFRDR19DT05EX05FLCBoZXhf
cHJlZFswXSkKKyNkZWZpbmUgZkdFTl9UQ0dfU0wyX3JldHVybl90bmV3KFNIT1JUQ09ERSkgXAor
ICAgIGdlbl9jb25kX3JldHVybl9zdWJpbnNuKGN0eCwgVENHX0NPTkRfRVEsIGhleF9uZXdfcHJl
ZF92YWx1ZVswXSkKKyNkZWZpbmUgZkdFTl9UQ0dfU0wyX3JldHVybl9mbmV3KFNIT1JUQ09ERSkg
XAorICAgIGdlbl9jb25kX3JldHVybl9zdWJpbnNuKGN0eCwgVENHX0NPTkRfTkUsIGhleF9uZXdf
cHJlZF92YWx1ZVswXSkKKwogLyoKICAqIE1hdGhlbWF0aWNhbCBvcGVyYXRpb25zIHdpdGggbW9y
ZSB0aGFuIG9uZSBkZWZpbml0aW9uIHJlcXVpcmUKICAqIHNwZWNpYWwgaGFuZGxpbmcKZGlmZiAt
LWdpdCBhL3RhcmdldC9oZXhhZ29uL2dlbnB0ci5jIGIvdGFyZ2V0L2hleGFnb24vZ2VucHRyLmMK
aW5kZXggOTQwNTRiMTBlNi4uNzI0M2JiMDBhYSAxMDA2NDQKLS0tIGEvdGFyZ2V0L2hleGFnb24v
Z2VucHRyLmMKKysrIGIvdGFyZ2V0L2hleGFnb24vZ2VucHRyLmMKQEAgLTcwNiw2ICs3MDYsOTIg
QEAgc3RhdGljIHZvaWQgZ2VuX2NvbmRfY2FsbHIoRGlzYXNDb250ZXh0ICpjdHgsCiAgICAgZ2Vu
X3NldF9sYWJlbChza2lwKTsKIH0KIAorLyogZnJhbWUgXj0gKGludDY0X3QpRlJBTUVLRVkgPDwg
MzIgKi8KK3N0YXRpYyB2b2lkIGdlbl9mcmFtZV91bnNjcmFtYmxlKFRDR3ZfaTY0IGZyYW1lKQor
eworICAgIFRDR3ZfaTY0IGZyYW1la2V5ID0gdGNnX3RlbXBfbmV3X2k2NCgpOworICAgIHRjZ19n
ZW5fZXh0dV9pMzJfaTY0KGZyYW1la2V5LCBoZXhfZ3ByW0hFWF9SRUdfRlJBTUVLRVldKTsKKyAg
ICB0Y2dfZ2VuX3NobGlfaTY0KGZyYW1la2V5LCBmcmFtZWtleSwgMzIpOworICAgIHRjZ19nZW5f
eG9yX2k2NChmcmFtZSwgZnJhbWUsIGZyYW1la2V5KTsKKyAgICB0Y2dfdGVtcF9mcmVlX2k2NChm
cmFtZWtleSk7Cit9CisKK3N0YXRpYyB2b2lkIGdlbl9sb2FkX2ZyYW1lKERpc2FzQ29udGV4dCAq
Y3R4LCBUQ0d2X2k2NCBmcmFtZSwgVENHdiBFQSkKK3sKKyAgICBJbnNuICppbnNuID0gY3R4LT5p
bnNuOyAgLyogTmVlZGVkIGZvciBDSEVDS19OT1NIVUYgKi8KKyAgICBDSEVDS19OT1NIVUYoRUEs
IDgpOworICAgIHRjZ19nZW5fcWVtdV9sZDY0KGZyYW1lLCBFQSwgY3R4LT5tZW1faWR4KTsKK30K
Kworc3RhdGljIHZvaWQgZ2VuX3JldHVybl9iYXNlKERpc2FzQ29udGV4dCAqY3R4LCBUQ0d2X2k2
NCBkc3QsIFRDR3Ygc3JjLAorICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRDR3YgcjI5KQor
eworICAgIC8qCisgICAgICogZnJhbWUgPSAqc3JjCisgICAgICogZHN0ID0gZnJhbWVfdW5zY3Jh
bWJsZShmcmFtZSkKKyAgICAgKiBTUCA9IHNyYyArIDgKKyAgICAgKiBQQyA9IGRzdC53WzFdCisg
ICAgICovCisgICAgVENHdl9pNjQgZnJhbWUgPSB0Y2dfdGVtcF9uZXdfaTY0KCk7CisgICAgVENH
diByMzEgPSB0Y2dfdGVtcF9uZXcoKTsKKworICAgIGdlbl9sb2FkX2ZyYW1lKGN0eCwgZnJhbWUs
IHNyYyk7CisgICAgZ2VuX2ZyYW1lX3Vuc2NyYW1ibGUoZnJhbWUpOworICAgIHRjZ19nZW5fbW92
X2k2NChkc3QsIGZyYW1lKTsKKyAgICB0Y2dfZ2VuX2FkZGlfdGwocjI5LCBzcmMsIDgpOworICAg
IHRjZ19nZW5fZXh0cmhfaTY0X2kzMihyMzEsIGRzdCk7CisgICAgZ2VuX2p1bXByKGN0eCwgcjMx
KTsKKworICAgIHRjZ190ZW1wX2ZyZWVfaTY0KGZyYW1lKTsKKyAgICB0Y2dfdGVtcF9mcmVlKHIz
MSk7Cit9CisKK3N0YXRpYyB2b2lkIGdlbl9yZXR1cm4oRGlzYXNDb250ZXh0ICpjdHgsIFRDR3Zf
aTY0IGRzdCwgVENHdiBzcmMpCit7CisgICAgVENHdiByMjkgPSB0Y2dfdGVtcF9uZXcoKTsKKyAg
ICBnZW5fcmV0dXJuX2Jhc2UoY3R4LCBkc3QsIHNyYywgcjI5KTsKKyAgICBnZW5fbG9nX3JlZ193
cml0ZShIRVhfUkVHX1NQLCByMjkpOworICAgIHRjZ190ZW1wX2ZyZWUocjI5KTsKK30KKworLyog
aWYgKHByZWQpIGRzdCA9IGRlYWxsb2NfcmV0dXJuKHNyYyk6cmF3ICovCitzdGF0aWMgdm9pZCBn
ZW5fY29uZF9yZXR1cm4oRGlzYXNDb250ZXh0ICpjdHgsIFRDR3ZfaTY0IGRzdCwgVENHdiBzcmMs
CisgICAgICAgICAgICAgICAgICAgICAgICAgICAgVENHdiBwcmVkLCBUQ0dDb25kIGNvbmQpCit7
CisgICAgVENHdiBMU0IgPSB0Y2dfdGVtcF9uZXcoKTsKKyAgICBUQ0d2IG1hc2sgPSB0Y2dfdGVt
cF9uZXcoKTsKKyAgICBUQ0d2IHIyOSA9IHRjZ190ZW1wX2xvY2FsX25ldygpOworICAgIFRDR0xh
YmVsICpza2lwID0gZ2VuX25ld19sYWJlbCgpOworICAgIHRjZ19nZW5fYW5kaV90bChMU0IsIHBy
ZWQsIDEpOworCisgICAgLyogSW5pdGlhbGl6ZSB0aGUgcmVzdWx0cyBpbiBjYXNlIHRoZSBwcmVk
aWNhdGUgaXMgZmFsc2UgKi8KKyAgICB0Y2dfZ2VuX21vdmlfaTY0KGRzdCwgMCk7CisgICAgdGNn
X2dlbl9tb3ZpX3RsKHIyOSwgMCk7CisKKyAgICAvKiBTZXQgdGhlIGJpdCBpbiBoZXhfc2xvdF9j
YW5jZWxsZWQgaWYgdGhlIHByZWRpY2F0ZSBpcyBmbGFzZSAqLworICAgIHRjZ19nZW5fbW92aV90
bChtYXNrLCAxIDw8IGN0eC0+aW5zbi0+c2xvdCk7CisgICAgdGNnX2dlbl9vcl90bChtYXNrLCBo
ZXhfc2xvdF9jYW5jZWxsZWQsIG1hc2spOworICAgIHRjZ19nZW5fbW92Y29uZF90bChjb25kLCBo
ZXhfc2xvdF9jYW5jZWxsZWQsIExTQiwgdGNnX2NvbnN0YW50X3RsKDApLAorICAgICAgICAgICAg
ICAgICAgICAgICBtYXNrLCBoZXhfc2xvdF9jYW5jZWxsZWQpOworICAgIHRjZ190ZW1wX2ZyZWUo
bWFzayk7CisKKyAgICB0Y2dfZ2VuX2JyY29uZGlfdGwoY29uZCwgTFNCLCAwLCBza2lwKTsKKyAg
ICB0Y2dfdGVtcF9mcmVlKExTQik7CisgICAgZ2VuX3JldHVybl9iYXNlKGN0eCwgZHN0LCBzcmMs
IHIyOSk7CisgICAgZ2VuX3NldF9sYWJlbChza2lwKTsKKyAgICBnZW5fbG9nX3ByZWRpY2F0ZWRf
cmVnX3dyaXRlKEhFWF9SRUdfU1AsIHIyOSwgY3R4LT5pbnNuLT5zbG90KTsKKyAgICB0Y2dfdGVt
cF9mcmVlKHIyOSk7Cit9CisKKy8qIHN1Yi1pbnN0cnVjdGlvbiB2ZXJzaW9uIChubyBSZGRWLCBz
byBoYW5kbGUgaXQgbWFudWFsbHkpICovCitzdGF0aWMgdm9pZCBnZW5fY29uZF9yZXR1cm5fc3Vi
aW5zbihEaXNhc0NvbnRleHQgKmN0eCwgVENHQ29uZCBjb25kLCBUQ0d2IHByZWQpCit7CisgICAg
VENHdl9pNjQgUmRkViA9IHRjZ190ZW1wX2xvY2FsX25ld19pNjQoKTsKKyAgICBnZW5fY29uZF9y
ZXR1cm4oY3R4LCBSZGRWLCBoZXhfZ3ByW0hFWF9SRUdfRlBdLCBwcmVkLCBjb25kKTsKKyAgICBn
ZW5fbG9nX3ByZWRpY2F0ZWRfcmVnX3dyaXRlX3BhaXIoSEVYX1JFR19GUCwgUmRkViwgY3R4LT5p
bnNuLT5zbG90KTsKKyAgICB0Y2dfdGVtcF9mcmVlX2k2NChSZGRWKTsKK30KKwogc3RhdGljIHZv
aWQgZ2VuX2VuZGxvb3AwKERpc2FzQ29udGV4dCAqY3R4KQogewogICAgIFRDR3YgbHBjZmcgPSB0
Y2dfdGVtcF9sb2NhbF9uZXcoKTsKZGlmZiAtLWdpdCBhL3RhcmdldC9oZXhhZ29uL29wX2hlbHBl
ci5jIGIvdGFyZ2V0L2hleGFnb24vb3BfaGVscGVyLmMKaW5kZXggMzU0NDllZjUyNC4uMzhiOGFl
ZTE5MyAxMDA2NDQKLS0tIGEvdGFyZ2V0L2hleGFnb24vb3BfaGVscGVyLmMKKysrIGIvdGFyZ2V0
L2hleGFnb24vb3BfaGVscGVyLmMKQEAgLTEsNSArMSw1IEBACiAvKgotICogIENvcHlyaWdodChj
KSAyMDE5LTIwMjIgUXVhbGNvbW0gSW5ub3ZhdGlvbiBDZW50ZXIsIEluYy4gQWxsIFJpZ2h0cyBS
ZXNlcnZlZC4KKyAqICBDb3B5cmlnaHQoYykgMjAxOS0yMDIzIFF1YWxjb21tIElubm92YXRpb24g
Q2VudGVyLCBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAgKgogICogIFRoaXMgcHJvZ3JhbSBp
cyBmcmVlIHNvZnR3YXJlOyB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5CiAg
KiAgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBh
cyBwdWJsaXNoZWQgYnkKQEAgLTEwNSwzMCArMTA1LDYgQEAgdm9pZCBsb2dfc3RvcmU2NChDUFVI
ZXhhZ29uU3RhdGUgKmVudiwgdGFyZ2V0X3Vsb25nIGFkZHIsCiAgICAgZW52LT5tZW1fbG9nX3N0
b3Jlc1tzbG90XS5kYXRhNjQgPSB2YWw7CiB9CiAKLXZvaWQgd3JpdGVfbmV3X3BjKENQVUhleGFn
b25TdGF0ZSAqZW52LCBib29sIHBrdF9oYXNfbXVsdGlfY29mLAotICAgICAgICAgICAgICAgICAg
ICAgICAgIHRhcmdldF91bG9uZyBhZGRyKQotewotICAgIEhFWF9ERUJVR19MT0coIndyaXRlX25l
d19wYygweCIgVEFSR0VUX0ZNVF9seCAiKVxuIiwgYWRkcik7Ci0KLSAgICBpZiAocGt0X2hhc19t
dWx0aV9jb2YpIHsKLSAgICAgICAgLyoKLSAgICAgICAgICogSWYgbW9yZSB0aGFuIG9uZSBicmFu
Y2ggaXMgdGFrZW4gaW4gYSBwYWNrZXQsIG9ubHkgdGhlIGZpcnN0IG9uZQotICAgICAgICAgKiBp
cyBhY3R1YWxseSBkb25lLgotICAgICAgICAgKi8KLSAgICAgICAgaWYgKGVudi0+YnJhbmNoX3Rh
a2VuKSB7Ci0gICAgICAgICAgICBIRVhfREVCVUdfTE9HKCJJTkZPOiBtdWx0aXBsZSBicmFuY2hl
cyB0YWtlbiBpbiBzYW1lIHBhY2tldCwgIgotICAgICAgICAgICAgICAgICAgICAgICAgICAiaWdu
b3JpbmcgdGhlIHNlY29uZCBvbmVcbiIpOwotICAgICAgICB9IGVsc2UgewotICAgICAgICAgICAg
ZkNIRUNLX1BDQUxJR04oYWRkcik7Ci0gICAgICAgICAgICBlbnYtPmdwcltIRVhfUkVHX1BDXSA9
IGFkZHI7Ci0gICAgICAgICAgICBlbnYtPmJyYW5jaF90YWtlbiA9IDE7Ci0gICAgICAgIH0KLSAg
ICB9IGVsc2UgewotICAgICAgICBmQ0hFQ0tfUENBTElHTihhZGRyKTsKLSAgICAgICAgZW52LT5n
cHJbSEVYX1JFR19QQ10gPSBhZGRyOwotICAgIH0KLX0KLQogLyogSGFuZHkgcGxhY2UgdG8gc2V0
IGEgYnJlYWtwb2ludCAqLwogdm9pZCBIRUxQRVIoZGVidWdfc3RhcnRfcGFja2V0KShDUFVIZXhh
Z29uU3RhdGUgKmVudikKIHsKLS0gCjIuMTcuMQoK

