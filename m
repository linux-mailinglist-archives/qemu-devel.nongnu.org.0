Return-Path: <qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org>
X-Original-To: lists+qemu-devel@lfdr.de
Delivered-To: lists+qemu-devel@lfdr.de
Received: from lists.gnu.org (lists.gnu.org [209.51.188.17])
	by mail.lfdr.de (Postfix) with ESMTPS id AABAF6EAF82
	for <lists+qemu-devel@lfdr.de>; Fri, 21 Apr 2023 18:51:14 +0200 (CEST)
Received: from localhost ([::1] helo=lists1p.gnu.org)
	by lists.gnu.org with esmtp (Exim 4.90_1)
	(envelope-from <qemu-devel-bounces@nongnu.org>)
	id 1pptx8-0005wD-Mv; Fri, 21 Apr 2023 12:49:42 -0400
Received: from eggs.gnu.org ([2001:470:142:3::10])
 by lists.gnu.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256)
 (Exim 4.90_1) (envelope-from <tsimpson@qualcomm.com>)
 id 1pptx4-0005u7-R5
 for qemu-devel@nongnu.org; Fri, 21 Apr 2023 12:49:38 -0400
Received: from mx0b-0031df01.pphosted.com ([205.220.180.131])
 by eggs.gnu.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256)
 (Exim 4.90_1) (envelope-from <tsimpson@qualcomm.com>)
 id 1pptwy-00044j-Ni
 for qemu-devel@nongnu.org; Fri, 21 Apr 2023 12:49:38 -0400
Received: from pps.filterd (m0279869.ppops.net [127.0.0.1])
 by mx0a-0031df01.pphosted.com (8.17.1.19/8.17.1.19) with ESMTP id
 33LFef8L030441; Fri, 21 Apr 2023 16:49:29 GMT
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=quicinc.com;
 h=from : to : cc :
 subject : date : message-id : in-reply-to : references : mime-version :
 content-type : content-transfer-encoding; s=qcppdkim1;
 bh=fOizwT7JTSTThDvv9YTjm2JysdLV+EOrOyZtJxnkp3o=;
 b=R2MGSI5lyDdJk9BZQkRGygeHCnloGR4IvFr1Is5hcKY22P1iW7cSBxx0ARCp28Zysi2d
 IvH7YtBHYwKGBxHltDHRGRJvtr8lGbkwEjEiMp8FvSwxmwLGZgtLVn/tGwJcY8JpphIC
 7gnX6y5agGKRnEtmRo0BcjyAowCyBHHvaQ+MrIG/43+MwiLlR4sNw8PHqEKPdS/H3Rva
 BFKkvP+BbPHLf65dnNU7VRYnj8nAYi3tNDO4CK/zPoU+viox4gyRZrDiw61U5RUorzxp
 0wOu86OqCtWYUp28IIbxB3wQgUaz/gYNBacxSIl+7dk6VZuiX+aVc7clu9RL3MnjKOxe kw== 
Received: from nalasppmta04.qualcomm.com (Global_NAT1.qualcomm.com
 [129.46.96.20])
 by mx0a-0031df01.pphosted.com (PPS) with ESMTPS id 3q3ewh20bd-1
 (version=TLSv1.2 cipher=ECDHE-RSA-AES256-GCM-SHA384 bits=256 verify=NOT);
 Fri, 21 Apr 2023 16:49:29 +0000
Received: from pps.filterd (NALASPPMTA04.qualcomm.com [127.0.0.1])
 by NALASPPMTA04.qualcomm.com (8.17.1.5/8.17.1.5) with ESMTP id 33LGmYIh006126; 
 Fri, 21 Apr 2023 16:49:27 GMT
Received: from pps.reinject (localhost [127.0.0.1])
 by NALASPPMTA04.qualcomm.com (PPS) with ESMTPS id 3q3ncvu2sp-1
 (version=TLSv1.2 cipher=ECDHE-RSA-AES256-GCM-SHA384 bits=256 verify=NOT);
 Fri, 21 Apr 2023 16:49:26 +0000
Received: from NALASPPMTA04.qualcomm.com (NALASPPMTA04.qualcomm.com
 [127.0.0.1])
 by pps.reinject (8.17.1.5/8.17.1.5) with ESMTP id 33LGnQMl006502;
 Fri, 21 Apr 2023 16:49:26 GMT
Received: from hu-devc-sd-u20-a-1.qualcomm.com (hu-tsimpson-lv.qualcomm.com
 [10.47.204.221])
 by NALASPPMTA04.qualcomm.com (PPS) with ESMTPS id 33LGnQQL006499
 (version=TLSv1.2 cipher=ECDHE-RSA-AES256-GCM-SHA384 bits=256 verify=NOT);
 Fri, 21 Apr 2023 16:49:26 +0000
Received: by hu-devc-sd-u20-a-1.qualcomm.com (Postfix, from userid 47164)
 id 1DC5D68C; Fri, 21 Apr 2023 09:49:26 -0700 (PDT)
From: Taylor Simpson <tsimpson@quicinc.com>
To: qemu-devel@nongnu.org
Cc: tsimpson@quicinc.com, richard.henderson@linaro.org, philmd@linaro.org,
 peter.maydell@linaro.org, bcain@quicinc.com, quic_mathbern@quicinc.com,
 stefanha@redhat.com, ale@rev.ng, anjo@rev.ng, quic_mliebel@quicinc.com
Subject: [PULL v2 03/10] Use black code style for python scripts
Date: Fri, 21 Apr 2023 09:49:15 -0700
Message-Id: <20230421164922.3608183-4-tsimpson@quicinc.com>
X-Mailer: git-send-email 2.25.1
In-Reply-To: <20230421164922.3608183-1-tsimpson@quicinc.com>
References: <20230421164922.3608183-1-tsimpson@quicinc.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
X-QCInternal: smtphost
X-QCInternal: smtphost
X-Proofpoint-Virus-Version: vendor=nai engine=6200 definitions=5800
 signatures=585085
X-Proofpoint-Virus-Version: vendor=nai engine=6200 definitions=5800
 signatures=585085
X-Proofpoint-ORIG-GUID: dUccO0ecJqDO-iZSwzOpo6fJzpX3IQGQ
X-Proofpoint-GUID: dUccO0ecJqDO-iZSwzOpo6fJzpX3IQGQ
X-Proofpoint-Virus-Version: vendor=baseguard
 engine=ICAP:2.0.254,Aquarius:18.0.942,Hydra:6.0.573,FMLib:17.11.170.22
 definitions=2023-04-21_08,2023-04-21_01,2023-02-09_01
X-Proofpoint-Spam-Details: rule=outbound_notspam policy=outbound score=0
 spamscore=0 phishscore=0
 bulkscore=0 mlxlogscore=999 priorityscore=1501 mlxscore=0
 lowpriorityscore=0 adultscore=0 impostorscore=0 clxscore=1015
 malwarescore=0 suspectscore=0 classifier=spam adjust=0 reason=mlx
 scancount=1 engine=8.12.0-2303200000 definitions=main-2304210147
Received-SPF: pass client-ip=205.220.180.131;
 envelope-from=tsimpson@qualcomm.com; helo=mx0b-0031df01.pphosted.com
X-Spam_score_int: -17
X-Spam_score: -1.8
X-Spam_bar: -
X-Spam_report: (-1.8 / 5.0 requ) BAYES_00=-1.9, DKIM_SIGNED=0.1,
 DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1, HEADER_FROM_DIFFERENT_DOMAINS=0.25,
 SPF_HELO_NONE=0.001, SPF_PASS=-0.001,
 T_SCC_BODY_TEXT_LINE=-0.01 autolearn=no autolearn_force=no
X-Spam_action: no action
X-BeenThere: qemu-devel@nongnu.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: <qemu-devel.nongnu.org>
List-Unsubscribe: <https://lists.nongnu.org/mailman/options/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=unsubscribe>
List-Archive: <https://lists.nongnu.org/archive/html/qemu-devel>
List-Post: <mailto:qemu-devel@nongnu.org>
List-Help: <mailto:qemu-devel-request@nongnu.org?subject=help>
List-Subscribe: <https://lists.nongnu.org/mailman/listinfo/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=subscribe>
Errors-To: qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org
Sender: qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org

RnJvbTogTWFyY28gTGllYmVsIDxxdWljX21saWViZWxAcXVpY2luYy5jb20+CgpTaWduZWQtb2Zm
LWJ5OiBNYXJjbyBMaWViZWwgPHF1aWNfbWxpZWJlbEBxdWljaW5jLmNvbT4KU2lnbmVkLW9mZi1i
eTogVGF5bG9yIFNpbXBzb24gPHRzaW1wc29uQHF1aWNpbmMuY29tPgpBY2tlZC1ieTogVGF5bG9y
IFNpbXBzb24gPHRzaW1wc29uQHF1aWNpbmMuY29tPgpUZXN0ZWQtYnk6IFRheWxvciBTaW1wc29u
IDx0c2ltcHNvbkBxdWljaW5jLmNvbT4KTWVzc2FnZS1JZDogPDIwMjMwMzIwMDkyNTMzLjI4NTk0
MzMtMy1xdWljX21saWViZWxAcXVpY2luYy5jb20+Ci0tLQogdGFyZ2V0L2hleGFnb24vZGVjdHJl
ZS5weSAgICAgICAgICAgICAgIHwgMzk2ICsrKysrKysrLS0tLS0tLQogdGFyZ2V0L2hleGFnb24v
Z2VuX2FuYWx5emVfZnVuY3MucHkgICAgIHwgMTM1ICsrKy0tLQogdGFyZ2V0L2hleGFnb24vZ2Vu
X2hlbHBlcl9mdW5jcy5weSAgICAgIHwgMzM4ICsrKysrKystLS0tLS0KIHRhcmdldC9oZXhhZ29u
L2dlbl9oZWxwZXJfcHJvdG9zLnB5ICAgICB8IDE2NSArKysrLS0tCiB0YXJnZXQvaGV4YWdvbi9n
ZW5faWRlZl9wYXJzZXJfZnVuY3MucHkgfCAgNzUgKy0tCiB0YXJnZXQvaGV4YWdvbi9nZW5fb3Bf
YXR0cmlicy5weSAgICAgICAgfCAgMTAgKy0KIHRhcmdldC9oZXhhZ29uL2dlbl9vcF9yZWdzLnB5
ICAgICAgICAgICB8ICA3NyArLS0KIHRhcmdldC9oZXhhZ29uL2dlbl9vcGNvZGVzX2RlZi5weSAg
ICAgICB8ICAgNCArLQogdGFyZ2V0L2hleGFnb24vZ2VuX3ByaW50aW5zbi5weSAgICAgICAgIHwg
IDgwICstLQogdGFyZ2V0L2hleGFnb24vZ2VuX3Nob3J0Y29kZS5weSAgICAgICAgIHwgIDE3ICst
CiB0YXJnZXQvaGV4YWdvbi9nZW5fdGNnX2Z1bmNfdGFibGUucHkgICAgfCAgMTQgKy0KIHRhcmdl
dC9oZXhhZ29uL2dlbl90Y2dfZnVuY3MucHkgICAgICAgICB8IDYxNCArKysrKysrKysrKysrLS0t
LS0tLS0tLS0KIHRhcmdldC9oZXhhZ29uL2hleF9jb21tb24ucHkgICAgICAgICAgICB8IDE3NyAr
KysrLS0tCiAxMyBmaWxlcyBjaGFuZ2VkLCAxMTkxIGluc2VydGlvbnMoKyksIDkxMSBkZWxldGlv
bnMoLSkKCmRpZmYgLS1naXQgYS90YXJnZXQvaGV4YWdvbi9kZWN0cmVlLnB5IGIvdGFyZ2V0L2hl
eGFnb24vZGVjdHJlZS5weQppbmRleCAyOTQ2N2VjN2Q3Li4zYjMyOTQ4YTA0IDEwMDc1NQotLS0g
YS90YXJnZXQvaGV4YWdvbi9kZWN0cmVlLnB5CisrKyBiL3RhcmdldC9oZXhhZ29uL2RlY3RyZWUu
cHkKQEAgLTEsNyArMSw3IEBACiAjIS91c3IvYmluL2VudiBweXRob24zCiAKICMjCi0jIyAgQ29w
eXJpZ2h0KGMpIDIwMTktMjAyMSBRdWFsY29tbSBJbm5vdmF0aW9uIENlbnRlciwgSW5jLiBBbGwg
UmlnaHRzIFJlc2VydmVkLgorIyMgIENvcHlyaWdodChjKSAyMDE5LTIwMjMgUXVhbGNvbW0gSW5u
b3ZhdGlvbiBDZW50ZXIsIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICMjCiAjIyAgVGhpcyBw
cm9ncmFtIGlzIGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBt
b2RpZnkKICMjICBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBM
aWNlbnNlIGFzIHB1Ymxpc2hlZCBieQpAQCAtMjMsOTQgKzIzLDEwOSBAQAogaW1wb3J0IHN5cwog
aW1wb3J0IGlzZXQKIAotZW5jcyA9IHt0YWcgOiAnJy5qb2luKHJldmVyc2VkKGlzZXQuaXNldFt0
YWddWydlbmMnXS5yZXBsYWNlKCcgJywgJycpKSkKLSAgICBmb3IgdGFnIGluIGlzZXQudGFncyBp
ZiBpc2V0LmlzZXRbdGFnXVsnZW5jJ10gIT0gJ01JU1NJTkcgRU5DT0RJTkcnfQorZW5jcyA9IHsK
KyAgICB0YWc6ICIiLmpvaW4ocmV2ZXJzZWQoaXNldC5pc2V0W3RhZ11bImVuYyJdLnJlcGxhY2Uo
IiAiLCAiIikpKQorICAgIGZvciB0YWcgaW4gaXNldC50YWdzCisgICAgaWYgaXNldC5pc2V0W3Rh
Z11bImVuYyJdICE9ICJNSVNTSU5HIEVOQ09ESU5HIgorfQogCi1lbmNfY2xhc3NlcyA9IHNldChb
aXNldC5pc2V0W3RhZ11bJ2VuY19jbGFzcyddIGZvciB0YWcgaW4gZW5jcy5rZXlzKCldKQotc3Vi
aW5zbl9lbmNfY2xhc3NlcyA9IFwKLSAgICBzZXQoW2VuY19jbGFzcyBmb3IgZW5jX2NsYXNzIGlu
IGVuY19jbGFzc2VzIFwKLSAgICAgICAgaWYgZW5jX2NsYXNzLnN0YXJ0c3dpdGgoJ1NVQklOU05f
JyldKQotZXh0X2VuY19jbGFzc2VzID0gXAotICAgIHNldChbZW5jX2NsYXNzIGZvciBlbmNfY2xh
c3MgaW4gZW5jX2NsYXNzZXMgXAotICAgICAgICBpZiBlbmNfY2xhc3Mgbm90IGluICgnTk9STUFM
JywgJzE2QklUJykgYW5kIFwKLSAgICAgICAgICAgbm90IGVuY19jbGFzcy5zdGFydHN3aXRoKCdT
VUJJTlNOXycpXSkKK2VuY19jbGFzc2VzID0gc2V0KFtpc2V0LmlzZXRbdGFnXVsiZW5jX2NsYXNz
Il0gZm9yIHRhZyBpbiBlbmNzLmtleXMoKV0pCitzdWJpbnNuX2VuY19jbGFzc2VzID0gc2V0KAor
ICAgIFtlbmNfY2xhc3MgZm9yIGVuY19jbGFzcyBpbiBlbmNfY2xhc3NlcyBpZiBlbmNfY2xhc3Mu
c3RhcnRzd2l0aCgiU1VCSU5TTl8iKV0KKykKK2V4dF9lbmNfY2xhc3NlcyA9IHNldCgKKyAgICBb
CisgICAgICAgIGVuY19jbGFzcworICAgICAgICBmb3IgZW5jX2NsYXNzIGluIGVuY19jbGFzc2Vz
CisgICAgICAgIGlmIGVuY19jbGFzcyBub3QgaW4gKCJOT1JNQUwiLCAiMTZCSVQiKSBhbmQgbm90
IGVuY19jbGFzcy5zdGFydHN3aXRoKCJTVUJJTlNOXyIpCisgICAgXQorKQogCiB0cnk6CiAgICAg
c3ViaW5zbl9ncm91cGluZ3MgPSBpc2V0LnN1Ymluc25fZ3JvdXBpbmdzCiBleGNlcHQgQXR0cmli
dXRlRXJyb3I6CiAgICAgc3ViaW5zbl9ncm91cGluZ3MgPSB7fQogCi1mb3IgKHRhZywgc3ViaW5z
bl9ncm91cGluZykgaW4gc3ViaW5zbl9ncm91cGluZ3MuaXRlbXMoKToKLSAgICBlbmNzW3RhZ10g
PSAnJy5qb2luKHJldmVyc2VkKHN1Ymluc25fZ3JvdXBpbmdbJ2VuYyddLnJlcGxhY2UoJyAnLCAn
JykpKQorZm9yIHRhZywgc3ViaW5zbl9ncm91cGluZyBpbiBzdWJpbnNuX2dyb3VwaW5ncy5pdGVt
cygpOgorICAgIGVuY3NbdGFnXSA9ICIiLmpvaW4ocmV2ZXJzZWQoc3ViaW5zbl9ncm91cGluZ1si
ZW5jIl0ucmVwbGFjZSgiICIsICIiKSkpCiAKLWRlY3RyZWVfbm9ybWFsID0geydsZWF2ZXMnIDog
c2V0KCl9Ci1kZWN0cmVlXzE2Yml0ID0geydsZWF2ZXMnIDogc2V0KCl9Ci1kZWN0cmVlX3N1Ymlu
c25fZ3JvdXBpbmdzID0geydsZWF2ZXMnIDogc2V0KCl9Ci1kZWN0cmVlX3N1Ymluc25zID0ge25h
bWUgOiB7J2xlYXZlcycgOiBzZXQoKX0gZm9yIG5hbWUgaW4gc3ViaW5zbl9lbmNfY2xhc3Nlc30K
LWRlY3RyZWVfZXh0ZW5zaW9ucyA9IHtuYW1lIDogeydsZWF2ZXMnIDogc2V0KCl9IGZvciBuYW1l
IGluIGV4dF9lbmNfY2xhc3Nlc30KK2RlY3RyZWVfbm9ybWFsID0geyJsZWF2ZXMiOiBzZXQoKX0K
K2RlY3RyZWVfMTZiaXQgPSB7ImxlYXZlcyI6IHNldCgpfQorZGVjdHJlZV9zdWJpbnNuX2dyb3Vw
aW5ncyA9IHsibGVhdmVzIjogc2V0KCl9CitkZWN0cmVlX3N1Ymluc25zID0ge25hbWU6IHsibGVh
dmVzIjogc2V0KCl9IGZvciBuYW1lIGluIHN1Ymluc25fZW5jX2NsYXNzZXN9CitkZWN0cmVlX2V4
dGVuc2lvbnMgPSB7bmFtZTogeyJsZWF2ZXMiOiBzZXQoKX0gZm9yIG5hbWUgaW4gZXh0X2VuY19j
bGFzc2VzfQogCiBmb3IgdGFnIGluIGVuY3Mua2V5cygpOgogICAgIGlmIHRhZyBpbiBzdWJpbnNu
X2dyb3VwaW5nczoKLSAgICAgICAgZGVjdHJlZV9zdWJpbnNuX2dyb3VwaW5nc1snbGVhdmVzJ10u
YWRkKHRhZykKKyAgICAgICAgZGVjdHJlZV9zdWJpbnNuX2dyb3VwaW5nc1sibGVhdmVzIl0uYWRk
KHRhZykKICAgICAgICAgY29udGludWUKLSAgICBlbmNfY2xhc3MgPSBpc2V0LmlzZXRbdGFnXVsn
ZW5jX2NsYXNzJ10KLSAgICBpZiBlbmNfY2xhc3Muc3RhcnRzd2l0aCgnU1VCSU5TTl8nKToKKyAg
ICBlbmNfY2xhc3MgPSBpc2V0LmlzZXRbdGFnXVsiZW5jX2NsYXNzIl0KKyAgICBpZiBlbmNfY2xh
c3Muc3RhcnRzd2l0aCgiU1VCSU5TTl8iKToKICAgICAgICAgaWYgbGVuKGVuY3NbdGFnXSkgIT0g
MzI6Ci0gICAgICAgICAgICBlbmNzW3RhZ10gPSBlbmNzW3RhZ10gKyAnMCcgKiAoMzIgLSBsZW4o
ZW5jc1t0YWddKSkKLSAgICAgICAgZGVjdHJlZV9zdWJpbnNuc1tlbmNfY2xhc3NdWydsZWF2ZXMn
XS5hZGQodGFnKQotICAgIGVsaWYgIGVuY19jbGFzcyA9PSAnMTZCSVQnOgorICAgICAgICAgICAg
ZW5jc1t0YWddID0gZW5jc1t0YWddICsgIjAiICogKDMyIC0gbGVuKGVuY3NbdGFnXSkpCisgICAg
ICAgIGRlY3RyZWVfc3ViaW5zbnNbZW5jX2NsYXNzXVsibGVhdmVzIl0uYWRkKHRhZykKKyAgICBl
bGlmIGVuY19jbGFzcyA9PSAiMTZCSVQiOgogICAgICAgICBpZiBsZW4oZW5jc1t0YWddKSAhPSAx
NjoKLSAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbignVGFnICJ7fSIgaGFzIGVuY19jbGFzcyAi
e30iIGFuZCBub3QgYW4gZW5jb2RpbmcgJyArCi0gICAgICAgICAgICAgICAgICAgICAgICAgICAg
J3dpZHRoIG9mIDE2IGJpdHMhJy5mb3JtYXQodGFnLCBlbmNfY2xhc3MpKQotICAgICAgICBkZWN0
cmVlXzE2Yml0WydsZWF2ZXMnXS5hZGQodGFnKQorICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9u
KAorICAgICAgICAgICAgICAgICdUYWcgInt9IiBoYXMgZW5jX2NsYXNzICJ7fSIgYW5kIG5vdCBh
biBlbmNvZGluZyAnCisgICAgICAgICAgICAgICAgKyAid2lkdGggb2YgMTYgYml0cyEiLmZvcm1h
dCh0YWcsIGVuY19jbGFzcykKKyAgICAgICAgICAgICkKKyAgICAgICAgZGVjdHJlZV8xNmJpdFsi
bGVhdmVzIl0uYWRkKHRhZykKICAgICBlbHNlOgogICAgICAgICBpZiBsZW4oZW5jc1t0YWddKSAh
PSAzMjoKLSAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbignVGFnICJ7fSIgaGFzIGVuY19jbGFz
cyAie30iIGFuZCBub3QgYW4gZW5jb2RpbmcgJyArCi0gICAgICAgICAgICAgICAgICAgICAgICAg
ICAgJ3dpZHRoIG9mIDMyIGJpdHMhJy5mb3JtYXQodGFnLCBlbmNfY2xhc3MpKQotICAgICAgICBp
ZiBlbmNfY2xhc3MgPT0gJ05PUk1BTCc6Ci0gICAgICAgICAgICBkZWN0cmVlX25vcm1hbFsnbGVh
dmVzJ10uYWRkKHRhZykKKyAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbigKKyAgICAgICAgICAg
ICAgICAnVGFnICJ7fSIgaGFzIGVuY19jbGFzcyAie30iIGFuZCBub3QgYW4gZW5jb2RpbmcgJwor
ICAgICAgICAgICAgICAgICsgIndpZHRoIG9mIDMyIGJpdHMhIi5mb3JtYXQodGFnLCBlbmNfY2xh
c3MpCisgICAgICAgICAgICApCisgICAgICAgIGlmIGVuY19jbGFzcyA9PSAiTk9STUFMIjoKKyAg
ICAgICAgICAgIGRlY3RyZWVfbm9ybWFsWyJsZWF2ZXMiXS5hZGQodGFnKQogICAgICAgICBlbHNl
OgotICAgICAgICAgICAgZGVjdHJlZV9leHRlbnNpb25zW2VuY19jbGFzc11bJ2xlYXZlcyddLmFk
ZCh0YWcpCisgICAgICAgICAgICBkZWN0cmVlX2V4dGVuc2lvbnNbZW5jX2NsYXNzXVsibGVhdmVz
Il0uYWRkKHRhZykKIAogZmFrZXRhZ3MgPSBzZXQoKQotZm9yICh0YWcsIGVuYykgaW4gaXNldC5l
bmNfZXh0X3NwYWNlcy5pdGVtcygpOgorZm9yIHRhZywgZW5jIGluIGlzZXQuZW5jX2V4dF9zcGFj
ZXMuaXRlbXMoKToKICAgICBmYWtldGFncy5hZGQodGFnKQotICAgIGVuY3NbdGFnXSA9ICcnLmpv
aW4ocmV2ZXJzZWQoZW5jLnJlcGxhY2UoJyAnLCAnJykpKQotICAgIGRlY3RyZWVfbm9ybWFsWyds
ZWF2ZXMnXS5hZGQodGFnKQorICAgIGVuY3NbdGFnXSA9ICIiLmpvaW4ocmV2ZXJzZWQoZW5jLnJl
cGxhY2UoIiAiLCAiIikpKQorICAgIGRlY3RyZWVfbm9ybWFsWyJsZWF2ZXMiXS5hZGQodGFnKQog
CiBmYWtldGFncyB8PSBzZXQoc3ViaW5zbl9ncm91cGluZ3Mua2V5cygpKQogCisKIGRlZiBldmVy
eV9iaXRfY291bnRzKGJpdHNldCk6CiAgICAgZm9yIGkgaW4gcmFuZ2UoMSwgbGVuKG5leHQoaXRl
cihiaXRzZXQpKSkpOgotICAgICAgICBpZiBsZW4oc2V0KFtiaXRzWzppXSArIGJpdHNbaSsxOl0g
Zm9yIGJpdHMgaW4gYml0c2V0XSkpID09IGxlbihiaXRzZXQpOgorICAgICAgICBpZiBsZW4oc2V0
KFtiaXRzWzppXSArIGJpdHNbaSArIDEgOl0gZm9yIGJpdHMgaW4gYml0c2V0XSkpID09IGxlbihi
aXRzZXQpOgogICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgcmV0dXJuIFRydWUKIAorCiBk
ZWYgYXV0b19zZXBhcmF0ZShub2RlKToKLSAgICB0YWdzID0gbm9kZVsnbGVhdmVzJ10KKyAgICB0
YWdzID0gbm9kZVsibGVhdmVzIl0KICAgICBpZiBsZW4odGFncykgPD0gMToKICAgICAgICAgcmV0
dXJuCiAgICAgZW5jX3dpZHRoID0gbGVuKGVuY3NbbmV4dChpdGVyKHRhZ3MpKV0pCi0gICAgb3Bj
b2RlX2JpdF9mb3JfYWxsID0gXAotICAgICAgICBbYWxsKFtlbmNzW3RhZ11baV0gaW4gJzAxJyBc
Ci0gICAgICAgICAgICBmb3IgdGFnIGluIHRhZ3NdKSBmb3IgaSBpbiByYW5nZShlbmNfd2lkdGgp
XQotICAgIG9wY29kZV9iaXRfaXNfMF9mb3JfYWxsID0gXAotICAgICAgICBbb3Bjb2RlX2JpdF9m
b3JfYWxsW2ldIGFuZCBhbGwoW2VuY3NbdGFnXVtpXSA9PSAnMCcgXAotICAgICAgICAgICAgZm9y
IHRhZyBpbiB0YWdzXSkgZm9yIGkgaW4gcmFuZ2UoZW5jX3dpZHRoKV0KLSAgICBvcGNvZGVfYml0
X2lzXzFfZm9yX2FsbCA9IFwKLSAgICAgICAgW29wY29kZV9iaXRfZm9yX2FsbFtpXSBhbmQgYWxs
KFtlbmNzW3RhZ11baV0gPT0gJzEnIFwKLSAgICAgICAgICAgIGZvciB0YWcgaW4gdGFnc10pIGZv
ciBpIGluIHJhbmdlKGVuY193aWR0aCldCi0gICAgZGlmZmVyZW50aWF0b3Jfb3Bjb2RlX2JpdCA9
IFwKLSAgICAgICAgW29wY29kZV9iaXRfZm9yX2FsbFtpXSBhbmQgXAotICAgICAgICAgbm90IChv
cGNvZGVfYml0X2lzXzBfZm9yX2FsbFtpXSBvciBcCi0gICAgICAgICBvcGNvZGVfYml0X2lzXzFf
Zm9yX2FsbFtpXSkgXAotICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UoZW5jX3dpZHRoKV0KKyAg
ICBvcGNvZGVfYml0X2Zvcl9hbGwgPSBbCisgICAgICAgIGFsbChbZW5jc1t0YWddW2ldIGluICIw
MSIgZm9yIHRhZyBpbiB0YWdzXSkgZm9yIGkgaW4gcmFuZ2UoZW5jX3dpZHRoKQorICAgIF0KKyAg
ICBvcGNvZGVfYml0X2lzXzBfZm9yX2FsbCA9IFsKKyAgICAgICAgb3Bjb2RlX2JpdF9mb3JfYWxs
W2ldIGFuZCBhbGwoW2VuY3NbdGFnXVtpXSA9PSAiMCIgZm9yIHRhZyBpbiB0YWdzXSkKKyAgICAg
ICAgZm9yIGkgaW4gcmFuZ2UoZW5jX3dpZHRoKQorICAgIF0KKyAgICBvcGNvZGVfYml0X2lzXzFf
Zm9yX2FsbCA9IFsKKyAgICAgICAgb3Bjb2RlX2JpdF9mb3JfYWxsW2ldIGFuZCBhbGwoW2VuY3Nb
dGFnXVtpXSA9PSAiMSIgZm9yIHRhZyBpbiB0YWdzXSkKKyAgICAgICAgZm9yIGkgaW4gcmFuZ2Uo
ZW5jX3dpZHRoKQorICAgIF0KKyAgICBkaWZmZXJlbnRpYXRvcl9vcGNvZGVfYml0ID0gWworICAg
ICAgICBvcGNvZGVfYml0X2Zvcl9hbGxbaV0KKyAgICAgICAgYW5kIG5vdCAob3Bjb2RlX2JpdF9p
c18wX2Zvcl9hbGxbaV0gb3Igb3Bjb2RlX2JpdF9pc18xX2Zvcl9hbGxbaV0pCisgICAgICAgIGZv
ciBpIGluIHJhbmdlKGVuY193aWR0aCkKKyAgICBdCiAgICAgYmVzdF93aWR0aCA9IDAKICAgICBm
b3Igd2lkdGggaW4gcmFuZ2UoNCwgMCwgLTEpOgogICAgICAgICBmb3IgbHNiIGluIHJhbmdlKGVu
Y193aWR0aCAtIHdpZHRoLCAtMSwgLTEpOgotICAgICAgICAgICAgYml0c2V0ID0gc2V0KFtlbmNz
W3RhZ11bbHNiOmxzYit3aWR0aF0gZm9yIHRhZyBpbiB0YWdzXSkKLSAgICAgICAgICAgIGlmIGFs
bChkaWZmZXJlbnRpYXRvcl9vcGNvZGVfYml0W2xzYjpsc2Ird2lkdGhdKSBhbmQgXAotICAgICAg
ICAgICAgICAgIChsZW4oYml0c2V0KSA9PSBsZW4odGFncykgb3IgZXZlcnlfYml0X2NvdW50cyhi
aXRzZXQpKToKKyAgICAgICAgICAgIGJpdHNldCA9IHNldChbZW5jc1t0YWddW2xzYiA6IGxzYiAr
IHdpZHRoXSBmb3IgdGFnIGluIHRhZ3NdKQorICAgICAgICAgICAgaWYgYWxsKGRpZmZlcmVudGlh
dG9yX29wY29kZV9iaXRbbHNiIDogbHNiICsgd2lkdGhdKSBhbmQgKAorICAgICAgICAgICAgICAg
IGxlbihiaXRzZXQpID09IGxlbih0YWdzKSBvciBldmVyeV9iaXRfY291bnRzKGJpdHNldCkKKyAg
ICAgICAgICAgICk6CiAgICAgICAgICAgICAgICAgYmVzdF93aWR0aCA9IHdpZHRoCiAgICAgICAg
ICAgICAgICAgYmVzdF9sc2IgPSBsc2IKICAgICAgICAgICAgICAgICBjYXVnaHRfYWxsX3RhZ3Mg
PSBsZW4oYml0c2V0KSA9PSBsZW4odGFncykKQEAgLTExOCwzMyArMTMzLDM3IEBAIGRlZiBhdXRv
X3NlcGFyYXRlKG5vZGUpOgogICAgICAgICBpZiBiZXN0X3dpZHRoICE9IDA6CiAgICAgICAgICAg
ICBicmVhawogICAgIGlmIGJlc3Rfd2lkdGggPT0gMDoKLSAgICAgICAgcmFpc2UgRXhjZXB0aW9u
KCdDb3VsZCBub3QgZmluZCBhIHdheSB0byBkaWZmZXJlbnRpYXRlIHRoZSBlbmNvZGluZ3MgJyAr
Ci0gICAgICAgICAgICAgICAgICAgICAgICAgJ29mIHRoZSBmb2xsb3dpbmcgdGFnczpcbnt9Jy5m
b3JtYXQoJ1xuJy5qb2luKHRhZ3MpKSkKKyAgICAgICAgcmFpc2UgRXhjZXB0aW9uKAorICAgICAg
ICAgICAgIkNvdWxkIG5vdCBmaW5kIGEgd2F5IHRvIGRpZmZlcmVudGlhdGUgdGhlIGVuY29kaW5n
cyAiCisgICAgICAgICAgICArICJvZiB0aGUgZm9sbG93aW5nIHRhZ3M6XG57fSIuZm9ybWF0KCJc
biIuam9pbih0YWdzKSkKKyAgICAgICAgKQogICAgIGlmIGNhdWdodF9hbGxfdGFnczoKICAgICAg
ICAgZm9yIHdpZHRoIGluIHJhbmdlKDEsIGJlc3Rfd2lkdGgpOgogICAgICAgICAgICAgZm9yIGxz
YiBpbiByYW5nZShlbmNfd2lkdGggLSB3aWR0aCwgLTEsIC0xKToKLSAgICAgICAgICAgICAgICBi
aXRzZXQgPSBzZXQoW2VuY3NbdGFnXVtsc2I6bHNiK3dpZHRoXSBmb3IgdGFnIGluIHRhZ3NdKQot
ICAgICAgICAgICAgICAgIGlmIGFsbChkaWZmZXJlbnRpYXRvcl9vcGNvZGVfYml0W2xzYjpsc2Ir
d2lkdGhdKSBhbmQgXAotICAgICAgICAgICAgICAgICAgICBsZW4oYml0c2V0KSA9PSBsZW4odGFn
cyk6CisgICAgICAgICAgICAgICAgYml0c2V0ID0gc2V0KFtlbmNzW3RhZ11bbHNiIDogbHNiICsg
d2lkdGhdIGZvciB0YWcgaW4gdGFnc10pCisgICAgICAgICAgICAgICAgaWYgYWxsKGRpZmZlcmVu
dGlhdG9yX29wY29kZV9iaXRbbHNiIDogbHNiICsgd2lkdGhdKSBhbmQgbGVuKAorICAgICAgICAg
ICAgICAgICAgICBiaXRzZXQKKyAgICAgICAgICAgICAgICApID09IGxlbih0YWdzKToKICAgICAg
ICAgICAgICAgICAgICAgYmVzdF93aWR0aCA9IHdpZHRoCiAgICAgICAgICAgICAgICAgICAgIGJl
c3RfbHNiID0gbHNiCiAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICBlbHNl
OgogICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICBicmVhawotICAgIG5vZGVb
J3NlcGFyYXRvcl9sc2InXSA9IGJlc3RfbHNiCi0gICAgbm9kZVsnc2VwYXJhdG9yX3dpZHRoJ10g
PSBiZXN0X3dpZHRoCi0gICAgbm9kZVsnY2hpbGRyZW4nXSA9IFtdCi0gICAgZm9yIHZhbHVlIGlu
IHJhbmdlKDIgKiogYmVzdF93aWR0aCk6CisgICAgbm9kZVsic2VwYXJhdG9yX2xzYiJdID0gYmVz
dF9sc2IKKyAgICBub2RlWyJzZXBhcmF0b3Jfd2lkdGgiXSA9IGJlc3Rfd2lkdGgKKyAgICBub2Rl
WyJjaGlsZHJlbiJdID0gW10KKyAgICBmb3IgdmFsdWUgaW4gcmFuZ2UoMioqYmVzdF93aWR0aCk6
CiAgICAgICAgIGNoaWxkID0ge30KLSAgICAgICAgYml0cyA9ICcnLmpvaW4ocmV2ZXJzZWQoJ3s6
MHt9Yn0nLmZvcm1hdCh2YWx1ZSwgYmVzdF93aWR0aCkpKQotICAgICAgICBjaGlsZFsnbGVhdmVz
J10gPSBcCi0gICAgICAgICAgICBzZXQoW3RhZyBmb3IgdGFnIGluIHRhZ3MgXAotICAgICAgICAg
ICAgICAgIGlmIGVuY3NbdGFnXVtiZXN0X2xzYjpiZXN0X2xzYitiZXN0X3dpZHRoXSA9PSBiaXRz
XSkKLSAgICAgICAgbm9kZVsnY2hpbGRyZW4nXS5hcHBlbmQoY2hpbGQpCi0gICAgZm9yIGNoaWxk
IGluIG5vZGVbJ2NoaWxkcmVuJ106CisgICAgICAgIGJpdHMgPSAiIi5qb2luKHJldmVyc2VkKCJ7
OjB7fWJ9Ii5mb3JtYXQodmFsdWUsIGJlc3Rfd2lkdGgpKSkKKyAgICAgICAgY2hpbGRbImxlYXZl
cyJdID0gc2V0KAorICAgICAgICAgICAgW3RhZyBmb3IgdGFnIGluIHRhZ3MgaWYgZW5jc1t0YWdd
W2Jlc3RfbHNiIDogYmVzdF9sc2IgKyBiZXN0X3dpZHRoXSA9PSBiaXRzXQorICAgICAgICApCisg
ICAgICAgIG5vZGVbImNoaWxkcmVuIl0uYXBwZW5kKGNoaWxkKQorICAgIGZvciBjaGlsZCBpbiBu
b2RlWyJjaGlsZHJlbiJdOgogICAgICAgICBhdXRvX3NlcGFyYXRlKGNoaWxkKQogCisKIGF1dG9f
c2VwYXJhdGUoZGVjdHJlZV9ub3JtYWwpCiBhdXRvX3NlcGFyYXRlKGRlY3RyZWVfMTZiaXQpCiBp
ZiBzdWJpbnNuX2dyb3VwaW5nczoKQEAgLTE1NywxNDQgKzE3NiwxNzMgQEAgZGVmIGF1dG9fc2Vw
YXJhdGUobm9kZSk6CiBmb3IgdGFnIGluIGZha2V0YWdzOgogICAgIGRlbCBlbmNzW3RhZ10KIAor
CiBkZWYgdGFibGVfbmFtZShwYXJlbnRzLCBub2RlKToKICAgICBwYXRoID0gcGFyZW50cyArIFtu
b2RlXQogICAgIHJvb3QgPSBwYXRoWzBdCi0gICAgdGFnID0gbmV4dChpdGVyKG5vZGVbJ2xlYXZl
cyddKSkKKyAgICB0YWcgPSBuZXh0KGl0ZXIobm9kZVsibGVhdmVzIl0pKQogICAgIGlmIHRhZyBp
biBzdWJpbnNuX2dyb3VwaW5nczoKLSAgICAgICAgZW5jX3dpZHRoID0gbGVuKHN1Ymluc25fZ3Jv
dXBpbmdzW3RhZ11bJ2VuYyddLnJlcGxhY2UoJyAnLCAnJykpCisgICAgICAgIGVuY193aWR0aCA9
IGxlbihzdWJpbnNuX2dyb3VwaW5nc1t0YWddWyJlbmMiXS5yZXBsYWNlKCIgIiwgIiIpKQogICAg
IGVsc2U6Ci0gICAgICAgIHRhZyA9IG5leHQoaXRlcihub2RlWydsZWF2ZXMnXSAtIGZha2V0YWdz
KSkKKyAgICAgICAgdGFnID0gbmV4dChpdGVyKG5vZGVbImxlYXZlcyJdIC0gZmFrZXRhZ3MpKQog
ICAgICAgICBlbmNfd2lkdGggPSBsZW4oZW5jc1t0YWddKQotICAgIGRldGVybWluaW5nX2JpdHMg
PSBbJ18nXSAqIGVuY193aWR0aAotICAgIGZvciAocGFyZW50LCBjaGlsZCkgaW4gemlwKHBhdGhb
Oi0xXSwgcGF0aFsxOl0pOgotICAgICAgICBsc2IgPSBwYXJlbnRbJ3NlcGFyYXRvcl9sc2InXQot
ICAgICAgICB3aWR0aCA9IHBhcmVudFsnc2VwYXJhdG9yX3dpZHRoJ10KLSAgICAgICAgdmFsdWUg
PSBwYXJlbnRbJ2NoaWxkcmVuJ10uaW5kZXgoY2hpbGQpCi0gICAgICAgIGRldGVybWluaW5nX2Jp
dHNbbHNiOmxzYit3aWR0aF0gPSBcCi0gICAgICAgICAgICBsaXN0KHJldmVyc2VkKCd7OjB7fWJ9
Jy5mb3JtYXQodmFsdWUsIHdpZHRoKSkpCisgICAgZGV0ZXJtaW5pbmdfYml0cyA9IFsiXyJdICog
ZW5jX3dpZHRoCisgICAgZm9yIHBhcmVudCwgY2hpbGQgaW4gemlwKHBhdGhbOi0xXSwgcGF0aFsx
Ol0pOgorICAgICAgICBsc2IgPSBwYXJlbnRbInNlcGFyYXRvcl9sc2IiXQorICAgICAgICB3aWR0
aCA9IHBhcmVudFsic2VwYXJhdG9yX3dpZHRoIl0KKyAgICAgICAgdmFsdWUgPSBwYXJlbnRbImNo
aWxkcmVuIl0uaW5kZXgoY2hpbGQpCisgICAgICAgIGRldGVybWluaW5nX2JpdHNbbHNiIDogbHNi
ICsgd2lkdGhdID0gbGlzdCgKKyAgICAgICAgICAgIHJldmVyc2VkKCJ7OjB7fWJ9Ii5mb3JtYXQo
dmFsdWUsIHdpZHRoKSkKKyAgICAgICAgKQogICAgIGlmIHRhZyBpbiBzdWJpbnNuX2dyb3VwaW5n
czoKLSAgICAgICAgbmFtZSA9ICdERUNPREVfUk9PVF9FRScKKyAgICAgICAgbmFtZSA9ICJERUNP
REVfUk9PVF9FRSIKICAgICBlbHNlOgotICAgICAgICBlbmNfY2xhc3MgPSBpc2V0LmlzZXRbdGFn
XVsnZW5jX2NsYXNzJ10KKyAgICAgICAgZW5jX2NsYXNzID0gaXNldC5pc2V0W3RhZ11bImVuY19j
bGFzcyJdCiAgICAgICAgIGlmIGVuY19jbGFzcyBpbiBleHRfZW5jX2NsYXNzZXM6Ci0gICAgICAg
ICAgICBuYW1lID0gJ0RFQ09ERV9FWFRfe30nLmZvcm1hdChlbmNfY2xhc3MpCisgICAgICAgICAg
ICBuYW1lID0gIkRFQ09ERV9FWFRfe30iLmZvcm1hdChlbmNfY2xhc3MpCiAgICAgICAgIGVsaWYg
ZW5jX2NsYXNzIGluIHN1Ymluc25fZW5jX2NsYXNzZXM6Ci0gICAgICAgICAgICBuYW1lID0gJ0RF
Q09ERV9TVUJJTlNOX3t9Jy5mb3JtYXQoZW5jX2NsYXNzKQorICAgICAgICAgICAgbmFtZSA9ICJE
RUNPREVfU1VCSU5TTl97fSIuZm9ybWF0KGVuY19jbGFzcykKICAgICAgICAgZWxzZToKLSAgICAg
ICAgICAgIG5hbWUgPSAnREVDT0RFX1JPT1Rfe30nLmZvcm1hdChlbmNfd2lkdGgpCisgICAgICAg
ICAgICBuYW1lID0gIkRFQ09ERV9ST09UX3t9Ii5mb3JtYXQoZW5jX3dpZHRoKQogICAgIGlmIG5v
ZGUgIT0gcm9vdDoKLSAgICAgICAgbmFtZSArPSAnXycgKyAnJy5qb2luKHJldmVyc2VkKGRldGVy
bWluaW5nX2JpdHMpKQorICAgICAgICBuYW1lICs9ICJfIiArICIiLmpvaW4ocmV2ZXJzZWQoZGV0
ZXJtaW5pbmdfYml0cykpCiAgICAgcmV0dXJuIG5hbWUKIAorCiBkZWYgcHJpbnRfbm9kZShmLCBu
b2RlLCBwYXJlbnRzKToKLSAgICBpZiBsZW4obm9kZVsnbGVhdmVzJ10pIDw9IDE6CisgICAgaWYg
bGVuKG5vZGVbImxlYXZlcyJdKSA8PSAxOgogICAgICAgICByZXR1cm4KICAgICBuYW1lID0gdGFi
bGVfbmFtZShwYXJlbnRzLCBub2RlKQotICAgIGxzYiA9IG5vZGVbJ3NlcGFyYXRvcl9sc2InXQot
ICAgIHdpZHRoID0gbm9kZVsnc2VwYXJhdG9yX3dpZHRoJ10KLSAgICBwcmludCgnREVDT0RFX05F
V19UQUJMRSh7fSx7fSxERUNPREVfU0VQQVJBVE9SX0JJVFMoe30se30pKScuXAotICAgICAgICBm
b3JtYXQobmFtZSwgMiAqKiB3aWR0aCwgbHNiLCB3aWR0aCksIGZpbGU9ZikKLSAgICBmb3IgY2hp
bGQgaW4gbm9kZVsnY2hpbGRyZW4nXToKLSAgICAgICAgaWYgbGVuKGNoaWxkWydsZWF2ZXMnXSkg
PT0gMDoKLSAgICAgICAgICAgIHByaW50KCdJTlZBTElEKCknLCBmaWxlPWYpCi0gICAgICAgIGVs
aWYgbGVuKGNoaWxkWydsZWF2ZXMnXSkgPT0gMToKLSAgICAgICAgICAgICh0YWcsKSA9IGNoaWxk
WydsZWF2ZXMnXQorICAgIGxzYiA9IG5vZGVbInNlcGFyYXRvcl9sc2IiXQorICAgIHdpZHRoID0g
bm9kZVsic2VwYXJhdG9yX3dpZHRoIl0KKyAgICBwcmludCgKKyAgICAgICAgIkRFQ09ERV9ORVdf
VEFCTEUoe30se30sREVDT0RFX1NFUEFSQVRPUl9CSVRTKHt9LHt9KSkiLmZvcm1hdCgKKyAgICAg
ICAgICAgIG5hbWUsIDIqKndpZHRoLCBsc2IsIHdpZHRoCisgICAgICAgICksCisgICAgICAgIGZp
bGU9ZiwKKyAgICApCisgICAgZm9yIGNoaWxkIGluIG5vZGVbImNoaWxkcmVuIl06CisgICAgICAg
IGlmIGxlbihjaGlsZFsibGVhdmVzIl0pID09IDA6CisgICAgICAgICAgICBwcmludCgiSU5WQUxJ
RCgpIiwgZmlsZT1mKQorICAgICAgICBlbGlmIGxlbihjaGlsZFsibGVhdmVzIl0pID09IDE6Cisg
ICAgICAgICAgICAodGFnLCkgPSBjaGlsZFsibGVhdmVzIl0KICAgICAgICAgICAgIGlmIHRhZyBp
biBzdWJpbnNuX2dyb3VwaW5nczoKLSAgICAgICAgICAgICAgICBjbGFzc19hID0gc3ViaW5zbl9n
cm91cGluZ3NbdGFnXVsnY2xhc3NfYSddCi0gICAgICAgICAgICAgICAgY2xhc3NfYiA9IHN1Ymlu
c25fZ3JvdXBpbmdzW3RhZ11bJ2NsYXNzX2InXQotICAgICAgICAgICAgICAgIGVuYyA9IHN1Ymlu
c25fZ3JvdXBpbmdzW3RhZ11bJ2VuYyddLnJlcGxhY2UoJyAnLCAnJykKLSAgICAgICAgICAgICAg
ICBpZiAnUkVTRVJWRUQnIGluIHRhZzoKLSAgICAgICAgICAgICAgICAgICAgcHJpbnQoJ0lOVkFM
SUQoKScsIGZpbGU9ZikKKyAgICAgICAgICAgICAgICBjbGFzc19hID0gc3ViaW5zbl9ncm91cGlu
Z3NbdGFnXVsiY2xhc3NfYSJdCisgICAgICAgICAgICAgICAgY2xhc3NfYiA9IHN1Ymluc25fZ3Jv
dXBpbmdzW3RhZ11bImNsYXNzX2IiXQorICAgICAgICAgICAgICAgIGVuYyA9IHN1Ymluc25fZ3Jv
dXBpbmdzW3RhZ11bImVuYyJdLnJlcGxhY2UoIiAiLCAiIikKKyAgICAgICAgICAgICAgICBpZiAi
UkVTRVJWRUQiIGluIHRhZzoKKyAgICAgICAgICAgICAgICAgICAgcHJpbnQoIklOVkFMSUQoKSIs
IGZpbGU9ZikKICAgICAgICAgICAgICAgICBlbHNlOgotICAgICAgICAgICAgICAgICAgICBwcmlu
dCgnU1VCSU5TTlMoe30se30se30sInt9IiknLlwKLSAgICAgICAgICAgICAgICAgICAgICAgIGZv
cm1hdCh0YWcsIGNsYXNzX2EsIGNsYXNzX2IsIGVuYyksIGZpbGU9ZikKKyAgICAgICAgICAgICAg
ICAgICAgcHJpbnQoCisgICAgICAgICAgICAgICAgICAgICAgICAnU1VCSU5TTlMoe30se30se30s
Int9IiknLmZvcm1hdCh0YWcsIGNsYXNzX2EsIGNsYXNzX2IsIGVuYyksCisgICAgICAgICAgICAg
ICAgICAgICAgICBmaWxlPWYsCisgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgIGVs
aWYgdGFnIGluIGlzZXQuZW5jX2V4dF9zcGFjZXM6Ci0gICAgICAgICAgICAgICAgZW5jID0gaXNl
dC5lbmNfZXh0X3NwYWNlc1t0YWddLnJlcGxhY2UoJyAnLCAnJykKKyAgICAgICAgICAgICAgICBl
bmMgPSBpc2V0LmVuY19leHRfc3BhY2VzW3RhZ10ucmVwbGFjZSgiICIsICIiKQogICAgICAgICAg
ICAgICAgIHByaW50KCdFWFRTUEFDRSh7fSwie30iKScuZm9ybWF0KHRhZywgZW5jKSwgZmlsZT1m
KQogICAgICAgICAgICAgZWxzZToKLSAgICAgICAgICAgICAgICBlbmMgPSAnJy5qb2luKHJldmVy
c2VkKGVuY3NbdGFnXSkpCisgICAgICAgICAgICAgICAgZW5jID0gIiIuam9pbihyZXZlcnNlZChl
bmNzW3RhZ10pKQogICAgICAgICAgICAgICAgIHByaW50KCdURVJNSU5BTCh7fSwie30iKScuZm9y
bWF0KHRhZywgZW5jKSwgZmlsZT1mKQogICAgICAgICBlbHNlOgotICAgICAgICAgICAgcHJpbnQo
J1RBQkxFX0xJTksoe30pJy5mb3JtYXQodGFibGVfbmFtZShwYXJlbnRzICsgW25vZGVdLCBjaGls
ZCkpLAotICAgICAgICAgICAgICAgICAgZmlsZT1mKQotICAgIHByaW50KCdERUNPREVfRU5EX1RB
QkxFKHt9LHt9LERFQ09ERV9TRVBBUkFUT1JfQklUUyh7fSx7fSkpJy5cCi0gICAgICAgIGZvcm1h
dChuYW1lLCAyICoqIHdpZHRoLCBsc2IsIHdpZHRoKSwgZmlsZT1mKQorICAgICAgICAgICAgcHJp
bnQoIlRBQkxFX0xJTksoe30pIi5mb3JtYXQodGFibGVfbmFtZShwYXJlbnRzICsgW25vZGVdLCBj
aGlsZCkpLCBmaWxlPWYpCisgICAgcHJpbnQoCisgICAgICAgICJERUNPREVfRU5EX1RBQkxFKHt9
LHt9LERFQ09ERV9TRVBBUkFUT1JfQklUUyh7fSx7fSkpIi5mb3JtYXQoCisgICAgICAgICAgICBu
YW1lLCAyKip3aWR0aCwgbHNiLCB3aWR0aAorICAgICAgICApLAorICAgICAgICBmaWxlPWYsCisg
ICAgKQogICAgIHByaW50KGZpbGU9ZikKICAgICBwYXJlbnRzLmFwcGVuZChub2RlKQotICAgIGZv
ciBjaGlsZCBpbiBub2RlWydjaGlsZHJlbiddOgorICAgIGZvciBjaGlsZCBpbiBub2RlWyJjaGls
ZHJlbiJdOgogICAgICAgICBwcmludF9ub2RlKGYsIGNoaWxkLCBwYXJlbnRzKQogICAgIHBhcmVu
dHMucG9wKCkKIAorCiBkZWYgcHJpbnRfdHJlZShmLCB0cmVlKToKICAgICBwcmludF9ub2RlKGYs
IHRyZWUsIFtdKQogCisKIGRlZiBwcmludF9tYXRjaF9pbmZvKGYpOgogICAgIGZvciB0YWcgaW4g
c29ydGVkKGVuY3Mua2V5cygpLCBrZXk9aXNldC50YWdzLmluZGV4KToKLSAgICAgICAgZW5jID0g
Jycuam9pbihyZXZlcnNlZChlbmNzW3RhZ10pKQotICAgICAgICBtYXNrID0gaW50KHJlLnN1Yihy
J1teMV0nLCByJzAnLCBlbmMucmVwbGFjZSgnMCcsICcxJykpLCAyKQotICAgICAgICBtYXRjaCA9
IGludChyZS5zdWIocidbXjAxXScsIHInMCcsIGVuYyksIDIpCi0gICAgICAgIHN1ZmZpeCA9ICcn
Ci0gICAgICAgIHByaW50KCdERUNPREV7fV9NQVRDSF9JTkZPKHt9LDB4ezp4fVUsMHh7Onh9VSkn
LlwKLSAgICAgICAgICAgIGZvcm1hdChzdWZmaXgsIHRhZywgbWFzaywgbWF0Y2gpLCBmaWxlPWYp
CisgICAgICAgIGVuYyA9ICIiLmpvaW4ocmV2ZXJzZWQoZW5jc1t0YWddKSkKKyAgICAgICAgbWFz
ayA9IGludChyZS5zdWIociJbXjFdIiwgciIwIiwgZW5jLnJlcGxhY2UoIjAiLCAiMSIpKSwgMikK
KyAgICAgICAgbWF0Y2ggPSBpbnQocmUuc3ViKHIiW14wMV0iLCByIjAiLCBlbmMpLCAyKQorICAg
ICAgICBzdWZmaXggPSAiIgorICAgICAgICBwcmludCgKKyAgICAgICAgICAgICJERUNPREV7fV9N
QVRDSF9JTkZPKHt9LDB4ezp4fVUsMHh7Onh9VSkiLmZvcm1hdChzdWZmaXgsIHRhZywgbWFzaywg
bWF0Y2gpLAorICAgICAgICAgICAgZmlsZT1mLAorICAgICAgICApCisKKworcmVncmUgPSByZS5j
b21waWxlKHIiKCg/PCFEVVApW01OT1JDUFFYU0dWWkFdKShbc3R1dnd4eXpkZWZnXSspKFsuXT9b
TGxIaF0/KShcZCtTPykiKQoraW1tcmUgPSByZS5jb21waWxlKHIiWyNdKFtyUnNTdVVtXSkoXGQr
KSg/Ols6XShcZCspKT8iKQogCi1yZWdyZSA9IHJlLmNvbXBpbGUoCi0gICAgcicoKD88IURVUClb
TU5PUkNQUVhTR1ZaQV0pKFtzdHV2d3h5emRlZmddKykoWy5dP1tMbEhoXT8pKFxkK1M/KScpCi1p
bW1yZSA9IHJlLmNvbXBpbGUocidbI10oW3JSc1N1VW1dKShcZCspKD86WzpdKFxkKykpPycpCiAK
IGRlZiBvcmRlcmVkX3VuaXF1ZShsKToKICAgICByZXR1cm4gc29ydGVkKHNldChsKSwga2V5PWwu
aW5kZXgpCiAKLWltcGxpY2l0X3JlZ2lzdGVycyA9IHsKLSAgICAnU1AnIDogMjksCi0gICAgJ0ZQ
JyA6IDMwLAotICAgICdMUicgOiAzMQotfQogCi1udW1fcmVnaXN0ZXJzID0gewotICAgICdSJyA6
IDMyLAotICAgICdWJyA6IDMyCi19CitpbXBsaWNpdF9yZWdpc3RlcnMgPSB7IlNQIjogMjksICJG
UCI6IDMwLCAiTFIiOiAzMX0KKworbnVtX3JlZ2lzdGVycyA9IHsiUiI6IDMyLCAiViI6IDMyfQor
CiAKIGRlZiBwcmludF9vcF9pbmZvKGYpOgogICAgIGZvciB0YWcgaW4gc29ydGVkKGVuY3Mua2V5
cygpLCBrZXk9aXNldC50YWdzLmluZGV4KToKICAgICAgICAgZW5jID0gZW5jc1t0YWddCiAgICAg
ICAgIHByaW50KGZpbGU9ZikKLSAgICAgICAgcHJpbnQoJ0RFQ09ERV9PUElORk8oe30sJy5mb3Jt
YXQodGFnKSwgZmlsZT1mKQotICAgICAgICByZWdzID0gb3JkZXJlZF91bmlxdWUocmVncmUuZmlu
ZGFsbChpc2V0LmlzZXRbdGFnXVsnc3ludGF4J10pKQotICAgICAgICBpbW1zID0gb3JkZXJlZF91
bmlxdWUoaW1tcmUuZmluZGFsbChpc2V0LmlzZXRbdGFnXVsnc3ludGF4J10pKQorICAgICAgICBw
cmludCgiREVDT0RFX09QSU5GTyh7fSwiLmZvcm1hdCh0YWcpLCBmaWxlPWYpCisgICAgICAgIHJl
Z3MgPSBvcmRlcmVkX3VuaXF1ZShyZWdyZS5maW5kYWxsKGlzZXQuaXNldFt0YWddWyJzeW50YXgi
XSkpCisgICAgICAgIGltbXMgPSBvcmRlcmVkX3VuaXF1ZShpbW1yZS5maW5kYWxsKGlzZXQuaXNl
dFt0YWddWyJzeW50YXgiXSkpCiAgICAgICAgIHJlZ25vID0gMAogICAgICAgICBmb3IgcmVnIGlu
IHJlZ3M6CiAgICAgICAgICAgICByZWdfdHlwZSA9IHJlZ1swXQogICAgICAgICAgICAgcmVnX2xl
dHRlciA9IHJlZ1sxXVswXQotICAgICAgICAgICAgcmVnX251bV9jaG9pY2VzID0gaW50KHJlZ1sz
XS5yc3RyaXAoJ1MnKSkKLSAgICAgICAgICAgIHJlZ19tYXBwaW5nID0gcmVnWzBdICsgJycuam9p
bihbJ18nIGZvciBsZXR0ZXIgaW4gcmVnWzFdXSkgKyByZWdbM10KLSAgICAgICAgICAgIHJlZ19l
bmNfZmllbGRzID0gcmUuZmluZGFsbChyZWdfbGV0dGVyICsgJysnLCBlbmMpCisgICAgICAgICAg
ICByZWdfbnVtX2Nob2ljZXMgPSBpbnQocmVnWzNdLnJzdHJpcCgiUyIpKQorICAgICAgICAgICAg
cmVnX21hcHBpbmcgPSByZWdbMF0gKyAiIi5qb2luKFsiXyIgZm9yIGxldHRlciBpbiByZWdbMV1d
KSArIHJlZ1szXQorICAgICAgICAgICAgcmVnX2VuY19maWVsZHMgPSByZS5maW5kYWxsKHJlZ19s
ZXR0ZXIgKyAiKyIsIGVuYykKICAgICAgICAgICAgIGlmIGxlbihyZWdfZW5jX2ZpZWxkcykgPT0g
MDoKICAgICAgICAgICAgICAgICByYWlzZSBFeGNlcHRpb24oJ1RhZyAie30iIG1pc3NpbmcgcmVn
aXN0ZXIgZmllbGQhJy5mb3JtYXQodGFnKSkKICAgICAgICAgICAgIGlmIGxlbihyZWdfZW5jX2Zp
ZWxkcykgPiAxOgotICAgICAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbignVGFnICJ7fSIgaGFz
IHNwbGl0IHJlZ2lzdGVyIGZpZWxkIScuXAotICAgICAgICAgICAgICAgICAgICBmb3JtYXQodGFn
KSkKKyAgICAgICAgICAgICAgICByYWlzZSBFeGNlcHRpb24oJ1RhZyAie30iIGhhcyBzcGxpdCBy
ZWdpc3RlciBmaWVsZCEnLmZvcm1hdCh0YWcpKQogICAgICAgICAgICAgcmVnX2VuY19maWVsZCA9
IHJlZ19lbmNfZmllbGRzWzBdCiAgICAgICAgICAgICBpZiAyICoqIGxlbihyZWdfZW5jX2ZpZWxk
KSAhPSByZWdfbnVtX2Nob2ljZXM6Ci0gICAgICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCdU
YWcgInt9IiBoYXMgaW5jb3JyZWN0IHJlZ2lzdGVyIGZpZWxkIHdpZHRoIScuXAotICAgICAgICAg
ICAgICAgICAgICBmb3JtYXQodGFnKSkKLSAgICAgICAgICAgIHByaW50KCcgICAgICAgIERFQ09E
RV9SRUcoe30se30se30pJy5cCi0gICAgICAgICAgICAgICAgZm9ybWF0KHJlZ25vLCBsZW4ocmVn
X2VuY19maWVsZCksIGVuYy5pbmRleChyZWdfZW5jX2ZpZWxkKSksCi0gICAgICAgICAgICAgICAg
ICAgICAgIGZpbGU9ZikKLSAgICAgICAgICAgIGlmIHJlZ190eXBlIGluIG51bV9yZWdpc3RlcnMg
YW5kIFwKLSAgICAgICAgICAgICAgICByZWdfbnVtX2Nob2ljZXMgIT0gbnVtX3JlZ2lzdGVyc1ty
ZWdfdHlwZV06Ci0gICAgICAgICAgICAgICAgcHJpbnQoJyAgICAgICAgREVDT0RFX01BUFBFRF9S
RUcoe30se30pJy5cCi0gICAgICAgICAgICAgICAgICAgIGZvcm1hdChyZWdubywgcmVnX21hcHBp
bmcpLCBmaWxlPWYpCisgICAgICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKAorICAgICAgICAg
ICAgICAgICAgICAnVGFnICJ7fSIgaGFzIGluY29ycmVjdCByZWdpc3RlciBmaWVsZCB3aWR0aCEn
LmZvcm1hdCh0YWcpCisgICAgICAgICAgICAgICAgKQorICAgICAgICAgICAgcHJpbnQoCisgICAg
ICAgICAgICAgICAgIiAgICAgICAgREVDT0RFX1JFRyh7fSx7fSx7fSkiLmZvcm1hdCgKKyAgICAg
ICAgICAgICAgICAgICAgcmVnbm8sIGxlbihyZWdfZW5jX2ZpZWxkKSwgZW5jLmluZGV4KHJlZ19l
bmNfZmllbGQpCisgICAgICAgICAgICAgICAgKSwKKyAgICAgICAgICAgICAgICBmaWxlPWYsCisg
ICAgICAgICAgICApCisgICAgICAgICAgICBpZiByZWdfdHlwZSBpbiBudW1fcmVnaXN0ZXJzIGFu
ZCByZWdfbnVtX2Nob2ljZXMgIT0gbnVtX3JlZ2lzdGVyc1tyZWdfdHlwZV06CisgICAgICAgICAg
ICAgICAgcHJpbnQoCisgICAgICAgICAgICAgICAgICAgICIgICAgICAgIERFQ09ERV9NQVBQRURf
UkVHKHt9LHt9KSIuZm9ybWF0KHJlZ25vLCByZWdfbWFwcGluZyksCisgICAgICAgICAgICAgICAg
ICAgIGZpbGU9ZiwKKyAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICByZWdubyArPSAxCisK
ICAgICAgICAgZGVmIGltcGxpY2l0X3JlZ2lzdGVyX2tleShyZWcpOgogICAgICAgICAgICAgcmV0
dXJuIGltcGxpY2l0X3JlZ2lzdGVyc1tyZWddCisKICAgICAgICAgZm9yIHJlZyBpbiBzb3J0ZWQo
Ci0gICAgICAgICAgICBzZXQoW3IgZm9yIHIgaW4gKGlzZXQuaXNldFt0YWddWydycmVncyddLnNw
bGl0KCcsJykgKyBcCi0gICAgICAgICAgICAgICAgaXNldC5pc2V0W3RhZ11bJ3dyZWdzJ10uc3Bs
aXQoJywnKSkgXAotICAgICAgICAgICAgICAgICAgICBpZiByIGluIGltcGxpY2l0X3JlZ2lzdGVy
c10pLCBrZXk9aW1wbGljaXRfcmVnaXN0ZXJfa2V5KToKLSAgICAgICAgICAgIHByaW50KCcgICAg
ICAgIERFQ09ERV9JTVBMX1JFRyh7fSx7fSknLlwKLSAgICAgICAgICAgICAgICBmb3JtYXQocmVn
bm8sIGltcGxpY2l0X3JlZ2lzdGVyc1tyZWddKSwgZmlsZT1mKQorICAgICAgICAgICAgc2V0KAor
ICAgICAgICAgICAgICAgIFsKKyAgICAgICAgICAgICAgICAgICAgcgorICAgICAgICAgICAgICAg
ICAgICBmb3IgciBpbiAoCisgICAgICAgICAgICAgICAgICAgICAgICBpc2V0LmlzZXRbdGFnXVsi
cnJlZ3MiXS5zcGxpdCgiLCIpCisgICAgICAgICAgICAgICAgICAgICAgICArIGlzZXQuaXNldFt0
YWddWyJ3cmVncyJdLnNwbGl0KCIsIikKKyAgICAgICAgICAgICAgICAgICAgKQorICAgICAgICAg
ICAgICAgICAgICBpZiByIGluIGltcGxpY2l0X3JlZ2lzdGVycworICAgICAgICAgICAgICAgIF0K
KyAgICAgICAgICAgICksCisgICAgICAgICAgICBrZXk9aW1wbGljaXRfcmVnaXN0ZXJfa2V5LAor
ICAgICAgICApOgorICAgICAgICAgICAgcHJpbnQoCisgICAgICAgICAgICAgICAgIiAgICAgICAg
REVDT0RFX0lNUExfUkVHKHt9LHt9KSIuZm9ybWF0KHJlZ25vLCBpbXBsaWNpdF9yZWdpc3RlcnNb
cmVnXSksCisgICAgICAgICAgICAgICAgZmlsZT1mLAorICAgICAgICAgICAgKQogICAgICAgICAg
ICAgcmVnbm8gKz0gMQogICAgICAgICBpZiBpbW1zIGFuZCBpbW1zWzBdWzBdLmlzdXBwZXIoKToK
ICAgICAgICAgICAgIGltbXMgPSByZXZlcnNlZChpbW1zKQpAQCAtMzExLDQxICszNTksNDUgQEAg
ZGVmIGltcGxpY2l0X3JlZ2lzdGVyX2tleShyZWcpOgogICAgICAgICAgICAgZWxzZToKICAgICAg
ICAgICAgICAgICBpbW1fc2hpZnQgPSAwCiAgICAgICAgICAgICBpZiBpbW1fdHlwZS5pc2xvd2Vy
KCk6Ci0gICAgICAgICAgICAgICAgaW1tX2xldHRlciA9ICdpJworICAgICAgICAgICAgICAgIGlt
bV9sZXR0ZXIgPSAiaSIKICAgICAgICAgICAgIGVsc2U6Ci0gICAgICAgICAgICAgICAgaW1tX2xl
dHRlciA9ICdJJworICAgICAgICAgICAgICAgIGltbV9sZXR0ZXIgPSAiSSIKICAgICAgICAgICAg
IHJlbWFpbmRlciA9IGltbV93aWR0aAotICAgICAgICAgICAgZm9yIG0gaW4gcmV2ZXJzZWQobGlz
dChyZS5maW5kaXRlcihpbW1fbGV0dGVyICsgJysnLCBlbmMpKSk6CisgICAgICAgICAgICBmb3Ig
bSBpbiByZXZlcnNlZChsaXN0KHJlLmZpbmRpdGVyKGltbV9sZXR0ZXIgKyAiKyIsIGVuYykpKToK
ICAgICAgICAgICAgICAgICByZW1haW5kZXIgLT0gbS5lbmQoKSAtIG0uc3RhcnQoKQotICAgICAg
ICAgICAgICAgIHByaW50KCcgICAgICAgIERFQ09ERV9JTU0oe30se30se30se30pJy5cCi0gICAg
ICAgICAgICAgICAgICAgIGZvcm1hdChpbW1ubywgbS5lbmQoKSAtIG0uc3RhcnQoKSwgbS5zdGFy
dCgpLCByZW1haW5kZXIpLAotICAgICAgICAgICAgICAgICAgICAgICAgZmlsZT1mKQorICAgICAg
ICAgICAgICAgIHByaW50KAorICAgICAgICAgICAgICAgICAgICAiICAgICAgICBERUNPREVfSU1N
KHt9LHt9LHt9LHt9KSIuZm9ybWF0KAorICAgICAgICAgICAgICAgICAgICAgICAgaW1tbm8sIG0u
ZW5kKCkgLSBtLnN0YXJ0KCksIG0uc3RhcnQoKSwgcmVtYWluZGVyCisgICAgICAgICAgICAgICAg
ICAgICksCisgICAgICAgICAgICAgICAgICAgIGZpbGU9ZiwKKyAgICAgICAgICAgICAgICApCiAg
ICAgICAgICAgICBpZiByZW1haW5kZXIgIT0gMDoKICAgICAgICAgICAgICAgICBpZiBpbW1bMl06
Ci0gICAgICAgICAgICAgICAgICAgIGltbVsyXSA9ICc6JyArIGltbVsyXQotICAgICAgICAgICAg
ICAgIHJhaXNlIEV4Y2VwdGlvbignVGFnICJ7fSIgaGFzIGFuIGluY29ycmVjdCBudW1iZXIgb2Yg
JyArIFwKLSAgICAgICAgICAgICAgICAgICAgJ2VuY29kaW5nIGJpdHMgZm9yIGltbWVkaWF0ZSAi
e30iJy5cCi0gICAgICAgICAgICAgICAgICAgIGZvcm1hdCh0YWcsICcnLmpvaW4oaW1tKSkpCi0g
ICAgICAgICAgICBpZiBpbW1fdHlwZS5sb3dlcigpIGluICdzcic6Ci0gICAgICAgICAgICAgICAg
cHJpbnQoJyAgICAgICAgREVDT0RFX0lNTV9TWFQoe30se30pJy5cCi0gICAgICAgICAgICAgICAg
ICAgIGZvcm1hdChpbW1ubywgaW1tX3dpZHRoKSwgZmlsZT1mKQotICAgICAgICAgICAgaWYgaW1t
X3R5cGUubG93ZXIoKSA9PSAnbic6Ci0gICAgICAgICAgICAgICAgcHJpbnQoJyAgICAgICAgREVD
T0RFX0lNTV9ORUcoe30se30pJy5cCi0gICAgICAgICAgICAgICAgICAgIGZvcm1hdChpbW1ubywg
aW1tX3dpZHRoKSwgZmlsZT1mKQorICAgICAgICAgICAgICAgICAgICBpbW1bMl0gPSAiOiIgKyBp
bW1bMl0KKyAgICAgICAgICAgICAgICByYWlzZSBFeGNlcHRpb24oCisgICAgICAgICAgICAgICAg
ICAgICdUYWcgInt9IiBoYXMgYW4gaW5jb3JyZWN0IG51bWJlciBvZiAnCisgICAgICAgICAgICAg
ICAgICAgICsgJ2VuY29kaW5nIGJpdHMgZm9yIGltbWVkaWF0ZSAie30iJy5mb3JtYXQodGFnLCAi
Ii5qb2luKGltbSkpCisgICAgICAgICAgICAgICAgKQorICAgICAgICAgICAgaWYgaW1tX3R5cGUu
bG93ZXIoKSBpbiAic3IiOgorICAgICAgICAgICAgICAgIHByaW50KCIgICAgICAgIERFQ09ERV9J
TU1fU1hUKHt9LHt9KSIuZm9ybWF0KGltbW5vLCBpbW1fd2lkdGgpLCBmaWxlPWYpCisgICAgICAg
ICAgICBpZiBpbW1fdHlwZS5sb3dlcigpID09ICJuIjoKKyAgICAgICAgICAgICAgICBwcmludCgi
ICAgICAgICBERUNPREVfSU1NX05FRyh7fSx7fSkiLmZvcm1hdChpbW1ubywgaW1tX3dpZHRoKSwg
ZmlsZT1mKQogICAgICAgICAgICAgaWYgaW1tX3NoaWZ0OgotICAgICAgICAgICAgICAgIHByaW50
KCcgICAgICAgIERFQ09ERV9JTU1fU0hJRlQoe30se30pJy5cCi0gICAgICAgICAgICAgICAgICAg
IGZvcm1hdChpbW1ubywgaW1tX3NoaWZ0KSwgZmlsZT1mKQotICAgICAgICBwcmludCgnKScsIGZp
bGU9ZikKKyAgICAgICAgICAgICAgICBwcmludCgKKyAgICAgICAgICAgICAgICAgICAgIiAgICAg
ICAgREVDT0RFX0lNTV9TSElGVCh7fSx7fSkiLmZvcm1hdChpbW1ubywgaW1tX3NoaWZ0KSwgZmls
ZT1mCisgICAgICAgICAgICAgICAgKQorICAgICAgICBwcmludCgiKSIsIGZpbGU9ZikKKwogCi1p
ZiBfX25hbWVfXyA9PSAnX19tYWluX18nOgotICAgIHdpdGggb3BlbihzeXMuYXJndlsxXSwgJ3cn
KSBhcyBmOgoraWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjoKKyAgICB3aXRoIG9wZW4oc3lzLmFy
Z3ZbMV0sICJ3IikgYXMgZjoKICAgICAgICAgcHJpbnRfdHJlZShmLCBkZWN0cmVlX25vcm1hbCkK
ICAgICAgICAgcHJpbnRfdHJlZShmLCBkZWN0cmVlXzE2Yml0KQogICAgICAgICBpZiBzdWJpbnNu
X2dyb3VwaW5nczoKICAgICAgICAgICAgIHByaW50X3RyZWUoZiwgZGVjdHJlZV9zdWJpbnNuX2dy
b3VwaW5ncykKLSAgICAgICAgZm9yIChuYW1lLCBkZWN0cmVlX3N1Ymluc24pIGluIHNvcnRlZChk
ZWN0cmVlX3N1Ymluc25zLml0ZW1zKCkpOgorICAgICAgICBmb3IgbmFtZSwgZGVjdHJlZV9zdWJp
bnNuIGluIHNvcnRlZChkZWN0cmVlX3N1Ymluc25zLml0ZW1zKCkpOgogICAgICAgICAgICAgcHJp
bnRfdHJlZShmLCBkZWN0cmVlX3N1Ymluc24pCi0gICAgICAgIGZvciAobmFtZSwgZGVjdHJlZV9l
eHQpIGluIHNvcnRlZChkZWN0cmVlX2V4dGVuc2lvbnMuaXRlbXMoKSk6CisgICAgICAgIGZvciBu
YW1lLCBkZWN0cmVlX2V4dCBpbiBzb3J0ZWQoZGVjdHJlZV9leHRlbnNpb25zLml0ZW1zKCkpOgog
ICAgICAgICAgICAgcHJpbnRfdHJlZShmLCBkZWN0cmVlX2V4dCkKICAgICAgICAgcHJpbnRfbWF0
Y2hfaW5mbyhmKQogICAgICAgICBwcmludF9vcF9pbmZvKGYpCmRpZmYgLS1naXQgYS90YXJnZXQv
aGV4YWdvbi9nZW5fYW5hbHl6ZV9mdW5jcy5weSBiL3RhcmdldC9oZXhhZ29uL2dlbl9hbmFseXpl
X2Z1bmNzLnB5CmluZGV4IDFlMjQ2MjA5ZTguLmM3NDQ0M2RhNzggMTAwNzU1Ci0tLSBhL3Rhcmdl
dC9oZXhhZ29uL2dlbl9hbmFseXplX2Z1bmNzLnB5CisrKyBiL3RhcmdldC9oZXhhZ29uL2dlbl9h
bmFseXplX2Z1bmNzLnB5CkBAIC0yMiwxMzcgKzIyLDE0MSBAQAogaW1wb3J0IHN0cmluZwogaW1w
b3J0IGhleF9jb21tb24KIAorCiAjIwogIyMgSGVscGVycyBmb3IgZ2VuX2FuYWx5emVfZnVuYwog
IyMKIGRlZiBpc19wcmVkaWNhdGVkKHRhZyk6Ci0gICAgcmV0dXJuICdBX0NPTkRFWEVDJyBpbiBo
ZXhfY29tbW9uLmF0dHJpYmRpY3RbdGFnXQorICAgIHJldHVybiAiQV9DT05ERVhFQyIgaW4gaGV4
X2NvbW1vbi5hdHRyaWJkaWN0W3RhZ10KKwogCiBkZWYgYW5hbHl6ZV9vcG5fb2xkKGYsIHRhZywg
cmVndHlwZSwgcmVnaWQsIHJlZ25vKToKICAgICByZWdOID0gZiJ7cmVndHlwZX17cmVnaWR9TiIK
ICAgICBwcmVkaWNhdGVkID0gInRydWUiIGlmIGlzX3ByZWRpY2F0ZWQodGFnKSBlbHNlICJmYWxz
ZSIKLSAgICBpZiAocmVndHlwZSA9PSAiUiIpOgotICAgICAgICBpZiAocmVnaWQgaW4geyJzcyIs
ICJ0dCJ9KToKKyAgICBpZiByZWd0eXBlID09ICJSIjoKKyAgICAgICAgaWYgcmVnaWQgaW4geyJz
cyIsICJ0dCJ9OgogICAgICAgICAgICAgZi53cml0ZShmIi8vICAgIGNvbnN0IGludCB7cmVnTn0g
PSBpbnNuLT5yZWdub1t7cmVnbm99XTtcbiIpCi0gICAgICAgIGVsaWYgKHJlZ2lkIGluIHsiZGQi
LCAiZWUiLCAieHgiLCAieXkifSk6CisgICAgICAgIGVsaWYgcmVnaWQgaW4geyJkZCIsICJlZSIs
ICJ4eCIsICJ5eSJ9OgogICAgICAgICAgICAgZi53cml0ZShmIiAgICBjb25zdCBpbnQge3JlZ059
ID0gaW5zbi0+cmVnbm9be3JlZ25vfV07XG4iKQogICAgICAgICAgICAgZi53cml0ZShmIiAgICBj
dHhfbG9nX3JlZ193cml0ZV9wYWlyKGN0eCwge3JlZ059LCB7cHJlZGljYXRlZH0pO1xuIikKLSAg
ICAgICAgZWxpZiAocmVnaWQgaW4geyJzIiwgInQiLCAidSIsICJ2In0pOgorICAgICAgICBlbGlm
IHJlZ2lkIGluIHsicyIsICJ0IiwgInUiLCAidiJ9OgogICAgICAgICAgICAgZi53cml0ZShmIi8v
ICAgIGNvbnN0IGludCB7cmVnTn0gPSBpbnNuLT5yZWdub1t7cmVnbm99XTtcbiIpCi0gICAgICAg
IGVsaWYgKHJlZ2lkIGluIHsiZCIsICJlIiwgIngiLCAieSJ9KToKKyAgICAgICAgZWxpZiByZWdp
ZCBpbiB7ImQiLCAiZSIsICJ4IiwgInkifToKICAgICAgICAgICAgIGYud3JpdGUoZiIgICAgY29u
c3QgaW50IHtyZWdOfSA9IGluc24tPnJlZ25vW3tyZWdub31dO1xuIikKICAgICAgICAgICAgIGYu
d3JpdGUoZiIgICAgY3R4X2xvZ19yZWdfd3JpdGUoY3R4LCB7cmVnTn0sIHtwcmVkaWNhdGVkfSk7
XG4iKQogICAgICAgICBlbHNlOgogICAgICAgICAgICAgcHJpbnQoIkJhZCByZWdpc3RlciBwYXJz
ZTogIiwgcmVndHlwZSwgcmVnaWQpCi0gICAgZWxpZiAocmVndHlwZSA9PSAiUCIpOgotICAgICAg
ICBpZiAocmVnaWQgaW4geyJzIiwgInQiLCAidSIsICJ2In0pOgorICAgIGVsaWYgcmVndHlwZSA9
PSAiUCI6CisgICAgICAgIGlmIHJlZ2lkIGluIHsicyIsICJ0IiwgInUiLCAidiJ9OgogICAgICAg
ICAgICAgZi53cml0ZShmIi8vICAgIGNvbnN0IGludCB7cmVnTn0gPSBpbnNuLT5yZWdub1t7cmVn
bm99XTtcbiIpCi0gICAgICAgIGVsaWYgKHJlZ2lkIGluIHsiZCIsICJlIiwgIngifSk6CisgICAg
ICAgIGVsaWYgcmVnaWQgaW4geyJkIiwgImUiLCAieCJ9OgogICAgICAgICAgICAgZi53cml0ZShm
IiAgICBjb25zdCBpbnQge3JlZ059ID0gaW5zbi0+cmVnbm9be3JlZ25vfV07XG4iKQogICAgICAg
ICAgICAgZi53cml0ZShmIiAgICBjdHhfbG9nX3ByZWRfd3JpdGUoY3R4LCB7cmVnTn0pO1xuIikK
ICAgICAgICAgZWxzZToKICAgICAgICAgICAgIHByaW50KCJCYWQgcmVnaXN0ZXIgcGFyc2U6ICIs
IHJlZ3R5cGUsIHJlZ2lkKQotICAgIGVsaWYgKHJlZ3R5cGUgPT0gIkMiKToKLSAgICAgICAgaWYg
KHJlZ2lkID09ICJzcyIpOgotICAgICAgICAgICAgZi53cml0ZShmIi8vICAgIGNvbnN0IGludCB7
cmVnTn0gPSBpbnNuLT5yZWdub1t7cmVnbm99XSAiCi0gICAgICAgICAgICAgICAgICAgICAiKyBI
RVhfUkVHX1NBMDtcbiIpCi0gICAgICAgIGVsaWYgKHJlZ2lkID09ICJkZCIpOgotICAgICAgICAg
ICAgZi53cml0ZShmIiAgICBjb25zdCBpbnQge3JlZ059ID0gaW5zbi0+cmVnbm9be3JlZ25vfV0g
IgotICAgICAgICAgICAgICAgICAgICAgIisgSEVYX1JFR19TQTA7XG4iKQorICAgIGVsaWYgcmVn
dHlwZSA9PSAiQyI6CisgICAgICAgIGlmIHJlZ2lkID09ICJzcyI6CisgICAgICAgICAgICBmLndy
aXRlKAorICAgICAgICAgICAgICAgIGYiLy8gICAgY29uc3QgaW50IHtyZWdOfSA9IGluc24tPnJl
Z25vW3tyZWdub31dICIgIisgSEVYX1JFR19TQTA7XG4iCisgICAgICAgICAgICApCisgICAgICAg
IGVsaWYgcmVnaWQgPT0gImRkIjoKKyAgICAgICAgICAgIGYud3JpdGUoZiIgICAgY29uc3QgaW50
IHtyZWdOfSA9IGluc24tPnJlZ25vW3tyZWdub31dICIgIisgSEVYX1JFR19TQTA7XG4iKQogICAg
ICAgICAgICAgZi53cml0ZShmIiAgICBjdHhfbG9nX3JlZ193cml0ZV9wYWlyKGN0eCwge3JlZ059
LCB7cHJlZGljYXRlZH0pO1xuIikKLSAgICAgICAgZWxpZiAocmVnaWQgPT0gInMiKToKLSAgICAg
ICAgICAgIGYud3JpdGUoZiIvLyAgICBjb25zdCBpbnQge3JlZ059ID0gaW5zbi0+cmVnbm9be3Jl
Z25vfV0gIgotICAgICAgICAgICAgICAgICAgICAgIisgSEVYX1JFR19TQTA7XG4iKQotICAgICAg
ICBlbGlmIChyZWdpZCA9PSAiZCIpOgotICAgICAgICAgICAgZi53cml0ZShmIiAgICBjb25zdCBp
bnQge3JlZ059ID0gaW5zbi0+cmVnbm9be3JlZ25vfV0gIgotICAgICAgICAgICAgICAgICAgICAg
IisgSEVYX1JFR19TQTA7XG4iKQorICAgICAgICBlbGlmIHJlZ2lkID09ICJzIjoKKyAgICAgICAg
ICAgIGYud3JpdGUoCisgICAgICAgICAgICAgICAgZiIvLyAgICBjb25zdCBpbnQge3JlZ059ID0g
aW5zbi0+cmVnbm9be3JlZ25vfV0gIiAiKyBIRVhfUkVHX1NBMDtcbiIKKyAgICAgICAgICAgICkK
KyAgICAgICAgZWxpZiByZWdpZCA9PSAiZCI6CisgICAgICAgICAgICBmLndyaXRlKGYiICAgIGNv
bnN0IGludCB7cmVnTn0gPSBpbnNuLT5yZWdub1t7cmVnbm99XSAiICIrIEhFWF9SRUdfU0EwO1xu
IikKICAgICAgICAgICAgIGYud3JpdGUoZiIgICAgY3R4X2xvZ19yZWdfd3JpdGUoY3R4LCB7cmVn
Tn0sIHtwcmVkaWNhdGVkfSk7XG4iKQogICAgICAgICBlbHNlOgogICAgICAgICAgICAgcHJpbnQo
IkJhZCByZWdpc3RlciBwYXJzZTogIiwgcmVndHlwZSwgcmVnaWQpCi0gICAgZWxpZiAocmVndHlw
ZSA9PSAiTSIpOgotICAgICAgICBpZiAocmVnaWQgPT0gInUiKToKKyAgICBlbGlmIHJlZ3R5cGUg
PT0gIk0iOgorICAgICAgICBpZiByZWdpZCA9PSAidSI6CiAgICAgICAgICAgICBmLndyaXRlKGYi
Ly8gICAgY29uc3QgaW50IHtyZWdOfSA9IGluc24tPnJlZ25vW3tyZWdub31dO1xuIikKICAgICAg
ICAgZWxzZToKICAgICAgICAgICAgIHByaW50KCJCYWQgcmVnaXN0ZXIgcGFyc2U6ICIsIHJlZ3R5
cGUsIHJlZ2lkKQotICAgIGVsaWYgKHJlZ3R5cGUgPT0gIlYiKToKKyAgICBlbGlmIHJlZ3R5cGUg
PT0gIlYiOgogICAgICAgICBuZXd2ID0gIkVYVF9ERkwiCi0gICAgICAgIGlmIChoZXhfY29tbW9u
LmlzX25ld19yZXN1bHQodGFnKSk6CisgICAgICAgIGlmIGhleF9jb21tb24uaXNfbmV3X3Jlc3Vs
dCh0YWcpOgogICAgICAgICAgICAgbmV3diA9ICJFWFRfTkVXIgotICAgICAgICBlbGlmIChoZXhf
Y29tbW9uLmlzX3RtcF9yZXN1bHQodGFnKSk6CisgICAgICAgIGVsaWYgaGV4X2NvbW1vbi5pc190
bXBfcmVzdWx0KHRhZyk6CiAgICAgICAgICAgICBuZXd2ID0gIkVYVF9UTVAiCi0gICAgICAgIGlm
IChyZWdpZCBpbiB7ImRkIiwgInh4In0pOgorICAgICAgICBpZiByZWdpZCBpbiB7ImRkIiwgInh4
In06CiAgICAgICAgICAgICBmLndyaXRlKGYiICAgIGNvbnN0IGludCB7cmVnTn0gPSBpbnNuLT5y
ZWdub1t7cmVnbm99XTtcbiIpCi0gICAgICAgICAgICBmLndyaXRlKGYiICAgIGN0eF9sb2dfdnJl
Z193cml0ZV9wYWlyKGN0eCwge3JlZ059LCB7bmV3dn0sICIKLSAgICAgICAgICAgICAgICAgICAg
ZiJ7cHJlZGljYXRlZH0pO1xuIikKLSAgICAgICAgZWxpZiAocmVnaWQgaW4geyJ1dSIsICJ2diJ9
KToKKyAgICAgICAgICAgIGYud3JpdGUoCisgICAgICAgICAgICAgICAgZiIgICAgY3R4X2xvZ192
cmVnX3dyaXRlX3BhaXIoY3R4LCB7cmVnTn0sIHtuZXd2fSwgIiBmIntwcmVkaWNhdGVkfSk7XG4i
CisgICAgICAgICAgICApCisgICAgICAgIGVsaWYgcmVnaWQgaW4geyJ1dSIsICJ2diJ9OgogICAg
ICAgICAgICAgZi53cml0ZShmIi8vICAgIGNvbnN0IGludCB7cmVnTn0gPSBpbnNuLT5yZWdub1t7
cmVnbm99XTtcbiIpCi0gICAgICAgIGVsaWYgKHJlZ2lkIGluIHsicyIsICJ1IiwgInYiLCAidyJ9
KToKKyAgICAgICAgZWxpZiByZWdpZCBpbiB7InMiLCAidSIsICJ2IiwgIncifToKICAgICAgICAg
ICAgIGYud3JpdGUoZiIvLyAgICBjb25zdCBpbnQge3JlZ059ID0gaW5zbi0+cmVnbm9be3JlZ25v
fV07XG4iKQotICAgICAgICBlbGlmIChyZWdpZCBpbiB7ImQiLCAieCIsICJ5In0pOgorICAgICAg
ICBlbGlmIHJlZ2lkIGluIHsiZCIsICJ4IiwgInkifToKICAgICAgICAgICAgIGYud3JpdGUoZiIg
ICAgY29uc3QgaW50IHtyZWdOfSA9IGluc24tPnJlZ25vW3tyZWdub31dO1xuIikKLSAgICAgICAg
ICAgIGYud3JpdGUoZiIgICAgY3R4X2xvZ192cmVnX3dyaXRlKGN0eCwge3JlZ059LCB7bmV3dn0s
ICIKLSAgICAgICAgICAgICAgICAgICAgZiJ7cHJlZGljYXRlZH0pO1xuIikKKyAgICAgICAgICAg
IGYud3JpdGUoZiIgICAgY3R4X2xvZ192cmVnX3dyaXRlKGN0eCwge3JlZ059LCB7bmV3dn0sICIg
ZiJ7cHJlZGljYXRlZH0pO1xuIikKICAgICAgICAgZWxzZToKICAgICAgICAgICAgIHByaW50KCJC
YWQgcmVnaXN0ZXIgcGFyc2U6ICIsIHJlZ3R5cGUsIHJlZ2lkKQotICAgIGVsaWYgKHJlZ3R5cGUg
PT0gIlEiKToKLSAgICAgICAgaWYgKHJlZ2lkIGluIHsiZCIsICJlIiwgIngifSk6CisgICAgZWxp
ZiByZWd0eXBlID09ICJRIjoKKyAgICAgICAgaWYgcmVnaWQgaW4geyJkIiwgImUiLCAieCJ9Ogog
ICAgICAgICAgICAgZi53cml0ZShmIiAgICBjb25zdCBpbnQge3JlZ059ID0gaW5zbi0+cmVnbm9b
e3JlZ25vfV07XG4iKQogICAgICAgICAgICAgZi53cml0ZShmIiAgICBjdHhfbG9nX3FyZWdfd3Jp
dGUoY3R4LCB7cmVnTn0pO1xuIikKLSAgICAgICAgZWxpZiAocmVnaWQgaW4geyJzIiwgInQiLCAi
dSIsICJ2In0pOgorICAgICAgICBlbGlmIHJlZ2lkIGluIHsicyIsICJ0IiwgInUiLCAidiJ9Ogog
ICAgICAgICAgICAgZi53cml0ZShmIi8vICAgIGNvbnN0IGludCB7cmVnTn0gPSBpbnNuLT5yZWdu
b1t7cmVnbm99XTtcbiIpCiAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICBwcmludCgiQmFkIHJl
Z2lzdGVyIHBhcnNlOiAiLCByZWd0eXBlLCByZWdpZCkKLSAgICBlbGlmIChyZWd0eXBlID09ICJH
Iik6Ci0gICAgICAgIGlmIChyZWdpZCBpbiB7ImRkIn0pOgorICAgIGVsaWYgcmVndHlwZSA9PSAi
RyI6CisgICAgICAgIGlmIHJlZ2lkIGluIHsiZGQifToKICAgICAgICAgICAgIGYud3JpdGUoZiIv
LyAgICBjb25zdCBpbnQge3JlZ059ID0gaW5zbi0+cmVnbm9be3JlZ25vfV07XG4iKQotICAgICAg
ICBlbGlmIChyZWdpZCBpbiB7ImQifSk6CisgICAgICAgIGVsaWYgcmVnaWQgaW4geyJkIn06CiAg
ICAgICAgICAgICBmLndyaXRlKGYiLy8gICAgY29uc3QgaW50IHtyZWdOfSA9IGluc24tPnJlZ25v
W3tyZWdub31dO1xuIikKLSAgICAgICAgZWxpZiAocmVnaWQgaW4geyJzcyJ9KToKKyAgICAgICAg
ZWxpZiByZWdpZCBpbiB7InNzIn06CiAgICAgICAgICAgICBmLndyaXRlKGYiLy8gICAgY29uc3Qg
aW50IHtyZWdOfSA9IGluc24tPnJlZ25vW3tyZWdub31dO1xuIikKLSAgICAgICAgZWxpZiAocmVn
aWQgaW4geyJzIn0pOgorICAgICAgICBlbGlmIHJlZ2lkIGluIHsicyJ9OgogICAgICAgICAgICAg
Zi53cml0ZShmIi8vICAgIGNvbnN0IGludCB7cmVnTn0gPSBpbnNuLT5yZWdub1t7cmVnbm99XTtc
biIpCiAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICBwcmludCgiQmFkIHJlZ2lzdGVyIHBhcnNl
OiAiLCByZWd0eXBlLCByZWdpZCkKLSAgICBlbGlmIChyZWd0eXBlID09ICJTIik6Ci0gICAgICAg
IGlmIChyZWdpZCBpbiB7ImRkIn0pOgorICAgIGVsaWYgcmVndHlwZSA9PSAiUyI6CisgICAgICAg
IGlmIHJlZ2lkIGluIHsiZGQifToKICAgICAgICAgICAgIGYud3JpdGUoZiIvLyAgICBjb25zdCBp
bnQge3JlZ059ID0gaW5zbi0+cmVnbm9be3JlZ25vfV07XG4iKQotICAgICAgICBlbGlmIChyZWdp
ZCBpbiB7ImQifSk6CisgICAgICAgIGVsaWYgcmVnaWQgaW4geyJkIn06CiAgICAgICAgICAgICBm
LndyaXRlKGYiLy8gICAgY29uc3QgaW50IHtyZWdOfSA9IGluc24tPnJlZ25vW3tyZWdub31dO1xu
IikKLSAgICAgICAgZWxpZiAocmVnaWQgaW4geyJzcyJ9KToKKyAgICAgICAgZWxpZiByZWdpZCBp
biB7InNzIn06CiAgICAgICAgICAgICBmLndyaXRlKGYiLy8gICAgY29uc3QgaW50IHtyZWdOfSA9
IGluc24tPnJlZ25vW3tyZWdub31dO1xuIikKLSAgICAgICAgZWxpZiAocmVnaWQgaW4geyJzIn0p
OgorICAgICAgICBlbGlmIHJlZ2lkIGluIHsicyJ9OgogICAgICAgICAgICAgZi53cml0ZShmIi8v
ICAgIGNvbnN0IGludCB7cmVnTn0gPSBpbnNuLT5yZWdub1t7cmVnbm99XTtcbiIpCiAgICAgICAg
IGVsc2U6CiAgICAgICAgICAgICBwcmludCgiQmFkIHJlZ2lzdGVyIHBhcnNlOiAiLCByZWd0eXBl
LCByZWdpZCkKICAgICBlbHNlOgogICAgICAgICBwcmludCgiQmFkIHJlZ2lzdGVyIHBhcnNlOiAi
LCByZWd0eXBlLCByZWdpZCkKIAorCiBkZWYgYW5hbHl6ZV9vcG5fbmV3KGYsIHRhZywgcmVndHlw
ZSwgcmVnaWQsIHJlZ25vKToKICAgICByZWdOID0gZiJ7cmVndHlwZX17cmVnaWR9TiIKLSAgICBp
ZiAocmVndHlwZSA9PSAiTiIpOgotICAgICAgICBpZiAocmVnaWQgaW4geyJzIiwgInQifSk6Cisg
ICAgaWYgcmVndHlwZSA9PSAiTiI6CisgICAgICAgIGlmIHJlZ2lkIGluIHsicyIsICJ0In06CiAg
ICAgICAgICAgICBmLndyaXRlKGYiLy8gICAgY29uc3QgaW50IHtyZWdOfSA9IGluc24tPnJlZ25v
W3tyZWdub31dO1xuIikKICAgICAgICAgZWxzZToKICAgICAgICAgICAgIHByaW50KCJCYWQgcmVn
aXN0ZXIgcGFyc2U6ICIsIHJlZ3R5cGUsIHJlZ2lkKQotICAgIGVsaWYgKHJlZ3R5cGUgPT0gIlAi
KToKLSAgICAgICAgaWYgKHJlZ2lkIGluIHsidCIsICJ1IiwgInYifSk6CisgICAgZWxpZiByZWd0
eXBlID09ICJQIjoKKyAgICAgICAgaWYgcmVnaWQgaW4geyJ0IiwgInUiLCAidiJ9OgogICAgICAg
ICAgICAgZi53cml0ZShmIi8vICAgIGNvbnN0IGludCB7cmVnTn0gPSBpbnNuLT5yZWdub1t7cmVn
bm99XTtcbiIpCiAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICBwcmludCgiQmFkIHJlZ2lzdGVy
IHBhcnNlOiAiLCByZWd0eXBlLCByZWdpZCkKLSAgICBlbGlmIChyZWd0eXBlID09ICJPIik6Ci0g
ICAgICAgIGlmIChyZWdpZCA9PSAicyIpOgorICAgIGVsaWYgcmVndHlwZSA9PSAiTyI6CisgICAg
ICAgIGlmIHJlZ2lkID09ICJzIjoKICAgICAgICAgICAgIGYud3JpdGUoZiIvLyAgICBjb25zdCBp
bnQge3JlZ059ID0gaW5zbi0+cmVnbm9be3JlZ25vfV07XG4iKQogICAgICAgICBlbHNlOgogICAg
ICAgICAgICAgcHJpbnQoIkJhZCByZWdpc3RlciBwYXJzZTogIiwgcmVndHlwZSwgcmVnaWQpCiAg
ICAgZWxzZToKICAgICAgICAgcHJpbnQoIkJhZCByZWdpc3RlciBwYXJzZTogIiwgcmVndHlwZSwg
cmVnaWQpCiAKKwogZGVmIGFuYWx5emVfb3BuKGYsIHRhZywgcmVndHlwZSwgcmVnaWQsIHRvc3Ms
IG51bXJlZ3MsIGkpOgotICAgIGlmIChoZXhfY29tbW9uLmlzX3BhaXIocmVnaWQpKToKKyAgICBp
ZiBoZXhfY29tbW9uLmlzX3BhaXIocmVnaWQpOgogICAgICAgICBhbmFseXplX29wbl9vbGQoZiwg
dGFnLCByZWd0eXBlLCByZWdpZCwgaSkKLSAgICBlbGlmIChoZXhfY29tbW9uLmlzX3NpbmdsZShy
ZWdpZCkpOgorICAgIGVsaWYgaGV4X2NvbW1vbi5pc19zaW5nbGUocmVnaWQpOgogICAgICAgICBp
ZiBoZXhfY29tbW9uLmlzX29sZF92YWwocmVndHlwZSwgcmVnaWQsIHRhZyk6Ci0gICAgICAgICAg
ICBhbmFseXplX29wbl9vbGQoZix0YWcsIHJlZ3R5cGUsIHJlZ2lkLCBpKQorICAgICAgICAgICAg
YW5hbHl6ZV9vcG5fb2xkKGYsIHRhZywgcmVndHlwZSwgcmVnaWQsIGkpCiAgICAgICAgIGVsaWYg
aGV4X2NvbW1vbi5pc19uZXdfdmFsKHJlZ3R5cGUsIHJlZ2lkLCB0YWcpOgogICAgICAgICAgICAg
YW5hbHl6ZV9vcG5fbmV3KGYsIHRhZywgcmVndHlwZSwgcmVnaWQsIGkpCiAgICAgICAgIGVsc2U6
CkBAIC0xNjAsNiArMTY0LDcgQEAgZGVmIGFuYWx5emVfb3BuKGYsIHRhZywgcmVndHlwZSwgcmVn
aWQsIHRvc3MsIG51bXJlZ3MsIGkpOgogICAgIGVsc2U6CiAgICAgICAgIHByaW50KCJCYWQgcmVn
aXN0ZXIgcGFyc2U6ICIsIHJlZ3R5cGUsIHJlZ2lkLCB0b3NzLCBudW1yZWdzKQogCisKICMjCiAj
IyBHZW5lcmF0ZSB0aGUgY29kZSB0byBhbmFseXplIHRoZSBpbnN0cnVjdGlvbgogIyMgICAgIEZv
ciBBMl9hZGQ6IFJkMzI9YWRkKFJzMzIsUnQzMiksIHsgUmRWPVJzVitSdFY7fQpAQCAtMTc1LDI0
ICsxODAsMjUgQEAgZGVmIGFuYWx5emVfb3BuKGYsIHRhZywgcmVndHlwZSwgcmVnaWQsIHRvc3Ms
IG51bXJlZ3MsIGkpOgogIyMKIGRlZiBnZW5fYW5hbHl6ZV9mdW5jKGYsIHRhZywgcmVncywgaW1t
cyk6CiAgICAgZi53cml0ZShmInN0YXRpYyB2b2lkIGFuYWx5emVfe3RhZ30oRGlzYXNDb250ZXh0
ICpjdHgpXG4iKQotICAgIGYud3JpdGUoJ3tcbicpCisgICAgZi53cml0ZSgie1xuIikKIAogICAg
IGYud3JpdGUoIiAgICBJbnNuICppbnNuIEdfR05VQ19VTlVTRUQgPSBjdHgtPmluc247XG4iKQog
Ci0gICAgaT0wCisgICAgaSA9IDAKICAgICAjIyBBbmFseXplIGFsbCB0aGUgcmVnaXN0ZXJzCiAg
ICAgZm9yIHJlZ3R5cGUsIHJlZ2lkLCB0b3NzLCBudW1yZWdzIGluIHJlZ3M6CiAgICAgICAgIGFu
YWx5emVfb3BuKGYsIHRhZywgcmVndHlwZSwgcmVnaWQsIHRvc3MsIG51bXJlZ3MsIGkpCiAgICAg
ICAgIGkgKz0gMQogCi0gICAgaGFzX2dlbmVyYXRlZF9oZWxwZXIgPSAobm90IGhleF9jb21tb24u
c2tpcF9xZW11X2hlbHBlcih0YWcpIGFuZAotICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5v
dCBoZXhfY29tbW9uLmlzX2lkZWZfcGFyc2VyX2VuYWJsZWQodGFnKSkKLSAgICBpZiAoaGFzX2dl
bmVyYXRlZF9oZWxwZXIgYW5kCi0gICAgICAgICdBX1NDQUxBUl9MT0FEJyBpbiBoZXhfY29tbW9u
LmF0dHJpYmRpY3RbdGFnXSk6CisgICAgaGFzX2dlbmVyYXRlZF9oZWxwZXIgPSBub3QgaGV4X2Nv
bW1vbi5za2lwX3FlbXVfaGVscGVyKAorICAgICAgICB0YWcKKyAgICApIGFuZCBub3QgaGV4X2Nv
bW1vbi5pc19pZGVmX3BhcnNlcl9lbmFibGVkKHRhZykKKyAgICBpZiBoYXNfZ2VuZXJhdGVkX2hl
bHBlciBhbmQgIkFfU0NBTEFSX0xPQUQiIGluIGhleF9jb21tb24uYXR0cmliZGljdFt0YWddOgog
ICAgICAgICBmLndyaXRlKCIgICAgY3R4LT5uZWVkX3BrdF9oYXNfc3RvcmVfczEgPSB0cnVlO1xu
IikKIAogICAgIGYud3JpdGUoIn1cblxuIikKIAorCiBkZWYgbWFpbigpOgogICAgIGhleF9jb21t
b24ucmVhZF9zZW1hbnRpY3NfZmlsZShzeXMuYXJndlsxXSkKICAgICBoZXhfY29tbW9uLnJlYWRf
YXR0cmlic19maWxlKHN5cy5hcmd2WzJdKQpAQCAtMjE0LDcgKzIyMCw3IEBAIGRlZiBtYWluKCk6
CiAgICAgdGFncmVncyA9IGhleF9jb21tb24uZ2V0X3RhZ3JlZ3MoKQogICAgIHRhZ2ltbXMgPSBo
ZXhfY29tbW9uLmdldF90YWdpbW1zKCkKIAotICAgIHdpdGggb3BlbihzeXMuYXJndlstMV0sICd3
JykgYXMgZjoKKyAgICB3aXRoIG9wZW4oc3lzLmFyZ3ZbLTFdLCAidyIpIGFzIGY6CiAgICAgICAg
IGYud3JpdGUoIiNpZm5kZWYgSEVYQUdPTl9UQ0dfRlVOQ1NfSFxuIikKICAgICAgICAgZi53cml0
ZSgiI2RlZmluZSBIRVhBR09OX1RDR19GVU5DU19IXG5cbiIpCiAKQEAgLTIyMyw1ICsyMjksNiBA
QCBkZWYgbWFpbigpOgogCiAgICAgICAgIGYud3JpdGUoIiNlbmRpZiAgICAvKiBIRVhBR09OX1RD
R19GVU5DU19IICovXG4iKQogCisKIGlmIF9fbmFtZV9fID09ICJfX21haW5fXyI6CiAgICAgbWFp
bigpCmRpZmYgLS1naXQgYS90YXJnZXQvaGV4YWdvbi9nZW5faGVscGVyX2Z1bmNzLnB5IGIvdGFy
Z2V0L2hleGFnb24vZ2VuX2hlbHBlcl9mdW5jcy5weQppbmRleCBkYzY3ZWFmNzE2Li5jNGUwNDUw
OGY4IDEwMDc1NQotLS0gYS90YXJnZXQvaGV4YWdvbi9nZW5faGVscGVyX2Z1bmNzLnB5CisrKyBi
L3RhcmdldC9oZXhhZ29uL2dlbl9oZWxwZXJfZnVuY3MucHkKQEAgLTIyLDEzMSArMjIsMTcxIEBA
CiBpbXBvcnQgc3RyaW5nCiBpbXBvcnQgaGV4X2NvbW1vbgogCisKICMjCiAjIyBIZWxwZXJzIGZv
ciBnZW5faGVscGVyX2Z1bmN0aW9uCiAjIwogZGVmIGdlbl9kZWNsX2VhKGYpOgogICAgIGYud3Jp
dGUoIiAgICB1aW50MzJfdCBFQTtcbiIpCiAKLWRlZiBnZW5faGVscGVyX3JldHVybl90eXBlKGYs
cmVndHlwZSxyZWdpZCxyZWdubyk6Ci0gICAgaWYgcmVnbm8gPiAxIDogZi53cml0ZSgiLCAiKQor
CitkZWYgZ2VuX2hlbHBlcl9yZXR1cm5fdHlwZShmLCByZWd0eXBlLCByZWdpZCwgcmVnbm8pOgor
ICAgIGlmIHJlZ25vID4gMToKKyAgICAgICAgZi53cml0ZSgiLCAiKQogICAgIGYud3JpdGUoImlu
dDMyX3QiKQogCi1kZWYgZ2VuX2hlbHBlcl9yZXR1cm5fdHlwZV9wYWlyKGYscmVndHlwZSxyZWdp
ZCxyZWdubyk6Ci0gICAgaWYgcmVnbm8gPiAxIDogZi53cml0ZSgiLCAiKQorCitkZWYgZ2VuX2hl
bHBlcl9yZXR1cm5fdHlwZV9wYWlyKGYsIHJlZ3R5cGUsIHJlZ2lkLCByZWdubyk6CisgICAgaWYg
cmVnbm8gPiAxOgorICAgICAgICBmLndyaXRlKCIsICIpCiAgICAgZi53cml0ZSgiaW50NjRfdCIp
CiAKLWRlZiBnZW5faGVscGVyX2FyZyhmLHJlZ3R5cGUscmVnaWQscmVnbm8pOgotICAgIGlmIHJl
Z25vID4gMCA6IGYud3JpdGUoIiwgIiApCisKK2RlZiBnZW5faGVscGVyX2FyZyhmLCByZWd0eXBl
LCByZWdpZCwgcmVnbm8pOgorICAgIGlmIHJlZ25vID4gMDoKKyAgICAgICAgZi53cml0ZSgiLCAi
KQogICAgIGYud3JpdGUoZiJpbnQzMl90IHtyZWd0eXBlfXtyZWdpZH1WIikKIAotZGVmIGdlbl9o
ZWxwZXJfYXJnX25ldyhmLHJlZ3R5cGUscmVnaWQscmVnbm8pOgotICAgIGlmIHJlZ25vID49IDAg
OiBmLndyaXRlKCIsICIgKQorCitkZWYgZ2VuX2hlbHBlcl9hcmdfbmV3KGYsIHJlZ3R5cGUsIHJl
Z2lkLCByZWdubyk6CisgICAgaWYgcmVnbm8gPj0gMDoKKyAgICAgICAgZi53cml0ZSgiLCAiKQog
ICAgIGYud3JpdGUoZiJpbnQzMl90IHtyZWd0eXBlfXtyZWdpZH1OIikKIAotZGVmIGdlbl9oZWxw
ZXJfYXJnX3BhaXIoZixyZWd0eXBlLHJlZ2lkLHJlZ25vKToKLSAgICBpZiByZWdubyA+PSAwIDog
Zi53cml0ZSgiLCAiKQorCitkZWYgZ2VuX2hlbHBlcl9hcmdfcGFpcihmLCByZWd0eXBlLCByZWdp
ZCwgcmVnbm8pOgorICAgIGlmIHJlZ25vID49IDA6CisgICAgICAgIGYud3JpdGUoIiwgIikKICAg
ICBmLndyaXRlKGYiaW50NjRfdCB7cmVndHlwZX17cmVnaWR9ViIpCiAKLWRlZiBnZW5faGVscGVy
X2FyZ19leHQoZixyZWd0eXBlLHJlZ2lkLHJlZ25vKToKLSAgICBpZiByZWdubyA+IDAgOiBmLndy
aXRlKCIsICIpCisKK2RlZiBnZW5faGVscGVyX2FyZ19leHQoZiwgcmVndHlwZSwgcmVnaWQsIHJl
Z25vKToKKyAgICBpZiByZWdubyA+IDA6CisgICAgICAgIGYud3JpdGUoIiwgIikKICAgICBmLndy
aXRlKGYidm9pZCAqe3JlZ3R5cGV9e3JlZ2lkfVZfdm9pZCIpCiAKLWRlZiBnZW5faGVscGVyX2Fy
Z19leHRfcGFpcihmLHJlZ3R5cGUscmVnaWQscmVnbm8pOgotICAgIGlmIHJlZ25vID4gMCA6IGYu
d3JpdGUoIiwgIikKKworZGVmIGdlbl9oZWxwZXJfYXJnX2V4dF9wYWlyKGYsIHJlZ3R5cGUsIHJl
Z2lkLCByZWdubyk6CisgICAgaWYgcmVnbm8gPiAwOgorICAgICAgICBmLndyaXRlKCIsICIpCiAg
ICAgZi53cml0ZShmInZvaWQgKntyZWd0eXBlfXtyZWdpZH1WX3ZvaWQiKQogCi1kZWYgZ2VuX2hl
bHBlcl9hcmdfb3BuKGYscmVndHlwZSxyZWdpZCxpLHRhZyk6Ci0gICAgaWYgKGhleF9jb21tb24u
aXNfcGFpcihyZWdpZCkpOgotICAgICAgICBpZiAoaGV4X2NvbW1vbi5pc19odnhfcmVnKHJlZ3R5
cGUpKToKLSAgICAgICAgICAgIGdlbl9oZWxwZXJfYXJnX2V4dF9wYWlyKGYscmVndHlwZSxyZWdp
ZCxpKQorCitkZWYgZ2VuX2hlbHBlcl9hcmdfb3BuKGYsIHJlZ3R5cGUsIHJlZ2lkLCBpLCB0YWcp
OgorICAgIGlmIGhleF9jb21tb24uaXNfcGFpcihyZWdpZCk6CisgICAgICAgIGlmIGhleF9jb21t
b24uaXNfaHZ4X3JlZyhyZWd0eXBlKToKKyAgICAgICAgICAgIGdlbl9oZWxwZXJfYXJnX2V4dF9w
YWlyKGYsIHJlZ3R5cGUsIHJlZ2lkLCBpKQogICAgICAgICBlbHNlOgotICAgICAgICAgICAgZ2Vu
X2hlbHBlcl9hcmdfcGFpcihmLHJlZ3R5cGUscmVnaWQsaSkKLSAgICBlbGlmIChoZXhfY29tbW9u
LmlzX3NpbmdsZShyZWdpZCkpOgorICAgICAgICAgICAgZ2VuX2hlbHBlcl9hcmdfcGFpcihmLCBy
ZWd0eXBlLCByZWdpZCwgaSkKKyAgICBlbGlmIGhleF9jb21tb24uaXNfc2luZ2xlKHJlZ2lkKToK
ICAgICAgICAgaWYgaGV4X2NvbW1vbi5pc19vbGRfdmFsKHJlZ3R5cGUsIHJlZ2lkLCB0YWcpOgot
ICAgICAgICAgICAgaWYgKGhleF9jb21tb24uaXNfaHZ4X3JlZyhyZWd0eXBlKSk6Ci0gICAgICAg
ICAgICAgICAgZ2VuX2hlbHBlcl9hcmdfZXh0KGYscmVndHlwZSxyZWdpZCxpKQorICAgICAgICAg
ICAgaWYgaGV4X2NvbW1vbi5pc19odnhfcmVnKHJlZ3R5cGUpOgorICAgICAgICAgICAgICAgIGdl
bl9oZWxwZXJfYXJnX2V4dChmLCByZWd0eXBlLCByZWdpZCwgaSkKICAgICAgICAgICAgIGVsc2U6
Ci0gICAgICAgICAgICAgICAgZ2VuX2hlbHBlcl9hcmcoZixyZWd0eXBlLHJlZ2lkLGkpCisgICAg
ICAgICAgICAgICAgZ2VuX2hlbHBlcl9hcmcoZiwgcmVndHlwZSwgcmVnaWQsIGkpCiAgICAgICAg
IGVsaWYgaGV4X2NvbW1vbi5pc19uZXdfdmFsKHJlZ3R5cGUsIHJlZ2lkLCB0YWcpOgotICAgICAg
ICAgICAgZ2VuX2hlbHBlcl9hcmdfbmV3KGYscmVndHlwZSxyZWdpZCxpKQorICAgICAgICAgICAg
Z2VuX2hlbHBlcl9hcmdfbmV3KGYsIHJlZ3R5cGUsIHJlZ2lkLCBpKQogICAgICAgICBlbHNlOgot
ICAgICAgICAgICAgcHJpbnQoIkJhZCByZWdpc3RlciBwYXJzZTogIixyZWd0eXBlLHJlZ2lkLHRv
c3MsbnVtcmVncykKKyAgICAgICAgICAgIHByaW50KCJCYWQgcmVnaXN0ZXIgcGFyc2U6ICIsIHJl
Z3R5cGUsIHJlZ2lkLCB0b3NzLCBudW1yZWdzKQogICAgIGVsc2U6Ci0gICAgICAgIHByaW50KCJC
YWQgcmVnaXN0ZXIgcGFyc2U6ICIscmVndHlwZSxyZWdpZCx0b3NzLG51bXJlZ3MpCisgICAgICAg
IHByaW50KCJCYWQgcmVnaXN0ZXIgcGFyc2U6ICIsIHJlZ3R5cGUsIHJlZ2lkLCB0b3NzLCBudW1y
ZWdzKQogCi1kZWYgZ2VuX2hlbHBlcl9hcmdfaW1tKGYsaW1tbGV0dCk6CisKK2RlZiBnZW5faGVs
cGVyX2FyZ19pbW0oZiwgaW1tbGV0dCk6CiAgICAgZi53cml0ZShmIiwgaW50MzJfdCB7aGV4X2Nv
bW1vbi5pbW1fbmFtZShpbW1sZXR0KX0iKQogCi1kZWYgZ2VuX2hlbHBlcl9kZXN0X2RlY2woZixy
ZWd0eXBlLHJlZ2lkLHJlZ25vLHN1YmZpZWxkPSIiKToKKworZGVmIGdlbl9oZWxwZXJfZGVzdF9k
ZWNsKGYsIHJlZ3R5cGUsIHJlZ2lkLCByZWdubywgc3ViZmllbGQ9IiIpOgogICAgIGYud3JpdGUo
ZiIgICAgaW50MzJfdCB7cmVndHlwZX17cmVnaWR9VntzdWJmaWVsZH0gPSAwO1xuIikKIAotZGVm
IGdlbl9oZWxwZXJfZGVzdF9kZWNsX3BhaXIoZixyZWd0eXBlLHJlZ2lkLHJlZ25vLHN1YmZpZWxk
PSIiKToKKworZGVmIGdlbl9oZWxwZXJfZGVzdF9kZWNsX3BhaXIoZiwgcmVndHlwZSwgcmVnaWQs
IHJlZ25vLCBzdWJmaWVsZD0iIik6CiAgICAgZi53cml0ZShmIiAgICBpbnQ2NF90IHtyZWd0eXBl
fXtyZWdpZH1We3N1YmZpZWxkfSA9IDA7XG4iKQogCi1kZWYgZ2VuX2hlbHBlcl9kZXN0X2RlY2xf
ZXh0KGYscmVndHlwZSxyZWdpZCk6Ci0gICAgaWYgKHJlZ3R5cGUgPT0gIlEiKToKLSAgICAgICAg
Zi53cml0ZShmIiAgICAvKiB7cmVndHlwZX17cmVnaWR9ViBpcyAqKE1NUVJlZyAqKSIKLSAgICAg
ICAgICAgICAgICBmIih7cmVndHlwZX17cmVnaWR9Vl92b2lkKSAqL1xuIikKKworZGVmIGdlbl9o
ZWxwZXJfZGVzdF9kZWNsX2V4dChmLCByZWd0eXBlLCByZWdpZCk6CisgICAgaWYgcmVndHlwZSA9
PSAiUSI6CisgICAgICAgIGYud3JpdGUoCisgICAgICAgICAgICBmIiAgICAvKiB7cmVndHlwZX17
cmVnaWR9ViBpcyAqKE1NUVJlZyAqKSIgZiIoe3JlZ3R5cGV9e3JlZ2lkfVZfdm9pZCkgKi9cbiIK
KyAgICAgICAgKQogICAgIGVsc2U6Ci0gICAgICAgIGYud3JpdGUoZiIgICAgLyoge3JlZ3R5cGV9
e3JlZ2lkfVYgaXMgKihNTVZlY3RvciAqKSIKLSAgICAgICAgICAgICAgICBmIih7cmVndHlwZX17
cmVnaWR9Vl92b2lkKSAqL1xuIikKKyAgICAgICAgZi53cml0ZSgKKyAgICAgICAgICAgIGYiICAg
IC8qIHtyZWd0eXBlfXtyZWdpZH1WIGlzICooTU1WZWN0b3IgKikiCisgICAgICAgICAgICBmIih7
cmVndHlwZX17cmVnaWR9Vl92b2lkKSAqL1xuIgorICAgICAgICApCisKIAotZGVmIGdlbl9oZWxw
ZXJfZGVzdF9kZWNsX2V4dF9wYWlyKGYscmVndHlwZSxyZWdpZCxyZWdubyk6Ci0gICAgZi53cml0
ZShmIiAgICAvKiB7cmVndHlwZX17cmVnaWR9ViBpcyAqKE1NVmVjdG9yUGFpciAqKSkiCi0gICAg
ICAgICAgICBmIntyZWd0eXBlfXtyZWdpZH1WX3ZvaWQpICovXG4iKQorZGVmIGdlbl9oZWxwZXJf
ZGVzdF9kZWNsX2V4dF9wYWlyKGYsIHJlZ3R5cGUsIHJlZ2lkLCByZWdubyk6CisgICAgZi53cml0
ZSgKKyAgICAgICAgZiIgICAgLyoge3JlZ3R5cGV9e3JlZ2lkfVYgaXMgKihNTVZlY3RvclBhaXIg
KikpIgorICAgICAgICBmIntyZWd0eXBlfXtyZWdpZH1WX3ZvaWQpICovXG4iCisgICAgKQogCi1k
ZWYgZ2VuX2hlbHBlcl9kZXN0X2RlY2xfb3BuKGYscmVndHlwZSxyZWdpZCxpKToKLSAgICBpZiAo
aGV4X2NvbW1vbi5pc19wYWlyKHJlZ2lkKSk6Ci0gICAgICAgIGlmIChoZXhfY29tbW9uLmlzX2h2
eF9yZWcocmVndHlwZSkpOgotICAgICAgICAgICAgZ2VuX2hlbHBlcl9kZXN0X2RlY2xfZXh0X3Bh
aXIoZixyZWd0eXBlLHJlZ2lkLCBpKQorCitkZWYgZ2VuX2hlbHBlcl9kZXN0X2RlY2xfb3BuKGYs
IHJlZ3R5cGUsIHJlZ2lkLCBpKToKKyAgICBpZiBoZXhfY29tbW9uLmlzX3BhaXIocmVnaWQpOgor
ICAgICAgICBpZiBoZXhfY29tbW9uLmlzX2h2eF9yZWcocmVndHlwZSk6CisgICAgICAgICAgICBn
ZW5faGVscGVyX2Rlc3RfZGVjbF9leHRfcGFpcihmLCByZWd0eXBlLCByZWdpZCwgaSkKICAgICAg
ICAgZWxzZToKLSAgICAgICAgICAgIGdlbl9oZWxwZXJfZGVzdF9kZWNsX3BhaXIoZixyZWd0eXBl
LHJlZ2lkLGkpCi0gICAgZWxpZiAoaGV4X2NvbW1vbi5pc19zaW5nbGUocmVnaWQpKToKLSAgICAg
ICAgaWYgKGhleF9jb21tb24uaXNfaHZ4X3JlZyhyZWd0eXBlKSk6Ci0gICAgICAgICAgICBnZW5f
aGVscGVyX2Rlc3RfZGVjbF9leHQoZixyZWd0eXBlLHJlZ2lkKQorICAgICAgICAgICAgZ2VuX2hl
bHBlcl9kZXN0X2RlY2xfcGFpcihmLCByZWd0eXBlLCByZWdpZCwgaSkKKyAgICBlbGlmIGhleF9j
b21tb24uaXNfc2luZ2xlKHJlZ2lkKToKKyAgICAgICAgaWYgaGV4X2NvbW1vbi5pc19odnhfcmVn
KHJlZ3R5cGUpOgorICAgICAgICAgICAgZ2VuX2hlbHBlcl9kZXN0X2RlY2xfZXh0KGYsIHJlZ3R5
cGUsIHJlZ2lkKQogICAgICAgICBlbHNlOgotICAgICAgICAgICAgZ2VuX2hlbHBlcl9kZXN0X2Rl
Y2woZixyZWd0eXBlLHJlZ2lkLGkpCisgICAgICAgICAgICBnZW5faGVscGVyX2Rlc3RfZGVjbChm
LCByZWd0eXBlLCByZWdpZCwgaSkKICAgICBlbHNlOgotICAgICAgICBwcmludCgiQmFkIHJlZ2lz
dGVyIHBhcnNlOiAiLHJlZ3R5cGUscmVnaWQsdG9zcyxudW1yZWdzKQorICAgICAgICBwcmludCgi
QmFkIHJlZ2lzdGVyIHBhcnNlOiAiLCByZWd0eXBlLCByZWdpZCwgdG9zcywgbnVtcmVncykKKwog
Ci1kZWYgZ2VuX2hlbHBlcl9zcmNfdmFyX2V4dChmLHJlZ3R5cGUscmVnaWQpOgotICAgIGlmIChy
ZWd0eXBlID09ICJRIik6Ci0gICAgICAgZi53cml0ZShmIiAgICAvKiB7cmVndHlwZX17cmVnaWR9
ViBpcyAqKE1NUVJlZyAqKSIKLSAgICAgICAgICAgICAgIGYiKHtyZWd0eXBlfXtyZWdpZH1WX3Zv
aWQpICovXG4iKQorZGVmIGdlbl9oZWxwZXJfc3JjX3Zhcl9leHQoZiwgcmVndHlwZSwgcmVnaWQp
OgorICAgIGlmIHJlZ3R5cGUgPT0gIlEiOgorICAgICAgICBmLndyaXRlKAorICAgICAgICAgICAg
ZiIgICAgLyoge3JlZ3R5cGV9e3JlZ2lkfVYgaXMgKihNTVFSZWcgKikiIGYiKHtyZWd0eXBlfXty
ZWdpZH1WX3ZvaWQpICovXG4iCisgICAgICAgICkKICAgICBlbHNlOgotICAgICAgIGYud3JpdGUo
ZiIgICAgLyoge3JlZ3R5cGV9e3JlZ2lkfVYgaXMgKihNTVZlY3RvciAqKSIKLSAgICAgICAgICAg
ICAgIGYiKHtyZWd0eXBlfXtyZWdpZH1WX3ZvaWQpICovXG4iKQorICAgICAgICBmLndyaXRlKAor
ICAgICAgICAgICAgZiIgICAgLyoge3JlZ3R5cGV9e3JlZ2lkfVYgaXMgKihNTVZlY3RvciAqKSIK
KyAgICAgICAgICAgIGYiKHtyZWd0eXBlfXtyZWdpZH1WX3ZvaWQpICovXG4iCisgICAgICAgICkK
KworCitkZWYgZ2VuX2hlbHBlcl9zcmNfdmFyX2V4dF9wYWlyKGYsIHJlZ3R5cGUsIHJlZ2lkLCBy
ZWdubyk6CisgICAgZi53cml0ZSgKKyAgICAgICAgZiIgICAgLyoge3JlZ3R5cGV9e3JlZ2lkfVZ7
cmVnbm99IGlzICooTU1WZWN0b3JQYWlyICopIgorICAgICAgICBmIih7cmVndHlwZX17cmVnaWR9
VntyZWdub31fdm9pZCkgKi9cbiIKKyAgICApCiAKLWRlZiBnZW5faGVscGVyX3NyY192YXJfZXh0
X3BhaXIoZixyZWd0eXBlLHJlZ2lkLHJlZ25vKToKLSAgICBmLndyaXRlKGYiICAgIC8qIHtyZWd0
eXBlfXtyZWdpZH1We3JlZ25vfSBpcyAqKE1NVmVjdG9yUGFpciAqKSIKLSAgICAgICAgICAgIGYi
KHtyZWd0eXBlfXtyZWdpZH1We3JlZ25vfV92b2lkKSAqL1xuIikKIAotZGVmIGdlbl9oZWxwZXJf
cmV0dXJuKGYscmVndHlwZSxyZWdpZCxyZWdubyk6CitkZWYgZ2VuX2hlbHBlcl9yZXR1cm4oZiwg
cmVndHlwZSwgcmVnaWQsIHJlZ25vKToKICAgICBmLndyaXRlKGYiICAgIHJldHVybiB7cmVndHlw
ZX17cmVnaWR9VjtcbiIpCiAKLWRlZiBnZW5faGVscGVyX3JldHVybl9wYWlyKGYscmVndHlwZSxy
ZWdpZCxyZWdubyk6CisKK2RlZiBnZW5faGVscGVyX3JldHVybl9wYWlyKGYsIHJlZ3R5cGUsIHJl
Z2lkLCByZWdubyk6CiAgICAgZi53cml0ZShmIiAgICByZXR1cm4ge3JlZ3R5cGV9e3JlZ2lkfVY7
XG4iKQogCi1kZWYgZ2VuX2hlbHBlcl9kc3Rfd3JpdGVfZXh0KGYscmVndHlwZSxyZWdpZCk6CisK
K2RlZiBnZW5faGVscGVyX2RzdF93cml0ZV9leHQoZiwgcmVndHlwZSwgcmVnaWQpOgogICAgIHJl
dHVybgogCi1kZWYgZ2VuX2hlbHBlcl9kc3Rfd3JpdGVfZXh0X3BhaXIoZixyZWd0eXBlLHJlZ2lk
KToKKworZGVmIGdlbl9oZWxwZXJfZHN0X3dyaXRlX2V4dF9wYWlyKGYsIHJlZ3R5cGUsIHJlZ2lk
KToKICAgICByZXR1cm4KIAorCiBkZWYgZ2VuX2hlbHBlcl9yZXR1cm5fb3BuKGYsIHJlZ3R5cGUs
IHJlZ2lkLCBpKToKLSAgICBpZiAoaGV4X2NvbW1vbi5pc19wYWlyKHJlZ2lkKSk6Ci0gICAgICAg
IGlmIChoZXhfY29tbW9uLmlzX2h2eF9yZWcocmVndHlwZSkpOgotICAgICAgICAgICAgZ2VuX2hl
bHBlcl9kc3Rfd3JpdGVfZXh0X3BhaXIoZixyZWd0eXBlLHJlZ2lkKQorICAgIGlmIGhleF9jb21t
b24uaXNfcGFpcihyZWdpZCk6CisgICAgICAgIGlmIGhleF9jb21tb24uaXNfaHZ4X3JlZyhyZWd0
eXBlKToKKyAgICAgICAgICAgIGdlbl9oZWxwZXJfZHN0X3dyaXRlX2V4dF9wYWlyKGYsIHJlZ3R5
cGUsIHJlZ2lkKQogICAgICAgICBlbHNlOgotICAgICAgICAgICAgZ2VuX2hlbHBlcl9yZXR1cm5f
cGFpcihmLHJlZ3R5cGUscmVnaWQsaSkKLSAgICBlbGlmIChoZXhfY29tbW9uLmlzX3NpbmdsZShy
ZWdpZCkpOgotICAgICAgICBpZiAoaGV4X2NvbW1vbi5pc19odnhfcmVnKHJlZ3R5cGUpKToKLSAg
ICAgICAgICAgIGdlbl9oZWxwZXJfZHN0X3dyaXRlX2V4dChmLHJlZ3R5cGUscmVnaWQpCisgICAg
ICAgICAgICBnZW5faGVscGVyX3JldHVybl9wYWlyKGYsIHJlZ3R5cGUsIHJlZ2lkLCBpKQorICAg
IGVsaWYgaGV4X2NvbW1vbi5pc19zaW5nbGUocmVnaWQpOgorICAgICAgICBpZiBoZXhfY29tbW9u
LmlzX2h2eF9yZWcocmVndHlwZSk6CisgICAgICAgICAgICBnZW5faGVscGVyX2RzdF93cml0ZV9l
eHQoZiwgcmVndHlwZSwgcmVnaWQpCiAgICAgICAgIGVsc2U6Ci0gICAgICAgICAgICBnZW5faGVs
cGVyX3JldHVybihmLHJlZ3R5cGUscmVnaWQsaSkKKyAgICAgICAgICAgIGdlbl9oZWxwZXJfcmV0
dXJuKGYsIHJlZ3R5cGUsIHJlZ2lkLCBpKQogICAgIGVsc2U6Ci0gICAgICAgIHByaW50KCJCYWQg
cmVnaXN0ZXIgcGFyc2U6ICIscmVndHlwZSxyZWdpZCx0b3NzLG51bXJlZ3MpCisgICAgICAgIHBy
aW50KCJCYWQgcmVnaXN0ZXIgcGFyc2U6ICIsIHJlZ3R5cGUsIHJlZ2lkLCB0b3NzLCBudW1yZWdz
KQorCiAKICMjCiAjIyBHZW5lcmF0ZSB0aGUgVENHIGNvZGUgdG8gY2FsbCB0aGUgaGVscGVyCkBA
IC0xNjgsMTM4ICsyMDgsMTQ1IEBAIGRlZiBnZW5faGVscGVyX2Z1bmN0aW9uKGYsIHRhZywgdGFn
cmVncywgdGFnaW1tcyk6CiAgICAgbnVtcmVzdWx0cyA9IDAKICAgICBudW1zY2FsYXJyZXN1bHRz
ID0gMAogICAgIG51bXNjYWxhcnJlYWR3cml0ZSA9IDAKLSAgICBmb3IgcmVndHlwZSxyZWdpZCx0
b3NzLG51bXJlZ3MgaW4gcmVnczoKLSAgICAgICAgaWYgKGhleF9jb21tb24uaXNfd3JpdHRlbihy
ZWdpZCkpOgorICAgIGZvciByZWd0eXBlLCByZWdpZCwgdG9zcywgbnVtcmVncyBpbiByZWdzOgor
ICAgICAgICBpZiBoZXhfY29tbW9uLmlzX3dyaXR0ZW4ocmVnaWQpOgogICAgICAgICAgICAgbnVt
cmVzdWx0cyArPSAxCi0gICAgICAgICAgICBpZiAoaGV4X2NvbW1vbi5pc19zY2FsYXJfcmVnKHJl
Z3R5cGUpKToKKyAgICAgICAgICAgIGlmIGhleF9jb21tb24uaXNfc2NhbGFyX3JlZyhyZWd0eXBl
KToKICAgICAgICAgICAgICAgICBudW1zY2FsYXJyZXN1bHRzICs9IDEKLSAgICAgICAgaWYgKGhl
eF9jb21tb24uaXNfcmVhZHdyaXRlKHJlZ2lkKSk6Ci0gICAgICAgICAgICBpZiAoaGV4X2NvbW1v
bi5pc19zY2FsYXJfcmVnKHJlZ3R5cGUpKToKKyAgICAgICAgaWYgaGV4X2NvbW1vbi5pc19yZWFk
d3JpdGUocmVnaWQpOgorICAgICAgICAgICAgaWYgaGV4X2NvbW1vbi5pc19zY2FsYXJfcmVnKHJl
Z3R5cGUpOgogICAgICAgICAgICAgICAgIG51bXNjYWxhcnJlYWR3cml0ZSArPSAxCiAKLSAgICBp
ZiAobnVtc2NhbGFycmVzdWx0cyA+IDEpOgorICAgIGlmIG51bXNjYWxhcnJlc3VsdHMgPiAxOgog
ICAgICAgICAjIyBUaGUgaGVscGVyIGlzIGJvZ3VzIHdoZW4gdGhlcmUgaXMgbW9yZSB0aGFuIG9u
ZSByZXN1bHQKLSAgICAgICAgZi53cml0ZShmInZvaWQgSEVMUEVSKHt0YWd9KShDUFVIZXhhZ29u
U3RhdGUgKmVudikgIgotICAgICAgICAgICAgICAgIGYie3sgQk9HVVNfSEVMUEVSKHt0YWd9KTsg
fX1cbiIpCisgICAgICAgIGYud3JpdGUoCisgICAgICAgICAgICBmInZvaWQgSEVMUEVSKHt0YWd9
KShDUFVIZXhhZ29uU3RhdGUgKmVudikgIiBmInt7IEJPR1VTX0hFTFBFUih7dGFnfSk7IH19XG4i
CisgICAgICAgICkKICAgICBlbHNlOgogICAgICAgICAjIyBUaGUgcmV0dXJuIHR5cGUgb2YgdGhl
IGZ1bmN0aW9uIGlzIHRoZSB0eXBlIG9mIHRoZSBkZXN0aW5hdGlvbgogICAgICAgICAjIyByZWdp
c3RlciAoaWYgc2NhbGFyKQotICAgICAgICBpPTAKLSAgICAgICAgZm9yIHJlZ3R5cGUscmVnaWQs
dG9zcyxudW1yZWdzIGluIHJlZ3M6Ci0gICAgICAgICAgICBpZiAoaGV4X2NvbW1vbi5pc193cml0
dGVuKHJlZ2lkKSk6Ci0gICAgICAgICAgICAgICAgaWYgKGhleF9jb21tb24uaXNfcGFpcihyZWdp
ZCkpOgotICAgICAgICAgICAgICAgICAgICBpZiAoaGV4X2NvbW1vbi5pc19odnhfcmVnKHJlZ3R5
cGUpKToKKyAgICAgICAgaSA9IDAKKyAgICAgICAgZm9yIHJlZ3R5cGUsIHJlZ2lkLCB0b3NzLCBu
dW1yZWdzIGluIHJlZ3M6CisgICAgICAgICAgICBpZiBoZXhfY29tbW9uLmlzX3dyaXR0ZW4ocmVn
aWQpOgorICAgICAgICAgICAgICAgIGlmIGhleF9jb21tb24uaXNfcGFpcihyZWdpZCk6CisgICAg
ICAgICAgICAgICAgICAgIGlmIGhleF9jb21tb24uaXNfaHZ4X3JlZyhyZWd0eXBlKToKICAgICAg
ICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgICAgICAgIGVsc2U6Ci0g
ICAgICAgICAgICAgICAgICAgICAgICBnZW5faGVscGVyX3JldHVybl90eXBlX3BhaXIoZixyZWd0
eXBlLHJlZ2lkLGkpCi0gICAgICAgICAgICAgICAgZWxpZiAoaGV4X2NvbW1vbi5pc19zaW5nbGUo
cmVnaWQpKToKLSAgICAgICAgICAgICAgICAgICAgaWYgKGhleF9jb21tb24uaXNfaHZ4X3JlZyhy
ZWd0eXBlKSk6Ci0gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKKyAgICAgICAg
ICAgICAgICAgICAgICAgIGdlbl9oZWxwZXJfcmV0dXJuX3R5cGVfcGFpcihmLCByZWd0eXBlLCBy
ZWdpZCwgaSkKKyAgICAgICAgICAgICAgICBlbGlmIGhleF9jb21tb24uaXNfc2luZ2xlKHJlZ2lk
KToKKyAgICAgICAgICAgICAgICAgICAgaWYgaGV4X2NvbW1vbi5pc19odnhfcmVnKHJlZ3R5cGUp
OgorICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgICAgICAg
ZWxzZToKLSAgICAgICAgICAgICAgICAgICAgICAgIGdlbl9oZWxwZXJfcmV0dXJuX3R5cGUoZixy
ZWd0eXBlLHJlZ2lkLGkpCisgICAgICAgICAgICAgICAgICAgICAgICBnZW5faGVscGVyX3JldHVy
bl90eXBlKGYsIHJlZ3R5cGUsIHJlZ2lkLCBpKQogICAgICAgICAgICAgICAgIGVsc2U6Ci0gICAg
ICAgICAgICAgICAgICAgIHByaW50KCJCYWQgcmVnaXN0ZXIgcGFyc2U6ICIscmVndHlwZSxyZWdp
ZCx0b3NzLG51bXJlZ3MpCisgICAgICAgICAgICAgICAgICAgIHByaW50KCJCYWQgcmVnaXN0ZXIg
cGFyc2U6ICIsIHJlZ3R5cGUsIHJlZ2lkLCB0b3NzLCBudW1yZWdzKQogICAgICAgICAgICAgaSAr
PSAxCiAKLSAgICAgICAgaWYgKG51bXNjYWxhcnJlc3VsdHMgPT0gMCk6CisgICAgICAgIGlmIG51
bXNjYWxhcnJlc3VsdHMgPT0gMDoKICAgICAgICAgICAgIGYud3JpdGUoInZvaWQiKQogICAgICAg
ICBmLndyaXRlKGYiIEhFTFBFUih7dGFnfSkoQ1BVSGV4YWdvblN0YXRlICplbnYiKQogCiAgICAg
ICAgICMjIEFyZ3VtZW50cyBpbmNsdWRlIHRoZSB2ZWN0b3IgZGVzdGluYXRpb24gb3BlcmFuZHMK
ICAgICAgICAgaSA9IDEKLSAgICAgICAgZm9yIHJlZ3R5cGUscmVnaWQsdG9zcyxudW1yZWdzIGlu
IHJlZ3M6Ci0gICAgICAgICAgICBpZiAoaGV4X2NvbW1vbi5pc193cml0dGVuKHJlZ2lkKSk6Ci0g
ICAgICAgICAgICAgICAgaWYgKGhleF9jb21tb24uaXNfcGFpcihyZWdpZCkpOgotICAgICAgICAg
ICAgICAgICAgICBpZiAoaGV4X2NvbW1vbi5pc19odnhfcmVnKHJlZ3R5cGUpKToKLSAgICAgICAg
ICAgICAgICAgICAgICAgIGdlbl9oZWxwZXJfYXJnX2V4dF9wYWlyKGYscmVndHlwZSxyZWdpZCxp
KQorICAgICAgICBmb3IgcmVndHlwZSwgcmVnaWQsIHRvc3MsIG51bXJlZ3MgaW4gcmVnczoKKyAg
ICAgICAgICAgIGlmIGhleF9jb21tb24uaXNfd3JpdHRlbihyZWdpZCk6CisgICAgICAgICAgICAg
ICAgaWYgaGV4X2NvbW1vbi5pc19wYWlyKHJlZ2lkKToKKyAgICAgICAgICAgICAgICAgICAgaWYg
aGV4X2NvbW1vbi5pc19odnhfcmVnKHJlZ3R5cGUpOgorICAgICAgICAgICAgICAgICAgICAgICAg
Z2VuX2hlbHBlcl9hcmdfZXh0X3BhaXIoZiwgcmVndHlwZSwgcmVnaWQsIGkpCiAgICAgICAgICAg
ICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQotICAgICAg
ICAgICAgICAgIGVsaWYgKGhleF9jb21tb24uaXNfc2luZ2xlKHJlZ2lkKSk6Ci0gICAgICAgICAg
ICAgICAgICAgIGlmIChoZXhfY29tbW9uLmlzX2h2eF9yZWcocmVndHlwZSkpOgotICAgICAgICAg
ICAgICAgICAgICAgICAgZ2VuX2hlbHBlcl9hcmdfZXh0KGYscmVndHlwZSxyZWdpZCxpKQorICAg
ICAgICAgICAgICAgIGVsaWYgaGV4X2NvbW1vbi5pc19zaW5nbGUocmVnaWQpOgorICAgICAgICAg
ICAgICAgICAgICBpZiBoZXhfY29tbW9uLmlzX2h2eF9yZWcocmVndHlwZSk6CisgICAgICAgICAg
ICAgICAgICAgICAgICBnZW5faGVscGVyX2FyZ19leHQoZiwgcmVndHlwZSwgcmVnaWQsIGkpCiAg
ICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAjIFRoaXMg
aXMgdGhlIHJldHVybiB2YWx1ZSBvZiB0aGUgZnVuY3Rpb24KICAgICAgICAgICAgICAgICAgICAg
ICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgICAgZWxzZToKLSAgICAgICAgICAgICAgICAgICAg
cHJpbnQoIkJhZCByZWdpc3RlciBwYXJzZTogIixyZWd0eXBlLHJlZ2lkLHRvc3MsbnVtcmVncykK
KyAgICAgICAgICAgICAgICAgICAgcHJpbnQoIkJhZCByZWdpc3RlciBwYXJzZTogIiwgcmVndHlw
ZSwgcmVnaWQsIHRvc3MsIG51bXJlZ3MpCiAgICAgICAgICAgICAgICAgaSArPSAxCiAKICAgICAg
ICAgIyMgRm9yIGNvbmRpdGlvbmFsIGluc3RydWN0aW9ucywgd2UgcGFzcyBpbiB0aGUgZGVzdGlu
YXRpb24gcmVnaXN0ZXIKLSAgICAgICAgaWYgJ0FfQ09OREVYRUMnIGluIGhleF9jb21tb24uYXR0
cmliZGljdFt0YWddOgorICAgICAgICBpZiAiQV9DT05ERVhFQyIgaW4gaGV4X2NvbW1vbi5hdHRy
aWJkaWN0W3RhZ106CiAgICAgICAgICAgICBmb3IgcmVndHlwZSwgcmVnaWQsIHRvc3MsIG51bXJl
Z3MgaW4gcmVnczoKLSAgICAgICAgICAgICAgICBpZiAoaGV4X2NvbW1vbi5pc193cml0ZW9ubHko
cmVnaWQpIGFuZAotICAgICAgICAgICAgICAgICAgICBub3QgaGV4X2NvbW1vbi5pc19odnhfcmVn
KHJlZ3R5cGUpKToKKyAgICAgICAgICAgICAgICBpZiBoZXhfY29tbW9uLmlzX3dyaXRlb25seShy
ZWdpZCkgYW5kIG5vdCBoZXhfY29tbW9uLmlzX2h2eF9yZWcoCisgICAgICAgICAgICAgICAgICAg
IHJlZ3R5cGUKKyAgICAgICAgICAgICAgICApOgogICAgICAgICAgICAgICAgICAgICBnZW5faGVs
cGVyX2FyZ19vcG4oZiwgcmVndHlwZSwgcmVnaWQsIGksIHRhZykKICAgICAgICAgICAgICAgICAg
ICAgaSArPSAxCiAKICAgICAgICAgIyMgQXJndW1lbnRzIHRvIHRoZSBoZWxwZXIgZnVuY3Rpb24g
YXJlIHRoZSBzb3VyY2UgcmVncyBhbmQgaW1tZWRpYXRlcwotICAgICAgICBmb3IgcmVndHlwZSxy
ZWdpZCx0b3NzLG51bXJlZ3MgaW4gcmVnczoKLSAgICAgICAgICAgIGlmIChoZXhfY29tbW9uLmlz
X3JlYWQocmVnaWQpKToKLSAgICAgICAgICAgICAgICBpZiAoaGV4X2NvbW1vbi5pc19odnhfcmVn
KHJlZ3R5cGUpIGFuZAotICAgICAgICAgICAgICAgICAgICBoZXhfY29tbW9uLmlzX3JlYWR3cml0
ZShyZWdpZCkpOgorICAgICAgICBmb3IgcmVndHlwZSwgcmVnaWQsIHRvc3MsIG51bXJlZ3MgaW4g
cmVnczoKKyAgICAgICAgICAgIGlmIGhleF9jb21tb24uaXNfcmVhZChyZWdpZCk6CisgICAgICAg
ICAgICAgICAgaWYgaGV4X2NvbW1vbi5pc19odnhfcmVnKHJlZ3R5cGUpIGFuZCBoZXhfY29tbW9u
LmlzX3JlYWR3cml0ZShyZWdpZCk6CiAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCi0gICAg
ICAgICAgICAgICAgZ2VuX2hlbHBlcl9hcmdfb3BuKGYscmVndHlwZSxyZWdpZCxpLHRhZykKKyAg
ICAgICAgICAgICAgICBnZW5faGVscGVyX2FyZ19vcG4oZiwgcmVndHlwZSwgcmVnaWQsIGksIHRh
ZykKICAgICAgICAgICAgICAgICBpICs9IDEKLSAgICAgICAgZm9yIGltbWxldHQsYml0cyxpbW1z
aGlmdCBpbiBpbW1zOgotICAgICAgICAgICAgZ2VuX2hlbHBlcl9hcmdfaW1tKGYsaW1tbGV0dCkK
KyAgICAgICAgZm9yIGltbWxldHQsIGJpdHMsIGltbXNoaWZ0IGluIGltbXM6CisgICAgICAgICAg
ICBnZW5faGVscGVyX2FyZ19pbW0oZiwgaW1tbGV0dCkKICAgICAgICAgICAgIGkgKz0gMQogCi0g
ICAgICAgIGlmIChoZXhfY29tbW9uLm5lZWRfcGt0X2hhc19tdWx0aV9jb2YodGFnKSk6CisgICAg
ICAgIGlmIGhleF9jb21tb24ubmVlZF9wa3RfaGFzX211bHRpX2NvZih0YWcpOgogICAgICAgICAg
ICAgZi53cml0ZSgiLCB1aW50MzJfdCBwa3RfaGFzX211bHRpX2NvZiIpCiAKICAgICAgICAgaWYg
aGV4X2NvbW1vbi5uZWVkX1BDKHRhZyk6Ci0gICAgICAgICAgICBpZiBpID4gMDogZi53cml0ZSgi
LCAiKQorICAgICAgICAgICAgaWYgaSA+IDA6CisgICAgICAgICAgICAgICAgZi53cml0ZSgiLCAi
KQogICAgICAgICAgICAgZi53cml0ZSgidGFyZ2V0X3Vsb25nIFBDIikKICAgICAgICAgICAgIGkg
Kz0gMQogICAgICAgICBpZiBoZXhfY29tbW9uLmhlbHBlcl9uZWVkc19uZXh0X1BDKHRhZyk6Ci0g
ICAgICAgICAgICBpZiBpID4gMDogZi53cml0ZSgiLCAiKQorICAgICAgICAgICAgaWYgaSA+IDA6
CisgICAgICAgICAgICAgICAgZi53cml0ZSgiLCAiKQogICAgICAgICAgICAgZi53cml0ZSgidGFy
Z2V0X3Vsb25nIG5leHRfUEMiKQogICAgICAgICAgICAgaSArPSAxCiAgICAgICAgIGlmIGhleF9j
b21tb24ubmVlZF9zbG90KHRhZyk6Ci0gICAgICAgICAgICBpZiBpID4gMDogZi53cml0ZSgiLCAi
KQorICAgICAgICAgICAgaWYgaSA+IDA6CisgICAgICAgICAgICAgICAgZi53cml0ZSgiLCAiKQog
ICAgICAgICAgICAgZi53cml0ZSgidWludDMyX3Qgc2xvdCIpCiAgICAgICAgICAgICBpICs9IDEK
ICAgICAgICAgaWYgaGV4X2NvbW1vbi5uZWVkX3BhcnQxKHRhZyk6Ci0gICAgICAgICAgICBpZiBp
ID4gMDogZi53cml0ZSgiLCAiKQorICAgICAgICAgICAgaWYgaSA+IDA6CisgICAgICAgICAgICAg
ICAgZi53cml0ZSgiLCAiKQogICAgICAgICAgICAgZi53cml0ZSgidWludDMyX3QgcGFydDEiKQog
ICAgICAgICBmLndyaXRlKCIpXG57XG4iKQotICAgICAgICBpZiAobm90IGhleF9jb21tb24ubmVl
ZF9zbG90KHRhZykpOgotICAgICAgICAgICAgZi53cml0ZSgiICAgIHVpbnQzMl90IHNsb3QgX19h
dHRyaWJ1dGVfXygodW51c2VkKSkgPSA0O1xuIiApCi0gICAgICAgIGlmIGhleF9jb21tb24ubmVl
ZF9lYSh0YWcpOiBnZW5fZGVjbF9lYShmKQorICAgICAgICBpZiBub3QgaGV4X2NvbW1vbi5uZWVk
X3Nsb3QodGFnKToKKyAgICAgICAgICAgIGYud3JpdGUoIiAgICB1aW50MzJfdCBzbG90IF9fYXR0
cmlidXRlX18oKHVudXNlZCkpID0gNDtcbiIpCisgICAgICAgIGlmIGhleF9jb21tb24ubmVlZF9l
YSh0YWcpOgorICAgICAgICAgICAgZ2VuX2RlY2xfZWEoZikKICAgICAgICAgIyMgRGVjbGFyZSB0
aGUgcmV0dXJuIHZhcmlhYmxlCi0gICAgICAgIGk9MAotICAgICAgICBpZiAnQV9DT05ERVhFQycg
bm90IGluIGhleF9jb21tb24uYXR0cmliZGljdFt0YWddOgotICAgICAgICAgICAgZm9yIHJlZ3R5
cGUscmVnaWQsdG9zcyxudW1yZWdzIGluIHJlZ3M6Ci0gICAgICAgICAgICAgICAgaWYgKGhleF9j
b21tb24uaXNfd3JpdGVvbmx5KHJlZ2lkKSk6Ci0gICAgICAgICAgICAgICAgICAgIGdlbl9oZWxw
ZXJfZGVzdF9kZWNsX29wbihmLHJlZ3R5cGUscmVnaWQsaSkKKyAgICAgICAgaSA9IDAKKyAgICAg
ICAgaWYgIkFfQ09OREVYRUMiIG5vdCBpbiBoZXhfY29tbW9uLmF0dHJpYmRpY3RbdGFnXToKKyAg
ICAgICAgICAgIGZvciByZWd0eXBlLCByZWdpZCwgdG9zcywgbnVtcmVncyBpbiByZWdzOgorICAg
ICAgICAgICAgICAgIGlmIGhleF9jb21tb24uaXNfd3JpdGVvbmx5KHJlZ2lkKToKKyAgICAgICAg
ICAgICAgICAgICAgZ2VuX2hlbHBlcl9kZXN0X2RlY2xfb3BuKGYsIHJlZ3R5cGUsIHJlZ2lkLCBp
KQogICAgICAgICAgICAgICAgIGkgKz0gMQogCi0gICAgICAgIGZvciByZWd0eXBlLHJlZ2lkLHRv
c3MsbnVtcmVncyBpbiByZWdzOgotICAgICAgICAgICAgaWYgKGhleF9jb21tb24uaXNfcmVhZChy
ZWdpZCkpOgotICAgICAgICAgICAgICAgIGlmIChoZXhfY29tbW9uLmlzX3BhaXIocmVnaWQpKToK
LSAgICAgICAgICAgICAgICAgICAgaWYgKGhleF9jb21tb24uaXNfaHZ4X3JlZyhyZWd0eXBlKSk6
Ci0gICAgICAgICAgICAgICAgICAgICAgICBnZW5faGVscGVyX3NyY192YXJfZXh0X3BhaXIoZixy
ZWd0eXBlLHJlZ2lkLGkpCi0gICAgICAgICAgICAgICAgZWxpZiAoaGV4X2NvbW1vbi5pc19zaW5n
bGUocmVnaWQpKToKLSAgICAgICAgICAgICAgICAgICAgaWYgKGhleF9jb21tb24uaXNfaHZ4X3Jl
ZyhyZWd0eXBlKSk6Ci0gICAgICAgICAgICAgICAgICAgICAgICBnZW5faGVscGVyX3NyY192YXJf
ZXh0KGYscmVndHlwZSxyZWdpZCkKKyAgICAgICAgZm9yIHJlZ3R5cGUsIHJlZ2lkLCB0b3NzLCBu
dW1yZWdzIGluIHJlZ3M6CisgICAgICAgICAgICBpZiBoZXhfY29tbW9uLmlzX3JlYWQocmVnaWQp
OgorICAgICAgICAgICAgICAgIGlmIGhleF9jb21tb24uaXNfcGFpcihyZWdpZCk6CisgICAgICAg
ICAgICAgICAgICAgIGlmIGhleF9jb21tb24uaXNfaHZ4X3JlZyhyZWd0eXBlKToKKyAgICAgICAg
ICAgICAgICAgICAgICAgIGdlbl9oZWxwZXJfc3JjX3Zhcl9leHRfcGFpcihmLCByZWd0eXBlLCBy
ZWdpZCwgaSkKKyAgICAgICAgICAgICAgICBlbGlmIGhleF9jb21tb24uaXNfc2luZ2xlKHJlZ2lk
KToKKyAgICAgICAgICAgICAgICAgICAgaWYgaGV4X2NvbW1vbi5pc19odnhfcmVnKHJlZ3R5cGUp
OgorICAgICAgICAgICAgICAgICAgICAgICAgZ2VuX2hlbHBlcl9zcmNfdmFyX2V4dChmLCByZWd0
eXBlLCByZWdpZCkKICAgICAgICAgICAgICAgICBlbHNlOgotICAgICAgICAgICAgICAgICAgICBw
cmludCgiQmFkIHJlZ2lzdGVyIHBhcnNlOiAiLHJlZ3R5cGUscmVnaWQsdG9zcyxudW1yZWdzKQor
ICAgICAgICAgICAgICAgICAgICBwcmludCgiQmFkIHJlZ2lzdGVyIHBhcnNlOiAiLCByZWd0eXBl
LCByZWdpZCwgdG9zcywgbnVtcmVncykKIAotICAgICAgICBpZiAnQV9GUE9QJyBpbiBoZXhfY29t
bW9uLmF0dHJpYmRpY3RbdGFnXToKLSAgICAgICAgICAgIGYud3JpdGUoJyAgICBhcmNoX2Zwb3Bf
c3RhcnQoZW52KTtcbicpOworICAgICAgICBpZiAiQV9GUE9QIiBpbiBoZXhfY29tbW9uLmF0dHJp
YmRpY3RbdGFnXToKKyAgICAgICAgICAgIGYud3JpdGUoIiAgICBhcmNoX2Zwb3Bfc3RhcnQoZW52
KTtcbiIpCiAKICAgICAgICAgZi53cml0ZShmIiAgICB7aGV4X2NvbW1vbi5zZW1kaWN0W3RhZ119
XG4iKQogCi0gICAgICAgIGlmICdBX0ZQT1AnIGluIGhleF9jb21tb24uYXR0cmliZGljdFt0YWdd
OgotICAgICAgICAgICAgZi53cml0ZSgnICAgIGFyY2hfZnBvcF9lbmQoZW52KTtcbicpOworICAg
ICAgICBpZiAiQV9GUE9QIiBpbiBoZXhfY29tbW9uLmF0dHJpYmRpY3RbdGFnXToKKyAgICAgICAg
ICAgIGYud3JpdGUoIiAgICBhcmNoX2Zwb3BfZW5kKGVudik7XG4iKQogCiAgICAgICAgICMjIFNh
dmUvcmV0dXJuIHRoZSByZXR1cm4gdmFyaWFibGUKLSAgICAgICAgZm9yIHJlZ3R5cGUscmVnaWQs
dG9zcyxudW1yZWdzIGluIHJlZ3M6Ci0gICAgICAgICAgICBpZiAoaGV4X2NvbW1vbi5pc193cml0
dGVuKHJlZ2lkKSk6CisgICAgICAgIGZvciByZWd0eXBlLCByZWdpZCwgdG9zcywgbnVtcmVncyBp
biByZWdzOgorICAgICAgICAgICAgaWYgaGV4X2NvbW1vbi5pc193cml0dGVuKHJlZ2lkKToKICAg
ICAgICAgICAgICAgICBnZW5faGVscGVyX3JldHVybl9vcG4oZiwgcmVndHlwZSwgcmVnaWQsIGkp
CiAgICAgICAgIGYud3JpdGUoIn1cblxuIikKICAgICAgICAgIyMgRW5kIG9mIHRoZSBoZWxwZXIg
ZGVmaW5pdGlvbgogCisKIGRlZiBtYWluKCk6CiAgICAgaGV4X2NvbW1vbi5yZWFkX3NlbWFudGlj
c19maWxlKHN5cy5hcmd2WzFdKQogICAgIGhleF9jb21tb24ucmVhZF9hdHRyaWJzX2ZpbGUoc3lz
LmFyZ3ZbMl0pCkBAIC0zMjIsMjcgKzM2OSwyOCBAQCBkZWYgbWFpbigpOgogICAgIHRhZ2ltbXMg
PSBoZXhfY29tbW9uLmdldF90YWdpbW1zKCkKIAogICAgIG91dHB1dF9maWxlID0gc3lzLmFyZ3Zb
LTFdCi0gICAgd2l0aCBvcGVuKG91dHB1dF9maWxlLCAndycpIGFzIGY6CisgICAgd2l0aCBvcGVu
KG91dHB1dF9maWxlLCAidyIpIGFzIGY6CiAgICAgICAgIGZvciB0YWcgaW4gaGV4X2NvbW1vbi50
YWdzOgogICAgICAgICAgICAgIyMgU2tpcCB0aGUgcHJpdiBpbnN0cnVjdGlvbnMKLSAgICAgICAg
ICAgIGlmICggIkFfUFJJViIgaW4gaGV4X2NvbW1vbi5hdHRyaWJkaWN0W3RhZ10gKSA6CisgICAg
ICAgICAgICBpZiAiQV9QUklWIiBpbiBoZXhfY29tbW9uLmF0dHJpYmRpY3RbdGFnXToKICAgICAg
ICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgIyMgU2tpcCB0aGUgZ3Vlc3QgaW5zdHJ1
Y3Rpb25zCi0gICAgICAgICAgICBpZiAoICJBX0dVRVNUIiBpbiBoZXhfY29tbW9uLmF0dHJpYmRp
Y3RbdGFnXSApIDoKKyAgICAgICAgICAgIGlmICJBX0dVRVNUIiBpbiBoZXhfY29tbW9uLmF0dHJp
YmRpY3RbdGFnXToKICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgIyMgU2tp
cCB0aGUgZGlhZyBpbnN0cnVjdGlvbnMKLSAgICAgICAgICAgIGlmICggdGFnID09ICJZNl9kaWFn
IiApIDoKKyAgICAgICAgICAgIGlmIHRhZyA9PSAiWTZfZGlhZyI6CiAgICAgICAgICAgICAgICAg
Y29udGludWUKLSAgICAgICAgICAgIGlmICggdGFnID09ICJZNl9kaWFnMCIgKSA6CisgICAgICAg
ICAgICBpZiB0YWcgPT0gIlk2X2RpYWcwIjoKICAgICAgICAgICAgICAgICBjb250aW51ZQotICAg
ICAgICAgICAgaWYgKCB0YWcgPT0gIlk2X2RpYWcxIiApIDoKKyAgICAgICAgICAgIGlmIHRhZyA9
PSAiWTZfZGlhZzEiOgogICAgICAgICAgICAgICAgIGNvbnRpbnVlCi0gICAgICAgICAgICBpZiAo
IGhleF9jb21tb24uc2tpcF9xZW11X2hlbHBlcih0YWcpICk6CisgICAgICAgICAgICBpZiBoZXhf
Y29tbW9uLnNraXBfcWVtdV9oZWxwZXIodGFnKToKICAgICAgICAgICAgICAgICBjb250aW51ZQot
ICAgICAgICAgICAgaWYgKCBoZXhfY29tbW9uLmlzX2lkZWZfcGFyc2VyX2VuYWJsZWQodGFnKSAp
OgorICAgICAgICAgICAgaWYgaGV4X2NvbW1vbi5pc19pZGVmX3BhcnNlcl9lbmFibGVkKHRhZyk6
CiAgICAgICAgICAgICAgICAgY29udGludWUKIAogICAgICAgICAgICAgZ2VuX2hlbHBlcl9mdW5j
dGlvbihmLCB0YWcsIHRhZ3JlZ3MsIHRhZ2ltbXMpCiAKKwogaWYgX19uYW1lX18gPT0gIl9fbWFp
bl9fIjoKICAgICBtYWluKCkKZGlmZiAtLWdpdCBhL3RhcmdldC9oZXhhZ29uL2dlbl9oZWxwZXJf
cHJvdG9zLnB5IGIvdGFyZ2V0L2hleGFnb24vZ2VuX2hlbHBlcl9wcm90b3MucHkKaW5kZXggZDc5
NWYzMjA0Ny4uMTg3Y2Q2ZTA0ZSAxMDA3NTUKLS0tIGEvdGFyZ2V0L2hleGFnb24vZ2VuX2hlbHBl
cl9wcm90b3MucHkKKysrIGIvdGFyZ2V0L2hleGFnb24vZ2VuX2hlbHBlcl9wcm90b3MucHkKQEAg
LTI2LDMyICsyNiwzNCBAQAogIyMgSGVscGVycyBmb3IgZ2VuX2hlbHBlcl9wcm90b3R5cGUKICMj
CiBkZWZfaGVscGVyX3R5cGVzID0gewotICAgICdOJyA6ICdzMzInLAotICAgICdPJyA6ICdzMzIn
LAotICAgICdQJyA6ICdzMzInLAotICAgICdNJyA6ICdzMzInLAotICAgICdDJyA6ICdzMzInLAot
ICAgICdSJyA6ICdzMzInLAotICAgICdWJyA6ICdwdHInLAotICAgICdRJyA6ICdwdHInCisgICAg
Ik4iOiAiczMyIiwKKyAgICAiTyI6ICJzMzIiLAorICAgICJQIjogInMzMiIsCisgICAgIk0iOiAi
czMyIiwKKyAgICAiQyI6ICJzMzIiLAorICAgICJSIjogInMzMiIsCisgICAgIlYiOiAicHRyIiwK
KyAgICAiUSI6ICJwdHIiLAogfQogCiBkZWZfaGVscGVyX3R5cGVzX3BhaXIgPSB7Ci0gICAgJ1In
IDogJ3M2NCcsCi0gICAgJ0MnIDogJ3M2NCcsCi0gICAgJ1MnIDogJ3M2NCcsCi0gICAgJ0cnIDog
J3M2NCcsCi0gICAgJ1YnIDogJ3B0cicsCi0gICAgJ1EnIDogJ3B0cicKKyAgICAiUiI6ICJzNjQi
LAorICAgICJDIjogInM2NCIsCisgICAgIlMiOiAiczY0IiwKKyAgICAiRyI6ICJzNjQiLAorICAg
ICJWIjogInB0ciIsCisgICAgIlEiOiAicHRyIiwKIH0KIAorCiBkZWYgZ2VuX2RlZl9oZWxwZXJf
b3BuKGYsIHRhZywgcmVndHlwZSwgcmVnaWQsIHRvc3MsIG51bXJlZ3MsIGkpOgotICAgIGlmICho
ZXhfY29tbW9uLmlzX3BhaXIocmVnaWQpKToKKyAgICBpZiBoZXhfY29tbW9uLmlzX3BhaXIocmVn
aWQpOgogICAgICAgICBmLndyaXRlKGYiLCB7ZGVmX2hlbHBlcl90eXBlc19wYWlyW3JlZ3R5cGVd
fSIpCi0gICAgZWxpZiAoaGV4X2NvbW1vbi5pc19zaW5nbGUocmVnaWQpKToKKyAgICBlbGlmIGhl
eF9jb21tb24uaXNfc2luZ2xlKHJlZ2lkKToKICAgICAgICAgZi53cml0ZShmIiwge2RlZl9oZWxw
ZXJfdHlwZXNbcmVndHlwZV19IikKICAgICBlbHNlOgotICAgICAgICBwcmludCgiQmFkIHJlZ2lz
dGVyIHBhcnNlOiAiLHJlZ3R5cGUscmVnaWQsdG9zcyxudW1yZWdzKQorICAgICAgICBwcmludCgi
QmFkIHJlZ2lzdGVyIHBhcnNlOiAiLCByZWd0eXBlLCByZWdpZCwgdG9zcywgbnVtcmVncykKKwog
CiAjIwogIyMgR2VuZXJhdGUgdGhlIERFRl9IRUxQRVIgcHJvdG90eXBlIGZvciBhbiBpbnN0cnVj
dGlvbgpAQCAtNjYsOTAgKzY4LDEwOCBAQCBkZWYgZ2VuX2hlbHBlcl9wcm90b3R5cGUoZiwgdGFn
LCB0YWdyZWdzLCB0YWdpbW1zKToKICAgICBudW1yZXN1bHRzID0gMAogICAgIG51bXNjYWxhcnJl
c3VsdHMgPSAwCiAgICAgbnVtc2NhbGFycmVhZHdyaXRlID0gMAotICAgIGZvciByZWd0eXBlLHJl
Z2lkLHRvc3MsbnVtcmVncyBpbiByZWdzOgotICAgICAgICBpZiAoaGV4X2NvbW1vbi5pc193cml0
dGVuKHJlZ2lkKSk6CisgICAgZm9yIHJlZ3R5cGUsIHJlZ2lkLCB0b3NzLCBudW1yZWdzIGluIHJl
Z3M6CisgICAgICAgIGlmIGhleF9jb21tb24uaXNfd3JpdHRlbihyZWdpZCk6CiAgICAgICAgICAg
ICBudW1yZXN1bHRzICs9IDEKLSAgICAgICAgICAgIGlmIChoZXhfY29tbW9uLmlzX3NjYWxhcl9y
ZWcocmVndHlwZSkpOgorICAgICAgICAgICAgaWYgaGV4X2NvbW1vbi5pc19zY2FsYXJfcmVnKHJl
Z3R5cGUpOgogICAgICAgICAgICAgICAgIG51bXNjYWxhcnJlc3VsdHMgKz0gMQotICAgICAgICBp
ZiAoaGV4X2NvbW1vbi5pc19yZWFkd3JpdGUocmVnaWQpKToKLSAgICAgICAgICAgIGlmIChoZXhf
Y29tbW9uLmlzX3NjYWxhcl9yZWcocmVndHlwZSkpOgorICAgICAgICBpZiBoZXhfY29tbW9uLmlz
X3JlYWR3cml0ZShyZWdpZCk6CisgICAgICAgICAgICBpZiBoZXhfY29tbW9uLmlzX3NjYWxhcl9y
ZWcocmVndHlwZSk6CiAgICAgICAgICAgICAgICAgbnVtc2NhbGFycmVhZHdyaXRlICs9IDEKIAot
ICAgIGlmIChudW1zY2FsYXJyZXN1bHRzID4gMSk6CisgICAgaWYgbnVtc2NhbGFycmVzdWx0cyA+
IDE6CiAgICAgICAgICMjIFRoZSBoZWxwZXIgaXMgYm9ndXMgd2hlbiB0aGVyZSBpcyBtb3JlIHRo
YW4gb25lIHJlc3VsdAotICAgICAgICBmLndyaXRlKGYnREVGX0hFTFBFUl8xKHt0YWd9LCB2b2lk
LCBlbnYpXG4nKQorICAgICAgICBmLndyaXRlKGYiREVGX0hFTFBFUl8xKHt0YWd9LCB2b2lkLCBl
bnYpXG4iKQogICAgIGVsc2U6CiAgICAgICAgICMjIEZpZ3VyZSBvdXQgaG93IG1hbnkgYXJndW1l
bnRzIHRoZSBoZWxwZXIgd2lsbCB0YWtlCi0gICAgICAgIGlmIChudW1zY2FsYXJyZXN1bHRzID09
IDApOgotICAgICAgICAgICAgZGVmX2hlbHBlcl9zaXplID0gbGVuKHJlZ3MpK2xlbihpbW1zKStu
dW1zY2FsYXJyZWFkd3JpdGUrMQotICAgICAgICAgICAgaWYgaGV4X2NvbW1vbi5uZWVkX3BrdF9o
YXNfbXVsdGlfY29mKHRhZyk6IGRlZl9oZWxwZXJfc2l6ZSArPSAxCi0gICAgICAgICAgICBpZiBo
ZXhfY29tbW9uLm5lZWRfcGFydDEodGFnKTogZGVmX2hlbHBlcl9zaXplICs9IDEKLSAgICAgICAg
ICAgIGlmIGhleF9jb21tb24ubmVlZF9zbG90KHRhZyk6IGRlZl9oZWxwZXJfc2l6ZSArPSAxCi0g
ICAgICAgICAgICBpZiBoZXhfY29tbW9uLm5lZWRfUEModGFnKTogZGVmX2hlbHBlcl9zaXplICs9
IDEKLSAgICAgICAgICAgIGlmIGhleF9jb21tb24uaGVscGVyX25lZWRzX25leHRfUEModGFnKTog
ZGVmX2hlbHBlcl9zaXplICs9IDEKLSAgICAgICAgICAgIGlmIGhleF9jb21tb24ubmVlZF9jb25k
ZXhlY19yZWcodGFnLCByZWdzKTogZGVmX2hlbHBlcl9zaXplICs9IDEKLSAgICAgICAgICAgIGYu
d3JpdGUoZidERUZfSEVMUEVSX3tkZWZfaGVscGVyX3NpemV9KHt0YWd9JykKKyAgICAgICAgaWYg
bnVtc2NhbGFycmVzdWx0cyA9PSAwOgorICAgICAgICAgICAgZGVmX2hlbHBlcl9zaXplID0gbGVu
KHJlZ3MpICsgbGVuKGltbXMpICsgbnVtc2NhbGFycmVhZHdyaXRlICsgMQorICAgICAgICAgICAg
aWYgaGV4X2NvbW1vbi5uZWVkX3BrdF9oYXNfbXVsdGlfY29mKHRhZyk6CisgICAgICAgICAgICAg
ICAgZGVmX2hlbHBlcl9zaXplICs9IDEKKyAgICAgICAgICAgIGlmIGhleF9jb21tb24ubmVlZF9w
YXJ0MSh0YWcpOgorICAgICAgICAgICAgICAgIGRlZl9oZWxwZXJfc2l6ZSArPSAxCisgICAgICAg
ICAgICBpZiBoZXhfY29tbW9uLm5lZWRfc2xvdCh0YWcpOgorICAgICAgICAgICAgICAgIGRlZl9o
ZWxwZXJfc2l6ZSArPSAxCisgICAgICAgICAgICBpZiBoZXhfY29tbW9uLm5lZWRfUEModGFnKToK
KyAgICAgICAgICAgICAgICBkZWZfaGVscGVyX3NpemUgKz0gMQorICAgICAgICAgICAgaWYgaGV4
X2NvbW1vbi5oZWxwZXJfbmVlZHNfbmV4dF9QQyh0YWcpOgorICAgICAgICAgICAgICAgIGRlZl9o
ZWxwZXJfc2l6ZSArPSAxCisgICAgICAgICAgICBpZiBoZXhfY29tbW9uLm5lZWRfY29uZGV4ZWNf
cmVnKHRhZywgcmVncyk6CisgICAgICAgICAgICAgICAgZGVmX2hlbHBlcl9zaXplICs9IDEKKyAg
ICAgICAgICAgIGYud3JpdGUoZiJERUZfSEVMUEVSX3tkZWZfaGVscGVyX3NpemV9KHt0YWd9IikK
ICAgICAgICAgICAgICMjIFRoZSByZXR1cm4gdHlwZSBpcyB2b2lkCi0gICAgICAgICAgICBmLndy
aXRlKCcsIHZvaWQnICkKKyAgICAgICAgICAgIGYud3JpdGUoIiwgdm9pZCIpCiAgICAgICAgIGVs
c2U6Ci0gICAgICAgICAgICBkZWZfaGVscGVyX3NpemUgPSBsZW4ocmVncykrbGVuKGltbXMpK251
bXNjYWxhcnJlYWR3cml0ZQotICAgICAgICAgICAgaWYgaGV4X2NvbW1vbi5uZWVkX3BrdF9oYXNf
bXVsdGlfY29mKHRhZyk6IGRlZl9oZWxwZXJfc2l6ZSArPSAxCi0gICAgICAgICAgICBpZiBoZXhf
Y29tbW9uLm5lZWRfcGFydDEodGFnKTogZGVmX2hlbHBlcl9zaXplICs9IDEKLSAgICAgICAgICAg
IGlmIGhleF9jb21tb24ubmVlZF9zbG90KHRhZyk6IGRlZl9oZWxwZXJfc2l6ZSArPSAxCi0gICAg
ICAgICAgICBpZiBoZXhfY29tbW9uLm5lZWRfUEModGFnKTogZGVmX2hlbHBlcl9zaXplICs9IDEK
LSAgICAgICAgICAgIGlmIGhleF9jb21tb24ubmVlZF9jb25kZXhlY19yZWcodGFnLCByZWdzKTog
ZGVmX2hlbHBlcl9zaXplICs9IDEKLSAgICAgICAgICAgIGlmIGhleF9jb21tb24uaGVscGVyX25l
ZWRzX25leHRfUEModGFnKTogZGVmX2hlbHBlcl9zaXplICs9IDEKLSAgICAgICAgICAgIGYud3Jp
dGUoZidERUZfSEVMUEVSX3tkZWZfaGVscGVyX3NpemV9KHt0YWd9JykKKyAgICAgICAgICAgIGRl
Zl9oZWxwZXJfc2l6ZSA9IGxlbihyZWdzKSArIGxlbihpbW1zKSArIG51bXNjYWxhcnJlYWR3cml0
ZQorICAgICAgICAgICAgaWYgaGV4X2NvbW1vbi5uZWVkX3BrdF9oYXNfbXVsdGlfY29mKHRhZyk6
CisgICAgICAgICAgICAgICAgZGVmX2hlbHBlcl9zaXplICs9IDEKKyAgICAgICAgICAgIGlmIGhl
eF9jb21tb24ubmVlZF9wYXJ0MSh0YWcpOgorICAgICAgICAgICAgICAgIGRlZl9oZWxwZXJfc2l6
ZSArPSAxCisgICAgICAgICAgICBpZiBoZXhfY29tbW9uLm5lZWRfc2xvdCh0YWcpOgorICAgICAg
ICAgICAgICAgIGRlZl9oZWxwZXJfc2l6ZSArPSAxCisgICAgICAgICAgICBpZiBoZXhfY29tbW9u
Lm5lZWRfUEModGFnKToKKyAgICAgICAgICAgICAgICBkZWZfaGVscGVyX3NpemUgKz0gMQorICAg
ICAgICAgICAgaWYgaGV4X2NvbW1vbi5uZWVkX2NvbmRleGVjX3JlZyh0YWcsIHJlZ3MpOgorICAg
ICAgICAgICAgICAgIGRlZl9oZWxwZXJfc2l6ZSArPSAxCisgICAgICAgICAgICBpZiBoZXhfY29t
bW9uLmhlbHBlcl9uZWVkc19uZXh0X1BDKHRhZyk6CisgICAgICAgICAgICAgICAgZGVmX2hlbHBl
cl9zaXplICs9IDEKKyAgICAgICAgICAgIGYud3JpdGUoZiJERUZfSEVMUEVSX3tkZWZfaGVscGVy
X3NpemV9KHt0YWd9IikKIAogICAgICAgICAjIyBHZW5lcmF0ZSB0aGUgcWVtdSBERUZfSEVMUEVS
IHR5cGUgZm9yIGVhY2ggcmVzdWx0CiAgICAgICAgICMjIEl0ZXJhdGUgb3ZlciB0aGlzIGxpc3Qg
dHdpY2UKICAgICAgICAgIyMgLSBFbWl0IHRoZSBzY2FsYXIgcmVzdWx0CiAgICAgICAgICMjIC0g
RW1pdCB0aGUgdmVjdG9yIHJlc3VsdAotICAgICAgICBpPTAKLSAgICAgICAgZm9yIHJlZ3R5cGUs
cmVnaWQsdG9zcyxudW1yZWdzIGluIHJlZ3M6Ci0gICAgICAgICAgICBpZiAoaGV4X2NvbW1vbi5p
c193cml0dGVuKHJlZ2lkKSk6Ci0gICAgICAgICAgICAgICAgaWYgKG5vdCBoZXhfY29tbW9uLmlz
X2h2eF9yZWcocmVndHlwZSkpOgorICAgICAgICBpID0gMAorICAgICAgICBmb3IgcmVndHlwZSwg
cmVnaWQsIHRvc3MsIG51bXJlZ3MgaW4gcmVnczoKKyAgICAgICAgICAgIGlmIGhleF9jb21tb24u
aXNfd3JpdHRlbihyZWdpZCk6CisgICAgICAgICAgICAgICAgaWYgbm90IGhleF9jb21tb24uaXNf
aHZ4X3JlZyhyZWd0eXBlKToKICAgICAgICAgICAgICAgICAgICAgZ2VuX2RlZl9oZWxwZXJfb3Bu
KGYsIHRhZywgcmVndHlwZSwgcmVnaWQsIHRvc3MsIG51bXJlZ3MsIGkpCiAgICAgICAgICAgICAg
ICAgaSArPSAxCiAKICAgICAgICAgIyMgUHV0IHRoZSBlbnYgYmV0d2VlbiB0aGUgb3V0cHV0cyBh
bmQgaW5wdXRzCi0gICAgICAgIGYud3JpdGUoJywgZW52JyApCisgICAgICAgIGYud3JpdGUoIiwg
ZW52IikKICAgICAgICAgaSArPSAxCiAKICAgICAgICAgIyBTZWNvbmQgcGFzcwotICAgICAgICBm
b3IgcmVndHlwZSxyZWdpZCx0b3NzLG51bXJlZ3MgaW4gcmVnczoKLSAgICAgICAgICAgIGlmICho
ZXhfY29tbW9uLmlzX3dyaXR0ZW4ocmVnaWQpKToKLSAgICAgICAgICAgICAgICBpZiAoaGV4X2Nv
bW1vbi5pc19odnhfcmVnKHJlZ3R5cGUpKToKKyAgICAgICAgZm9yIHJlZ3R5cGUsIHJlZ2lkLCB0
b3NzLCBudW1yZWdzIGluIHJlZ3M6CisgICAgICAgICAgICBpZiBoZXhfY29tbW9uLmlzX3dyaXR0
ZW4ocmVnaWQpOgorICAgICAgICAgICAgICAgIGlmIGhleF9jb21tb24uaXNfaHZ4X3JlZyhyZWd0
eXBlKToKICAgICAgICAgICAgICAgICAgICAgZ2VuX2RlZl9oZWxwZXJfb3BuKGYsIHRhZywgcmVn
dHlwZSwgcmVnaWQsIHRvc3MsIG51bXJlZ3MsIGkpCiAgICAgICAgICAgICAgICAgICAgIGkgKz0g
MQogCiAgICAgICAgICMjIEZvciBjb25kaXRpb25hbCBpbnN0cnVjdGlvbnMsIHdlIHBhc3MgaW4g
dGhlIGRlc3RpbmF0aW9uIHJlZ2lzdGVyCi0gICAgICAgIGlmICdBX0NPTkRFWEVDJyBpbiBoZXhf
Y29tbW9uLmF0dHJpYmRpY3RbdGFnXToKKyAgICAgICAgaWYgIkFfQ09OREVYRUMiIGluIGhleF9j
b21tb24uYXR0cmliZGljdFt0YWddOgogICAgICAgICAgICAgZm9yIHJlZ3R5cGUsIHJlZ2lkLCB0
b3NzLCBudW1yZWdzIGluIHJlZ3M6Ci0gICAgICAgICAgICAgICAgaWYgKGhleF9jb21tb24uaXNf
d3JpdGVvbmx5KHJlZ2lkKSBhbmQKLSAgICAgICAgICAgICAgICAgICAgbm90IGhleF9jb21tb24u
aXNfaHZ4X3JlZyhyZWd0eXBlKSk6CisgICAgICAgICAgICAgICAgaWYgaGV4X2NvbW1vbi5pc193
cml0ZW9ubHkocmVnaWQpIGFuZCBub3QgaGV4X2NvbW1vbi5pc19odnhfcmVnKAorICAgICAgICAg
ICAgICAgICAgICByZWd0eXBlCisgICAgICAgICAgICAgICAgKToKICAgICAgICAgICAgICAgICAg
ICAgZ2VuX2RlZl9oZWxwZXJfb3BuKGYsIHRhZywgcmVndHlwZSwgcmVnaWQsIHRvc3MsIG51bXJl
Z3MsIGkpCiAgICAgICAgICAgICAgICAgICAgIGkgKz0gMQogCiAgICAgICAgICMjIEdlbmVyYXRl
IHRoZSBxZW11IHR5cGUgZm9yIGVhY2ggaW5wdXQgb3BlcmFuZCAocmVncyBhbmQgaW1tZWRpYXRl
cykKLSAgICAgICAgZm9yIHJlZ3R5cGUscmVnaWQsdG9zcyxudW1yZWdzIGluIHJlZ3M6Ci0gICAg
ICAgICAgICBpZiAoaGV4X2NvbW1vbi5pc19yZWFkKHJlZ2lkKSk6Ci0gICAgICAgICAgICAgICAg
aWYgKGhleF9jb21tb24uaXNfaHZ4X3JlZyhyZWd0eXBlKSBhbmQKLSAgICAgICAgICAgICAgICAg
ICAgaGV4X2NvbW1vbi5pc19yZWFkd3JpdGUocmVnaWQpKToKKyAgICAgICAgZm9yIHJlZ3R5cGUs
IHJlZ2lkLCB0b3NzLCBudW1yZWdzIGluIHJlZ3M6CisgICAgICAgICAgICBpZiBoZXhfY29tbW9u
LmlzX3JlYWQocmVnaWQpOgorICAgICAgICAgICAgICAgIGlmIGhleF9jb21tb24uaXNfaHZ4X3Jl
ZyhyZWd0eXBlKSBhbmQgaGV4X2NvbW1vbi5pc19yZWFkd3JpdGUocmVnaWQpOgogICAgICAgICAg
ICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgIGdlbl9kZWZfaGVscGVyX29wbihm
LCB0YWcsIHJlZ3R5cGUsIHJlZ2lkLCB0b3NzLCBudW1yZWdzLCBpKQogICAgICAgICAgICAgICAg
IGkgKz0gMQotICAgICAgICBmb3IgaW1tbGV0dCxiaXRzLGltbXNoaWZ0IGluIGltbXM6CisgICAg
ICAgIGZvciBpbW1sZXR0LCBiaXRzLCBpbW1zaGlmdCBpbiBpbW1zOgogICAgICAgICAgICAgZi53
cml0ZSgiLCBzMzIiKQogCiAgICAgICAgICMjIEFkZCB0aGUgYXJndW1lbnRzIGZvciB0aGUgaW5z
dHJ1Y3Rpb24gcGt0X2hhc19tdWx0aV9jb2YsIHNsb3QgYW5kCiAgICAgICAgICMjIHBhcnQxIChp
ZiBuZWVkZWQpCi0gICAgICAgIGlmIGhleF9jb21tb24ubmVlZF9wa3RfaGFzX211bHRpX2NvZih0
YWcpOiBmLndyaXRlKCcsIGkzMicpCi0gICAgICAgIGlmIGhleF9jb21tb24ubmVlZF9QQyh0YWcp
OiBmLndyaXRlKCcsIGkzMicpCi0gICAgICAgIGlmIGhleF9jb21tb24uaGVscGVyX25lZWRzX25l
eHRfUEModGFnKTogZi53cml0ZSgnLCBpMzInKQotICAgICAgICBpZiBoZXhfY29tbW9uLm5lZWRf
c2xvdCh0YWcpOiBmLndyaXRlKCcsIGkzMicgKQotICAgICAgICBpZiBoZXhfY29tbW9uLm5lZWRf
cGFydDEodGFnKTogZi53cml0ZSgnICwgaTMyJyApCi0gICAgICAgIGYud3JpdGUoJylcbicpCisg
ICAgICAgIGlmIGhleF9jb21tb24ubmVlZF9wa3RfaGFzX211bHRpX2NvZih0YWcpOgorICAgICAg
ICAgICAgZi53cml0ZSgiLCBpMzIiKQorICAgICAgICBpZiBoZXhfY29tbW9uLm5lZWRfUEModGFn
KToKKyAgICAgICAgICAgIGYud3JpdGUoIiwgaTMyIikKKyAgICAgICAgaWYgaGV4X2NvbW1vbi5o
ZWxwZXJfbmVlZHNfbmV4dF9QQyh0YWcpOgorICAgICAgICAgICAgZi53cml0ZSgiLCBpMzIiKQor
ICAgICAgICBpZiBoZXhfY29tbW9uLm5lZWRfc2xvdCh0YWcpOgorICAgICAgICAgICAgZi53cml0
ZSgiLCBpMzIiKQorICAgICAgICBpZiBoZXhfY29tbW9uLm5lZWRfcGFydDEodGFnKToKKyAgICAg
ICAgICAgIGYud3JpdGUoIiAsIGkzMiIpCisgICAgICAgIGYud3JpdGUoIilcbiIpCisKIAogZGVm
IG1haW4oKToKICAgICBoZXhfY29tbW9uLnJlYWRfc2VtYW50aWNzX2ZpbGUoc3lzLmFyZ3ZbMV0p
CkBAIC0xNzMsMjggKzE5MywyOSBAQCBkZWYgbWFpbigpOgogICAgIHRhZ2ltbXMgPSBoZXhfY29t
bW9uLmdldF90YWdpbW1zKCkKIAogICAgIG91dHB1dF9maWxlID0gc3lzLmFyZ3ZbLTFdCi0gICAg
d2l0aCBvcGVuKG91dHB1dF9maWxlLCAndycpIGFzIGY6CisgICAgd2l0aCBvcGVuKG91dHB1dF9m
aWxlLCAidyIpIGFzIGY6CiAgICAgICAgIGZvciB0YWcgaW4gaGV4X2NvbW1vbi50YWdzOgogICAg
ICAgICAgICAgIyMgU2tpcCB0aGUgcHJpdiBpbnN0cnVjdGlvbnMKLSAgICAgICAgICAgIGlmICgg
IkFfUFJJViIgaW4gaGV4X2NvbW1vbi5hdHRyaWJkaWN0W3RhZ10gKSA6CisgICAgICAgICAgICBp
ZiAiQV9QUklWIiBpbiBoZXhfY29tbW9uLmF0dHJpYmRpY3RbdGFnXToKICAgICAgICAgICAgICAg
ICBjb250aW51ZQogICAgICAgICAgICAgIyMgU2tpcCB0aGUgZ3Vlc3QgaW5zdHJ1Y3Rpb25zCi0g
ICAgICAgICAgICBpZiAoICJBX0dVRVNUIiBpbiBoZXhfY29tbW9uLmF0dHJpYmRpY3RbdGFnXSAp
IDoKKyAgICAgICAgICAgIGlmICJBX0dVRVNUIiBpbiBoZXhfY29tbW9uLmF0dHJpYmRpY3RbdGFn
XToKICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgIyMgU2tpcCB0aGUgZGlh
ZyBpbnN0cnVjdGlvbnMKLSAgICAgICAgICAgIGlmICggdGFnID09ICJZNl9kaWFnIiApIDoKKyAg
ICAgICAgICAgIGlmIHRhZyA9PSAiWTZfZGlhZyI6CiAgICAgICAgICAgICAgICAgY29udGludWUK
LSAgICAgICAgICAgIGlmICggdGFnID09ICJZNl9kaWFnMCIgKSA6CisgICAgICAgICAgICBpZiB0
YWcgPT0gIlk2X2RpYWcwIjoKICAgICAgICAgICAgICAgICBjb250aW51ZQotICAgICAgICAgICAg
aWYgKCB0YWcgPT0gIlk2X2RpYWcxIiApIDoKKyAgICAgICAgICAgIGlmIHRhZyA9PSAiWTZfZGlh
ZzEiOgogICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAKLSAgICAgICAgICAgIGlmICggaGV4X2Nv
bW1vbi5za2lwX3FlbXVfaGVscGVyKHRhZykgKToKKyAgICAgICAgICAgIGlmIGhleF9jb21tb24u
c2tpcF9xZW11X2hlbHBlcih0YWcpOgogICAgICAgICAgICAgICAgIGNvbnRpbnVlCi0gICAgICAg
ICAgICBpZiAoIGhleF9jb21tb24uaXNfaWRlZl9wYXJzZXJfZW5hYmxlZCh0YWcpICk6CisgICAg
ICAgICAgICBpZiBoZXhfY29tbW9uLmlzX2lkZWZfcGFyc2VyX2VuYWJsZWQodGFnKToKICAgICAg
ICAgICAgICAgICBjb250aW51ZQogCiAgICAgICAgICAgICBnZW5faGVscGVyX3Byb3RvdHlwZShm
LCB0YWcsIHRhZ3JlZ3MsIHRhZ2ltbXMpCiAKKwogaWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjoK
ICAgICBtYWluKCkKZGlmZiAtLWdpdCBhL3RhcmdldC9oZXhhZ29uL2dlbl9pZGVmX3BhcnNlcl9m
dW5jcy5weSBiL3RhcmdldC9oZXhhZ29uL2dlbl9pZGVmX3BhcnNlcl9mdW5jcy5weQppbmRleCAx
YjFmZGY5NzkwLi5hZmU2OGJkYjZmIDEwMDY0NAotLS0gYS90YXJnZXQvaGV4YWdvbi9nZW5faWRl
Zl9wYXJzZXJfZnVuY3MucHkKKysrIGIvdGFyZ2V0L2hleGFnb24vZ2VuX2lkZWZfcGFyc2VyX2Z1
bmNzLnB5CkBAIC0yNCw2ICsyNCw3IEBACiAKIGltcG9ydCBoZXhfY29tbW9uCiAKKwogIyMKICMj
IEdlbmVyYXRlIGNvZGUgdG8gYmUgZmVkIHRvIHRoZSBpZGVmX3BhcnNlcgogIyMKQEAgLTQ4LDgz
ICs0OSw5OSBAQCBkZWYgbWFpbigpOgogICAgIHRhZ3JlZ3MgPSBoZXhfY29tbW9uLmdldF90YWdy
ZWdzKCkKICAgICB0YWdpbW1zID0gaGV4X2NvbW1vbi5nZXRfdGFnaW1tcygpCiAKLSAgICB3aXRo
IG9wZW4oc3lzLmFyZ3ZbM10sICd3JykgYXMgZjoKKyAgICB3aXRoIG9wZW4oc3lzLmFyZ3ZbM10s
ICJ3IikgYXMgZjoKICAgICAgICAgZi53cml0ZSgnI2luY2x1ZGUgIm1hY3Jvcy5pbmMiXG5cbicp
CiAKICAgICAgICAgZm9yIHRhZyBpbiBoZXhfY29tbW9uLnRhZ3M6CiAgICAgICAgICAgICAjIyBT
a2lwIHRoZSBwcml2IGluc3RydWN0aW9ucwotICAgICAgICAgICAgaWYgKCAiQV9QUklWIiBpbiBo
ZXhfY29tbW9uLmF0dHJpYmRpY3RbdGFnXSApIDoKKyAgICAgICAgICAgIGlmICJBX1BSSVYiIGlu
IGhleF9jb21tb24uYXR0cmliZGljdFt0YWddOgogICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAg
ICAgICAgICAgICAjIyBTa2lwIHRoZSBndWVzdCBpbnN0cnVjdGlvbnMKLSAgICAgICAgICAgIGlm
ICggIkFfR1VFU1QiIGluIGhleF9jb21tb24uYXR0cmliZGljdFt0YWddICkgOgorICAgICAgICAg
ICAgaWYgIkFfR1VFU1QiIGluIGhleF9jb21tb24uYXR0cmliZGljdFt0YWddOgogICAgICAgICAg
ICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAjIyBTa2lwIGluc3RydWN0aW9ucyB0aGF0IHNh
dHVyYXRlIGluIGEgdGVybmFyeSBleHByZXNzaW9uCi0gICAgICAgICAgICBpZiAoIHRhZyBpbiB7
J1MyX2Fzcl9yX3Jfc2F0JywgJ1MyX2FzbF9yX3Jfc2F0J30gKSA6CisgICAgICAgICAgICBpZiB0
YWcgaW4geyJTMl9hc3Jfcl9yX3NhdCIsICJTMl9hc2xfcl9yX3NhdCJ9OgogICAgICAgICAgICAg
ICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAjIyBTa2lwIGluc3RydWN0aW9ucyB1c2luZyBzd2l0
Y2gKLSAgICAgICAgICAgIGlmICggdGFnIGluIHsnUzRfdnJjcm90YXRlX2FjYycsICdTNF92cmNy
b3RhdGUnfSApIDoKKyAgICAgICAgICAgIGlmIHRhZyBpbiB7IlM0X3ZyY3JvdGF0ZV9hY2MiLCAi
UzRfdnJjcm90YXRlIn06CiAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICMj
IFNraXAgdHJhcCBpbnN0cnVjdGlvbnMKLSAgICAgICAgICAgIGlmICggdGFnIGluIHsnSjJfdHJh
cDAnLCAnSjJfdHJhcDEnfSApIDoKKyAgICAgICAgICAgIGlmIHRhZyBpbiB7IkoyX3RyYXAwIiwg
IkoyX3RyYXAxIn06CiAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICMjIFNr
aXAgMTI4LWJpdCBpbnN0cnVjdGlvbnMKLSAgICAgICAgICAgIGlmICggdGFnIGluIHsnQTdfY3Jv
dW5kZF9yaScsICdBN19jcm91bmRkX3JyJ30gKSA6CisgICAgICAgICAgICBpZiB0YWcgaW4geyJB
N19jcm91bmRkX3JpIiwgIkE3X2Nyb3VuZGRfcnIifToKICAgICAgICAgICAgICAgICBjb250aW51
ZQotICAgICAgICAgICAgaWYgKCB0YWcgaW4geydNN193Y21weXJ3JywgJ003X3djbXB5cndjJywK
LSAgICAgICAgICAgICAgICAgICAgICAgICAnTTdfd2NtcHlpdycsICdNN193Y21weWl3YycsCi0g
ICAgICAgICAgICAgICAgICAgICAgICAgJ003X3djbXB5cndfcm5kJywgJ003X3djbXB5cndjX3Ju
ZCcsCi0gICAgICAgICAgICAgICAgICAgICAgICAgJ003X3djbXB5aXdfcm5kJywgJ003X3djbXB5
aXdjX3JuZCd9ICkgOgorICAgICAgICAgICAgaWYgdGFnIGluIHsKKyAgICAgICAgICAgICAgICAi
TTdfd2NtcHlydyIsCisgICAgICAgICAgICAgICAgIk03X3djbXB5cndjIiwKKyAgICAgICAgICAg
ICAgICAiTTdfd2NtcHlpdyIsCisgICAgICAgICAgICAgICAgIk03X3djbXB5aXdjIiwKKyAgICAg
ICAgICAgICAgICAiTTdfd2NtcHlyd19ybmQiLAorICAgICAgICAgICAgICAgICJNN193Y21weXJ3
Y19ybmQiLAorICAgICAgICAgICAgICAgICJNN193Y21weWl3X3JuZCIsCisgICAgICAgICAgICAg
ICAgIk03X3djbXB5aXdjX3JuZCIsCisgICAgICAgICAgICB9OgogICAgICAgICAgICAgICAgIGNv
bnRpbnVlCiAgICAgICAgICAgICAjIyBTa2lwIGludGVybGVhdmUvZGVpbnRlcmxlYXZlIGluc3Ry
dWN0aW9ucwotICAgICAgICAgICAgaWYgKCB0YWcgaW4geydTMl9pbnRlcmxlYXZlJywgJ1MyX2Rl
aW50ZXJsZWF2ZSd9ICkgOgorICAgICAgICAgICAgaWYgdGFnIGluIHsiUzJfaW50ZXJsZWF2ZSIs
ICJTMl9kZWludGVybGVhdmUifToKICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAg
ICAgIyMgU2tpcCBpbnN0cnVjdGlvbnMgdXNpbmcgYml0IHJldmVyc2UKLSAgICAgICAgICAgIGlm
ICggdGFnIGluIHsnUzJfYnJldicsICdTMl9icmV2cCcsICdTMl9jdDAnLCAnUzJfY3QxJywKLSAg
ICAgICAgICAgICAgICAgICAgICAgICAnUzJfY3QwcCcsICdTMl9jdDFwJywgJ0E0X3RsYm1hdGNo
J30gKSA6CisgICAgICAgICAgICBpZiB0YWcgaW4geworICAgICAgICAgICAgICAgICJTMl9icmV2
IiwKKyAgICAgICAgICAgICAgICAiUzJfYnJldnAiLAorICAgICAgICAgICAgICAgICJTMl9jdDAi
LAorICAgICAgICAgICAgICAgICJTMl9jdDEiLAorICAgICAgICAgICAgICAgICJTMl9jdDBwIiwK
KyAgICAgICAgICAgICAgICAiUzJfY3QxcCIsCisgICAgICAgICAgICAgICAgIkE0X3RsYm1hdGNo
IiwKKyAgICAgICAgICAgIH06CiAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAg
ICMjIFNraXAgb3RoZXIgdW5zdXBwb3J0ZWQgaW5zdHJ1Y3Rpb25zCi0gICAgICAgICAgICBpZiAo
IHRhZyA9PSAnUzJfY2FiYWNkZWNiaW4nIG9yIHRhZyA9PSAnQTVfQUNTJyApIDoKKyAgICAgICAg
ICAgIGlmIHRhZyA9PSAiUzJfY2FiYWNkZWNiaW4iIG9yIHRhZyA9PSAiQTVfQUNTIjoKICAgICAg
ICAgICAgICAgICBjb250aW51ZQotICAgICAgICAgICAgaWYgKCB0YWcuc3RhcnRzd2l0aCgnWScp
ICkgOgorICAgICAgICAgICAgaWYgdGFnLnN0YXJ0c3dpdGgoIlkiKToKICAgICAgICAgICAgICAg
ICBjb250aW51ZQotICAgICAgICAgICAgaWYgKCB0YWcuc3RhcnRzd2l0aCgnVjZfJykgKSA6Cisg
ICAgICAgICAgICBpZiB0YWcuc3RhcnRzd2l0aCgiVjZfIik6CiAgICAgICAgICAgICAgICAgY29u
dGludWUKLSAgICAgICAgICAgIGlmICggdGFnLnN0YXJ0c3dpdGgoJ0YnKSApIDoKKyAgICAgICAg
ICAgIGlmIHRhZy5zdGFydHN3aXRoKCJGIik6CiAgICAgICAgICAgICAgICAgY29udGludWUKLSAg
ICAgICAgICAgIGlmICggdGFnLmVuZHN3aXRoKCdfbG9ja2VkJykgKSA6CisgICAgICAgICAgICBp
ZiB0YWcuZW5kc3dpdGgoIl9sb2NrZWQiKToKICAgICAgICAgICAgICAgICBjb250aW51ZQotICAg
ICAgICAgICAgaWYgKCAiQV9DT0YiIGluIGhleF9jb21tb24uYXR0cmliZGljdFt0YWddICkgOgor
ICAgICAgICAgICAgaWYgIkFfQ09GIiBpbiBoZXhfY29tbW9uLmF0dHJpYmRpY3RbdGFnXToKICAg
ICAgICAgICAgICAgICBjb250aW51ZQogCiAgICAgICAgICAgICByZWdzID0gdGFncmVnc1t0YWdd
CiAgICAgICAgICAgICBpbW1zID0gdGFnaW1tc1t0YWddCiAKICAgICAgICAgICAgIGFyZ3VtZW50
cyA9IFtdCi0gICAgICAgICAgICBmb3IgcmVndHlwZSxyZWdpZCx0b3NzLG51bXJlZ3MgaW4gcmVn
czoKKyAgICAgICAgICAgIGZvciByZWd0eXBlLCByZWdpZCwgdG9zcywgbnVtcmVncyBpbiByZWdz
OgogICAgICAgICAgICAgICAgIHByZWZpeCA9ICJpbiAiIGlmIGhleF9jb21tb24uaXNfcmVhZChy
ZWdpZCkgZWxzZSAiIgogCiAgICAgICAgICAgICAgICAgaXNfcGFpciA9IGhleF9jb21tb24uaXNf
cGFpcihyZWdpZCkKLSAgICAgICAgICAgICAgICBpc19zaW5nbGVfb2xkID0gKGhleF9jb21tb24u
aXNfc2luZ2xlKHJlZ2lkKQotICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5kIGhl
eF9jb21tb24uaXNfb2xkX3ZhbChyZWd0eXBlLCByZWdpZCwgdGFnKSkKLSAgICAgICAgICAgICAg
ICBpc19zaW5nbGVfbmV3ID0gKGhleF9jb21tb24uaXNfc2luZ2xlKHJlZ2lkKQotICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgYW5kIGhleF9jb21tb24uaXNfbmV3X3ZhbChyZWd0eXBl
LCByZWdpZCwgdGFnKSkKKyAgICAgICAgICAgICAgICBpc19zaW5nbGVfb2xkID0gaGV4X2NvbW1v
bi5pc19zaW5nbGUocmVnaWQpIGFuZCBoZXhfY29tbW9uLmlzX29sZF92YWwoCisgICAgICAgICAg
ICAgICAgICAgIHJlZ3R5cGUsIHJlZ2lkLCB0YWcKKyAgICAgICAgICAgICAgICApCisgICAgICAg
ICAgICAgICAgaXNfc2luZ2xlX25ldyA9IGhleF9jb21tb24uaXNfc2luZ2xlKHJlZ2lkKSBhbmQg
aGV4X2NvbW1vbi5pc19uZXdfdmFsKAorICAgICAgICAgICAgICAgICAgICByZWd0eXBlLCByZWdp
ZCwgdGFnCisgICAgICAgICAgICAgICAgKQogCiAgICAgICAgICAgICAgICAgaWYgaXNfcGFpciBv
ciBpc19zaW5nbGVfb2xkOgogICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHMuYXBwZW5kKGYi
e3ByZWZpeH17cmVndHlwZX17cmVnaWR9ViIpCiAgICAgICAgICAgICAgICAgZWxpZiBpc19zaW5n
bGVfbmV3OgogICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHMuYXBwZW5kKGYie3ByZWZpeH17
cmVndHlwZX17cmVnaWR9TiIpCiAgICAgICAgICAgICAgICAgZWxzZToKLSAgICAgICAgICAgICAg
ICAgICAgcHJpbnQoIkJhZCByZWdpc3RlciBwYXJzZTogIixyZWd0eXBlLHJlZ2lkLHRvc3MsbnVt
cmVncykKKyAgICAgICAgICAgICAgICAgICAgcHJpbnQoIkJhZCByZWdpc3RlciBwYXJzZTogIiwg
cmVndHlwZSwgcmVnaWQsIHRvc3MsIG51bXJlZ3MpCiAKLSAgICAgICAgICAgIGZvciBpbW1sZXR0
LGJpdHMsaW1tc2hpZnQgaW4gaW1tczoKKyAgICAgICAgICAgIGZvciBpbW1sZXR0LCBiaXRzLCBp
bW1zaGlmdCBpbiBpbW1zOgogICAgICAgICAgICAgICAgIGFyZ3VtZW50cy5hcHBlbmQoaGV4X2Nv
bW1vbi5pbW1fbmFtZShpbW1sZXR0KSkKIAogICAgICAgICAgICAgZi53cml0ZShmInt0YWd9KHsn
LCAnLmpvaW4oYXJndW1lbnRzKX0pIHt7XG4iKQotICAgICAgICAgICAgZi53cml0ZSgiICAgICIp
OworICAgICAgICAgICAgZi53cml0ZSgiICAgICIpCiAgICAgICAgICAgICBpZiBoZXhfY29tbW9u
Lm5lZWRfZWEodGFnKToKLSAgICAgICAgICAgICAgICBmLndyaXRlKCJzaXplNHVfdCBFQTsgIik7
CisgICAgICAgICAgICAgICAgZi53cml0ZSgic2l6ZTR1X3QgRUE7ICIpCiAgICAgICAgICAgICBm
LndyaXRlKGYie2hleF9jb21tb24uc2VtZGljdFt0YWddfVxuIikKICAgICAgICAgICAgIGYud3Jp
dGUoIn1cblxuIikKIAorCiBpZiBfX25hbWVfXyA9PSAiX19tYWluX18iOgogICAgIG1haW4oKQpk
aWZmIC0tZ2l0IGEvdGFyZ2V0L2hleGFnb24vZ2VuX29wX2F0dHJpYnMucHkgYi90YXJnZXQvaGV4
YWdvbi9nZW5fb3BfYXR0cmlicy5weQppbmRleCBjZjdiN2Y3NjU2Li40MTA3NGI4NTczIDEwMDc1
NQotLS0gYS90YXJnZXQvaGV4YWdvbi9nZW5fb3BfYXR0cmlicy5weQorKysgYi90YXJnZXQvaGV4
YWdvbi9nZW5fb3BfYXR0cmlicy5weQpAQCAtMjIsNiArMjIsNyBAQAogaW1wb3J0IHN0cmluZwog
aW1wb3J0IGhleF9jb21tb24KIAorCiBkZWYgbWFpbigpOgogICAgIGhleF9jb21tb24ucmVhZF9z
ZW1hbnRpY3NfZmlsZShzeXMuYXJndlsxXSkKICAgICBoZXhfY29tbW9uLnJlYWRfYXR0cmlic19m
aWxlKHN5cy5hcmd2WzJdKQpAQCAtMzAsMTAgKzMxLDEzIEBAIGRlZiBtYWluKCk6CiAgICAgIyMK
ICAgICAjIyAgICAgR2VuZXJhdGUgYWxsIHRoZSBhdHRyaWJ1dGVzIGFzc29jaWF0ZWQgd2l0aCBl
YWNoIGluc3RydWN0aW9uCiAgICAgIyMKLSAgICB3aXRoIG9wZW4oc3lzLmFyZ3ZbM10sICd3Jykg
YXMgZjoKKyAgICB3aXRoIG9wZW4oc3lzLmFyZ3ZbM10sICJ3IikgYXMgZjoKICAgICAgICAgZm9y
IHRhZyBpbiBoZXhfY29tbW9uLnRhZ3M6Ci0gICAgICAgICAgICBmLndyaXRlKGYnT1BfQVRUUklC
KHt0YWd9LEFUVFJJQlMoJwotICAgICAgICAgICAgICAgICAgICBmJ3siLCIuam9pbihzb3J0ZWQo
aGV4X2NvbW1vbi5hdHRyaWJkaWN0W3RhZ10pKX0pKVxuJykKKyAgICAgICAgICAgIGYud3JpdGUo
CisgICAgICAgICAgICAgICAgZiJPUF9BVFRSSUIoe3RhZ30sQVRUUklCUygiCisgICAgICAgICAg
ICAgICAgZid7IiwiLmpvaW4oc29ydGVkKGhleF9jb21tb24uYXR0cmliZGljdFt0YWddKSl9KSlc
bicKKyAgICAgICAgICAgICkKKwogCiBpZiBfX25hbWVfXyA9PSAiX19tYWluX18iOgogICAgIG1h
aW4oKQpkaWZmIC0tZ2l0IGEvdGFyZ2V0L2hleGFnb24vZ2VuX29wX3JlZ3MucHkgYi90YXJnZXQv
aGV4YWdvbi9nZW5fb3BfcmVncy5weQppbmRleCBjMGRlOWFkMzgwLi40Mjk3MmM3ZjllIDEwMDc1
NQotLS0gYS90YXJnZXQvaGV4YWdvbi9nZW5fb3BfcmVncy5weQorKysgYi90YXJnZXQvaGV4YWdv
bi9nZW5fb3BfcmVncy5weQpAQCAtMjIsMjEgKzIyLDI1IEBACiBpbXBvcnQgc3RyaW5nCiBpbXBv
cnQgaGV4X2NvbW1vbgogCisKICMjCiAjIyAgICAgR2VuZXJhdGUgdGhlIHJlZ2lzdGVyIGFuZCBp
bW1lZGlhdGUgb3BlcmFuZHMgZm9yIGVhY2ggaW5zdHJ1Y3Rpb24KICMjCiBkZWYgY2FsY3VsYXRl
X3JlZ2lkX3JlZyh0YWcpOgotICAgIGRlZiBsZXR0ZXJfaW5jKHgpOiByZXR1cm4gY2hyKG9yZCh4
KSsxKQotICAgIG9yZGVyZWRfaW1wbHJlZ3MgPSBbICdTUCcsJ0ZQJywnTFInIF0KLSAgICBzcmNk
c3RfbGV0dCA9ICdYJwotICAgIHNyY19sZXR0ID0gJ1MnCi0gICAgZHN0X2xldHQgPSAnRCcKKyAg
ICBkZWYgbGV0dGVyX2luYyh4KToKKyAgICAgICAgcmV0dXJuIGNocihvcmQoeCkgKyAxKQorCisg
ICAgb3JkZXJlZF9pbXBscmVncyA9IFsiU1AiLCAiRlAiLCAiTFIiXQorICAgIHNyY2RzdF9sZXR0
ID0gIlgiCisgICAgc3JjX2xldHQgPSAiUyIKKyAgICBkc3RfbGV0dCA9ICJEIgogICAgIHJldHN0
ciA9ICIiCiAgICAgbWFwZGljdCA9IHt9CiAgICAgZm9yIHJlZyBpbiBvcmRlcmVkX2ltcGxyZWdz
OgogICAgICAgICByZWdfcmQgPSAwCiAgICAgICAgIHJlZ193ciA9IDAKLSAgICAgICAgaWYgKCdB
X0lNUExJQ0lUX1dSSVRFU18nK3JlZykgaW4gaGV4X2NvbW1vbi5hdHRyaWJkaWN0W3RhZ106IHJl
Z193ciA9IDEKKyAgICAgICAgaWYgKCJBX0lNUExJQ0lUX1dSSVRFU18iICsgcmVnKSBpbiBoZXhf
Y29tbW9uLmF0dHJpYmRpY3RbdGFnXToKKyAgICAgICAgICAgIHJlZ193ciA9IDEKICAgICAgICAg
aWYgcmVnX3JkIGFuZCByZWdfd3I6CiAgICAgICAgICAgICByZXRzdHIgKz0gc3JjZHN0X2xldHQK
ICAgICAgICAgICAgIG1hcGRpY3Rbc3JjZHN0X2xldHRdID0gcmVnCkBAIC00OSwxNiArNTMsMTkg
QEAgZGVmIGxldHRlcl9pbmMoeCk6IHJldHVybiBjaHIob3JkKHgpKzEpCiAgICAgICAgICAgICBy
ZXRzdHIgKz0gZHN0X2xldHQKICAgICAgICAgICAgIG1hcGRpY3RbZHN0X2xldHRdID0gcmVnCiAg
ICAgICAgICAgICBkc3RfbGV0dCA9IGxldHRlcl9pbmMoZHN0X2xldHQpCi0gICAgcmV0dXJuIHJl
dHN0cixtYXBkaWN0CisgICAgcmV0dXJuIHJldHN0ciwgbWFwZGljdAorCiAKIGRlZiBjYWxjdWxh
dGVfcmVnaWRfbGV0dGVycyh0YWcpOgotICAgIHJldHN0cixtYXBkaWN0ID0gY2FsY3VsYXRlX3Jl
Z2lkX3JlZyh0YWcpCisgICAgcmV0c3RyLCBtYXBkaWN0ID0gY2FsY3VsYXRlX3JlZ2lkX3JlZyh0
YWcpCiAgICAgcmV0dXJuIHJldHN0cgogCisKIGRlZiBzdHJpcF9yZWdfcHJlZml4KHgpOgotICAg
IHk9eC5yZXBsYWNlKCdVUkVHLicsJycpCi0gICAgeT15LnJlcGxhY2UoJ01SRUcuJywnJykKLSAg
ICByZXR1cm4geS5yZXBsYWNlKCdHUkVHLicsJycpCisgICAgeSA9IHgucmVwbGFjZSgiVVJFRy4i
LCAiIikKKyAgICB5ID0geS5yZXBsYWNlKCJNUkVHLiIsICIiKQorICAgIHJldHVybiB5LnJlcGxh
Y2UoIkdSRUcuIiwgIiIpCisKIAogZGVmIG1haW4oKToKICAgICBoZXhfY29tbW9uLnJlYWRfc2Vt
YW50aWNzX2ZpbGUoc3lzLmFyZ3ZbMV0pCkBAIC02Niw0NSArNzMsNTEgQEAgZGVmIG1haW4oKToK
ICAgICB0YWdyZWdzID0gaGV4X2NvbW1vbi5nZXRfdGFncmVncygpCiAgICAgdGFnaW1tcyA9IGhl
eF9jb21tb24uZ2V0X3RhZ2ltbXMoKQogCi0gICAgd2l0aCBvcGVuKHN5cy5hcmd2WzNdLCAndycp
IGFzIGY6CisgICAgd2l0aCBvcGVuKHN5cy5hcmd2WzNdLCAidyIpIGFzIGY6CiAgICAgICAgIGZv
ciB0YWcgaW4gaGV4X2NvbW1vbi50YWdzOgogICAgICAgICAgICAgcmVncyA9IHRhZ3JlZ3NbdGFn
XQogICAgICAgICAgICAgcnJlZ3MgPSBbXQogICAgICAgICAgICAgd3JlZ3MgPSBbXQogICAgICAg
ICAgICAgcmVnaWRzID0gIiIKLSAgICAgICAgICAgIGZvciByZWd0eXBlLHJlZ2lkLHRvc3MsbnVt
cmVncyBpbiByZWdzOgorICAgICAgICAgICAgZm9yIHJlZ3R5cGUsIHJlZ2lkLCB0b3NzLCBudW1y
ZWdzIGluIHJlZ3M6CiAgICAgICAgICAgICAgICAgaWYgaGV4X2NvbW1vbi5pc19yZWFkKHJlZ2lk
KToKLSAgICAgICAgICAgICAgICAgICAgaWYgcmVnaWRbMF0gbm90IGluIHJlZ2lkczogcmVnaWRz
ICs9IHJlZ2lkWzBdCi0gICAgICAgICAgICAgICAgICAgIHJyZWdzLmFwcGVuZChyZWd0eXBlK3Jl
Z2lkK251bXJlZ3MpCisgICAgICAgICAgICAgICAgICAgIGlmIHJlZ2lkWzBdIG5vdCBpbiByZWdp
ZHM6CisgICAgICAgICAgICAgICAgICAgICAgICByZWdpZHMgKz0gcmVnaWRbMF0KKyAgICAgICAg
ICAgICAgICAgICAgcnJlZ3MuYXBwZW5kKHJlZ3R5cGUgKyByZWdpZCArIG51bXJlZ3MpCiAgICAg
ICAgICAgICAgICAgaWYgaGV4X2NvbW1vbi5pc193cml0dGVuKHJlZ2lkKToKLSAgICAgICAgICAg
ICAgICAgICAgd3JlZ3MuYXBwZW5kKHJlZ3R5cGUrcmVnaWQrbnVtcmVncykKLSAgICAgICAgICAg
ICAgICAgICAgaWYgcmVnaWRbMF0gbm90IGluIHJlZ2lkczogcmVnaWRzICs9IHJlZ2lkWzBdCisg
ICAgICAgICAgICAgICAgICAgIHdyZWdzLmFwcGVuZChyZWd0eXBlICsgcmVnaWQgKyBudW1yZWdz
KQorICAgICAgICAgICAgICAgICAgICBpZiByZWdpZFswXSBub3QgaW4gcmVnaWRzOgorICAgICAg
ICAgICAgICAgICAgICAgICAgcmVnaWRzICs9IHJlZ2lkWzBdCiAgICAgICAgICAgICBmb3IgYXR0
cmliIGluIGhleF9jb21tb24uYXR0cmliZGljdFt0YWddOgotICAgICAgICAgICAgICAgIGlmIGhl
eF9jb21tb24uYXR0cmliaW5mb1thdHRyaWJdWydycmVnJ106Ci0gICAgICAgICAgICAgICAgICAg
IHJyZWdzLmFwcGVuZChzdHJpcF9yZWdfcHJlZml4KGF0dHJpYmluZm9bYXR0cmliXVsncnJlZydd
KSkKLSAgICAgICAgICAgICAgICBpZiBoZXhfY29tbW9uLmF0dHJpYmluZm9bYXR0cmliXVsnd3Jl
ZyddOgotICAgICAgICAgICAgICAgICAgICB3cmVncy5hcHBlbmQoc3RyaXBfcmVnX3ByZWZpeChh
dHRyaWJpbmZvW2F0dHJpYl1bJ3dyZWcnXSkpCisgICAgICAgICAgICAgICAgaWYgaGV4X2NvbW1v
bi5hdHRyaWJpbmZvW2F0dHJpYl1bInJyZWciXToKKyAgICAgICAgICAgICAgICAgICAgcnJlZ3Mu
YXBwZW5kKHN0cmlwX3JlZ19wcmVmaXgoYXR0cmliaW5mb1thdHRyaWJdWyJycmVnIl0pKQorICAg
ICAgICAgICAgICAgIGlmIGhleF9jb21tb24uYXR0cmliaW5mb1thdHRyaWJdWyJ3cmVnIl06Cisg
ICAgICAgICAgICAgICAgICAgIHdyZWdzLmFwcGVuZChzdHJpcF9yZWdfcHJlZml4KGF0dHJpYmlu
Zm9bYXR0cmliXVsid3JlZyJdKSkKICAgICAgICAgICAgIHJlZ2lkcyArPSBjYWxjdWxhdGVfcmVn
aWRfbGV0dGVycyh0YWcpCi0gICAgICAgICAgICBmLndyaXRlKGYnUkVHSU5GTyh7dGFnfSwie3Jl
Z2lkc30iLFx0LypSRDoqL1x0InsiLCIuam9pbihycmVncyl9IiwnCi0gICAgICAgICAgICAgICAg
ICAgIGYnXHQvKldSOiovXHQieyIsIi5qb2luKHdyZWdzKX0iKVxuJykKKyAgICAgICAgICAgIGYu
d3JpdGUoCisgICAgICAgICAgICAgICAgZidSRUdJTkZPKHt0YWd9LCJ7cmVnaWRzfSIsXHQvKlJE
OiovXHQieyIsIi5qb2luKHJyZWdzKX0iLCcKKyAgICAgICAgICAgICAgICBmJ1x0LypXUjoqL1x0
InsiLCIuam9pbih3cmVncyl9IilcbicKKyAgICAgICAgICAgICkKIAogICAgICAgICBmb3IgdGFn
IGluIGhleF9jb21tb24udGFnczoKICAgICAgICAgICAgIGltbXMgPSB0YWdpbW1zW3RhZ10KLSAg
ICAgICAgICAgIGYud3JpdGUoZidJTU1JTkZPKHt0YWd9JykKKyAgICAgICAgICAgIGYud3JpdGUo
ZiJJTU1JTkZPKHt0YWd9IikKICAgICAgICAgICAgIGlmIG5vdCBpbW1zOgotICAgICAgICAgICAg
ICAgIGYud3JpdGUoJycnLCd1JywwLDAsJ1UnLDAsMCcnJykKLSAgICAgICAgICAgIGZvciBzaWdu
LHNpemUsc2hhbXQgaW4gaW1tczoKLSAgICAgICAgICAgICAgICBpZiBzaWduID09ICdyJzogc2ln
biA9ICdzJworICAgICAgICAgICAgICAgIGYud3JpdGUoIiIiLCd1JywwLDAsJ1UnLDAsMCIiIikK
KyAgICAgICAgICAgIGZvciBzaWduLCBzaXplLCBzaGFtdCBpbiBpbW1zOgorICAgICAgICAgICAg
ICAgIGlmIHNpZ24gPT0gInIiOgorICAgICAgICAgICAgICAgICAgICBzaWduID0gInMiCiAgICAg
ICAgICAgICAgICAgaWYgbm90IHNoYW10OgogICAgICAgICAgICAgICAgICAgICBzaGFtdCA9ICIw
IgotICAgICAgICAgICAgICAgIGYud3JpdGUoZicnJywne3NpZ259Jyx7c2l6ZX0se3NoYW10fScn
JykKKyAgICAgICAgICAgICAgICBmLndyaXRlKGYiIiIsJ3tzaWdufScse3NpemV9LHtzaGFtdH0i
IiIpCiAgICAgICAgICAgICBpZiBsZW4oaW1tcykgPT0gMToKICAgICAgICAgICAgICAgICBpZiBz
aWduLmlzdXBwZXIoKToKLSAgICAgICAgICAgICAgICAgICAgbXl1ID0gJ3UnCisgICAgICAgICAg
ICAgICAgICAgIG15dSA9ICJ1IgogICAgICAgICAgICAgICAgIGVsc2U6Ci0gICAgICAgICAgICAg
ICAgICAgIG15dSA9ICdVJwotICAgICAgICAgICAgICAgIGYud3JpdGUoZicnJywne215dX0nLDAs
MCcnJykKLSAgICAgICAgICAgIGYud3JpdGUoJylcbicpCisgICAgICAgICAgICAgICAgICAgIG15
dSA9ICJVIgorICAgICAgICAgICAgICAgIGYud3JpdGUoZiIiIiwne215dX0nLDAsMCIiIikKKyAg
ICAgICAgICAgIGYud3JpdGUoIilcbiIpCisKIAogaWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjoK
ICAgICBtYWluKCkKZGlmZiAtLWdpdCBhL3RhcmdldC9oZXhhZ29uL2dlbl9vcGNvZGVzX2RlZi5w
eSBiL3RhcmdldC9oZXhhZ29uL2dlbl9vcGNvZGVzX2RlZi5weQppbmRleCA1ZWViYzE2ODk4Li5j
ZGRkODY4ZmUzIDEwMDc1NQotLS0gYS90YXJnZXQvaGV4YWdvbi9nZW5fb3Bjb2Rlc19kZWYucHkK
KysrIGIvdGFyZ2V0L2hleGFnb24vZ2VuX29wY29kZXNfZGVmLnB5CkBAIC0yMiwxNSArMjIsMTcg
QEAKIGltcG9ydCBzdHJpbmcKIGltcG9ydCBoZXhfY29tbW9uCiAKKwogZGVmIG1haW4oKToKICAg
ICBoZXhfY29tbW9uLnJlYWRfc2VtYW50aWNzX2ZpbGUoc3lzLmFyZ3ZbMV0pCiAKICAgICAjIwog
ICAgICMjICAgICBHZW5lcmF0ZSBhIGxpc3Qgb2YgYWxsIHRoZSBvcGNvZGVzCiAgICAgIyMKLSAg
ICB3aXRoIG9wZW4oc3lzLmFyZ3ZbM10sICd3JykgYXMgZjoKKyAgICB3aXRoIG9wZW4oc3lzLmFy
Z3ZbM10sICJ3IikgYXMgZjoKICAgICAgICAgZm9yIHRhZyBpbiBoZXhfY29tbW9uLnRhZ3M6CiAg
ICAgICAgICAgICBmLndyaXRlKGYiT1BDT0RFKHt0YWd9KSxcbiIpCiAKKwogaWYgX19uYW1lX18g
PT0gIl9fbWFpbl9fIjoKICAgICBtYWluKCkKZGlmZiAtLWdpdCBhL3RhcmdldC9oZXhhZ29uL2dl
bl9wcmludGluc24ucHkgYi90YXJnZXQvaGV4YWdvbi9nZW5fcHJpbnRpbnNuLnB5CmluZGV4IDRl
YzhkY2FiYjAuLmU1NzBiZDdjNmEgMTAwNzU1Ci0tLSBhL3RhcmdldC9oZXhhZ29uL2dlbl9wcmlu
dGluc24ucHkKKysrIGIvdGFyZ2V0L2hleGFnb24vZ2VuX3ByaW50aW5zbi5weQpAQCAtMjIsMjQg
KzIyLDI2IEBACiBpbXBvcnQgc3RyaW5nCiBpbXBvcnQgaGV4X2NvbW1vbgogCisKICMjCiAjIyAg
ICAgR2VuZXJhdGUgZGF0YSBmb3IgcHJpbnRpbmcgZWFjaCBpbnN0cnVjdGlvbiAoZm9ybWF0IHN0
cmluZyArIG9wZXJhbmRzKQogIyMKIGRlZiByZWdwcmludGVyKG0pOgogICAgIHN0ciA9IG0uZ3Jv
dXAoMSkKLSAgICBzdHIgKz0gIjoiLmpvaW4oWyIlZCJdKmxlbihtLmdyb3VwKDIpKSkKKyAgICBz
dHIgKz0gIjoiLmpvaW4oWyIlZCJdICogbGVuKG0uZ3JvdXAoMikpKQogICAgIHN0ciArPSBtLmdy
b3VwKDMpCi0gICAgaWYgKCdTJyBpbiBtLmdyb3VwKDEpKSBhbmQgKGxlbihtLmdyb3VwKDIpKSA9
PSAxKToKKyAgICBpZiAoIlMiIGluIG0uZ3JvdXAoMSkpIGFuZCAobGVuKG0uZ3JvdXAoMikpID09
IDEpOgogICAgICAgICBzdHIgKz0gIi8lcyIKLSAgICBlbGlmICgnQycgaW4gbS5ncm91cCgxKSkg
YW5kIChsZW4obS5ncm91cCgyKSkgPT0gMSk6CisgICAgZWxpZiAoIkMiIGluIG0uZ3JvdXAoMSkp
IGFuZCAobGVuKG0uZ3JvdXAoMikpID09IDEpOgogICAgICAgICBzdHIgKz0gIi8lcyIKICAgICBy
ZXR1cm4gc3RyCiAKKwogZGVmIHNwYWNpZnkocyk6CiAgICAgIyBSZWd1bGFyIGV4cHJlc3Npb24g
dGhhdCBtYXRjaGVzIGFueSBvcGVyYXRvciB0aGF0IGNvbnRhaW5zICc9JyBjaGFyYWN0ZXI6Ci0g
ICAgb3Bzd2l0aGVxdWFsX3JlID0gJ1stK14mfCE8Pj1dPz0nCisgICAgb3Bzd2l0aGVxdWFsX3Jl
ID0gIlstK14mfCE8Pj1dPz0iCiAgICAgIyBSZWd1bGFyIGV4cHJlc3Npb24gdGhhdCBtYXRjaGVz
IGFueSBhc3NpZ25tZW50IG9wZXJhdG9yLgotICAgIGFzc2lnbm1lbnRfcmUgPSAnWy0rXiZ8XT89
JworICAgIGFzc2lnbm1lbnRfcmUgPSAiWy0rXiZ8XT89IgogCiAgICAgIyBPdXQgb2YgdGhlIG9w
ZXJhdG9ycyB0aGF0IGNvbnRhaW4gdGhlID0gc2lnbiwgaWYgdGhlIG9wZXJhdG9yIGlzIGFsc28g
YW4KICAgICAjIGFzc2lnbm1lbnQsIHNwYWNlcyB3aWxsIGJlIGFkZGVkIGFyb3VuZCBpdCwgdW5s
ZXNzIGl0J3MgZW5jbG9zZWQgd2l0aGluCkBAIC01NCw5ICs1Niw5IEBAIGRlZiBzcGFjaWZ5KHMp
OgogICAgIHBjID0gMAogICAgIHdoaWxlIGkgPCBzbGVuOgogICAgICAgICBjID0gc1tpXQotICAg
ICAgICBpZiBjID09ICcoJzoKKyAgICAgICAgaWYgYyA9PSAiKCI6CiAgICAgICAgICAgICBwYyAr
PSAxCi0gICAgICAgIGVsaWYgYyA9PSAnKSc6CisgICAgICAgIGVsaWYgYyA9PSAiKSI6CiAgICAg
ICAgICAgICBwYyAtPSAxCiAgICAgICAgIHBhcmVuX2NvdW50W2ldID0gcGMKICAgICAgICAgaSAr
PSAxCkBAIC03NiwzMSArNzgsMzMgQEAgZGVmIHNwYWNpZnkocyk6CiAgICAgICAgIGlmIHBhcmVu
X2NvdW50W21zXSA9PSAwOgogICAgICAgICAgICAgIyBDaGVjayBpZiB0aGUgZW50aXJlIHN0cmlu
ZyB0IGlzIGFuIGFzc2lnbm1lbnQuCiAgICAgICAgICAgICBhbSA9IGFzc2lnbi5tYXRjaCh0KQot
ICAgICAgICAgICAgaWYgYW0gYW5kIGxlbihhbS5ncm91cCgwKSkgPT0gbWUtbXM6CisgICAgICAg
ICAgICBpZiBhbSBhbmQgbGVuKGFtLmdyb3VwKDApKSA9PSBtZSAtIG1zOgogICAgICAgICAgICAg
ICAgICMgRG9uJ3QgYWRkIHNwYWNlcyBpZiB0aGV5IGFyZSBhbHJlYWR5IHRoZXJlLgotICAgICAg
ICAgICAgICAgIGlmIG1zID4gMCBhbmQgc1ttcy0xXSAhPSAnICc6Ci0gICAgICAgICAgICAgICAg
ICAgIG91dC5hcHBlbmQoJyAnKQorICAgICAgICAgICAgICAgIGlmIG1zID4gMCBhbmQgc1ttcyAt
IDFdICE9ICIgIjoKKyAgICAgICAgICAgICAgICAgICAgb3V0LmFwcGVuZCgiICIpCiAgICAgICAg
ICAgICAgICAgb3V0ICs9IHQKLSAgICAgICAgICAgICAgICBpZiBtZSA8IHNsZW4gYW5kIHNbbWVd
ICE9ICcgJzoKLSAgICAgICAgICAgICAgICAgICAgb3V0LmFwcGVuZCgnICcpCisgICAgICAgICAg
ICAgICAgaWYgbWUgPCBzbGVuIGFuZCBzW21lXSAhPSAiICI6CisgICAgICAgICAgICAgICAgICAg
IG91dC5hcHBlbmQoIiAiKQogICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICMgSWYg
dGhpcyBpcyBub3QgYW4gYXNzaWdubWVudCwganVzdCBhcHBlbmQgaXQgdG8gdGhlIG91dHB1dAog
ICAgICAgICAjIHN0cmluZy4KICAgICAgICAgb3V0ICs9IHQKIAogICAgICMgQXBwZW5kIHRoZSBy
ZW1haW5pbmcgcGFydCBvZiB0aGUgc3RyaW5nLgotICAgIG91dCArPSBzW3BvczpsZW4ocyldCi0g
ICAgcmV0dXJuICcnLmpvaW4ob3V0KQorICAgIG91dCArPSBzW3BvcyA6IGxlbihzKV0KKyAgICBy
ZXR1cm4gIiIuam9pbihvdXQpCisKIAogZGVmIG1haW4oKToKICAgICBoZXhfY29tbW9uLnJlYWRf
c2VtYW50aWNzX2ZpbGUoc3lzLmFyZ3ZbMV0pCiAgICAgaGV4X2NvbW1vbi5yZWFkX2F0dHJpYnNf
ZmlsZShzeXMuYXJndlsyXSkKIAotICAgIGltbWV4dF9jYXNlcmUgPSByZS5jb21waWxlKHInSU1N
RVhUXCgoW0EtWmEtel0pJykKKyAgICBpbW1leHRfY2FzZXJlID0gcmUuY29tcGlsZShyIklNTUVY
VFwoKFtBLVphLXpdKSIpCiAKLSAgICB3aXRoIG9wZW4oc3lzLmFyZ3ZbM10sICd3JykgYXMgZjoK
KyAgICB3aXRoIG9wZW4oc3lzLmFyZ3ZbM10sICJ3IikgYXMgZjoKICAgICAgICAgZm9yIHRhZyBp
biBoZXhfY29tbW9uLnRhZ3M6Ci0gICAgICAgICAgICBpZiBub3QgaGV4X2NvbW1vbi5iZWhkaWN0
W3RhZ106IGNvbnRpbnVlCisgICAgICAgICAgICBpZiBub3QgaGV4X2NvbW1vbi5iZWhkaWN0W3Rh
Z106CisgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgIGV4dGVuZGFibGVfdXBw
ZXJfaW1tID0gRmFsc2UKICAgICAgICAgICAgIGV4dGVuZGFibGVfbG93ZXJfaW1tID0gRmFsc2UK
ICAgICAgICAgICAgIG0gPSBpbW1leHRfY2FzZXJlLnNlYXJjaChoZXhfY29tbW9uLnNlbWRpY3Rb
dGFnXSkKQEAgLTExMCw0NiArMTE0LDQ1IEBAIGRlZiBtYWluKCk6CiAgICAgICAgICAgICAgICAg
ZWxzZToKICAgICAgICAgICAgICAgICAgICAgZXh0ZW5kYWJsZV9sb3dlcl9pbW0gPSBUcnVlCiAg
ICAgICAgICAgICBiZWggPSBoZXhfY29tbW9uLmJlaGRpY3RbdGFnXQotICAgICAgICAgICAgYmVo
ID0gaGV4X2NvbW1vbi5yZWdyZS5zdWIocmVncHJpbnRlcixiZWgpCi0gICAgICAgICAgICBiZWgg
PSBoZXhfY29tbW9uLmFic2ltbXJlLnN1YihyIiMlczB4JXgiLGJlaCkKLSAgICAgICAgICAgIGJl
aCA9IGhleF9jb21tb24ucmVsaW1tcmUuc3ViKHIiUEMrJXMlZCIsYmVoKQorICAgICAgICAgICAg
YmVoID0gaGV4X2NvbW1vbi5yZWdyZS5zdWIocmVncHJpbnRlciwgYmVoKQorICAgICAgICAgICAg
YmVoID0gaGV4X2NvbW1vbi5hYnNpbW1yZS5zdWIociIjJXMweCV4IiwgYmVoKQorICAgICAgICAg
ICAgYmVoID0gaGV4X2NvbW1vbi5yZWxpbW1yZS5zdWIociJQQyslcyVkIiwgYmVoKQogICAgICAg
ICAgICAgYmVoID0gc3BhY2lmeShiZWgpCiAgICAgICAgICAgICAjIFByaW50IG91dCBhIGxpdGVy
YWwgIiVzIiBhdCB0aGUgZW5kLCB1c2VkIHRvIG1hdGNoIGVtcHR5IHN0cmluZwogICAgICAgICAg
ICAgIyBzbyBDIHdvbid0IGNvbXBsYWluIGF0IHVzCi0gICAgICAgICAgICBpZiAoIkFfVkVDWCIg
aW4gaGV4X2NvbW1vbi5hdHRyaWJkaWN0W3RhZ10pOgorICAgICAgICAgICAgaWYgIkFfVkVDWCIg
aW4gaGV4X2NvbW1vbi5hdHRyaWJkaWN0W3RhZ106CiAgICAgICAgICAgICAgICAgbWFjbmFtZSA9
ICJERUZfVkVDWF9QUklOVElORk8iCi0gICAgICAgICAgICBlbHNlOiBtYWNuYW1lID0gIkRFRl9Q
UklOVElORk8iCisgICAgICAgICAgICBlbHNlOgorICAgICAgICAgICAgICAgIG1hY25hbWUgPSAi
REVGX1BSSU5USU5GTyIKICAgICAgICAgICAgIGYud3JpdGUoZid7bWFjbmFtZX0oe3RhZ30sInti
ZWh9JXMiJykKLSAgICAgICAgICAgIHJlZ3Nfb3JfaW1tcyA9IFwKLSAgICAgICAgICAgICAgICBo
ZXhfY29tbW9uLnJlZ19vcl9pbW1yZS5maW5kYWxsKGhleF9jb21tb24uYmVoZGljdFt0YWddKQor
ICAgICAgICAgICAgcmVnc19vcl9pbW1zID0gaGV4X2NvbW1vbi5yZWdfb3JfaW1tcmUuZmluZGFs
bChoZXhfY29tbW9uLmJlaGRpY3RbdGFnXSkKICAgICAgICAgICAgIHJpID0gMAogICAgICAgICAg
ICAgc2VlbnJlZ3MgPSB7fQotICAgICAgICAgICAgZm9yIGFsbHJlZ3MsYSxiLGMsZCxhbGxpbW0s
aW1tbGV0dCxiaXRzLGltbXNoaWZ0IGluIHJlZ3Nfb3JfaW1tczoKKyAgICAgICAgICAgIGZvciBh
bGxyZWdzLCBhLCBiLCBjLCBkLCBhbGxpbW0sIGltbWxldHQsIGJpdHMsIGltbXNoaWZ0IGluIHJl
Z3Nfb3JfaW1tczoKICAgICAgICAgICAgICAgICBpZiBhOgotICAgICAgICAgICAgICAgICAgICAj
cmVnaXN0ZXIKKyAgICAgICAgICAgICAgICAgICAgIyByZWdpc3RlcgogICAgICAgICAgICAgICAg
ICAgICBpZiBiIGluIHNlZW5yZWdzOgogICAgICAgICAgICAgICAgICAgICAgICAgcmVnbm8gPSBz
ZWVucmVnc1tiXQogICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAg
ICAgICAgcmVnbm8gPSByaQogICAgICAgICAgICAgICAgICAgICBpZiBsZW4oYikgPT0gMToKLSAg
ICAgICAgICAgICAgICAgICAgICAgIGYud3JpdGUoZicsIGluc24tPnJlZ25vW3tyZWdub31dJykK
LSAgICAgICAgICAgICAgICAgICAgICAgIGlmICdTJyBpbiBhOgotICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIGYud3JpdGUoZicsIHNyZWcyc3RyKGluc24tPnJlZ25vW3tyZWdub31dKScpCi0g
ICAgICAgICAgICAgICAgICAgICAgICBlbGlmICdDJyBpbiBhOgotICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIGYud3JpdGUoZicsIGNyZWcyc3RyKGluc24tPnJlZ25vW3tyZWdub31dKScpCisg
ICAgICAgICAgICAgICAgICAgICAgICBmLndyaXRlKGYiLCBpbnNuLT5yZWdub1t7cmVnbm99XSIp
CisgICAgICAgICAgICAgICAgICAgICAgICBpZiAiUyIgaW4gYToKKyAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBmLndyaXRlKGYiLCBzcmVnMnN0cihpbnNuLT5yZWdub1t7cmVnbm99XSkiKQor
ICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiAiQyIgaW4gYToKKyAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBmLndyaXRlKGYiLCBjcmVnMnN0cihpbnNuLT5yZWdub1t7cmVnbm99XSkiKQog
ICAgICAgICAgICAgICAgICAgICBlbGlmIGxlbihiKSA9PSAyOgotICAgICAgICAgICAgICAgICAg
ICAgICAgZi53cml0ZShmJywgaW5zbi0+cmVnbm9be3JlZ25vfV0gKyAxJwotICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBmJywgaW5zbi0+cmVnbm9be3JlZ25vfV0nKQorICAgICAgICAg
ICAgICAgICAgICAgICAgZi53cml0ZShmIiwgaW5zbi0+cmVnbm9be3JlZ25vfV0gKyAxIiBmIiwg
aW5zbi0+cmVnbm9be3JlZ25vfV0iKQogICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAg
ICAgICAgICAgICAgICAgICAgcHJpbnQoIlB1dCBzb21lIHN0dWZmIHRvIGhhbmRsZSBxdWFkcyBo
ZXJlIikKICAgICAgICAgICAgICAgICAgICAgaWYgYiBub3QgaW4gc2VlbnJlZ3M6CiAgICAgICAg
ICAgICAgICAgICAgICAgICBzZWVucmVnc1tiXSA9IHJpCiAgICAgICAgICAgICAgICAgICAgICAg
ICByaSArPSAxCiAgICAgICAgICAgICAgICAgZWxzZToKLSAgICAgICAgICAgICAgICAgICAgI2lt
bWVkaWF0ZQotICAgICAgICAgICAgICAgICAgICBpZiAoaW1tbGV0dC5pc3VwcGVyKCkpOgorICAg
ICAgICAgICAgICAgICAgICAjIGltbWVkaWF0ZQorICAgICAgICAgICAgICAgICAgICBpZiBpbW1s
ZXR0LmlzdXBwZXIoKToKICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGV4dGVuZGFibGVfdXBw
ZXJfaW1tOgotICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGltbWxldHQgaW4gJ3JSJzoK
KyAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBpbW1sZXR0IGluICJyUiI6CiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIGYud3JpdGUoJyxpbnNuLT5leHRlbnNpb25fdmFsaWQ/
IiMjIjoiIicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgZi53cml0ZSgnLGluc24tPmV4dGVuc2lvbl92YWxpZD8iIyI6
IiInKQpAQCAtMTU4LDE2ICsxNjEsMTcgQEAgZGVmIG1haW4oKToKICAgICAgICAgICAgICAgICAg
ICAgICAgIGlpID0gMQogICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAg
ICAgICAgICAgaWYgZXh0ZW5kYWJsZV9sb3dlcl9pbW06Ci0gICAgICAgICAgICAgICAgICAgICAg
ICAgICAgaWYgaW1tbGV0dCBpbiAnclInOgorICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlm
IGltbWxldHQgaW4gInJSIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZi53cml0
ZSgnLGluc24tPmV4dGVuc2lvbl92YWxpZD8iIyMiOiIiJykKICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmLndyaXRlKCcs
aW5zbi0+ZXh0ZW5zaW9uX3ZhbGlkPyIjIjoiIicpCiAgICAgICAgICAgICAgICAgICAgICAgICBl
bHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYud3JpdGUoJywiIicpCiAgICAgICAg
ICAgICAgICAgICAgICAgICBpaSA9IDAKLSAgICAgICAgICAgICAgICAgICAgZi53cml0ZShmJywg
aW5zbi0+aW1tZWRbe2lpfV0nKQorICAgICAgICAgICAgICAgICAgICBmLndyaXRlKGYiLCBpbnNu
LT5pbW1lZFt7aWl9XSIpCiAgICAgICAgICAgICAjIGFwcGVuZCBlbXB0eSBzdHJpbmcgc28gdGhl
cmUgaXMgYXQgbGVhc3Qgb25lIG1vcmUgYXJnCiAgICAgICAgICAgICBmLndyaXRlKCcsIiIpXG4n
KQogCisKIGlmIF9fbmFtZV9fID09ICJfX21haW5fXyI6CiAgICAgbWFpbigpCmRpZmYgLS1naXQg
YS90YXJnZXQvaGV4YWdvbi9nZW5fc2hvcnRjb2RlLnB5IGIvdGFyZ2V0L2hleGFnb24vZ2VuX3No
b3J0Y29kZS5weQppbmRleCA5YTA5M2E4OTAyLi5kZWI5NDQ0NmM0IDEwMDc1NQotLS0gYS90YXJn
ZXQvaGV4YWdvbi9nZW5fc2hvcnRjb2RlLnB5CisrKyBiL3RhcmdldC9oZXhhZ29uL2dlbl9zaG9y
dGNvZGUucHkKQEAgLTIyLDggKzIyLDEwIEBACiBpbXBvcnQgc3RyaW5nCiBpbXBvcnQgaGV4X2Nv
bW1vbgogCisKIGRlZiBnZW5fc2hvcnRjb2RlKGYsIHRhZyk6Ci0gICAgZi53cml0ZShmJ0RFRl9T
SE9SVENPREUoe3RhZ30sIHtoZXhfY29tbW9uLnNlbWRpY3RbdGFnXX0pXG4nKQorICAgIGYud3Jp
dGUoZiJERUZfU0hPUlRDT0RFKHt0YWd9LCB7aGV4X2NvbW1vbi5zZW1kaWN0W3RhZ119KVxuIikK
KwogCiBkZWYgbWFpbigpOgogICAgIGhleF9jb21tb24ucmVhZF9zZW1hbnRpY3NfZmlsZShzeXMu
YXJndlsxXSkKQEAgLTMyLDI5ICszNCwzMCBAQCBkZWYgbWFpbigpOgogICAgIHRhZ3JlZ3MgPSBo
ZXhfY29tbW9uLmdldF90YWdyZWdzKCkKICAgICB0YWdpbW1zID0gaGV4X2NvbW1vbi5nZXRfdGFn
aW1tcygpCiAKLSAgICB3aXRoIG9wZW4oc3lzLmFyZ3ZbM10sICd3JykgYXMgZjoKKyAgICB3aXRo
IG9wZW4oc3lzLmFyZ3ZbM10sICJ3IikgYXMgZjoKICAgICAgICAgZi53cml0ZSgiI2lmbmRlZiBE
RUZfU0hPUlRDT0RFXG4iKQogICAgICAgICBmLndyaXRlKCIjZGVmaW5lIERFRl9TSE9SVENPREUo
VEFHLFNIT1JUQ09ERSkgICAgLyogTm90aGluZyAqL1xuIikKICAgICAgICAgZi53cml0ZSgiI2Vu
ZGlmXG4iKQogCiAgICAgICAgIGZvciB0YWcgaW4gaGV4X2NvbW1vbi50YWdzOgogICAgICAgICAg
ICAgIyMgU2tpcCB0aGUgcHJpdiBpbnN0cnVjdGlvbnMKLSAgICAgICAgICAgIGlmICggIkFfUFJJ
ViIgaW4gaGV4X2NvbW1vbi5hdHRyaWJkaWN0W3RhZ10gKSA6CisgICAgICAgICAgICBpZiAiQV9Q
UklWIiBpbiBoZXhfY29tbW9uLmF0dHJpYmRpY3RbdGFnXToKICAgICAgICAgICAgICAgICBjb250
aW51ZQogICAgICAgICAgICAgIyMgU2tpcCB0aGUgZ3Vlc3QgaW5zdHJ1Y3Rpb25zCi0gICAgICAg
ICAgICBpZiAoICJBX0dVRVNUIiBpbiBoZXhfY29tbW9uLmF0dHJpYmRpY3RbdGFnXSApIDoKKyAg
ICAgICAgICAgIGlmICJBX0dVRVNUIiBpbiBoZXhfY29tbW9uLmF0dHJpYmRpY3RbdGFnXToKICAg
ICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgIyMgU2tpcCB0aGUgZGlhZyBpbnN0
cnVjdGlvbnMKLSAgICAgICAgICAgIGlmICggdGFnID09ICJZNl9kaWFnIiApIDoKKyAgICAgICAg
ICAgIGlmIHRhZyA9PSAiWTZfZGlhZyI6CiAgICAgICAgICAgICAgICAgY29udGludWUKLSAgICAg
ICAgICAgIGlmICggdGFnID09ICJZNl9kaWFnMCIgKSA6CisgICAgICAgICAgICBpZiB0YWcgPT0g
Ilk2X2RpYWcwIjoKICAgICAgICAgICAgICAgICBjb250aW51ZQotICAgICAgICAgICAgaWYgKCB0
YWcgPT0gIlk2X2RpYWcxIiApIDoKKyAgICAgICAgICAgIGlmIHRhZyA9PSAiWTZfZGlhZzEiOgog
ICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAKICAgICAgICAgICAgIGdlbl9zaG9ydGNvZGUoZiwg
dGFnKQogCiAgICAgICAgIGYud3JpdGUoIiN1bmRlZiBERUZfU0hPUlRDT0RFXG4iKQogCisKIGlm
IF9fbmFtZV9fID09ICJfX21haW5fXyI6CiAgICAgbWFpbigpCmRpZmYgLS1naXQgYS90YXJnZXQv
aGV4YWdvbi9nZW5fdGNnX2Z1bmNfdGFibGUucHkgYi90YXJnZXQvaGV4YWdvbi9nZW5fdGNnX2Z1
bmNfdGFibGUucHkKaW5kZXggODMxOWRhZjk2YS4uZjk5OGVmMDk5MiAxMDA3NTUKLS0tIGEvdGFy
Z2V0L2hleGFnb24vZ2VuX3RjZ19mdW5jX3RhYmxlLnB5CisrKyBiL3RhcmdldC9oZXhhZ29uL2dl
bl90Y2dfZnVuY190YWJsZS5weQpAQCAtMjIsNiArMjIsNyBAQAogaW1wb3J0IHN0cmluZwogaW1w
b3J0IGhleF9jb21tb24KIAorCiBkZWYgbWFpbigpOgogICAgIGhleF9jb21tb24ucmVhZF9zZW1h
bnRpY3NfZmlsZShzeXMuYXJndlsxXSkKICAgICBoZXhfY29tbW9uLnJlYWRfYXR0cmlic19maWxl
KHN5cy5hcmd2WzJdKQpAQCAtMjksMjQgKzMwLDI0IEBAIGRlZiBtYWluKCk6CiAgICAgdGFncmVn
cyA9IGhleF9jb21tb24uZ2V0X3RhZ3JlZ3MoKQogICAgIHRhZ2ltbXMgPSBoZXhfY29tbW9uLmdl
dF90YWdpbW1zKCkKIAotICAgIHdpdGggb3BlbihzeXMuYXJndlszXSwgJ3cnKSBhcyBmOgorICAg
IHdpdGggb3BlbihzeXMuYXJndlszXSwgInciKSBhcyBmOgogICAgICAgICBmLndyaXRlKCIjaWZu
ZGVmIEhFWEFHT05fRlVOQ19UQUJMRV9IXG4iKQogICAgICAgICBmLndyaXRlKCIjZGVmaW5lIEhF
WEFHT05fRlVOQ19UQUJMRV9IXG5cbiIpCiAKICAgICAgICAgZi53cml0ZSgiY29uc3QgU2VtYW50
aWNJbnNuIG9wY29kZV9nZW5wdHJbWFhfTEFTVF9PUENPREVdID0ge1xuIikKICAgICAgICAgZm9y
IHRhZyBpbiBoZXhfY29tbW9uLnRhZ3M6CiAgICAgICAgICAgICAjIyBTa2lwIHRoZSBwcml2IGlu
c3RydWN0aW9ucwotICAgICAgICAgICAgaWYgKCAiQV9QUklWIiBpbiBoZXhfY29tbW9uLmF0dHJp
YmRpY3RbdGFnXSApIDoKKyAgICAgICAgICAgIGlmICJBX1BSSVYiIGluIGhleF9jb21tb24uYXR0
cmliZGljdFt0YWddOgogICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAjIyBT
a2lwIHRoZSBndWVzdCBpbnN0cnVjdGlvbnMKLSAgICAgICAgICAgIGlmICggIkFfR1VFU1QiIGlu
IGhleF9jb21tb24uYXR0cmliZGljdFt0YWddICkgOgorICAgICAgICAgICAgaWYgIkFfR1VFU1Qi
IGluIGhleF9jb21tb24uYXR0cmliZGljdFt0YWddOgogICAgICAgICAgICAgICAgIGNvbnRpbnVl
CiAgICAgICAgICAgICAjIyBTa2lwIHRoZSBkaWFnIGluc3RydWN0aW9ucwotICAgICAgICAgICAg
aWYgKCB0YWcgPT0gIlk2X2RpYWciICkgOgorICAgICAgICAgICAgaWYgdGFnID09ICJZNl9kaWFn
IjoKICAgICAgICAgICAgICAgICBjb250aW51ZQotICAgICAgICAgICAgaWYgKCB0YWcgPT0gIlk2
X2RpYWcwIiApIDoKKyAgICAgICAgICAgIGlmIHRhZyA9PSAiWTZfZGlhZzAiOgogICAgICAgICAg
ICAgICAgIGNvbnRpbnVlCi0gICAgICAgICAgICBpZiAoIHRhZyA9PSAiWTZfZGlhZzEiICkgOgor
ICAgICAgICAgICAgaWYgdGFnID09ICJZNl9kaWFnMSI6CiAgICAgICAgICAgICAgICAgY29udGlu
dWUKIAogICAgICAgICAgICAgZi53cml0ZShmIiAgICBbe3RhZ31dID0gZ2VuZXJhdGVfe3RhZ30s
XG4iKQpAQCAtNTQsNSArNTUsNiBAQCBkZWYgbWFpbigpOgogCiAgICAgICAgIGYud3JpdGUoIiNl
bmRpZiAgICAvKiBIRVhBR09OX0ZVTkNfVEFCTEVfSCAqL1xuIikKIAorCiBpZiBfX25hbWVfXyA9
PSAiX19tYWluX18iOgogICAgIG1haW4oKQpkaWZmIC0tZ2l0IGEvdGFyZ2V0L2hleGFnb24vZ2Vu
X3RjZ19mdW5jcy5weSBiL3RhcmdldC9oZXhhZ29uL2dlbl90Y2dfZnVuY3MucHkKaW5kZXggMjg1
YjNhYmUzYS4uZmNiMzM4NDQ4MCAxMDA3NTUKLS0tIGEvdGFyZ2V0L2hleGFnb24vZ2VuX3RjZ19m
dW5jcy5weQorKysgYi90YXJnZXQvaGV4YWdvbi9nZW5fdGNnX2Z1bmNzLnB5CkBAIC0yMiwyNDkg
KzIyLDI3NyBAQAogaW1wb3J0IHN0cmluZwogaW1wb3J0IGhleF9jb21tb24KIAorCiAjIwogIyMg
SGVscGVycyBmb3IgZ2VuX3RjZ19mdW5jCiAjIwogZGVmIGdlbl9kZWNsX2VhX3RjZyhmLCB0YWcp
OgogICAgIGYud3JpdGUoIiAgICBUQ0d2IEVBIEdfR05VQ19VTlVTRUQgPSB0Y2dfdGVtcF9uZXco
KTtcbiIpCiAKKwogZGVmIGdlbnB0cl9kZWNsX3BhaXJfd3JpdGFibGUoZiwgdGFnLCByZWd0eXBl
LCByZWdpZCwgcmVnbm8pOgotICAgIHJlZ049ZiJ7cmVndHlwZX17cmVnaWR9TiIKLSAgICBpZiAo
cmVndHlwZSA9PSAiUiIpOgorICAgIHJlZ04gPSBmIntyZWd0eXBlfXtyZWdpZH1OIgorICAgIGlm
IHJlZ3R5cGUgPT0gIlIiOgogICAgICAgICBmLndyaXRlKGYiICAgIGNvbnN0IGludCB7cmVnTn0g
PSBpbnNuLT5yZWdub1t7cmVnbm99XTtcbiIpCi0gICAgZWxpZiAocmVndHlwZSA9PSAiQyIpOgor
ICAgIGVsaWYgcmVndHlwZSA9PSAiQyI6CiAgICAgICAgIGYud3JpdGUoZiIgICAgY29uc3QgaW50
IHtyZWdOfSA9IGluc24tPnJlZ25vW3tyZWdub31dICsgSEVYX1JFR19TQTA7XG4iKQogICAgIGVs
c2U6CiAgICAgICAgIHByaW50KCJCYWQgcmVnaXN0ZXIgcGFyc2U6ICIsIHJlZ3R5cGUsIHJlZ2lk
KQotICAgIGYud3JpdGUoZiIgICAgVENHdl9pNjQge3JlZ3R5cGV9e3JlZ2lkfVYgPSAiCi0gICAg
ICAgICAgICBmImdldF9yZXN1bHRfZ3ByX3BhaXIoY3R4LCB7cmVnTn0pO1xuIikKKyAgICBmLndy
aXRlKGYiICAgIFRDR3ZfaTY0IHtyZWd0eXBlfXtyZWdpZH1WID0gIiBmImdldF9yZXN1bHRfZ3By
X3BhaXIoY3R4LCB7cmVnTn0pO1xuIikKKwogCiBkZWYgZ2VucHRyX2RlY2xfd3JpdGFibGUoZiwg
dGFnLCByZWd0eXBlLCByZWdpZCwgcmVnbm8pOgotICAgIHJlZ049ZiJ7cmVndHlwZX17cmVnaWR9
TiIKLSAgICBpZiAocmVndHlwZSA9PSAiUiIpOgorICAgIHJlZ04gPSBmIntyZWd0eXBlfXtyZWdp
ZH1OIgorICAgIGlmIHJlZ3R5cGUgPT0gIlIiOgogICAgICAgICBmLndyaXRlKGYiICAgIGNvbnN0
IGludCB7cmVnTn0gPSBpbnNuLT5yZWdub1t7cmVnbm99XTtcbiIpCiAgICAgICAgIGYud3JpdGUo
ZiIgICAgVENHdiB7cmVndHlwZX17cmVnaWR9ViA9IGdldF9yZXN1bHRfZ3ByKGN0eCwge3JlZ059
KTtcbiIpCi0gICAgZWxpZiAocmVndHlwZSA9PSAiQyIpOgorICAgIGVsaWYgcmVndHlwZSA9PSAi
QyI6CiAgICAgICAgIGYud3JpdGUoZiIgICAgY29uc3QgaW50IHtyZWdOfSA9IGluc24tPnJlZ25v
W3tyZWdub31dICsgSEVYX1JFR19TQTA7XG4iKQogICAgICAgICBmLndyaXRlKGYiICAgIFRDR3Yg
e3JlZ3R5cGV9e3JlZ2lkfVYgPSBnZXRfcmVzdWx0X2dwcihjdHgsIHtyZWdOfSk7XG4iKQotICAg
IGVsaWYgKHJlZ3R5cGUgPT0gIlAiKToKKyAgICBlbGlmIHJlZ3R5cGUgPT0gIlAiOgogICAgICAg
ICBmLndyaXRlKGYiICAgIGNvbnN0IGludCB7cmVnTn0gPSBpbnNuLT5yZWdub1t7cmVnbm99XTtc
biIpCiAgICAgICAgIGYud3JpdGUoZiIgICAgVENHdiB7cmVndHlwZX17cmVnaWR9ViA9IHRjZ190
ZW1wX25ldygpO1xuIikKICAgICBlbHNlOgogICAgICAgICBwcmludCgiQmFkIHJlZ2lzdGVyIHBh
cnNlOiAiLCByZWd0eXBlLCByZWdpZCkKIAorCiBkZWYgZ2VucHRyX2RlY2woZiwgdGFnLCByZWd0
eXBlLCByZWdpZCwgcmVnbm8pOgotICAgIHJlZ049ZiJ7cmVndHlwZX17cmVnaWR9TiIKLSAgICBp
ZiAocmVndHlwZSA9PSAiUiIpOgotICAgICAgICBpZiAocmVnaWQgaW4geyJzcyIsICJ0dCJ9KToK
KyAgICByZWdOID0gZiJ7cmVndHlwZX17cmVnaWR9TiIKKyAgICBpZiByZWd0eXBlID09ICJSIjoK
KyAgICAgICAgaWYgcmVnaWQgaW4geyJzcyIsICJ0dCJ9OgogICAgICAgICAgICAgZi53cml0ZShm
IiAgICBUQ0d2X2k2NCB7cmVndHlwZX17cmVnaWR9ViA9IHRjZ190ZW1wX25ld19pNjQoKTtcbiIp
CiAgICAgICAgICAgICBmLndyaXRlKGYiICAgIGNvbnN0IGludCB7cmVnTn0gPSBpbnNuLT5yZWdu
b1t7cmVnbm99XTtcbiIpCi0gICAgICAgIGVsaWYgKHJlZ2lkIGluIHsiZGQiLCAiZWUiLCAieHgi
LCAieXkifSk6CisgICAgICAgIGVsaWYgcmVnaWQgaW4geyJkZCIsICJlZSIsICJ4eCIsICJ5eSJ9
OgogICAgICAgICAgICAgZ2VucHRyX2RlY2xfcGFpcl93cml0YWJsZShmLCB0YWcsIHJlZ3R5cGUs
IHJlZ2lkLCByZWdubykKLSAgICAgICAgZWxpZiAocmVnaWQgaW4geyJzIiwgInQiLCAidSIsICJ2
In0pOgotICAgICAgICAgICAgZi53cml0ZShmIiAgICBUQ0d2IHtyZWd0eXBlfXtyZWdpZH1WID0g
IgotICAgICAgICAgICAgICAgICAgICBmImhleF9ncHJbaW5zbi0+cmVnbm9be3JlZ25vfV1dO1xu
IikKLSAgICAgICAgZWxpZiAocmVnaWQgaW4geyJkIiwgImUiLCAieCIsICJ5In0pOgorICAgICAg
ICBlbGlmIHJlZ2lkIGluIHsicyIsICJ0IiwgInUiLCAidiJ9OgorICAgICAgICAgICAgZi53cml0
ZSgKKyAgICAgICAgICAgICAgICBmIiAgICBUQ0d2IHtyZWd0eXBlfXtyZWdpZH1WID0gIiBmImhl
eF9ncHJbaW5zbi0+cmVnbm9be3JlZ25vfV1dO1xuIgorICAgICAgICAgICAgKQorICAgICAgICBl
bGlmIHJlZ2lkIGluIHsiZCIsICJlIiwgIngiLCAieSJ9OgogICAgICAgICAgICAgZ2VucHRyX2Rl
Y2xfd3JpdGFibGUoZiwgdGFnLCByZWd0eXBlLCByZWdpZCwgcmVnbm8pCiAgICAgICAgIGVsc2U6
CiAgICAgICAgICAgICBwcmludCgiQmFkIHJlZ2lzdGVyIHBhcnNlOiAiLCByZWd0eXBlLCByZWdp
ZCkKLSAgICBlbGlmIChyZWd0eXBlID09ICJQIik6Ci0gICAgICAgIGlmIChyZWdpZCBpbiB7InMi
LCAidCIsICJ1IiwgInYifSk6Ci0gICAgICAgICAgICBmLndyaXRlKGYiICAgIFRDR3Yge3JlZ3R5
cGV9e3JlZ2lkfVYgPSAiCi0gICAgICAgICAgICAgICAgICAgIGYiaGV4X3ByZWRbaW5zbi0+cmVn
bm9be3JlZ25vfV1dO1xuIikKLSAgICAgICAgZWxpZiAocmVnaWQgaW4geyJkIiwgImUiLCAieCJ9
KToKKyAgICBlbGlmIHJlZ3R5cGUgPT0gIlAiOgorICAgICAgICBpZiByZWdpZCBpbiB7InMiLCAi
dCIsICJ1IiwgInYifToKKyAgICAgICAgICAgIGYud3JpdGUoCisgICAgICAgICAgICAgICAgZiIg
ICAgVENHdiB7cmVndHlwZX17cmVnaWR9ViA9ICIgZiJoZXhfcHJlZFtpbnNuLT5yZWdub1t7cmVn
bm99XV07XG4iCisgICAgICAgICAgICApCisgICAgICAgIGVsaWYgcmVnaWQgaW4geyJkIiwgImUi
LCAieCJ9OgogICAgICAgICAgICAgZ2VucHRyX2RlY2xfd3JpdGFibGUoZiwgdGFnLCByZWd0eXBl
LCByZWdpZCwgcmVnbm8pCiAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICBwcmludCgiQmFkIHJl
Z2lzdGVyIHBhcnNlOiAiLCByZWd0eXBlLCByZWdpZCkKLSAgICBlbGlmIChyZWd0eXBlID09ICJD
Iik6Ci0gICAgICAgIGlmIChyZWdpZCA9PSAic3MiKToKLSAgICAgICAgICAgIGYud3JpdGUoZiIg
ICAgVENHdl9pNjQge3JlZ3R5cGV9e3JlZ2lkfVYgPSAiCi0gICAgICAgICAgICAgICAgICAgIGYi
dGNnX3RlbXBfbmV3X2k2NCgpO1xuIikKLSAgICAgICAgICAgIGYud3JpdGUoZiIgICAgY29uc3Qg
aW50IHtyZWdOfSA9IGluc24tPnJlZ25vW3tyZWdub31dICsgIgotICAgICAgICAgICAgICAgICAg
ICAiSEVYX1JFR19TQTA7XG4iKQotICAgICAgICBlbGlmIChyZWdpZCA9PSAiZGQiKToKKyAgICBl
bGlmIHJlZ3R5cGUgPT0gIkMiOgorICAgICAgICBpZiByZWdpZCA9PSAic3MiOgorICAgICAgICAg
ICAgZi53cml0ZShmIiAgICBUQ0d2X2k2NCB7cmVndHlwZX17cmVnaWR9ViA9ICIgZiJ0Y2dfdGVt
cF9uZXdfaTY0KCk7XG4iKQorICAgICAgICAgICAgZi53cml0ZShmIiAgICBjb25zdCBpbnQge3Jl
Z059ID0gaW5zbi0+cmVnbm9be3JlZ25vfV0gKyAiICJIRVhfUkVHX1NBMDtcbiIpCisgICAgICAg
IGVsaWYgcmVnaWQgPT0gImRkIjoKICAgICAgICAgICAgIGdlbnB0cl9kZWNsX3BhaXJfd3JpdGFi
bGUoZiwgdGFnLCByZWd0eXBlLCByZWdpZCwgcmVnbm8pCi0gICAgICAgIGVsaWYgKHJlZ2lkID09
ICJzIik6CisgICAgICAgIGVsaWYgcmVnaWQgPT0gInMiOgogICAgICAgICAgICAgZi53cml0ZShm
IiAgICBUQ0d2IHtyZWd0eXBlfXtyZWdpZH1WID0gdGNnX3RlbXBfbmV3KCk7XG4iKQotICAgICAg
ICAgICAgZi53cml0ZShmIiAgICBjb25zdCBpbnQge3JlZ3R5cGV9e3JlZ2lkfU4gPSBpbnNuLT5y
ZWdub1t7cmVnbm99XSArICIKLSAgICAgICAgICAgICAgICAgICAgIkhFWF9SRUdfU0EwO1xuIikK
LSAgICAgICAgZWxpZiAocmVnaWQgPT0gImQiKToKKyAgICAgICAgICAgIGYud3JpdGUoCisgICAg
ICAgICAgICAgICAgZiIgICAgY29uc3QgaW50IHtyZWd0eXBlfXtyZWdpZH1OID0gaW5zbi0+cmVn
bm9be3JlZ25vfV0gKyAiCisgICAgICAgICAgICAgICAgIkhFWF9SRUdfU0EwO1xuIgorICAgICAg
ICAgICAgKQorICAgICAgICBlbGlmIHJlZ2lkID09ICJkIjoKICAgICAgICAgICAgIGdlbnB0cl9k
ZWNsX3dyaXRhYmxlKGYsIHRhZywgcmVndHlwZSwgcmVnaWQsIHJlZ25vKQogICAgICAgICBlbHNl
OgogICAgICAgICAgICAgcHJpbnQoIkJhZCByZWdpc3RlciBwYXJzZTogIiwgcmVndHlwZSwgcmVn
aWQpCi0gICAgZWxpZiAocmVndHlwZSA9PSAiTSIpOgotICAgICAgICBpZiAocmVnaWQgPT0gInUi
KToKLSAgICAgICAgICAgIGYud3JpdGUoZiIgICAgY29uc3QgaW50IHtyZWd0eXBlfXtyZWdpZH1O
ID0gIgotICAgICAgICAgICAgICAgICAgICBmImluc24tPnJlZ25vW3tyZWdub31dO1xuIikKLSAg
ICAgICAgICAgIGYud3JpdGUoZiIgICAgVENHdiB7cmVndHlwZX17cmVnaWR9ViA9IGhleF9ncHJb
e3JlZ3R5cGV9e3JlZ2lkfU4gKyAiCi0gICAgICAgICAgICAgICAgICAgICJIRVhfUkVHX00wXTtc
biIpCisgICAgZWxpZiByZWd0eXBlID09ICJNIjoKKyAgICAgICAgaWYgcmVnaWQgPT0gInUiOgor
ICAgICAgICAgICAgZi53cml0ZShmIiAgICBjb25zdCBpbnQge3JlZ3R5cGV9e3JlZ2lkfU4gPSAi
IGYiaW5zbi0+cmVnbm9be3JlZ25vfV07XG4iKQorICAgICAgICAgICAgZi53cml0ZSgKKyAgICAg
ICAgICAgICAgICBmIiAgICBUQ0d2IHtyZWd0eXBlfXtyZWdpZH1WID0gaGV4X2dwclt7cmVndHlw
ZX17cmVnaWR9TiArICIKKyAgICAgICAgICAgICAgICAiSEVYX1JFR19NMF07XG4iCisgICAgICAg
ICAgICApCiAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICBwcmludCgiQmFkIHJlZ2lzdGVyIHBh
cnNlOiAiLCByZWd0eXBlLCByZWdpZCkKLSAgICBlbGlmIChyZWd0eXBlID09ICJWIik6Ci0gICAg
ICAgIGlmIChyZWdpZCBpbiB7ImRkIn0pOgotICAgICAgICAgICAgZi53cml0ZShmIiAgICBjb25z
dCBpbnQge3JlZ3R5cGV9e3JlZ2lkfU4gPSAiCi0gICAgICAgICAgICAgICAgICAgIGYiaW5zbi0+
cmVnbm9be3JlZ25vfV07XG4iKQorICAgIGVsaWYgcmVndHlwZSA9PSAiViI6CisgICAgICAgIGlm
IHJlZ2lkIGluIHsiZGQifToKKyAgICAgICAgICAgIGYud3JpdGUoZiIgICAgY29uc3QgaW50IHty
ZWd0eXBlfXtyZWdpZH1OID0gIiBmImluc24tPnJlZ25vW3tyZWdub31dO1xuIikKICAgICAgICAg
ICAgIGYud3JpdGUoZiIgICAgY29uc3QgaW50cHRyX3Qge3JlZ3R5cGV9e3JlZ2lkfVZfb2ZmID1c
biIpCi0gICAgICAgICAgICBpZiAoaGV4X2NvbW1vbi5pc190bXBfcmVzdWx0KHRhZykpOgotICAg
ICAgICAgICAgICAgIGYud3JpdGUoZiIgICAgICAgIGN0eF90bXBfdnJlZ19vZmYoY3R4LCB7cmVn
dHlwZX17cmVnaWR9TiwgMiwgIgotICAgICAgICAgICAgICAgICAgICAgICAgInRydWUpO1xuIikK
KyAgICAgICAgICAgIGlmIGhleF9jb21tb24uaXNfdG1wX3Jlc3VsdCh0YWcpOgorICAgICAgICAg
ICAgICAgIGYud3JpdGUoCisgICAgICAgICAgICAgICAgICAgIGYiICAgICAgICBjdHhfdG1wX3Zy
ZWdfb2ZmKGN0eCwge3JlZ3R5cGV9e3JlZ2lkfU4sIDIsICIgInRydWUpO1xuIgorICAgICAgICAg
ICAgICAgICkKICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgZi53cml0ZShmIiAg
ICAgICAgY3R4X2Z1dHVyZV92cmVnX29mZihjdHgsIHtyZWd0eXBlfXtyZWdpZH1OLCIpCiAgICAg
ICAgICAgICAgICAgZi53cml0ZSgiIDIsIHRydWUpO1xuIikKLSAgICAgICAgICAgIGlmIChub3Qg
aGV4X2NvbW1vbi5za2lwX3FlbXVfaGVscGVyKHRhZykpOgotICAgICAgICAgICAgICAgIGYud3Jp
dGUoZiIgICAgVENHdl9wdHIge3JlZ3R5cGV9e3JlZ2lkfVYgPSAiCi0gICAgICAgICAgICAgICAg
ICAgICAgICAidGNnX3RlbXBfbmV3X3B0cigpO1xuIikKLSAgICAgICAgICAgICAgICBmLndyaXRl
KGYiICAgIHRjZ19nZW5fYWRkaV9wdHIoe3JlZ3R5cGV9e3JlZ2lkfVYsIGNwdV9lbnYsICIKLSAg
ICAgICAgICAgICAgICAgICAgICAgIGYie3JlZ3R5cGV9e3JlZ2lkfVZfb2ZmKTtcbiIpCi0gICAg
ICAgIGVsaWYgKHJlZ2lkIGluIHsidXUiLCAidnYiLCAieHgifSk6Ci0gICAgICAgICAgICBmLndy
aXRlKGYiICAgIGNvbnN0IGludCB7cmVndHlwZX17cmVnaWR9TiA9ICIKLSAgICAgICAgICAgICAg
ICAgICAgZiJpbnNuLT5yZWdub1t7cmVnbm99XTtcbiIpCisgICAgICAgICAgICBpZiBub3QgaGV4
X2NvbW1vbi5za2lwX3FlbXVfaGVscGVyKHRhZyk6CisgICAgICAgICAgICAgICAgZi53cml0ZShm
IiAgICBUQ0d2X3B0ciB7cmVndHlwZX17cmVnaWR9ViA9ICIgInRjZ190ZW1wX25ld19wdHIoKTtc
biIpCisgICAgICAgICAgICAgICAgZi53cml0ZSgKKyAgICAgICAgICAgICAgICAgICAgZiIgICAg
dGNnX2dlbl9hZGRpX3B0cih7cmVndHlwZX17cmVnaWR9ViwgY3B1X2VudiwgIgorICAgICAgICAg
ICAgICAgICAgICBmIntyZWd0eXBlfXtyZWdpZH1WX29mZik7XG4iCisgICAgICAgICAgICAgICAg
KQorICAgICAgICBlbGlmIHJlZ2lkIGluIHsidXUiLCAidnYiLCAieHgifToKKyAgICAgICAgICAg
IGYud3JpdGUoZiIgICAgY29uc3QgaW50IHtyZWd0eXBlfXtyZWdpZH1OID0gIiBmImluc24tPnJl
Z25vW3tyZWdub31dO1xuIikKICAgICAgICAgICAgIGYud3JpdGUoZiIgICAgY29uc3QgaW50cHRy
X3Qge3JlZ3R5cGV9e3JlZ2lkfVZfb2ZmID1cbiIpCiAgICAgICAgICAgICBmLndyaXRlKGYiICAg
ICAgICBvZmZzZXRvZihDUFVIZXhhZ29uU3RhdGUsIHtyZWd0eXBlfXtyZWdpZH1WKTtcbiIpCi0g
ICAgICAgICAgICBpZiAobm90IGhleF9jb21tb24uc2tpcF9xZW11X2hlbHBlcih0YWcpKToKLSAg
ICAgICAgICAgICAgICBmLndyaXRlKGYiICAgIFRDR3ZfcHRyIHtyZWd0eXBlfXtyZWdpZH1WID0g
IgotICAgICAgICAgICAgICAgICAgICAgICAgInRjZ190ZW1wX25ld19wdHIoKTtcbiIpCi0gICAg
ICAgICAgICAgICAgZi53cml0ZShmIiAgICB0Y2dfZ2VuX2FkZGlfcHRyKHtyZWd0eXBlfXtyZWdp
ZH1WLCBjcHVfZW52LCAiCi0gICAgICAgICAgICAgICAgICAgICAgICBmIntyZWd0eXBlfXtyZWdp
ZH1WX29mZik7XG4iKQotICAgICAgICBlbGlmIChyZWdpZCBpbiB7InMiLCAidSIsICJ2IiwgInci
fSk6Ci0gICAgICAgICAgICBmLndyaXRlKGYiICAgIGNvbnN0IGludCB7cmVndHlwZX17cmVnaWR9
TiA9ICIKLSAgICAgICAgICAgICAgICAgICAgZiJpbnNuLT5yZWdub1t7cmVnbm99XTtcbiIpCisg
ICAgICAgICAgICBpZiBub3QgaGV4X2NvbW1vbi5za2lwX3FlbXVfaGVscGVyKHRhZyk6CisgICAg
ICAgICAgICAgICAgZi53cml0ZShmIiAgICBUQ0d2X3B0ciB7cmVndHlwZX17cmVnaWR9ViA9ICIg
InRjZ190ZW1wX25ld19wdHIoKTtcbiIpCisgICAgICAgICAgICAgICAgZi53cml0ZSgKKyAgICAg
ICAgICAgICAgICAgICAgZiIgICAgdGNnX2dlbl9hZGRpX3B0cih7cmVndHlwZX17cmVnaWR9Viwg
Y3B1X2VudiwgIgorICAgICAgICAgICAgICAgICAgICBmIntyZWd0eXBlfXtyZWdpZH1WX29mZik7
XG4iCisgICAgICAgICAgICAgICAgKQorICAgICAgICBlbGlmIHJlZ2lkIGluIHsicyIsICJ1Iiwg
InYiLCAidyJ9OgorICAgICAgICAgICAgZi53cml0ZShmIiAgICBjb25zdCBpbnQge3JlZ3R5cGV9
e3JlZ2lkfU4gPSAiIGYiaW5zbi0+cmVnbm9be3JlZ25vfV07XG4iKQogICAgICAgICAgICAgZi53
cml0ZShmIiAgICBjb25zdCBpbnRwdHJfdCB7cmVndHlwZX17cmVnaWR9Vl9vZmYgPVxuIikKICAg
ICAgICAgICAgIGYud3JpdGUoZiIgICAgICAgIHZyZWdfc3JjX29mZihjdHgsIHtyZWd0eXBlfXty
ZWdpZH1OKTtcbiIpCi0gICAgICAgICAgICBpZiAobm90IGhleF9jb21tb24uc2tpcF9xZW11X2hl
bHBlcih0YWcpKToKLSAgICAgICAgICAgICAgICBmLndyaXRlKGYiICAgIFRDR3ZfcHRyIHtyZWd0
eXBlfXtyZWdpZH1WID0gIgotICAgICAgICAgICAgICAgICAgICAgICAgInRjZ190ZW1wX25ld19w
dHIoKTtcbiIpCi0gICAgICAgIGVsaWYgKHJlZ2lkIGluIHsiZCIsICJ4IiwgInkifSk6Ci0gICAg
ICAgICAgICBmLndyaXRlKGYiICAgIGNvbnN0IGludCB7cmVndHlwZX17cmVnaWR9TiA9ICIKLSAg
ICAgICAgICAgICAgICAgICAgZiJpbnNuLT5yZWdub1t7cmVnbm99XTtcbiIpCisgICAgICAgICAg
ICBpZiBub3QgaGV4X2NvbW1vbi5za2lwX3FlbXVfaGVscGVyKHRhZyk6CisgICAgICAgICAgICAg
ICAgZi53cml0ZShmIiAgICBUQ0d2X3B0ciB7cmVndHlwZX17cmVnaWR9ViA9ICIgInRjZ190ZW1w
X25ld19wdHIoKTtcbiIpCisgICAgICAgIGVsaWYgcmVnaWQgaW4geyJkIiwgIngiLCAieSJ9Ogor
ICAgICAgICAgICAgZi53cml0ZShmIiAgICBjb25zdCBpbnQge3JlZ3R5cGV9e3JlZ2lkfU4gPSAi
IGYiaW5zbi0+cmVnbm9be3JlZ25vfV07XG4iKQogICAgICAgICAgICAgZi53cml0ZShmIiAgICBj
b25zdCBpbnRwdHJfdCB7cmVndHlwZX17cmVnaWR9Vl9vZmYgPVxuIikKLSAgICAgICAgICAgIGlm
IChyZWdpZCA9PSAieSIpOgorICAgICAgICAgICAgaWYgcmVnaWQgPT0gInkiOgogICAgICAgICAg
ICAgICAgIGYud3JpdGUoIiAgICAgICAgb2Zmc2V0b2YoQ1BVSGV4YWdvblN0YXRlLCB2dG1wKTtc
biIpCi0gICAgICAgICAgICBlbGlmIChoZXhfY29tbW9uLmlzX3RtcF9yZXN1bHQodGFnKSk6Ci0g
ICAgICAgICAgICAgICAgZi53cml0ZShmIiAgICAgICAgY3R4X3RtcF92cmVnX29mZihjdHgsIHty
ZWd0eXBlfXtyZWdpZH1OLCAxLCAiCi0gICAgICAgICAgICAgICAgICAgICAgICAidHJ1ZSk7XG4i
KQorICAgICAgICAgICAgZWxpZiBoZXhfY29tbW9uLmlzX3RtcF9yZXN1bHQodGFnKToKKyAgICAg
ICAgICAgICAgICBmLndyaXRlKAorICAgICAgICAgICAgICAgICAgICBmIiAgICAgICAgY3R4X3Rt
cF92cmVnX29mZihjdHgsIHtyZWd0eXBlfXtyZWdpZH1OLCAxLCAiICJ0cnVlKTtcbiIKKyAgICAg
ICAgICAgICAgICApCiAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgIGYud3JpdGUo
ZiIgICAgICAgIGN0eF9mdXR1cmVfdnJlZ19vZmYoY3R4LCB7cmVndHlwZX17cmVnaWR9TiwiKQot
ICAgICAgICAgICAgICAgIGYud3JpdGUoIiAxLCB0cnVlKTtcbiIpOworICAgICAgICAgICAgICAg
IGYud3JpdGUoIiAxLCB0cnVlKTtcbiIpCiAKLSAgICAgICAgICAgIGlmIChub3QgaGV4X2NvbW1v
bi5za2lwX3FlbXVfaGVscGVyKHRhZykpOgotICAgICAgICAgICAgICAgIGYud3JpdGUoZiIgICAg
VENHdl9wdHIge3JlZ3R5cGV9e3JlZ2lkfVYgPSAiCi0gICAgICAgICAgICAgICAgICAgICAgICAi
dGNnX3RlbXBfbmV3X3B0cigpO1xuIikKLSAgICAgICAgICAgICAgICBmLndyaXRlKGYiICAgIHRj
Z19nZW5fYWRkaV9wdHIoe3JlZ3R5cGV9e3JlZ2lkfVYsIGNwdV9lbnYsICIKLSAgICAgICAgICAg
ICAgICAgICAgICAgIGYie3JlZ3R5cGV9e3JlZ2lkfVZfb2ZmKTtcbiIpCisgICAgICAgICAgICBp
ZiBub3QgaGV4X2NvbW1vbi5za2lwX3FlbXVfaGVscGVyKHRhZyk6CisgICAgICAgICAgICAgICAg
Zi53cml0ZShmIiAgICBUQ0d2X3B0ciB7cmVndHlwZX17cmVnaWR9ViA9ICIgInRjZ190ZW1wX25l
d19wdHIoKTtcbiIpCisgICAgICAgICAgICAgICAgZi53cml0ZSgKKyAgICAgICAgICAgICAgICAg
ICAgZiIgICAgdGNnX2dlbl9hZGRpX3B0cih7cmVndHlwZX17cmVnaWR9ViwgY3B1X2VudiwgIgor
ICAgICAgICAgICAgICAgICAgICBmIntyZWd0eXBlfXtyZWdpZH1WX29mZik7XG4iCisgICAgICAg
ICAgICAgICAgKQogICAgICAgICBlbHNlOgogICAgICAgICAgICAgcHJpbnQoIkJhZCByZWdpc3Rl
ciBwYXJzZTogIiwgcmVndHlwZSwgcmVnaWQpCi0gICAgZWxpZiAocmVndHlwZSA9PSAiUSIpOgot
ICAgICAgICBpZiAocmVnaWQgaW4geyJkIiwgImUiLCAieCJ9KToKLSAgICAgICAgICAgIGYud3Jp
dGUoZiIgICAgY29uc3QgaW50IHtyZWd0eXBlfXtyZWdpZH1OID0gIgotICAgICAgICAgICAgICAg
ICAgICBmImluc24tPnJlZ25vW3tyZWdub31dO1xuIikKKyAgICBlbGlmIHJlZ3R5cGUgPT0gIlEi
OgorICAgICAgICBpZiByZWdpZCBpbiB7ImQiLCAiZSIsICJ4In06CisgICAgICAgICAgICBmLndy
aXRlKGYiICAgIGNvbnN0IGludCB7cmVndHlwZX17cmVnaWR9TiA9ICIgZiJpbnNuLT5yZWdub1t7
cmVnbm99XTtcbiIpCiAgICAgICAgICAgICBmLndyaXRlKGYiICAgIGNvbnN0IGludHB0cl90IHty
ZWd0eXBlfXtyZWdpZH1WX29mZiA9XG4iKQogICAgICAgICAgICAgZi53cml0ZShmIiAgICAgICAg
Z2V0X3Jlc3VsdF9xcmVnKGN0eCwge3JlZ3R5cGV9e3JlZ2lkfU4pO1xuIikKLSAgICAgICAgICAg
IGlmIChub3QgaGV4X2NvbW1vbi5za2lwX3FlbXVfaGVscGVyKHRhZykpOgotICAgICAgICAgICAg
ICAgIGYud3JpdGUoZiIgICAgVENHdl9wdHIge3JlZ3R5cGV9e3JlZ2lkfVYgPSAiCi0gICAgICAg
ICAgICAgICAgICAgICAgICAidGNnX3RlbXBfbmV3X3B0cigpO1xuIikKLSAgICAgICAgICAgICAg
ICBmLndyaXRlKGYiICAgIHRjZ19nZW5fYWRkaV9wdHIoe3JlZ3R5cGV9e3JlZ2lkfVYsIGNwdV9l
bnYsICIKLSAgICAgICAgICAgICAgICAgICAgICAgIGYie3JlZ3R5cGV9e3JlZ2lkfVZfb2ZmKTtc
biIpCi0gICAgICAgIGVsaWYgKHJlZ2lkIGluIHsicyIsICJ0IiwgInUiLCAidiJ9KToKLSAgICAg
ICAgICAgIGYud3JpdGUoZiIgICAgY29uc3QgaW50IHtyZWd0eXBlfXtyZWdpZH1OID0gIgotICAg
ICAgICAgICAgICAgICAgICBmImluc24tPnJlZ25vW3tyZWdub31dO1xuIikKKyAgICAgICAgICAg
IGlmIG5vdCBoZXhfY29tbW9uLnNraXBfcWVtdV9oZWxwZXIodGFnKToKKyAgICAgICAgICAgICAg
ICBmLndyaXRlKGYiICAgIFRDR3ZfcHRyIHtyZWd0eXBlfXtyZWdpZH1WID0gIiAidGNnX3RlbXBf
bmV3X3B0cigpO1xuIikKKyAgICAgICAgICAgICAgICBmLndyaXRlKAorICAgICAgICAgICAgICAg
ICAgICBmIiAgICB0Y2dfZ2VuX2FkZGlfcHRyKHtyZWd0eXBlfXtyZWdpZH1WLCBjcHVfZW52LCAi
CisgICAgICAgICAgICAgICAgICAgIGYie3JlZ3R5cGV9e3JlZ2lkfVZfb2ZmKTtcbiIKKyAgICAg
ICAgICAgICAgICApCisgICAgICAgIGVsaWYgcmVnaWQgaW4geyJzIiwgInQiLCAidSIsICJ2In06
CisgICAgICAgICAgICBmLndyaXRlKGYiICAgIGNvbnN0IGludCB7cmVndHlwZX17cmVnaWR9TiA9
ICIgZiJpbnNuLT5yZWdub1t7cmVnbm99XTtcbiIpCiAgICAgICAgICAgICBmLndyaXRlKGYiICAg
IGNvbnN0IGludHB0cl90IHtyZWd0eXBlfXtyZWdpZH1WX29mZiA9XG4iKQotICAgICAgICAgICAg
Zi53cml0ZShmIiAgICAgICAgb2Zmc2V0b2YoQ1BVSGV4YWdvblN0YXRlLCAiCi0gICAgICAgICAg
ICAgICAgICAgIGYiUVJlZ3Nbe3JlZ3R5cGV9e3JlZ2lkfU5dKTtcbiIpCi0gICAgICAgICAgICBp
ZiAobm90IGhleF9jb21tb24uc2tpcF9xZW11X2hlbHBlcih0YWcpKToKLSAgICAgICAgICAgICAg
ICBmLndyaXRlKGYiICAgIFRDR3ZfcHRyIHtyZWd0eXBlfXtyZWdpZH1WID0gIgotICAgICAgICAg
ICAgICAgICAgICAgICAgInRjZ190ZW1wX25ld19wdHIoKTtcbiIpCisgICAgICAgICAgICBmLndy
aXRlKAorICAgICAgICAgICAgICAgIGYiICAgICAgICBvZmZzZXRvZihDUFVIZXhhZ29uU3RhdGUs
ICIgZiJRUmVnc1t7cmVndHlwZX17cmVnaWR9Tl0pO1xuIgorICAgICAgICAgICAgKQorICAgICAg
ICAgICAgaWYgbm90IGhleF9jb21tb24uc2tpcF9xZW11X2hlbHBlcih0YWcpOgorICAgICAgICAg
ICAgICAgIGYud3JpdGUoZiIgICAgVENHdl9wdHIge3JlZ3R5cGV9e3JlZ2lkfVYgPSAiICJ0Y2df
dGVtcF9uZXdfcHRyKCk7XG4iKQogICAgICAgICBlbHNlOgogICAgICAgICAgICAgcHJpbnQoIkJh
ZCByZWdpc3RlciBwYXJzZTogIiwgcmVndHlwZSwgcmVnaWQpCiAgICAgZWxzZToKICAgICAgICAg
cHJpbnQoIkJhZCByZWdpc3RlciBwYXJzZTogIiwgcmVndHlwZSwgcmVnaWQpCiAKKwogZGVmIGdl
bnB0cl9kZWNsX25ldyhmLCB0YWcsIHJlZ3R5cGUsIHJlZ2lkLCByZWdubyk6Ci0gICAgaWYgKHJl
Z3R5cGUgPT0gIk4iKToKLSAgICAgICAgaWYgKHJlZ2lkIGluIHsicyIsICJ0In0pOgotICAgICAg
ICAgICAgZi53cml0ZShmIiAgICBUQ0d2IHtyZWd0eXBlfXtyZWdpZH1OID0gIgotICAgICAgICAg
ICAgICAgICAgICBmImhleF9uZXdfdmFsdWVbaW5zbi0+cmVnbm9be3JlZ25vfV1dO1xuIikKKyAg
ICBpZiByZWd0eXBlID09ICJOIjoKKyAgICAgICAgaWYgcmVnaWQgaW4geyJzIiwgInQifToKKyAg
ICAgICAgICAgIGYud3JpdGUoCisgICAgICAgICAgICAgICAgZiIgICAgVENHdiB7cmVndHlwZX17
cmVnaWR9TiA9ICIKKyAgICAgICAgICAgICAgICBmImhleF9uZXdfdmFsdWVbaW5zbi0+cmVnbm9b
e3JlZ25vfV1dO1xuIgorICAgICAgICAgICAgKQogICAgICAgICBlbHNlOgogICAgICAgICAgICAg
cHJpbnQoIkJhZCByZWdpc3RlciBwYXJzZTogIiwgcmVndHlwZSwgcmVnaWQpCi0gICAgZWxpZiAo
cmVndHlwZSA9PSAiUCIpOgotICAgICAgICBpZiAocmVnaWQgaW4geyJ0IiwgInUiLCAidiJ9KToK
LSAgICAgICAgICAgIGYud3JpdGUoZiIgICAgVENHdiB7cmVndHlwZX17cmVnaWR9TiA9ICIKLSAg
ICAgICAgICAgICAgICAgICAgZiJoZXhfbmV3X3ByZWRfdmFsdWVbaW5zbi0+cmVnbm9be3JlZ25v
fV1dO1xuIikKKyAgICBlbGlmIHJlZ3R5cGUgPT0gIlAiOgorICAgICAgICBpZiByZWdpZCBpbiB7
InQiLCAidSIsICJ2In06CisgICAgICAgICAgICBmLndyaXRlKAorICAgICAgICAgICAgICAgIGYi
ICAgIFRDR3Yge3JlZ3R5cGV9e3JlZ2lkfU4gPSAiCisgICAgICAgICAgICAgICAgZiJoZXhfbmV3
X3ByZWRfdmFsdWVbaW5zbi0+cmVnbm9be3JlZ25vfV1dO1xuIgorICAgICAgICAgICAgKQogICAg
ICAgICBlbHNlOgogICAgICAgICAgICAgcHJpbnQoIkJhZCByZWdpc3RlciBwYXJzZTogIiwgcmVn
dHlwZSwgcmVnaWQpCi0gICAgZWxpZiAocmVndHlwZSA9PSAiTyIpOgotICAgICAgICBpZiAocmVn
aWQgPT0gInMiKToKLSAgICAgICAgICAgIGYud3JpdGUoZiIgICAgY29uc3QgaW50cHRyX3Qge3Jl
Z3R5cGV9e3JlZ2lkfU5fbnVtID0gIgotICAgICAgICAgICAgICAgICAgICBmImluc24tPnJlZ25v
W3tyZWdub31dO1xuIikKLSAgICAgICAgICAgIGlmIChoZXhfY29tbW9uLnNraXBfcWVtdV9oZWxw
ZXIodGFnKSk6CisgICAgZWxpZiByZWd0eXBlID09ICJPIjoKKyAgICAgICAgaWYgcmVnaWQgPT0g
InMiOgorICAgICAgICAgICAgZi53cml0ZSgKKyAgICAgICAgICAgICAgICBmIiAgICBjb25zdCBp
bnRwdHJfdCB7cmVndHlwZX17cmVnaWR9Tl9udW0gPSAiCisgICAgICAgICAgICAgICAgZiJpbnNu
LT5yZWdub1t7cmVnbm99XTtcbiIKKyAgICAgICAgICAgICkKKyAgICAgICAgICAgIGlmIGhleF9j
b21tb24uc2tpcF9xZW11X2hlbHBlcih0YWcpOgogICAgICAgICAgICAgICAgIGYud3JpdGUoZiIg
ICAgY29uc3QgaW50cHRyX3Qge3JlZ3R5cGV9e3JlZ2lkfU5fb2ZmID1cbiIpCi0gICAgICAgICAg
ICAgICAgZi53cml0ZSgiICAgICAgICAgY3R4X2Z1dHVyZV92cmVnX29mZihjdHgsICIKLSAgICAg
ICAgICAgICAgICAgICAgICAgIGYie3JlZ3R5cGV9e3JlZ2lkfU5fbnVtLCIpCisgICAgICAgICAg
ICAgICAgZi53cml0ZSgiICAgICAgICAgY3R4X2Z1dHVyZV92cmVnX29mZihjdHgsICIgZiJ7cmVn
dHlwZX17cmVnaWR9Tl9udW0sIikKICAgICAgICAgICAgICAgICBmLndyaXRlKCIgMSwgdHJ1ZSk7
XG4iKQogICAgICAgICAgICAgZWxzZToKLSAgICAgICAgICAgICAgICBmLndyaXRlKGYiICAgIFRD
R3Yge3JlZ3R5cGV9e3JlZ2lkfU4gPSAiCi0gICAgICAgICAgICAgICAgICAgICAgICBmInRjZ19j
b25zdGFudF90bCh7cmVndHlwZX17cmVnaWR9Tl9udW0pO1xuIikKKyAgICAgICAgICAgICAgICBm
LndyaXRlKAorICAgICAgICAgICAgICAgICAgICBmIiAgICBUQ0d2IHtyZWd0eXBlfXtyZWdpZH1O
ID0gIgorICAgICAgICAgICAgICAgICAgICBmInRjZ19jb25zdGFudF90bCh7cmVndHlwZX17cmVn
aWR9Tl9udW0pO1xuIgorICAgICAgICAgICAgICAgICkKICAgICAgICAgZWxzZToKICAgICAgICAg
ICAgIHByaW50KCJCYWQgcmVnaXN0ZXIgcGFyc2U6ICIsIHJlZ3R5cGUsIHJlZ2lkKQogICAgIGVs
c2U6CiAgICAgICAgIHByaW50KCJCYWQgcmVnaXN0ZXIgcGFyc2U6ICIsIHJlZ3R5cGUsIHJlZ2lk
KQogCisKIGRlZiBnZW5wdHJfZGVjbF9vcG4oZiwgdGFnLCByZWd0eXBlLCByZWdpZCwgdG9zcywg
bnVtcmVncywgaSk6Ci0gICAgaWYgKGhleF9jb21tb24uaXNfcGFpcihyZWdpZCkpOgorICAgIGlm
IGhleF9jb21tb24uaXNfcGFpcihyZWdpZCk6CiAgICAgICAgIGdlbnB0cl9kZWNsKGYsIHRhZywg
cmVndHlwZSwgcmVnaWQsIGkpCi0gICAgZWxpZiAoaGV4X2NvbW1vbi5pc19zaW5nbGUocmVnaWQp
KToKKyAgICBlbGlmIGhleF9jb21tb24uaXNfc2luZ2xlKHJlZ2lkKToKICAgICAgICAgaWYgaGV4
X2NvbW1vbi5pc19vbGRfdmFsKHJlZ3R5cGUsIHJlZ2lkLCB0YWcpOgotICAgICAgICAgICAgZ2Vu
cHRyX2RlY2woZix0YWcsIHJlZ3R5cGUsIHJlZ2lkLCBpKQorICAgICAgICAgICAgZ2VucHRyX2Rl
Y2woZiwgdGFnLCByZWd0eXBlLCByZWdpZCwgaSkKICAgICAgICAgZWxpZiBoZXhfY29tbW9uLmlz
X25ld192YWwocmVndHlwZSwgcmVnaWQsIHRhZyk6CiAgICAgICAgICAgICBnZW5wdHJfZGVjbF9u
ZXcoZiwgdGFnLCByZWd0eXBlLCByZWdpZCwgaSkKICAgICAgICAgZWxzZToKLSAgICAgICAgICAg
IHByaW50KCJCYWQgcmVnaXN0ZXIgcGFyc2U6ICIscmVndHlwZSxyZWdpZCx0b3NzLG51bXJlZ3Mp
CisgICAgICAgICAgICBwcmludCgiQmFkIHJlZ2lzdGVyIHBhcnNlOiAiLCByZWd0eXBlLCByZWdp
ZCwgdG9zcywgbnVtcmVncykKICAgICBlbHNlOgotICAgICAgICBwcmludCgiQmFkIHJlZ2lzdGVy
IHBhcnNlOiAiLHJlZ3R5cGUscmVnaWQsdG9zcyxudW1yZWdzKQorICAgICAgICBwcmludCgiQmFk
IHJlZ2lzdGVyIHBhcnNlOiAiLCByZWd0eXBlLCByZWdpZCwgdG9zcywgbnVtcmVncykKKwogCi1k
ZWYgZ2VucHRyX2RlY2xfaW1tKGYsaW1tbGV0dCk6Ci0gICAgaWYgKGltbWxldHQuaXN1cHBlcigp
KToKK2RlZiBnZW5wdHJfZGVjbF9pbW0oZiwgaW1tbGV0dCk6CisgICAgaWYgaW1tbGV0dC5pc3Vw
cGVyKCk6CiAgICAgICAgIGkgPSAxCiAgICAgZWxzZToKICAgICAgICAgaSA9IDAKICAgICBmLndy
aXRlKGYiICAgIGludCB7aGV4X2NvbW1vbi5pbW1fbmFtZShpbW1sZXR0KX0gPSBpbnNuLT5pbW1l
ZFt7aX1dO1xuIikKIAorCiBkZWYgZ2VucHRyX3NyY19yZWFkKGYsIHRhZywgcmVndHlwZSwgcmVn
aWQpOgotICAgIGlmIChyZWd0eXBlID09ICJSIik6Ci0gICAgICAgIGlmIChyZWdpZCBpbiB7InNz
IiwgInR0IiwgInh4IiwgInl5In0pOgotICAgICAgICAgICAgZi53cml0ZShmIiAgICB0Y2dfZ2Vu
X2NvbmNhdF9pMzJfaTY0KHtyZWd0eXBlfXtyZWdpZH1WLCAiCi0gICAgICAgICAgICAgICAgICAg
IGYiaGV4X2dwclt7cmVndHlwZX17cmVnaWR9Tl0sXG4iKQotICAgICAgICAgICAgZi53cml0ZShm
IiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhleF9ncHJbe3JlZ3R5cGV9IgotICAg
ICAgICAgICAgICAgICAgICBmIntyZWdpZH1OICsgMV0pO1xuIikKLSAgICAgICAgZWxpZiAocmVn
aWQgaW4geyJ4IiwgInkifSk6CisgICAgaWYgcmVndHlwZSA9PSAiUiI6CisgICAgICAgIGlmIHJl
Z2lkIGluIHsic3MiLCAidHQiLCAieHgiLCAieXkifToKKyAgICAgICAgICAgIGYud3JpdGUoCisg
ICAgICAgICAgICAgICAgZiIgICAgdGNnX2dlbl9jb25jYXRfaTMyX2k2NCh7cmVndHlwZX17cmVn
aWR9ViwgIgorICAgICAgICAgICAgICAgIGYiaGV4X2dwclt7cmVndHlwZX17cmVnaWR9Tl0sXG4i
CisgICAgICAgICAgICApCisgICAgICAgICAgICBmLndyaXRlKAorICAgICAgICAgICAgICAgIGYi
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGV4X2dwclt7cmVndHlwZX0iCisgICAg
ICAgICAgICAgICAgZiJ7cmVnaWR9TiArIDFdKTtcbiIKKyAgICAgICAgICAgICkKKyAgICAgICAg
ZWxpZiByZWdpZCBpbiB7IngiLCAieSJ9OgogICAgICAgICAgICAgIyMgRm9yIHJlYWQvd3JpdGUg
cmVnaXN0ZXJzLCB3ZSBuZWVkIHRvIGdldCB0aGUgb3JpZ2luYWwgdmFsdWUgaW50bwogICAgICAg
ICAgICAgIyMgdGhlIHJlc3VsdCBUQ0d2LiAgRm9yIGNvbmRpdGlvbmFsIGluc3RydWN0aW9ucywg
dGhpcyBpcyBkb25lIGluCiAgICAgICAgICAgICAjIyBnZW5fc3RhcnRfcGFja2V0LiAgRm9yIHVu
Y29uZGl0aW9uYWwgaW5zdHJ1Y3Rpb25zLCB3ZSBkbyBpdCBoZXJlLgotICAgICAgICAgICAgaWYg
KCdBX0NPTkRFWEVDJyBub3QgaW4gaGV4X2NvbW1vbi5hdHRyaWJkaWN0W3RhZ10pOgotICAgICAg
ICAgICAgICAgIGYud3JpdGUoZiIgICAgdGNnX2dlbl9tb3ZfdGwoe3JlZ3R5cGV9e3JlZ2lkfVYs
ICIKLSAgICAgICAgICAgICAgICAgICAgICAgIGYiaGV4X2dwclt7cmVndHlwZX17cmVnaWR9Tl0p
O1xuIikKLSAgICAgICAgZWxpZiAocmVnaWQgbm90IGluIHsicyIsICJ0IiwgInUiLCAidiJ9KToK
KyAgICAgICAgICAgIGlmICJBX0NPTkRFWEVDIiBub3QgaW4gaGV4X2NvbW1vbi5hdHRyaWJkaWN0
W3RhZ106CisgICAgICAgICAgICAgICAgZi53cml0ZSgKKyAgICAgICAgICAgICAgICAgICAgZiIg
ICAgdGNnX2dlbl9tb3ZfdGwoe3JlZ3R5cGV9e3JlZ2lkfVYsICIKKyAgICAgICAgICAgICAgICAg
ICAgZiJoZXhfZ3ByW3tyZWd0eXBlfXtyZWdpZH1OXSk7XG4iCisgICAgICAgICAgICAgICAgKQor
ICAgICAgICBlbGlmIHJlZ2lkIG5vdCBpbiB7InMiLCAidCIsICJ1IiwgInYifToKICAgICAgICAg
ICAgIHByaW50KCJCYWQgcmVnaXN0ZXIgcGFyc2U6ICIsIHJlZ3R5cGUsIHJlZ2lkKQotICAgIGVs
aWYgKHJlZ3R5cGUgPT0gIlAiKToKLSAgICAgICAgaWYgKHJlZ2lkID09ICJ4Iik6Ci0gICAgICAg
ICAgICBmLndyaXRlKGYiICAgIHRjZ19nZW5fbW92X3RsKHtyZWd0eXBlfXtyZWdpZH1WLCAiCi0g
ICAgICAgICAgICAgICAgICAgIGYiaGV4X3ByZWRbe3JlZ3R5cGV9e3JlZ2lkfU5dKTtcbiIpCi0g
ICAgICAgIGVsaWYgKHJlZ2lkIG5vdCBpbiB7InMiLCAidCIsICJ1IiwgInYifSk6CisgICAgZWxp
ZiByZWd0eXBlID09ICJQIjoKKyAgICAgICAgaWYgcmVnaWQgPT0gIngiOgorICAgICAgICAgICAg
Zi53cml0ZSgKKyAgICAgICAgICAgICAgICBmIiAgICB0Y2dfZ2VuX21vdl90bCh7cmVndHlwZX17
cmVnaWR9ViwgIgorICAgICAgICAgICAgICAgIGYiaGV4X3ByZWRbe3JlZ3R5cGV9e3JlZ2lkfU5d
KTtcbiIKKyAgICAgICAgICAgICkKKyAgICAgICAgZWxpZiByZWdpZCBub3QgaW4geyJzIiwgInQi
LCAidSIsICJ2In06CiAgICAgICAgICAgICBwcmludCgiQmFkIHJlZ2lzdGVyIHBhcnNlOiAiLCBy
ZWd0eXBlLCByZWdpZCkKLSAgICBlbGlmIChyZWd0eXBlID09ICJDIik6Ci0gICAgICAgIGlmIChy
ZWdpZCA9PSAic3MiKToKLSAgICAgICAgICAgIGYud3JpdGUoZiIgICAgZ2VuX3JlYWRfY3RybF9y
ZWdfcGFpcihjdHgsIHtyZWd0eXBlfXtyZWdpZH1OLCAiCi0gICAgICAgICAgICAgICAgICAgIGYi
e3JlZ3R5cGV9e3JlZ2lkfVYpO1xuIikKLSAgICAgICAgZWxpZiAocmVnaWQgPT0gInMiKToKLSAg
ICAgICAgICAgIGYud3JpdGUoZiIgICAgZ2VuX3JlYWRfY3RybF9yZWcoY3R4LCB7cmVndHlwZX17
cmVnaWR9TiwgIgotICAgICAgICAgICAgICAgICAgICBmIntyZWd0eXBlfXtyZWdpZH1WKTtcbiIp
CisgICAgZWxpZiByZWd0eXBlID09ICJDIjoKKyAgICAgICAgaWYgcmVnaWQgPT0gInNzIjoKKyAg
ICAgICAgICAgIGYud3JpdGUoCisgICAgICAgICAgICAgICAgZiIgICAgZ2VuX3JlYWRfY3RybF9y
ZWdfcGFpcihjdHgsIHtyZWd0eXBlfXtyZWdpZH1OLCAiCisgICAgICAgICAgICAgICAgZiJ7cmVn
dHlwZX17cmVnaWR9Vik7XG4iCisgICAgICAgICAgICApCisgICAgICAgIGVsaWYgcmVnaWQgPT0g
InMiOgorICAgICAgICAgICAgZi53cml0ZSgKKyAgICAgICAgICAgICAgICBmIiAgICBnZW5fcmVh
ZF9jdHJsX3JlZyhjdHgsIHtyZWd0eXBlfXtyZWdpZH1OLCAiCisgICAgICAgICAgICAgICAgZiJ7
cmVndHlwZX17cmVnaWR9Vik7XG4iCisgICAgICAgICAgICApCiAgICAgICAgIGVsc2U6CiAgICAg
ICAgICAgICBwcmludCgiQmFkIHJlZ2lzdGVyIHBhcnNlOiAiLCByZWd0eXBlLCByZWdpZCkKLSAg
ICBlbGlmIChyZWd0eXBlID09ICJNIik6Ci0gICAgICAgIGlmIChyZWdpZCAhPSAidSIpOgorICAg
IGVsaWYgcmVndHlwZSA9PSAiTSI6CisgICAgICAgIGlmIHJlZ2lkICE9ICJ1IjoKICAgICAgICAg
ICAgIHByaW50KCJCYWQgcmVnaXN0ZXIgcGFyc2U6ICIsIHJlZ3R5cGUsIHJlZ2lkKQotICAgIGVs
aWYgKHJlZ3R5cGUgPT0gIlYiKToKLSAgICAgICAgaWYgKHJlZ2lkIGluIHsidXUiLCAidnYiLCAi
eHgifSk6CisgICAgZWxpZiByZWd0eXBlID09ICJWIjoKKyAgICAgICAgaWYgcmVnaWQgaW4geyJ1
dSIsICJ2diIsICJ4eCJ9OgogICAgICAgICAgICAgZi53cml0ZShmIiAgICB0Y2dfZ2VuX2d2ZWNf
bW92KE1PXzY0LCB7cmVndHlwZX17cmVnaWR9Vl9vZmYsXG4iKQogICAgICAgICAgICAgZi53cml0
ZShmIiAgICAgICAgdnJlZ19zcmNfb2ZmKGN0eCwge3JlZ3R5cGV9e3JlZ2lkfU4pLFxuIikKICAg
ICAgICAgICAgIGYud3JpdGUoIiAgICAgICAgc2l6ZW9mKE1NVmVjdG9yKSwgc2l6ZW9mKE1NVmVj
dG9yKSk7XG4iKQpAQCAtMjcyLDE0NyArMzAwLDE3NCBAQCBkZWYgZ2VucHRyX3NyY19yZWFkKGYs
IHRhZywgcmVndHlwZSwgcmVnaWQpOgogICAgICAgICAgICAgZi53cml0ZShmIiAgICAgICAge3Jl
Z3R5cGV9e3JlZ2lkfVZfb2ZmICsgc2l6ZW9mKE1NVmVjdG9yKSxcbiIpCiAgICAgICAgICAgICBm
LndyaXRlKGYiICAgICAgICB2cmVnX3NyY19vZmYoY3R4LCB7cmVndHlwZX17cmVnaWR9TiBeIDEp
LFxuIikKICAgICAgICAgICAgIGYud3JpdGUoIiAgICAgICAgc2l6ZW9mKE1NVmVjdG9yKSwgc2l6
ZW9mKE1NVmVjdG9yKSk7XG4iKQotICAgICAgICBlbGlmIChyZWdpZCBpbiB7InMiLCAidSIsICJ2
IiwgIncifSk6Ci0gICAgICAgICAgICBpZiAobm90IGhleF9jb21tb24uc2tpcF9xZW11X2hlbHBl
cih0YWcpKToKLSAgICAgICAgICAgICAgICBmLndyaXRlKGYiICAgIHRjZ19nZW5fYWRkaV9wdHIo
e3JlZ3R5cGV9e3JlZ2lkfVYsIGNwdV9lbnYsICIKLSAgICAgICAgICAgICAgICAgICAgICAgIGYi
e3JlZ3R5cGV9e3JlZ2lkfVZfb2ZmKTtcbiIpCi0gICAgICAgIGVsaWYgKHJlZ2lkIGluIHsieCIs
ICJ5In0pOgorICAgICAgICBlbGlmIHJlZ2lkIGluIHsicyIsICJ1IiwgInYiLCAidyJ9OgorICAg
ICAgICAgICAgaWYgbm90IGhleF9jb21tb24uc2tpcF9xZW11X2hlbHBlcih0YWcpOgorICAgICAg
ICAgICAgICAgIGYud3JpdGUoCisgICAgICAgICAgICAgICAgICAgIGYiICAgIHRjZ19nZW5fYWRk
aV9wdHIoe3JlZ3R5cGV9e3JlZ2lkfVYsIGNwdV9lbnYsICIKKyAgICAgICAgICAgICAgICAgICAg
ZiJ7cmVndHlwZX17cmVnaWR9Vl9vZmYpO1xuIgorICAgICAgICAgICAgICAgICkKKyAgICAgICAg
ZWxpZiByZWdpZCBpbiB7IngiLCAieSJ9OgogICAgICAgICAgICAgZi53cml0ZShmIiAgICB0Y2df
Z2VuX2d2ZWNfbW92KE1PXzY0LCB7cmVndHlwZX17cmVnaWR9Vl9vZmYsXG4iKQogICAgICAgICAg
ICAgZi53cml0ZShmIiAgICAgICAgdnJlZ19zcmNfb2ZmKGN0eCwge3JlZ3R5cGV9e3JlZ2lkfU4p
LFxuIikKICAgICAgICAgICAgIGYud3JpdGUoIiAgICAgICAgc2l6ZW9mKE1NVmVjdG9yKSwgc2l6
ZW9mKE1NVmVjdG9yKSk7XG4iKQogICAgICAgICBlbHNlOgogICAgICAgICAgICAgcHJpbnQoIkJh
ZCByZWdpc3RlciBwYXJzZTogIiwgcmVndHlwZSwgcmVnaWQpCi0gICAgZWxpZiAocmVndHlwZSA9
PSAiUSIpOgotICAgICAgICBpZiAocmVnaWQgaW4geyJzIiwgInQiLCAidSIsICJ2In0pOgotICAg
ICAgICAgICAgaWYgKG5vdCBoZXhfY29tbW9uLnNraXBfcWVtdV9oZWxwZXIodGFnKSk6Ci0gICAg
ICAgICAgICAgICAgZi53cml0ZShmIiAgICB0Y2dfZ2VuX2FkZGlfcHRyKHtyZWd0eXBlfXtyZWdp
ZH1WLCBjcHVfZW52LCAiCi0gICAgICAgICAgICAgICAgICAgICAgICBmIntyZWd0eXBlfXtyZWdp
ZH1WX29mZik7XG4iKQotICAgICAgICBlbGlmIChyZWdpZCBpbiB7IngifSk6CisgICAgZWxpZiBy
ZWd0eXBlID09ICJRIjoKKyAgICAgICAgaWYgcmVnaWQgaW4geyJzIiwgInQiLCAidSIsICJ2In06
CisgICAgICAgICAgICBpZiBub3QgaGV4X2NvbW1vbi5za2lwX3FlbXVfaGVscGVyKHRhZyk6Cisg
ICAgICAgICAgICAgICAgZi53cml0ZSgKKyAgICAgICAgICAgICAgICAgICAgZiIgICAgdGNnX2dl
bl9hZGRpX3B0cih7cmVndHlwZX17cmVnaWR9ViwgY3B1X2VudiwgIgorICAgICAgICAgICAgICAg
ICAgICBmIntyZWd0eXBlfXtyZWdpZH1WX29mZik7XG4iCisgICAgICAgICAgICAgICAgKQorICAg
ICAgICBlbGlmIHJlZ2lkIGluIHsieCJ9OgogICAgICAgICAgICAgZi53cml0ZShmIiAgICB0Y2df
Z2VuX2d2ZWNfbW92KE1PXzY0LCB7cmVndHlwZX17cmVnaWR9Vl9vZmYsXG4iKQotICAgICAgICAg
ICAgZi53cml0ZShmIiAgICAgICAgb2Zmc2V0b2YoQ1BVSGV4YWdvblN0YXRlLCAiCi0gICAgICAg
ICAgICAgICAgICAgIGYiUVJlZ3Nbe3JlZ3R5cGV9e3JlZ2lkfU5dKSxcbiIpCisgICAgICAgICAg
ICBmLndyaXRlKAorICAgICAgICAgICAgICAgIGYiICAgICAgICBvZmZzZXRvZihDUFVIZXhhZ29u
U3RhdGUsICIgZiJRUmVnc1t7cmVndHlwZX17cmVnaWR9Tl0pLFxuIgorICAgICAgICAgICAgKQog
ICAgICAgICAgICAgZi53cml0ZSgiICAgICAgICBzaXplb2YoTU1RUmVnKSwgc2l6ZW9mKE1NUVJl
ZykpO1xuIikKICAgICAgICAgZWxzZToKICAgICAgICAgICAgIHByaW50KCJCYWQgcmVnaXN0ZXIg
cGFyc2U6ICIsIHJlZ3R5cGUsIHJlZ2lkKQogICAgIGVsc2U6CiAgICAgICAgIHByaW50KCJCYWQg
cmVnaXN0ZXIgcGFyc2U6ICIsIHJlZ3R5cGUsIHJlZ2lkKQogCi1kZWYgZ2VucHRyX3NyY19yZWFk
X25ldyhmLHJlZ3R5cGUscmVnaWQpOgotICAgIGlmIChyZWd0eXBlID09ICJOIik6Ci0gICAgICAg
IGlmIChyZWdpZCBub3QgaW4geyJzIiwgInQifSk6CisKK2RlZiBnZW5wdHJfc3JjX3JlYWRfbmV3
KGYsIHJlZ3R5cGUsIHJlZ2lkKToKKyAgICBpZiByZWd0eXBlID09ICJOIjoKKyAgICAgICAgaWYg
cmVnaWQgbm90IGluIHsicyIsICJ0In06CiAgICAgICAgICAgICBwcmludCgiQmFkIHJlZ2lzdGVy
IHBhcnNlOiAiLCByZWd0eXBlLCByZWdpZCkKLSAgICBlbGlmIChyZWd0eXBlID09ICJQIik6Ci0g
ICAgICAgIGlmIChyZWdpZCBub3QgaW4geyJ0IiwgInUiLCAidiJ9KToKKyAgICBlbGlmIHJlZ3R5
cGUgPT0gIlAiOgorICAgICAgICBpZiByZWdpZCBub3QgaW4geyJ0IiwgInUiLCAidiJ9OgogICAg
ICAgICAgICAgcHJpbnQoIkJhZCByZWdpc3RlciBwYXJzZTogIiwgcmVndHlwZSwgcmVnaWQpCi0g
ICAgZWxpZiAocmVndHlwZSA9PSAiTyIpOgotICAgICAgICBpZiAocmVnaWQgIT0gInMiKToKKyAg
ICBlbGlmIHJlZ3R5cGUgPT0gIk8iOgorICAgICAgICBpZiByZWdpZCAhPSAicyI6CiAgICAgICAg
ICAgICBwcmludCgiQmFkIHJlZ2lzdGVyIHBhcnNlOiAiLCByZWd0eXBlLCByZWdpZCkKICAgICBl
bHNlOgogICAgICAgICBwcmludCgiQmFkIHJlZ2lzdGVyIHBhcnNlOiAiLCByZWd0eXBlLCByZWdp
ZCkKIAotZGVmIGdlbnB0cl9zcmNfcmVhZF9vcG4oZixyZWd0eXBlLHJlZ2lkLHRhZyk6Ci0gICAg
aWYgKGhleF9jb21tb24uaXNfcGFpcihyZWdpZCkpOgorCitkZWYgZ2VucHRyX3NyY19yZWFkX29w
bihmLCByZWd0eXBlLCByZWdpZCwgdGFnKToKKyAgICBpZiBoZXhfY29tbW9uLmlzX3BhaXIocmVn
aWQpOgogICAgICAgICBnZW5wdHJfc3JjX3JlYWQoZiwgdGFnLCByZWd0eXBlLCByZWdpZCkKLSAg
ICBlbGlmIChoZXhfY29tbW9uLmlzX3NpbmdsZShyZWdpZCkpOgorICAgIGVsaWYgaGV4X2NvbW1v
bi5pc19zaW5nbGUocmVnaWQpOgogICAgICAgICBpZiBoZXhfY29tbW9uLmlzX29sZF92YWwocmVn
dHlwZSwgcmVnaWQsIHRhZyk6CiAgICAgICAgICAgICBnZW5wdHJfc3JjX3JlYWQoZiwgdGFnLCBy
ZWd0eXBlLCByZWdpZCkKICAgICAgICAgZWxpZiBoZXhfY29tbW9uLmlzX25ld192YWwocmVndHlw
ZSwgcmVnaWQsIHRhZyk6Ci0gICAgICAgICAgICBnZW5wdHJfc3JjX3JlYWRfbmV3KGYscmVndHlw
ZSxyZWdpZCkKKyAgICAgICAgICAgIGdlbnB0cl9zcmNfcmVhZF9uZXcoZiwgcmVndHlwZSwgcmVn
aWQpCiAgICAgICAgIGVsc2U6Ci0gICAgICAgICAgICBwcmludCgiQmFkIHJlZ2lzdGVyIHBhcnNl
OiAiLHJlZ3R5cGUscmVnaWQsdG9zcyxudW1yZWdzKQorICAgICAgICAgICAgcHJpbnQoIkJhZCBy
ZWdpc3RlciBwYXJzZTogIiwgcmVndHlwZSwgcmVnaWQsIHRvc3MsIG51bXJlZ3MpCiAgICAgZWxz
ZToKLSAgICAgICAgcHJpbnQoIkJhZCByZWdpc3RlciBwYXJzZTogIixyZWd0eXBlLHJlZ2lkLHRv
c3MsbnVtcmVncykKKyAgICAgICAgcHJpbnQoIkJhZCByZWdpc3RlciBwYXJzZTogIiwgcmVndHlw
ZSwgcmVnaWQsIHRvc3MsIG51bXJlZ3MpCisKIAogZGVmIGdlbl9oZWxwZXJfY2FsbF9vcG4oZiwg
dGFnLCByZWd0eXBlLCByZWdpZCwgdG9zcywgbnVtcmVncywgaSk6Ci0gICAgaWYgKGkgPiAwKTog
Zi53cml0ZSgiLCAiKQotICAgIGlmIChoZXhfY29tbW9uLmlzX3BhaXIocmVnaWQpKToKKyAgICBp
ZiBpID4gMDoKKyAgICAgICAgZi53cml0ZSgiLCAiKQorICAgIGlmIGhleF9jb21tb24uaXNfcGFp
cihyZWdpZCk6CiAgICAgICAgIGYud3JpdGUoZiJ7cmVndHlwZX17cmVnaWR9ViIpCi0gICAgZWxp
ZiAoaGV4X2NvbW1vbi5pc19zaW5nbGUocmVnaWQpKToKKyAgICBlbGlmIGhleF9jb21tb24uaXNf
c2luZ2xlKHJlZ2lkKToKICAgICAgICAgaWYgaGV4X2NvbW1vbi5pc19vbGRfdmFsKHJlZ3R5cGUs
IHJlZ2lkLCB0YWcpOgogICAgICAgICAgICAgZi53cml0ZShmIntyZWd0eXBlfXtyZWdpZH1WIikK
ICAgICAgICAgZWxpZiBoZXhfY29tbW9uLmlzX25ld192YWwocmVndHlwZSwgcmVnaWQsIHRhZyk6
CiAgICAgICAgICAgICBmLndyaXRlKGYie3JlZ3R5cGV9e3JlZ2lkfU4iKQogICAgICAgICBlbHNl
OgotICAgICAgICAgICAgcHJpbnQoIkJhZCByZWdpc3RlciBwYXJzZTogIixyZWd0eXBlLHJlZ2lk
LHRvc3MsbnVtcmVncykKKyAgICAgICAgICAgIHByaW50KCJCYWQgcmVnaXN0ZXIgcGFyc2U6ICIs
IHJlZ3R5cGUsIHJlZ2lkLCB0b3NzLCBudW1yZWdzKQogICAgIGVsc2U6Ci0gICAgICAgIHByaW50
KCJCYWQgcmVnaXN0ZXIgcGFyc2U6ICIscmVndHlwZSxyZWdpZCx0b3NzLG51bXJlZ3MpCisgICAg
ICAgIHByaW50KCJCYWQgcmVnaXN0ZXIgcGFyc2U6ICIsIHJlZ3R5cGUsIHJlZ2lkLCB0b3NzLCBu
dW1yZWdzKQogCi1kZWYgZ2VuX2hlbHBlcl9kZWNsX2ltbShmLGltbWxldHQpOgotICAgIGYud3Jp
dGUoZiIgICAgVENHdiB0Y2d2X3toZXhfY29tbW9uLmltbV9uYW1lKGltbWxldHQpfSA9ICIKLSAg
ICAgICAgICAgIGYidGNnX2NvbnN0YW50X3RsKHtoZXhfY29tbW9uLmltbV9uYW1lKGltbWxldHQp
fSk7XG4iKQogCi1kZWYgZ2VuX2hlbHBlcl9jYWxsX2ltbShmLGltbWxldHQpOgorZGVmIGdlbl9o
ZWxwZXJfZGVjbF9pbW0oZiwgaW1tbGV0dCk6CisgICAgZi53cml0ZSgKKyAgICAgICAgZiIgICAg
VENHdiB0Y2d2X3toZXhfY29tbW9uLmltbV9uYW1lKGltbWxldHQpfSA9ICIKKyAgICAgICAgZiJ0
Y2dfY29uc3RhbnRfdGwoe2hleF9jb21tb24uaW1tX25hbWUoaW1tbGV0dCl9KTtcbiIKKyAgICAp
CisKKworZGVmIGdlbl9oZWxwZXJfY2FsbF9pbW0oZiwgaW1tbGV0dCk6CiAgICAgZi53cml0ZShm
IiwgdGNndl97aGV4X2NvbW1vbi5pbW1fbmFtZShpbW1sZXR0KX0iKQogCisKIGRlZiBnZW5wdHJf
ZHN0X3dyaXRlX3BhaXIoZiwgdGFnLCByZWd0eXBlLCByZWdpZCk6Ci0gICAgZi53cml0ZShmIiAg
ICBnZW5fbG9nX3JlZ193cml0ZV9wYWlyKHtyZWd0eXBlfXtyZWdpZH1OLCAiCi0gICAgICAgICAg
ICBmIntyZWd0eXBlfXtyZWdpZH1WKTtcbiIpCisgICAgZi53cml0ZShmIiAgICBnZW5fbG9nX3Jl
Z193cml0ZV9wYWlyKHtyZWd0eXBlfXtyZWdpZH1OLCAiIGYie3JlZ3R5cGV9e3JlZ2lkfVYpO1xu
IikKKwogCiBkZWYgZ2VucHRyX2RzdF93cml0ZShmLCB0YWcsIHJlZ3R5cGUsIHJlZ2lkKToKLSAg
ICBpZiAocmVndHlwZSA9PSAiUiIpOgotICAgICAgICBpZiAocmVnaWQgaW4geyJkZCIsICJ4eCIs
ICJ5eSJ9KToKKyAgICBpZiByZWd0eXBlID09ICJSIjoKKyAgICAgICAgaWYgcmVnaWQgaW4geyJk
ZCIsICJ4eCIsICJ5eSJ9OgogICAgICAgICAgICAgZ2VucHRyX2RzdF93cml0ZV9wYWlyKGYsIHRh
ZywgcmVndHlwZSwgcmVnaWQpCi0gICAgICAgIGVsaWYgKHJlZ2lkIGluIHsiZCIsICJlIiwgIngi
LCAieSJ9KToKLSAgICAgICAgICAgIGYud3JpdGUoZiIgICAgZ2VuX2xvZ19yZWdfd3JpdGUoe3Jl
Z3R5cGV9e3JlZ2lkfU4sICIKLSAgICAgICAgICAgICAgICAgICAgZiJ7cmVndHlwZX17cmVnaWR9
Vik7XG4iKQorICAgICAgICBlbGlmIHJlZ2lkIGluIHsiZCIsICJlIiwgIngiLCAieSJ9OgorICAg
ICAgICAgICAgZi53cml0ZSgKKyAgICAgICAgICAgICAgICBmIiAgICBnZW5fbG9nX3JlZ193cml0
ZSh7cmVndHlwZX17cmVnaWR9TiwgIiBmIntyZWd0eXBlfXtyZWdpZH1WKTtcbiIKKyAgICAgICAg
ICAgICkKICAgICAgICAgZWxzZToKICAgICAgICAgICAgIHByaW50KCJCYWQgcmVnaXN0ZXIgcGFy
c2U6ICIsIHJlZ3R5cGUsIHJlZ2lkKQotICAgIGVsaWYgKHJlZ3R5cGUgPT0gIlAiKToKLSAgICAg
ICAgaWYgKHJlZ2lkIGluIHsiZCIsICJlIiwgIngifSk6Ci0gICAgICAgICAgICBmLndyaXRlKGYi
ICAgIGdlbl9sb2dfcHJlZF93cml0ZShjdHgsIHtyZWd0eXBlfXtyZWdpZH1OLCAiCi0gICAgICAg
ICAgICAgICAgICAgIGYie3JlZ3R5cGV9e3JlZ2lkfVYpO1xuIikKKyAgICBlbGlmIHJlZ3R5cGUg
PT0gIlAiOgorICAgICAgICBpZiByZWdpZCBpbiB7ImQiLCAiZSIsICJ4In06CisgICAgICAgICAg
ICBmLndyaXRlKAorICAgICAgICAgICAgICAgIGYiICAgIGdlbl9sb2dfcHJlZF93cml0ZShjdHgs
IHtyZWd0eXBlfXtyZWdpZH1OLCAiCisgICAgICAgICAgICAgICAgZiJ7cmVndHlwZX17cmVnaWR9
Vik7XG4iCisgICAgICAgICAgICApCiAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICBwcmludCgi
QmFkIHJlZ2lzdGVyIHBhcnNlOiAiLCByZWd0eXBlLCByZWdpZCkKLSAgICBlbGlmIChyZWd0eXBl
ID09ICJDIik6Ci0gICAgICAgIGlmIChyZWdpZCA9PSAiZGQiKToKLSAgICAgICAgICAgIGYud3Jp
dGUoZiIgICAgZ2VuX3dyaXRlX2N0cmxfcmVnX3BhaXIoY3R4LCB7cmVndHlwZX17cmVnaWR9Tiwg
IgotICAgICAgICAgICAgICAgICAgICBmIntyZWd0eXBlfXtyZWdpZH1WKTtcbiIpCi0gICAgICAg
IGVsaWYgKHJlZ2lkID09ICJkIik6Ci0gICAgICAgICAgICBmLndyaXRlKGYiICAgIGdlbl93cml0
ZV9jdHJsX3JlZyhjdHgsIHtyZWd0eXBlfXtyZWdpZH1OLCAiCi0gICAgICAgICAgICAgICAgICAg
IGYie3JlZ3R5cGV9e3JlZ2lkfVYpO1xuIikKKyAgICBlbGlmIHJlZ3R5cGUgPT0gIkMiOgorICAg
ICAgICBpZiByZWdpZCA9PSAiZGQiOgorICAgICAgICAgICAgZi53cml0ZSgKKyAgICAgICAgICAg
ICAgICBmIiAgICBnZW5fd3JpdGVfY3RybF9yZWdfcGFpcihjdHgsIHtyZWd0eXBlfXtyZWdpZH1O
LCAiCisgICAgICAgICAgICAgICAgZiJ7cmVndHlwZX17cmVnaWR9Vik7XG4iCisgICAgICAgICAg
ICApCisgICAgICAgIGVsaWYgcmVnaWQgPT0gImQiOgorICAgICAgICAgICAgZi53cml0ZSgKKyAg
ICAgICAgICAgICAgICBmIiAgICBnZW5fd3JpdGVfY3RybF9yZWcoY3R4LCB7cmVndHlwZX17cmVn
aWR9TiwgIgorICAgICAgICAgICAgICAgIGYie3JlZ3R5cGV9e3JlZ2lkfVYpO1xuIgorICAgICAg
ICAgICAgKQogICAgICAgICBlbHNlOgogICAgICAgICAgICAgcHJpbnQoIkJhZCByZWdpc3RlciBw
YXJzZTogIiwgcmVndHlwZSwgcmVnaWQpCiAgICAgZWxzZToKICAgICAgICAgcHJpbnQoIkJhZCBy
ZWdpc3RlciBwYXJzZTogIiwgcmVndHlwZSwgcmVnaWQpCiAKKwogZGVmIGdlbnB0cl9kc3Rfd3Jp
dGVfZXh0KGYsIHRhZywgcmVndHlwZSwgcmVnaWQsIG5ld3Y9IkVYVF9ERkwiKToKLSAgICBpZiAo
cmVndHlwZSA9PSAiViIpOgotICAgICAgICBpZiAocmVnaWQgaW4geyJ4eCJ9KToKLSAgICAgICAg
ICAgIGYud3JpdGUoZiIgICAgZ2VuX2xvZ192cmVnX3dyaXRlX3BhaXIoY3R4LCB7cmVndHlwZX17
cmVnaWR9Vl9vZmYsICIKLSAgICAgICAgICAgICAgICAgICAgZiJ7cmVndHlwZX17cmVnaWR9Tiwg
e25ld3Z9KTtcbiIpCi0gICAgICAgIGVsaWYgKHJlZ2lkIGluIHsieSJ9KToKLSAgICAgICAgICAg
IGYud3JpdGUoZiIgICAgZ2VuX2xvZ192cmVnX3dyaXRlKGN0eCwge3JlZ3R5cGV9e3JlZ2lkfVZf
b2ZmLCAiCi0gICAgICAgICAgICAgICAgICAgIGYie3JlZ3R5cGV9e3JlZ2lkfU4sIHtuZXd2fSk7
XG4iKQotICAgICAgICBlbGlmIChyZWdpZCBub3QgaW4geyJkZCIsICJkIiwgIngifSk6CisgICAg
aWYgcmVndHlwZSA9PSAiViI6CisgICAgICAgIGlmIHJlZ2lkIGluIHsieHgifToKKyAgICAgICAg
ICAgIGYud3JpdGUoCisgICAgICAgICAgICAgICAgZiIgICAgZ2VuX2xvZ192cmVnX3dyaXRlX3Bh
aXIoY3R4LCB7cmVndHlwZX17cmVnaWR9Vl9vZmYsICIKKyAgICAgICAgICAgICAgICBmIntyZWd0
eXBlfXtyZWdpZH1OLCB7bmV3dn0pO1xuIgorICAgICAgICAgICAgKQorICAgICAgICBlbGlmIHJl
Z2lkIGluIHsieSJ9OgorICAgICAgICAgICAgZi53cml0ZSgKKyAgICAgICAgICAgICAgICBmIiAg
ICBnZW5fbG9nX3ZyZWdfd3JpdGUoY3R4LCB7cmVndHlwZX17cmVnaWR9Vl9vZmYsICIKKyAgICAg
ICAgICAgICAgICBmIntyZWd0eXBlfXtyZWdpZH1OLCB7bmV3dn0pO1xuIgorICAgICAgICAgICAg
KQorICAgICAgICBlbGlmIHJlZ2lkIG5vdCBpbiB7ImRkIiwgImQiLCAieCJ9OgogICAgICAgICAg
ICAgcHJpbnQoIkJhZCByZWdpc3RlciBwYXJzZTogIiwgcmVndHlwZSwgcmVnaWQpCi0gICAgZWxp
ZiAocmVndHlwZSA9PSAiUSIpOgotICAgICAgICBpZiAocmVnaWQgbm90IGluIHsiZCIsICJlIiwg
IngifSk6Ci0KKyAgICBlbGlmIHJlZ3R5cGUgPT0gIlEiOgorICAgICAgICBpZiByZWdpZCBub3Qg
aW4geyJkIiwgImUiLCAieCJ9OgogICAgICAgICAgICAgcHJpbnQoIkJhZCByZWdpc3RlciBwYXJz
ZTogIiwgcmVndHlwZSwgcmVnaWQpCiAgICAgZWxzZToKICAgICAgICAgcHJpbnQoIkJhZCByZWdp
c3RlciBwYXJzZTogIiwgcmVndHlwZSwgcmVnaWQpCiAKLWRlZiBnZW5wdHJfZHN0X3dyaXRlX29w
bihmLHJlZ3R5cGUsIHJlZ2lkLCB0YWcpOgotICAgIGlmIChoZXhfY29tbW9uLmlzX3BhaXIocmVn
aWQpKToKLSAgICAgICAgaWYgKGhleF9jb21tb24uaXNfaHZ4X3JlZyhyZWd0eXBlKSk6Ci0gICAg
ICAgICAgICBpZiAoaGV4X2NvbW1vbi5pc190bXBfcmVzdWx0KHRhZykpOgorCitkZWYgZ2VucHRy
X2RzdF93cml0ZV9vcG4oZiwgcmVndHlwZSwgcmVnaWQsIHRhZyk6CisgICAgaWYgaGV4X2NvbW1v
bi5pc19wYWlyKHJlZ2lkKToKKyAgICAgICAgaWYgaGV4X2NvbW1vbi5pc19odnhfcmVnKHJlZ3R5
cGUpOgorICAgICAgICAgICAgaWYgaGV4X2NvbW1vbi5pc190bXBfcmVzdWx0KHRhZyk6CiAgICAg
ICAgICAgICAgICAgZ2VucHRyX2RzdF93cml0ZV9leHQoZiwgdGFnLCByZWd0eXBlLCByZWdpZCwg
IkVYVF9UTVAiKQogICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICBnZW5wdHJfZHN0
X3dyaXRlX2V4dChmLCB0YWcsIHJlZ3R5cGUsIHJlZ2lkKQogICAgICAgICBlbHNlOgogICAgICAg
ICAgICAgZ2VucHRyX2RzdF93cml0ZShmLCB0YWcsIHJlZ3R5cGUsIHJlZ2lkKQotICAgIGVsaWYg
KGhleF9jb21tb24uaXNfc2luZ2xlKHJlZ2lkKSk6Ci0gICAgICAgIGlmIChoZXhfY29tbW9uLmlz
X2h2eF9yZWcocmVndHlwZSkpOgotICAgICAgICAgICAgaWYgKGhleF9jb21tb24uaXNfbmV3X3Jl
c3VsdCh0YWcpKToKKyAgICBlbGlmIGhleF9jb21tb24uaXNfc2luZ2xlKHJlZ2lkKToKKyAgICAg
ICAgaWYgaGV4X2NvbW1vbi5pc19odnhfcmVnKHJlZ3R5cGUpOgorICAgICAgICAgICAgaWYgaGV4
X2NvbW1vbi5pc19uZXdfcmVzdWx0KHRhZyk6CiAgICAgICAgICAgICAgICAgZ2VucHRyX2RzdF93
cml0ZV9leHQoZiwgdGFnLCByZWd0eXBlLCByZWdpZCwgIkVYVF9ORVciKQotICAgICAgICAgICAg
ZWxpZiAoaGV4X2NvbW1vbi5pc190bXBfcmVzdWx0KHRhZykpOgorICAgICAgICAgICAgZWxpZiBo
ZXhfY29tbW9uLmlzX3RtcF9yZXN1bHQodGFnKToKICAgICAgICAgICAgICAgICBnZW5wdHJfZHN0
X3dyaXRlX2V4dChmLCB0YWcsIHJlZ3R5cGUsIHJlZ2lkLCAiRVhUX1RNUCIpCiAgICAgICAgICAg
ICBlbHNlOgogICAgICAgICAgICAgICAgIGdlbnB0cl9kc3Rfd3JpdGVfZXh0KGYsIHRhZywgcmVn
dHlwZSwgcmVnaWQsICJFWFRfREZMIikKICAgICAgICAgZWxzZToKICAgICAgICAgICAgIGdlbnB0
cl9kc3Rfd3JpdGUoZiwgdGFnLCByZWd0eXBlLCByZWdpZCkKICAgICBlbHNlOgotICAgICAgICBw
cmludCgiQmFkIHJlZ2lzdGVyIHBhcnNlOiAiLHJlZ3R5cGUscmVnaWQsdG9zcyxudW1yZWdzKQor
ICAgICAgICBwcmludCgiQmFkIHJlZ2lzdGVyIHBhcnNlOiAiLCByZWd0eXBlLCByZWdpZCwgdG9z
cywgbnVtcmVncykKKwogCiAjIwogIyMgR2VuZXJhdGUgdGhlIFRDRyBjb2RlIHRvIGNhbGwgdGhl
IGhlbHBlcgpAQCAtNDM3LDU3ICs0OTIsNTkgQEAgZGVmIGdlbnB0cl9kc3Rfd3JpdGVfb3BuKGYs
cmVndHlwZSwgcmVnaWQsIHRhZyk6CiAjIwogZGVmIGdlbl90Y2dfZnVuYyhmLCB0YWcsIHJlZ3Ms
IGltbXMpOgogICAgIGYud3JpdGUoZiJzdGF0aWMgdm9pZCBnZW5lcmF0ZV97dGFnfShEaXNhc0Nv
bnRleHQgKmN0eClcbiIpCi0gICAgZi53cml0ZSgne1xuJykKKyAgICBmLndyaXRlKCJ7XG4iKQog
CiAgICAgZi53cml0ZSgiICAgIEluc24gKmluc24gX19hdHRyaWJ1dGVfXygodW51c2VkKSkgPSBj
dHgtPmluc247XG4iKQogCi0gICAgaWYgaGV4X2NvbW1vbi5uZWVkX2VhKHRhZyk6IGdlbl9kZWNs
X2VhX3RjZyhmLCB0YWcpCi0gICAgaT0wCisgICAgaWYgaGV4X2NvbW1vbi5uZWVkX2VhKHRhZyk6
CisgICAgICAgIGdlbl9kZWNsX2VhX3RjZyhmLCB0YWcpCisgICAgaSA9IDAKICAgICAjIyBEZWNs
YXJlIGFsbCB0aGUgb3BlcmFuZHMgKHJlZ3MgYW5kIGltbWVkaWF0ZXMpCi0gICAgZm9yIHJlZ3R5
cGUscmVnaWQsdG9zcyxudW1yZWdzIGluIHJlZ3M6CisgICAgZm9yIHJlZ3R5cGUsIHJlZ2lkLCB0
b3NzLCBudW1yZWdzIGluIHJlZ3M6CiAgICAgICAgIGdlbnB0cl9kZWNsX29wbihmLCB0YWcsIHJl
Z3R5cGUsIHJlZ2lkLCB0b3NzLCBudW1yZWdzLCBpKQogICAgICAgICBpICs9IDEKLSAgICBmb3Ig
aW1tbGV0dCxiaXRzLGltbXNoaWZ0IGluIGltbXM6Ci0gICAgICAgIGdlbnB0cl9kZWNsX2ltbShm
LGltbWxldHQpCisgICAgZm9yIGltbWxldHQsIGJpdHMsIGltbXNoaWZ0IGluIGltbXM6CisgICAg
ICAgIGdlbnB0cl9kZWNsX2ltbShmLCBpbW1sZXR0KQogCi0gICAgaWYgJ0FfUFJJVicgaW4gaGV4
X2NvbW1vbi5hdHRyaWJkaWN0W3RhZ106Ci0gICAgICAgIGYud3JpdGUoJyAgICBmQ0hFQ0tGT1JQ
UklWKCk7XG4nKQotICAgIGlmICdBX0dVRVNUJyBpbiBoZXhfY29tbW9uLmF0dHJpYmRpY3RbdGFn
XToKLSAgICAgICAgZi53cml0ZSgnICAgIGZDSEVDS0ZPUkdVRVNUKCk7XG4nKQorICAgIGlmICJB
X1BSSVYiIGluIGhleF9jb21tb24uYXR0cmliZGljdFt0YWddOgorICAgICAgICBmLndyaXRlKCIg
ICAgZkNIRUNLRk9SUFJJVigpO1xuIikKKyAgICBpZiAiQV9HVUVTVCIgaW4gaGV4X2NvbW1vbi5h
dHRyaWJkaWN0W3RhZ106CisgICAgICAgIGYud3JpdGUoIiAgICBmQ0hFQ0tGT1JHVUVTVCgpO1xu
IikKIAogICAgICMjIFJlYWQgYWxsIHRoZSBpbnB1dHMKLSAgICBmb3IgcmVndHlwZSxyZWdpZCx0
b3NzLG51bXJlZ3MgaW4gcmVnczoKLSAgICAgICAgaWYgKGhleF9jb21tb24uaXNfcmVhZChyZWdp
ZCkpOgotICAgICAgICAgICAgZ2VucHRyX3NyY19yZWFkX29wbihmLHJlZ3R5cGUscmVnaWQsdGFn
KQorICAgIGZvciByZWd0eXBlLCByZWdpZCwgdG9zcywgbnVtcmVncyBpbiByZWdzOgorICAgICAg
ICBpZiBoZXhfY29tbW9uLmlzX3JlYWQocmVnaWQpOgorICAgICAgICAgICAgZ2VucHRyX3NyY19y
ZWFkX29wbihmLCByZWd0eXBlLCByZWdpZCwgdGFnKQogCiAgICAgaWYgaGV4X2NvbW1vbi5pc19p
ZGVmX3BhcnNlcl9lbmFibGVkKHRhZyk6CiAgICAgICAgIGRlY2xhcmVkID0gW10KICAgICAgICAg
IyMgSGFuZGxlIHJlZ2lzdGVycwotICAgICAgICBmb3IgcmVndHlwZSxyZWdpZCx0b3NzLG51bXJl
Z3MgaW4gcmVnczoKLSAgICAgICAgICAgIGlmIChoZXhfY29tbW9uLmlzX3BhaXIocmVnaWQpCi0g
ICAgICAgICAgICAgICAgb3IgKGhleF9jb21tb24uaXNfc2luZ2xlKHJlZ2lkKQotICAgICAgICAg
ICAgICAgICAgICBhbmQgaGV4X2NvbW1vbi5pc19vbGRfdmFsKHJlZ3R5cGUsIHJlZ2lkLCB0YWcp
KSk6CisgICAgICAgIGZvciByZWd0eXBlLCByZWdpZCwgdG9zcywgbnVtcmVncyBpbiByZWdzOgor
ICAgICAgICAgICAgaWYgaGV4X2NvbW1vbi5pc19wYWlyKHJlZ2lkKSBvciAoCisgICAgICAgICAg
ICAgICAgaGV4X2NvbW1vbi5pc19zaW5nbGUocmVnaWQpCisgICAgICAgICAgICAgICAgYW5kIGhl
eF9jb21tb24uaXNfb2xkX3ZhbChyZWd0eXBlLCByZWdpZCwgdGFnKQorICAgICAgICAgICAgKToK
ICAgICAgICAgICAgICAgICBkZWNsYXJlZC5hcHBlbmQoZiJ7cmVndHlwZX17cmVnaWR9ViIpCiAg
ICAgICAgICAgICAgICAgaWYgcmVndHlwZSA9PSAiTSI6CiAgICAgICAgICAgICAgICAgICAgIGRl
Y2xhcmVkLmFwcGVuZChmIntyZWd0eXBlfXtyZWdpZH1OIikKICAgICAgICAgICAgIGVsaWYgaGV4
X2NvbW1vbi5pc19uZXdfdmFsKHJlZ3R5cGUsIHJlZ2lkLCB0YWcpOgogICAgICAgICAgICAgICAg
IGRlY2xhcmVkLmFwcGVuZChmIntyZWd0eXBlfXtyZWdpZH1OIikKICAgICAgICAgICAgIGVsc2U6
Ci0gICAgICAgICAgICAgICAgcHJpbnQoIkJhZCByZWdpc3RlciBwYXJzZTogIixyZWd0eXBlLHJl
Z2lkLHRvc3MsbnVtcmVncykKKyAgICAgICAgICAgICAgICBwcmludCgiQmFkIHJlZ2lzdGVyIHBh
cnNlOiAiLCByZWd0eXBlLCByZWdpZCwgdG9zcywgbnVtcmVncykKIAogICAgICAgICAjIyBIYW5k
bGUgaW1tZWRpYXRlcwotICAgICAgICBmb3IgaW1tbGV0dCxiaXRzLGltbXNoaWZ0IGluIGltbXM6
CisgICAgICAgIGZvciBpbW1sZXR0LCBiaXRzLCBpbW1zaGlmdCBpbiBpbW1zOgogICAgICAgICAg
ICAgZGVjbGFyZWQuYXBwZW5kKGhleF9jb21tb24uaW1tX25hbWUoaW1tbGV0dCkpCiAKICAgICAg
ICAgYXJndW1lbnRzID0gIiwgIi5qb2luKFsiY3R4IiwgImN0eC0+aW5zbiIsICJjdHgtPnBrdCJd
ICsgZGVjbGFyZWQpCiAgICAgICAgIGYud3JpdGUoZiIgICAgZW1pdF97dGFnfSh7YXJndW1lbnRz
fSk7XG4iKQogCi0gICAgZWxpZiAoIGhleF9jb21tb24uc2tpcF9xZW11X2hlbHBlcih0YWcpICk6
CisgICAgZWxpZiBoZXhfY29tbW9uLnNraXBfcWVtdV9oZWxwZXIodGFnKToKICAgICAgICAgZi53
cml0ZShmIiAgICBmR0VOX1RDR197dGFnfSh7aGV4X2NvbW1vbi5zZW1kaWN0W3RhZ119KTtcbiIp
CiAgICAgZWxzZToKICAgICAgICAgIyMgR2VuZXJhdGUgdGhlIGNhbGwgdG8gdGhlIGhlbHBlcgot
ICAgICAgICBmb3IgaW1tbGV0dCxiaXRzLGltbXNoaWZ0IGluIGltbXM6Ci0gICAgICAgICAgICBn
ZW5faGVscGVyX2RlY2xfaW1tKGYsaW1tbGV0dCkKKyAgICAgICAgZm9yIGltbWxldHQsIGJpdHMs
IGltbXNoaWZ0IGluIGltbXM6CisgICAgICAgICAgICBnZW5faGVscGVyX2RlY2xfaW1tKGYsIGlt
bWxldHQpCiAgICAgICAgIGlmIGhleF9jb21tb24ubmVlZF9wa3RfaGFzX211bHRpX2NvZih0YWcp
OgogICAgICAgICAgICAgZi53cml0ZSgiICAgIFRDR3YgcGt0X2hhc19tdWx0aV9jb2YgPSAiKQog
ICAgICAgICAgICAgZi53cml0ZSgidGNnX2NvbnN0YW50X3RsKGN0eC0+cGt0LT5wa3RfaGFzX211
bHRpX2NvZik7XG4iKQpAQCAtNTAwLDYyICs1NTcsNjggQEAgZGVmIGdlbl90Y2dfZnVuYyhmLCB0
YWcsIHJlZ3MsIGltbXMpOgogICAgICAgICBpZiBoZXhfY29tbW9uLmhlbHBlcl9uZWVkc19uZXh0
X1BDKHRhZyk6CiAgICAgICAgICAgICBmLndyaXRlKCIgICAgVENHdiBuZXh0X1BDID0gdGNnX2Nv
bnN0YW50X3RsKGN0eC0+bmV4dF9QQyk7XG4iKQogICAgICAgICBmLndyaXRlKGYiICAgIGdlbl9o
ZWxwZXJfe3RhZ30oIikKLSAgICAgICAgaT0wCisgICAgICAgIGkgPSAwCiAgICAgICAgICMjIElm
IHRoZXJlIGlzIGEgc2NhbGFyIHJlc3VsdCwgaXQgaXMgdGhlIHJldHVybiB0eXBlCi0gICAgICAg
IGZvciByZWd0eXBlLHJlZ2lkLHRvc3MsbnVtcmVncyBpbiByZWdzOgotICAgICAgICAgICAgaWYg
KGhleF9jb21tb24uaXNfd3JpdHRlbihyZWdpZCkpOgotICAgICAgICAgICAgICAgIGlmIChoZXhf
Y29tbW9uLmlzX2h2eF9yZWcocmVndHlwZSkpOgorICAgICAgICBmb3IgcmVndHlwZSwgcmVnaWQs
IHRvc3MsIG51bXJlZ3MgaW4gcmVnczoKKyAgICAgICAgICAgIGlmIGhleF9jb21tb24uaXNfd3Jp
dHRlbihyZWdpZCk6CisgICAgICAgICAgICAgICAgaWYgaGV4X2NvbW1vbi5pc19odnhfcmVnKHJl
Z3R5cGUpOgogICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgIGdl
bl9oZWxwZXJfY2FsbF9vcG4oZiwgdGFnLCByZWd0eXBlLCByZWdpZCwgdG9zcywgbnVtcmVncywg
aSkKICAgICAgICAgICAgICAgICBpICs9IDEKLSAgICAgICAgaWYgKGkgPiAwKTogZi53cml0ZSgi
LCAiKQorICAgICAgICBpZiBpID4gMDoKKyAgICAgICAgICAgIGYud3JpdGUoIiwgIikKICAgICAg
ICAgZi53cml0ZSgiY3B1X2VudiIpCi0gICAgICAgIGk9MQorICAgICAgICBpID0gMQogICAgICAg
ICAjIyBGb3IgY29uZGl0aW9uYWwgaW5zdHJ1Y3Rpb25zLCB3ZSBwYXNzIGluIHRoZSBkZXN0aW5h
dGlvbiByZWdpc3RlcgotICAgICAgICBpZiAnQV9DT05ERVhFQycgaW4gaGV4X2NvbW1vbi5hdHRy
aWJkaWN0W3RhZ106CisgICAgICAgIGlmICJBX0NPTkRFWEVDIiBpbiBoZXhfY29tbW9uLmF0dHJp
YmRpY3RbdGFnXToKICAgICAgICAgICAgIGZvciByZWd0eXBlLCByZWdpZCwgdG9zcywgbnVtcmVn
cyBpbiByZWdzOgotICAgICAgICAgICAgICAgIGlmIChoZXhfY29tbW9uLmlzX3dyaXRlb25seShy
ZWdpZCkgYW5kCi0gICAgICAgICAgICAgICAgICAgIG5vdCBoZXhfY29tbW9uLmlzX2h2eF9yZWco
cmVndHlwZSkpOgotICAgICAgICAgICAgICAgICAgICBnZW5faGVscGVyX2NhbGxfb3BuKGYsIHRh
ZywgcmVndHlwZSwgcmVnaWQsIHRvc3MsIFwKLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBudW1yZWdzLCBpKQorICAgICAgICAgICAgICAgIGlmIGhleF9jb21tb24uaXNf
d3JpdGVvbmx5KHJlZ2lkKSBhbmQgbm90IGhleF9jb21tb24uaXNfaHZ4X3JlZygKKyAgICAgICAg
ICAgICAgICAgICAgcmVndHlwZQorICAgICAgICAgICAgICAgICk6CisgICAgICAgICAgICAgICAg
ICAgIGdlbl9oZWxwZXJfY2FsbF9vcG4oZiwgdGFnLCByZWd0eXBlLCByZWdpZCwgdG9zcywgbnVt
cmVncywgaSkKICAgICAgICAgICAgICAgICAgICAgaSArPSAxCi0gICAgICAgIGZvciByZWd0eXBl
LHJlZ2lkLHRvc3MsbnVtcmVncyBpbiByZWdzOgotICAgICAgICAgICAgaWYgKGhleF9jb21tb24u
aXNfd3JpdHRlbihyZWdpZCkpOgotICAgICAgICAgICAgICAgIGlmIChub3QgaGV4X2NvbW1vbi5p
c19odnhfcmVnKHJlZ3R5cGUpKToKKyAgICAgICAgZm9yIHJlZ3R5cGUsIHJlZ2lkLCB0b3NzLCBu
dW1yZWdzIGluIHJlZ3M6CisgICAgICAgICAgICBpZiBoZXhfY29tbW9uLmlzX3dyaXR0ZW4ocmVn
aWQpOgorICAgICAgICAgICAgICAgIGlmIG5vdCBoZXhfY29tbW9uLmlzX2h2eF9yZWcocmVndHlw
ZSk6CiAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgICAgZ2VuX2hl
bHBlcl9jYWxsX29wbihmLCB0YWcsIHJlZ3R5cGUsIHJlZ2lkLCB0b3NzLCBudW1yZWdzLCBpKQog
ICAgICAgICAgICAgICAgIGkgKz0gMQotICAgICAgICBmb3IgcmVndHlwZSxyZWdpZCx0b3NzLG51
bXJlZ3MgaW4gcmVnczoKLSAgICAgICAgICAgIGlmIChoZXhfY29tbW9uLmlzX3JlYWQocmVnaWQp
KToKLSAgICAgICAgICAgICAgICBpZiAoaGV4X2NvbW1vbi5pc19odnhfcmVnKHJlZ3R5cGUpIGFu
ZAotICAgICAgICAgICAgICAgICAgICBoZXhfY29tbW9uLmlzX3JlYWR3cml0ZShyZWdpZCkpOgor
ICAgICAgICBmb3IgcmVndHlwZSwgcmVnaWQsIHRvc3MsIG51bXJlZ3MgaW4gcmVnczoKKyAgICAg
ICAgICAgIGlmIGhleF9jb21tb24uaXNfcmVhZChyZWdpZCk6CisgICAgICAgICAgICAgICAgaWYg
aGV4X2NvbW1vbi5pc19odnhfcmVnKHJlZ3R5cGUpIGFuZCBoZXhfY29tbW9uLmlzX3JlYWR3cml0
ZShyZWdpZCk6CiAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgICAg
Z2VuX2hlbHBlcl9jYWxsX29wbihmLCB0YWcsIHJlZ3R5cGUsIHJlZ2lkLCB0b3NzLCBudW1yZWdz
LCBpKQogICAgICAgICAgICAgICAgIGkgKz0gMQotICAgICAgICBmb3IgaW1tbGV0dCxiaXRzLGlt
bXNoaWZ0IGluIGltbXM6Ci0gICAgICAgICAgICBnZW5faGVscGVyX2NhbGxfaW1tKGYsaW1tbGV0
dCkKKyAgICAgICAgZm9yIGltbWxldHQsIGJpdHMsIGltbXNoaWZ0IGluIGltbXM6CisgICAgICAg
ICAgICBnZW5faGVscGVyX2NhbGxfaW1tKGYsIGltbWxldHQpCiAKICAgICAgICAgaWYgaGV4X2Nv
bW1vbi5uZWVkX3BrdF9oYXNfbXVsdGlfY29mKHRhZyk6CiAgICAgICAgICAgICBmLndyaXRlKCIs
IHBrdF9oYXNfbXVsdGlfY29mIikKLSAgICAgICAgaWYgaGV4X2NvbW1vbi5uZWVkX1BDKHRhZyk6
IGYud3JpdGUoIiwgUEMiKQotICAgICAgICBpZiBoZXhfY29tbW9uLmhlbHBlcl9uZWVkc19uZXh0
X1BDKHRhZyk6IGYud3JpdGUoIiwgbmV4dF9QQyIpCi0gICAgICAgIGlmIGhleF9jb21tb24ubmVl
ZF9zbG90KHRhZyk6IGYud3JpdGUoIiwgc2xvdCIpCi0gICAgICAgIGlmIGhleF9jb21tb24ubmVl
ZF9wYXJ0MSh0YWcpOiBmLndyaXRlKCIsIHBhcnQxIiApCisgICAgICAgIGlmIGhleF9jb21tb24u
bmVlZF9QQyh0YWcpOgorICAgICAgICAgICAgZi53cml0ZSgiLCBQQyIpCisgICAgICAgIGlmIGhl
eF9jb21tb24uaGVscGVyX25lZWRzX25leHRfUEModGFnKToKKyAgICAgICAgICAgIGYud3JpdGUo
IiwgbmV4dF9QQyIpCisgICAgICAgIGlmIGhleF9jb21tb24ubmVlZF9zbG90KHRhZyk6CisgICAg
ICAgICAgICBmLndyaXRlKCIsIHNsb3QiKQorICAgICAgICBpZiBoZXhfY29tbW9uLm5lZWRfcGFy
dDEodGFnKToKKyAgICAgICAgICAgIGYud3JpdGUoIiwgcGFydDEiKQogICAgICAgICBmLndyaXRl
KCIpO1xuIikKIAogICAgICMjIFdyaXRlIGFsbCB0aGUgb3V0cHV0cwotICAgIGZvciByZWd0eXBl
LHJlZ2lkLHRvc3MsbnVtcmVncyBpbiByZWdzOgotICAgICAgICBpZiAoaGV4X2NvbW1vbi5pc193
cml0dGVuKHJlZ2lkKSk6Ci0gICAgICAgICAgICBnZW5wdHJfZHN0X3dyaXRlX29wbihmLHJlZ3R5
cGUsIHJlZ2lkLCB0YWcpCisgICAgZm9yIHJlZ3R5cGUsIHJlZ2lkLCB0b3NzLCBudW1yZWdzIGlu
IHJlZ3M6CisgICAgICAgIGlmIGhleF9jb21tb24uaXNfd3JpdHRlbihyZWdpZCk6CisgICAgICAg
ICAgICBnZW5wdHJfZHN0X3dyaXRlX29wbihmLCByZWd0eXBlLCByZWdpZCwgdGFnKQogCiAgICAg
Zi53cml0ZSgifVxuXG4iKQogCisKIGRlZiBnZW5fZGVmX3RjZ19mdW5jKGYsIHRhZywgdGFncmVn
cywgdGFnaW1tcyk6CiAgICAgcmVncyA9IHRhZ3JlZ3NbdGFnXQogICAgIGltbXMgPSB0YWdpbW1z
W3RhZ10KIAogICAgIGdlbl90Y2dfZnVuYyhmLCB0YWcsIHJlZ3MsIGltbXMpCiAKKwogZGVmIG1h
aW4oKToKICAgICBoZXhfY29tbW9uLnJlYWRfc2VtYW50aWNzX2ZpbGUoc3lzLmFyZ3ZbMV0pCiAg
ICAgaGV4X2NvbW1vbi5yZWFkX2F0dHJpYnNfZmlsZShzeXMuYXJndlsyXSkKQEAgLTU3OCwzMCAr
NjQxLDMxIEBAIGRlZiBtYWluKCk6CiAgICAgdGFnaW1tcyA9IGhleF9jb21tb24uZ2V0X3RhZ2lt
bXMoKQogCiAgICAgb3V0cHV0X2ZpbGUgPSBzeXMuYXJndlstMV0KLSAgICB3aXRoIG9wZW4ob3V0
cHV0X2ZpbGUsICd3JykgYXMgZjoKKyAgICB3aXRoIG9wZW4ob3V0cHV0X2ZpbGUsICJ3IikgYXMg
ZjoKICAgICAgICAgZi53cml0ZSgiI2lmbmRlZiBIRVhBR09OX1RDR19GVU5DU19IXG4iKQogICAg
ICAgICBmLndyaXRlKCIjZGVmaW5lIEhFWEFHT05fVENHX0ZVTkNTX0hcblxuIikKICAgICAgICAg
aWYgaXNfaWRlZl9wYXJzZXJfZW5hYmxlZDoKLSAgICAgICAgICAgIGYud3JpdGUoIiNpbmNsdWRl
IFwiaWRlZi1nZW5lcmF0ZWQtZW1pdHRlci5oLmluY1wiXG5cbiIpCisgICAgICAgICAgICBmLndy
aXRlKCcjaW5jbHVkZSAiaWRlZi1nZW5lcmF0ZWQtZW1pdHRlci5oLmluYyJcblxuJykKIAogICAg
ICAgICBmb3IgdGFnIGluIGhleF9jb21tb24udGFnczoKICAgICAgICAgICAgICMjIFNraXAgdGhl
IHByaXYgaW5zdHJ1Y3Rpb25zCi0gICAgICAgICAgICBpZiAoICJBX1BSSVYiIGluIGhleF9jb21t
b24uYXR0cmliZGljdFt0YWddICkgOgorICAgICAgICAgICAgaWYgIkFfUFJJViIgaW4gaGV4X2Nv
bW1vbi5hdHRyaWJkaWN0W3RhZ106CiAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAg
ICAgICMjIFNraXAgdGhlIGd1ZXN0IGluc3RydWN0aW9ucwotICAgICAgICAgICAgaWYgKCAiQV9H
VUVTVCIgaW4gaGV4X2NvbW1vbi5hdHRyaWJkaWN0W3RhZ10gKSA6CisgICAgICAgICAgICBpZiAi
QV9HVUVTVCIgaW4gaGV4X2NvbW1vbi5hdHRyaWJkaWN0W3RhZ106CiAgICAgICAgICAgICAgICAg
Y29udGludWUKICAgICAgICAgICAgICMjIFNraXAgdGhlIGRpYWcgaW5zdHJ1Y3Rpb25zCi0gICAg
ICAgICAgICBpZiAoIHRhZyA9PSAiWTZfZGlhZyIgKSA6CisgICAgICAgICAgICBpZiB0YWcgPT0g
Ilk2X2RpYWciOgogICAgICAgICAgICAgICAgIGNvbnRpbnVlCi0gICAgICAgICAgICBpZiAoIHRh
ZyA9PSAiWTZfZGlhZzAiICkgOgorICAgICAgICAgICAgaWYgdGFnID09ICJZNl9kaWFnMCI6CiAg
ICAgICAgICAgICAgICAgY29udGludWUKLSAgICAgICAgICAgIGlmICggdGFnID09ICJZNl9kaWFn
MSIgKSA6CisgICAgICAgICAgICBpZiB0YWcgPT0gIlk2X2RpYWcxIjoKICAgICAgICAgICAgICAg
ICBjb250aW51ZQogCiAgICAgICAgICAgICBnZW5fZGVmX3RjZ19mdW5jKGYsIHRhZywgdGFncmVn
cywgdGFnaW1tcykKIAogICAgICAgICBmLndyaXRlKCIjZW5kaWYgICAgLyogSEVYQUdPTl9UQ0df
RlVOQ1NfSCAqL1xuIikKIAorCiBpZiBfX25hbWVfXyA9PSAiX19tYWluX18iOgogICAgIG1haW4o
KQpkaWZmIC0tZ2l0IGEvdGFyZ2V0L2hleGFnb24vaGV4X2NvbW1vbi5weSBiL3RhcmdldC9oZXhh
Z29uL2hleF9jb21tb24ucHkKaW5kZXggOWY5ZGE4MWUyMC4uNDBmMjhjYTkzMyAxMDA3NTUKLS0t
IGEvdGFyZ2V0L2hleGFnb24vaGV4X2NvbW1vbi5weQorKysgYi90YXJnZXQvaGV4YWdvbi9oZXhf
Y29tbW9uLnB5CkBAIC0yMSwxNCArMjEsMTUgQEAKIGltcG9ydCByZQogaW1wb3J0IHN0cmluZwog
Ci1iZWhkaWN0ID0ge30gICAgICAgICAgIyB0YWcgLT5iZWhhdmlvcgotc2VtZGljdCA9IHt9ICAg
ICAgICAgICMgdGFnIC0+IHNlbWFudGljcwotYXR0cmliZGljdCA9IHt9ICAgICAgICMgdGFnIC0+
IGF0dHJpYnV0ZXMKLW1hY3JvcyA9IHt9ICAgICAgICAgICAjIG1hY3JvIC0+IG1hY3JvIGluZm9y
bWF0aW9uLi4uCi1hdHRyaWJpbmZvID0ge30gICAgICAgIyBSZWdpc3RlciBpbmZvcm1hdGlvbiBh
bmQgbWlzYwotdGFncyA9IFtdICAgICAgICAgICAgICMgbGlzdCBvZiBhbGwgdGFncwotb3ZlcnJp
ZGVzID0ge30gICAgICAgICMgdGFncyB3aXRoIGhlbHBlciBvdmVycmlkZXMKLWlkZWZfcGFyc2Vy
X2VuYWJsZWQgPSB7fSAjIHRhZ3MgZW5hYmxlZCBmb3IgaWRlZi1wYXJzZXIKK2JlaGRpY3QgPSB7
fSAgIyB0YWcgLT5iZWhhdmlvcgorc2VtZGljdCA9IHt9ICAjIHRhZyAtPiBzZW1hbnRpY3MKK2F0
dHJpYmRpY3QgPSB7fSAgIyB0YWcgLT4gYXR0cmlidXRlcworbWFjcm9zID0ge30gICMgbWFjcm8g
LT4gbWFjcm8gaW5mb3JtYXRpb24uLi4KK2F0dHJpYmluZm8gPSB7fSAgIyBSZWdpc3RlciBpbmZv
cm1hdGlvbiBhbmQgbWlzYwordGFncyA9IFtdICAjIGxpc3Qgb2YgYWxsIHRhZ3MKK292ZXJyaWRl
cyA9IHt9ICAjIHRhZ3Mgd2l0aCBoZWxwZXIgb3ZlcnJpZGVzCitpZGVmX3BhcnNlcl9lbmFibGVk
ID0ge30gICMgdGFncyBlbmFibGVkIGZvciBpZGVmLXBhcnNlcgorCiAKICMgV2Ugc2hvdWxkIGRv
IHRoaXMgYXMgYSBoYXNoIGZvciBwZXJmb3JtYW5jZSwKICMgYnV0IHRvIGtlZXAgb3JkZXIgbGV0
J3Mga2VlcCBpdCBhcyBhIGxpc3QuCkBAIC0zNyw3MSArMzgsNzcgQEAgZGVmIHVuaXF1aWZ5KHNl
cSk6CiAgICAgc2Vlbl9hZGQgPSBzZWVuLmFkZAogICAgIHJldHVybiBbeCBmb3IgeCBpbiBzZXEg
aWYgeCBub3QgaW4gc2VlbiBhbmQgbm90IHNlZW5fYWRkKHgpXQogCi1yZWdyZSA9IHJlLmNvbXBp
bGUoCi0gICAgciIoKD88IURVUClbTU5PUkNQUVhTR1ZaQV0pKFtzdHV2d3h5emRlZmddKykoWy5d
P1tMbEhoXT8pKFxkK1M/KSIpCisKK3JlZ3JlID0gcmUuY29tcGlsZShyIigoPzwhRFVQKVtNTk9S
Q1BRWFNHVlpBXSkoW3N0dXZ3eHl6ZGVmZ10rKShbLl0/W0xsSGhdPykoXGQrUz8pIikKIGltbXJl
ID0gcmUuY29tcGlsZShyIlsjXShbclJzU3VVbV0pKFxkKykoPzpbOl0oXGQrKSk/IikKLXJlZ19v
cl9pbW1yZSA9IFwKLSAgICByZS5jb21waWxlKHIiKCgoPzwhRFVQKVtNTlJDT1BRWFNHVlpBXSko
W3N0dXZ3eHl6ZGVmZ10rKSIgKyBcCi0gICAgICAgICAgICAgICAgIihbLl0/W0xsSGhdPykoXGQr
Uz8pKXwoWyNdKFtyUnNTdVVtXSkoXGQrKVs6XT8oXGQrKT8pIikKK3JlZ19vcl9pbW1yZSA9IHJl
LmNvbXBpbGUoCisgICAgciIoKCg/PCFEVVApW01OUkNPUFFYU0dWWkFdKShbc3R1dnd4eXpkZWZn
XSspIgorICAgICsgIihbLl0/W0xsSGhdPykoXGQrUz8pKXwoWyNdKFtyUnNTdVVtXSkoXGQrKVs6
XT8oXGQrKT8pIgorKQogcmVsaW1tcmUgPSByZS5jb21waWxlKHIiWyNdKFtyUl0pKFxkKykoPzpb
Ol0oXGQrKSk/IikKIGFic2ltbXJlID0gcmUuY29tcGlsZShyIlsjXShbc1N1VW1dKShcZCspKD86
WzpdKFxkKykpPyIpCiAKIGZpbmlzaGVkX21hY3JvcyA9IHNldCgpCiAKLWRlZiBleHBhbmRfbWFj
cm9fYXR0cmlicyhtYWNybyxhbGxtYWNfcmUpOgorCitkZWYgZXhwYW5kX21hY3JvX2F0dHJpYnMo
bWFjcm8sIGFsbG1hY19yZSk6CiAgICAgaWYgbWFjcm8ua2V5IG5vdCBpbiBmaW5pc2hlZF9tYWNy
b3M6CiAgICAgICAgICMgR2V0IGEgbGlzdCBvZiBhbGwgdGhpbmdzIHRoYXQgbWlnaHQgYmUgbWFj
cm9zCiAgICAgICAgIGwgPSBhbGxtYWNfcmUuZmluZGFsbChtYWNyby5iZWgpCiAgICAgICAgIGZv
ciBzdWJtYWNybyBpbiBsOgotICAgICAgICAgICAgaWYgbm90IHN1Ym1hY3JvOiBjb250aW51ZQor
ICAgICAgICAgICAgaWYgbm90IHN1Ym1hY3JvOgorICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAg
ICAgICAgICAgICBpZiBub3QgbWFjcm9zW3N1Ym1hY3JvXToKICAgICAgICAgICAgICAgICByYWlz
ZSBFeGNlcHRpb24oZiJDb3VsZG4ndCBmaW5kIG1hY3JvOiA8e2x9PiIpCi0gICAgICAgICAgICBt
YWNyby5hdHRyaWJzIHw9IGV4cGFuZF9tYWNyb19hdHRyaWJzKAotICAgICAgICAgICAgICAgIG1h
Y3Jvc1tzdWJtYWNyb10sIGFsbG1hY19yZSkKKyAgICAgICAgICAgIG1hY3JvLmF0dHJpYnMgfD0g
ZXhwYW5kX21hY3JvX2F0dHJpYnMobWFjcm9zW3N1Ym1hY3JvXSwgYWxsbWFjX3JlKQogICAgICAg
ICAgICAgZmluaXNoZWRfbWFjcm9zLmFkZChtYWNyby5rZXkpCiAgICAgcmV0dXJuIG1hY3JvLmF0
dHJpYnMKIAorCiAjIFdoZW4gcWVtdSBuZWVkcyBhbiBhdHRyaWJ1dGUgdGhhdCBpc24ndCBpbiB0
aGUgaW1wb3J0ZWQgZmlsZXMsCiAjIHdlJ2xsIGFkZCBpdCBoZXJlLgogZGVmIGFkZF9xZW11X21h
Y3JvX2F0dHJpYihuYW1lLCBhdHRyaWIpOgogICAgIG1hY3Jvc1tuYW1lXS5hdHRyaWJzLmFkZChh
dHRyaWIpCiAKLWltbWV4dHJlID0gcmUuY29tcGlsZShyJ2YoTVVTVF8pP0lNTUVYVFsoXShbVXVT
c1JyXSknKQorCitpbW1leHRyZSA9IHJlLmNvbXBpbGUociJmKE1VU1RfKT9JTU1FWFRbKF0oW1V1
U3NScl0pIikKKwogCiBkZWYgaXNfY29uZF9qdW1wKHRhZyk6Ci0gICAgaWYgdGFnID09ICdKMl9y
dGUnOgorICAgIGlmIHRhZyA9PSAiSjJfcnRlIjoKICAgICAgICAgcmV0dXJuIEZhbHNlCi0gICAg
aWYgKCdBX0hXTE9PUDBfRU5EJyBpbiBhdHRyaWJkaWN0W3RhZ10gb3IKLSAgICAgICAgJ0FfSFdM
T09QMV9FTkQnIGluIGF0dHJpYmRpY3RbdGFnXSk6CisgICAgaWYgIkFfSFdMT09QMF9FTkQiIGlu
IGF0dHJpYmRpY3RbdGFnXSBvciAiQV9IV0xPT1AxX0VORCIgaW4gYXR0cmliZGljdFt0YWddOgog
ICAgICAgICByZXR1cm4gRmFsc2UKLSAgICByZXR1cm4gXAotICAgICAgICByZS5jb21waWxlKHIi
KGlmLipmQlJBTkNIKXwoaWYuKmZKVU1QUikiKS5zZWFyY2goc2VtZGljdFt0YWddKSAhPSBOb25l
CisgICAgcmV0dXJuIHJlLmNvbXBpbGUociIoaWYuKmZCUkFOQ0gpfChpZi4qZkpVTVBSKSIpLnNl
YXJjaChzZW1kaWN0W3RhZ10pICE9IE5vbmUKKwogCiBkZWYgaXNfY29uZF9jYWxsKHRhZyk6CiAg
ICAgcmV0dXJuIHJlLmNvbXBpbGUociIoaWYuKmZDQUxMKSIpLnNlYXJjaChzZW1kaWN0W3RhZ10p
ICE9IE5vbmUKIAorCiBkZWYgY2FsY3VsYXRlX2F0dHJpYnMoKToKLSAgICBhZGRfcWVtdV9tYWNy
b19hdHRyaWIoJ2ZSRUFEX1BDJywgJ0FfSU1QTElDSVRfUkVBRFNfUEMnKQotICAgIGFkZF9xZW11
X21hY3JvX2F0dHJpYignZlRSQVAnLCAnQV9JTVBMSUNJVF9SRUFEU19QQycpCi0gICAgYWRkX3Fl
bXVfbWFjcm9fYXR0cmliKCdmV1JJVEVfUDAnLCAnQV9XUklURVNfUFJFRF9SRUcnKQotICAgIGFk
ZF9xZW11X21hY3JvX2F0dHJpYignZldSSVRFX1AxJywgJ0FfV1JJVEVTX1BSRURfUkVHJykKLSAg
ICBhZGRfcWVtdV9tYWNyb19hdHRyaWIoJ2ZXUklURV9QMicsICdBX1dSSVRFU19QUkVEX1JFRycp
Ci0gICAgYWRkX3FlbXVfbWFjcm9fYXR0cmliKCdmV1JJVEVfUDMnLCAnQV9XUklURVNfUFJFRF9S
RUcnKQotICAgIGFkZF9xZW11X21hY3JvX2F0dHJpYignZlNFVF9PVkVSRkxPVycsICdBX0lNUExJ
Q0lUX1dSSVRFU19VU1InKQotICAgIGFkZF9xZW11X21hY3JvX2F0dHJpYignZlNFVF9MUENGRycs
ICdBX0lNUExJQ0lUX1dSSVRFU19VU1InKQotICAgIGFkZF9xZW11X21hY3JvX2F0dHJpYignZkxP
QUQnLCAnQV9TQ0FMQVJfTE9BRCcpCi0gICAgYWRkX3FlbXVfbWFjcm9fYXR0cmliKCdmU1RPUkUn
LCAnQV9TQ0FMQVJfU1RPUkUnKQorICAgIGFkZF9xZW11X21hY3JvX2F0dHJpYigiZlJFQURfUEMi
LCAiQV9JTVBMSUNJVF9SRUFEU19QQyIpCisgICAgYWRkX3FlbXVfbWFjcm9fYXR0cmliKCJmVFJB
UCIsICJBX0lNUExJQ0lUX1JFQURTX1BDIikKKyAgICBhZGRfcWVtdV9tYWNyb19hdHRyaWIoImZX
UklURV9QMCIsICJBX1dSSVRFU19QUkVEX1JFRyIpCisgICAgYWRkX3FlbXVfbWFjcm9fYXR0cmli
KCJmV1JJVEVfUDEiLCAiQV9XUklURVNfUFJFRF9SRUciKQorICAgIGFkZF9xZW11X21hY3JvX2F0
dHJpYigiZldSSVRFX1AyIiwgIkFfV1JJVEVTX1BSRURfUkVHIikKKyAgICBhZGRfcWVtdV9tYWNy
b19hdHRyaWIoImZXUklURV9QMyIsICJBX1dSSVRFU19QUkVEX1JFRyIpCisgICAgYWRkX3FlbXVf
bWFjcm9fYXR0cmliKCJmU0VUX09WRVJGTE9XIiwgIkFfSU1QTElDSVRfV1JJVEVTX1VTUiIpCisg
ICAgYWRkX3FlbXVfbWFjcm9fYXR0cmliKCJmU0VUX0xQQ0ZHIiwgIkFfSU1QTElDSVRfV1JJVEVT
X1VTUiIpCisgICAgYWRkX3FlbXVfbWFjcm9fYXR0cmliKCJmTE9BRCIsICJBX1NDQUxBUl9MT0FE
IikKKyAgICBhZGRfcWVtdV9tYWNyb19hdHRyaWIoImZTVE9SRSIsICJBX1NDQUxBUl9TVE9SRSIp
CiAKICAgICAjIFJlY3Vyc2UgZG93biBtYWNyb3MsIGZpbmQgYXR0cmlidXRlcyBmcm9tIHN1Yi1t
YWNyb3MKICAgICBtYWNyb1ZhbHVlcyA9IGxpc3QobWFjcm9zLnZhbHVlcygpKQotICAgIGFsbG1h
Y3Jvc19yZXN0ciA9ICJ8Ii5qb2luKHNldChbIG0ucmUucGF0dGVybiBmb3IgbSBpbiBtYWNyb1Zh
bHVlcyBdKSkKKyAgICBhbGxtYWNyb3NfcmVzdHIgPSAifCIuam9pbihzZXQoW20ucmUucGF0dGVy
biBmb3IgbSBpbiBtYWNyb1ZhbHVlc10pKQogICAgIGFsbG1hY3Jvc19yZSA9IHJlLmNvbXBpbGUo
YWxsbWFjcm9zX3Jlc3RyKQogICAgIGZvciBtYWNybyBpbiBtYWNyb1ZhbHVlczoKLSAgICAgICAg
ZXhwYW5kX21hY3JvX2F0dHJpYnMobWFjcm8sYWxsbWFjcm9zX3JlKQorICAgICAgICBleHBhbmRf
bWFjcm9fYXR0cmlicyhtYWNybywgYWxsbWFjcm9zX3JlKQogICAgICMgQXBwZW5kIGF0dHJpYnV0
ZXMgdG8gYWxsIGluc3RydWN0aW9ucwogICAgIGZvciB0YWcgaW4gdGFnczoKICAgICAgICAgZm9y
IG1hY25hbWUgaW4gYWxsbWFjcm9zX3JlLmZpbmRhbGwoc2VtZGljdFt0YWddKToKLSAgICAgICAg
ICAgIGlmIG5vdCBtYWNuYW1lOiBjb250aW51ZQorICAgICAgICAgICAgaWYgbm90IG1hY25hbWU6
CisgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgIG1hY3JvID0gbWFjcm9zW21h
Y25hbWVdCiAgICAgICAgICAgICBhdHRyaWJkaWN0W3RhZ10gfD0gc2V0KG1hY3JvLmF0dHJpYnMp
CiAgICAgIyBGaWd1cmUgb3V0IHdoaWNoIGluc3RydWN0aW9ucyB3cml0ZSBwcmVkaWNhdGUgcmVn
aXN0ZXJzCkBAIC0xMTAsMzEgKzExNywzNCBAQCBkZWYgY2FsY3VsYXRlX2F0dHJpYnMoKToKICAg
ICAgICAgcmVncyA9IHRhZ3JlZ3NbdGFnXQogICAgICAgICBmb3IgcmVndHlwZSwgcmVnaWQsIHRv
c3MsIG51bXJlZ3MgaW4gcmVnczoKICAgICAgICAgICAgIGlmIHJlZ3R5cGUgPT0gIlAiIGFuZCBp
c193cml0dGVuKHJlZ2lkKToKLSAgICAgICAgICAgICAgICBhdHRyaWJkaWN0W3RhZ10uYWRkKCdB
X1dSSVRFU19QUkVEX1JFRycpCisgICAgICAgICAgICAgICAgYXR0cmliZGljdFt0YWddLmFkZCgi
QV9XUklURVNfUFJFRF9SRUciKQogICAgICMgTWFyayBjb25kaXRpb25hbCBqdW1wcyBhbmQgY2Fs
bHMKICAgICAjICAgICBOb3QgYWxsIGluc3RydWN0aW9ucyBhcmUgcHJvcGVybHkgbWFya2VkIHdp
dGggQV9DT05ERVhFQwogICAgIGZvciB0YWcgaW4gdGFnczoKICAgICAgICAgaWYgaXNfY29uZF9q
dW1wKHRhZykgb3IgaXNfY29uZF9jYWxsKHRhZyk6Ci0gICAgICAgICAgICBhdHRyaWJkaWN0W3Rh
Z10uYWRkKCdBX0NPTkRFWEVDJykKKyAgICAgICAgICAgIGF0dHJpYmRpY3RbdGFnXS5hZGQoIkFf
Q09OREVYRUMiKQorCiAKIGRlZiBTRU1BTlRJQ1ModGFnLCBiZWgsIHNlbSk6Ci0gICAgI3ByaW50
IHRhZyxiZWgsc2VtCisgICAgIyBwcmludCB0YWcsYmVoLHNlbQogICAgIGJlaGRpY3RbdGFnXSA9
IGJlaAogICAgIHNlbWRpY3RbdGFnXSA9IHNlbQogICAgIGF0dHJpYmRpY3RbdGFnXSA9IHNldCgp
Ci0gICAgdGFncy5hcHBlbmQodGFnKSAgICAgICAgIyBkaWN0cyBoYXZlIG5vIG9yZGVyLCB0aGlz
IGlzIGZvciBvcmRlcgorICAgIHRhZ3MuYXBwZW5kKHRhZykgICMgZGljdHMgaGF2ZSBubyBvcmRl
ciwgdGhpcyBpcyBmb3Igb3JkZXIKKwogCiBkZWYgQVRUUklCVVRFUyh0YWcsIGF0dHJpYnN0cmlu
Zyk6Ci0gICAgYXR0cmlic3RyaW5nID0gXAotICAgICAgICBhdHRyaWJzdHJpbmcucmVwbGFjZSgi
QVRUUklCUyIsIiIpLnJlcGxhY2UoIigiLCIiKS5yZXBsYWNlKCIpIiwiIikKKyAgICBhdHRyaWJz
dHJpbmcgPSBhdHRyaWJzdHJpbmcucmVwbGFjZSgiQVRUUklCUyIsICIiKS5yZXBsYWNlKCIoIiwg
IiIpLnJlcGxhY2UoIikiLCAiIikKICAgICBpZiBub3QgYXR0cmlic3RyaW5nOgogICAgICAgICBy
ZXR1cm4KICAgICBhdHRyaWJzID0gYXR0cmlic3RyaW5nLnNwbGl0KCIsIikKICAgICBmb3IgYXR0
cmliIGluIGF0dHJpYnM6CiAgICAgICAgIGF0dHJpYmRpY3RbdGFnXS5hZGQoYXR0cmliLnN0cmlw
KCkpCiAKKwogY2xhc3MgTWFjcm8ob2JqZWN0KToKLSAgICBfX3Nsb3RzX18gPSBbJ2tleScsJ25h
bWUnLCAnYmVoJywgJ2F0dHJpYnMnLCAncmUnXQorICAgIF9fc2xvdHNfXyA9IFsia2V5IiwgIm5h
bWUiLCAiYmVoIiwgImF0dHJpYnMiLCAicmUiXQorCiAgICAgZGVmIF9faW5pdF9fKHNlbGYsIG5h
bWUsIGJlaCwgYXR0cmlicyk6CiAgICAgICAgIHNlbGYua2V5ID0gbmFtZQogICAgICAgICBzZWxm
Lm5hbWUgPSBuYW1lCkBAIC0xNDIsMjAgKzE1MiwyNCBAQCBkZWYgX19pbml0X18oc2VsZiwgbmFt
ZSwgYmVoLCBhdHRyaWJzKToKICAgICAgICAgc2VsZi5hdHRyaWJzID0gc2V0KGF0dHJpYnMpCiAg
ICAgICAgIHNlbGYucmUgPSByZS5jb21waWxlKCJcXGIiICsgbmFtZSArICJcXGIiKQogCi1kZWYg
TUFDUk9BVFRSSUIobWFjbmFtZSxiZWgsYXR0cmlic3RyaW5nKToKLSAgICBhdHRyaWJzdHJpbmcg
PSBhdHRyaWJzdHJpbmcucmVwbGFjZSgiKCIsIiIpLnJlcGxhY2UoIikiLCIiKQorCitkZWYgTUFD
Uk9BVFRSSUIobWFjbmFtZSwgYmVoLCBhdHRyaWJzdHJpbmcpOgorICAgIGF0dHJpYnN0cmluZyA9
IGF0dHJpYnN0cmluZy5yZXBsYWNlKCIoIiwgIiIpLnJlcGxhY2UoIikiLCAiIikKICAgICBpZiBh
dHRyaWJzdHJpbmc6CiAgICAgICAgIGF0dHJpYnMgPSBhdHRyaWJzdHJpbmcuc3BsaXQoIiwiKQog
ICAgIGVsc2U6CiAgICAgICAgIGF0dHJpYnMgPSBbXQotICAgIG1hY3Jvc1ttYWNuYW1lXSA9IE1h
Y3JvKG1hY25hbWUsYmVoLGF0dHJpYnMpCisgICAgbWFjcm9zW21hY25hbWVdID0gTWFjcm8obWFj
bmFtZSwgYmVoLCBhdHRyaWJzKQorCiAKIGRlZiBjb21wdXRlX3RhZ19yZWdzKHRhZyk6CiAgICAg
cmV0dXJuIHVuaXF1aWZ5KHJlZ3JlLmZpbmRhbGwoYmVoZGljdFt0YWddKSkKIAorCiBkZWYgY29t
cHV0ZV90YWdfaW1tZWRpYXRlcyh0YWcpOgogICAgIHJldHVybiB1bmlxdWlmeShpbW1yZS5maW5k
YWxsKGJlaGRpY3RbdGFnXSkpCiAKKwogIyMKICMjICB0YWdyZWdzIGlzIHRoZSBtYWluIGRhdGEg
c3RydWN0dXJlIHdlJ2xsIHVzZQogIyMgIHRhZ3JlZ3NbdGFnXSB3aWxsIGNvbnRhaW4gdGhlIHJl
Z2lzdGVycyB1c2VkIGJ5IGFuIGluc3RydWN0aW9uCkBAIC0xODAsODkgKzE5NCwxMTMgQEAgZGVm
IGNvbXB1dGVfdGFnX2ltbWVkaWF0ZXModGFnKToKIGRlZiBnZXRfdGFncmVncygpOgogICAgIHJl
dHVybiBkaWN0KHppcCh0YWdzLCBsaXN0KG1hcChjb21wdXRlX3RhZ19yZWdzLCB0YWdzKSkpKQog
CisKIGRlZiBnZXRfdGFnaW1tcygpOgogICAgIHJldHVybiBkaWN0KHppcCh0YWdzLCBsaXN0KG1h
cChjb21wdXRlX3RhZ19pbW1lZGlhdGVzLCB0YWdzKSkpKQogCisKIGRlZiBpc19wYWlyKHJlZ2lk
KToKICAgICByZXR1cm4gbGVuKHJlZ2lkKSA9PSAyCiAKKwogZGVmIGlzX3NpbmdsZShyZWdpZCk6
CiAgICAgcmV0dXJuIGxlbihyZWdpZCkgPT0gMQogCisKIGRlZiBpc193cml0dGVuKHJlZ2lkKToK
ICAgICByZXR1cm4gcmVnaWRbMF0gaW4gImRleHkiCiAKKwogZGVmIGlzX3dyaXRlb25seShyZWdp
ZCk6CiAgICAgcmV0dXJuIHJlZ2lkWzBdIGluICJkZSIKIAorCiBkZWYgaXNfcmVhZChyZWdpZCk6
CiAgICAgcmV0dXJuIHJlZ2lkWzBdIGluICJzdHV2d3h5IgogCisKIGRlZiBpc19yZWFkd3JpdGUo
cmVnaWQpOgogICAgIHJldHVybiByZWdpZFswXSBpbiAieHkiCiAKKwogZGVmIGlzX3NjYWxhcl9y
ZWcocmVndHlwZSk6CiAgICAgcmV0dXJuIHJlZ3R5cGUgaW4gIlJQQyIKIAorCiBkZWYgaXNfaHZ4
X3JlZyhyZWd0eXBlKToKICAgICByZXR1cm4gcmVndHlwZSBpbiAiVlEiCiAKKwogZGVmIGlzX29s
ZF92YWwocmVndHlwZSwgcmVnaWQsIHRhZyk6Ci0gICAgcmV0dXJuIHJlZ3R5cGUrcmVnaWQrJ1Yn
IGluIHNlbWRpY3RbdGFnXQorICAgIHJldHVybiByZWd0eXBlICsgcmVnaWQgKyAiViIgaW4gc2Vt
ZGljdFt0YWddCisKIAogZGVmIGlzX25ld192YWwocmVndHlwZSwgcmVnaWQsIHRhZyk6Ci0gICAg
cmV0dXJuIHJlZ3R5cGUrcmVnaWQrJ04nIGluIHNlbWRpY3RbdGFnXQorICAgIHJldHVybiByZWd0
eXBlICsgcmVnaWQgKyAiTiIgaW4gc2VtZGljdFt0YWddCisKIAogZGVmIG5lZWRfc2xvdCh0YWcp
OgotICAgIGlmICgoJ0FfQ09OREVYRUMnIGluIGF0dHJpYmRpY3RbdGFnXSBhbmQKLSAgICAgICAg
ICdBX0pVTVAnIG5vdCBpbiBhdHRyaWJkaWN0W3RhZ10pIG9yCi0gICAgICAgICdBX1NUT1JFJyBp
biBhdHRyaWJkaWN0W3RhZ10gb3IKLSAgICAgICAgJ0FfTE9BRCcgaW4gYXR0cmliZGljdFt0YWdd
KToKKyAgICBpZiAoCisgICAgICAgICgiQV9DT05ERVhFQyIgaW4gYXR0cmliZGljdFt0YWddIGFu
ZCAiQV9KVU1QIiBub3QgaW4gYXR0cmliZGljdFt0YWddKQorICAgICAgICBvciAiQV9TVE9SRSIg
aW4gYXR0cmliZGljdFt0YWddCisgICAgICAgIG9yICJBX0xPQUQiIGluIGF0dHJpYmRpY3RbdGFn
XQorICAgICk6CiAgICAgICAgIHJldHVybiAxCiAgICAgZWxzZToKICAgICAgICAgcmV0dXJuIDAK
IAorCiBkZWYgbmVlZF9wYXJ0MSh0YWcpOgogICAgIHJldHVybiByZS5jb21waWxlKHIiZlBBUlQx
Iikuc2VhcmNoKHNlbWRpY3RbdGFnXSkKIAorCiBkZWYgbmVlZF9lYSh0YWcpOgogICAgIHJldHVy
biByZS5jb21waWxlKHIiXGJFQVxiIikuc2VhcmNoKHNlbWRpY3RbdGFnXSkKIAorCiBkZWYgbmVl
ZF9QQyh0YWcpOgotICAgIHJldHVybiAnQV9JTVBMSUNJVF9SRUFEU19QQycgaW4gYXR0cmliZGlj
dFt0YWddCisgICAgcmV0dXJuICJBX0lNUExJQ0lUX1JFQURTX1BDIiBpbiBhdHRyaWJkaWN0W3Rh
Z10KKwogCiBkZWYgaGVscGVyX25lZWRzX25leHRfUEModGFnKToKLSAgICByZXR1cm4gJ0FfQ0FM
TCcgaW4gYXR0cmliZGljdFt0YWddCisgICAgcmV0dXJuICJBX0NBTEwiIGluIGF0dHJpYmRpY3Rb
dGFnXQorCiAKIGRlZiBuZWVkX3BrdF9oYXNfbXVsdGlfY29mKHRhZyk6Ci0gICAgcmV0dXJuICdB
X0NPRicgaW4gYXR0cmliZGljdFt0YWddCisgICAgcmV0dXJuICJBX0NPRiIgaW4gYXR0cmliZGlj
dFt0YWddCisKIAogZGVmIG5lZWRfY29uZGV4ZWNfcmVnKHRhZywgcmVncyk6Ci0gICAgaWYgJ0Ff
Q09OREVYRUMnIGluIGF0dHJpYmRpY3RbdGFnXToKKyAgICBpZiAiQV9DT05ERVhFQyIgaW4gYXR0
cmliZGljdFt0YWddOgogICAgICAgICBmb3IgcmVndHlwZSwgcmVnaWQsIHRvc3MsIG51bXJlZ3Mg
aW4gcmVnczoKICAgICAgICAgICAgIGlmIGlzX3dyaXRlb25seShyZWdpZCkgYW5kIG5vdCBpc19o
dnhfcmVnKHJlZ3R5cGUpOgogICAgICAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgcmV0dXJu
IEZhbHNlCiAKKwogZGVmIHNraXBfcWVtdV9oZWxwZXIodGFnKToKICAgICByZXR1cm4gdGFnIGlu
IG92ZXJyaWRlcy5rZXlzKCkKIAorCiBkZWYgaXNfdG1wX3Jlc3VsdCh0YWcpOgotICAgIHJldHVy
biAoJ0FfQ1ZJX1RNUCcgaW4gYXR0cmliZGljdFt0YWddIG9yCi0gICAgICAgICAgICAnQV9DVklf
VE1QX0RTVCcgaW4gYXR0cmliZGljdFt0YWddKQorICAgIHJldHVybiAiQV9DVklfVE1QIiBpbiBh
dHRyaWJkaWN0W3RhZ10gb3IgIkFfQ1ZJX1RNUF9EU1QiIGluIGF0dHJpYmRpY3RbdGFnXQorCiAK
IGRlZiBpc19uZXdfcmVzdWx0KHRhZyk6Ci0gICAgcmV0dXJuICgnQV9DVklfTkVXJyBpbiBhdHRy
aWJkaWN0W3RhZ10pCisgICAgcmV0dXJuICJBX0NWSV9ORVciIGluIGF0dHJpYmRpY3RbdGFnXQor
CiAKIGRlZiBpc19pZGVmX3BhcnNlcl9lbmFibGVkKHRhZyk6CiAgICAgcmV0dXJuIHRhZyBpbiBp
ZGVmX3BhcnNlcl9lbmFibGVkCiAKKwogZGVmIGltbV9uYW1lKGltbWxldHQpOgogICAgIHJldHVy
biBmIntpbW1sZXR0fWlWIgogCisKIGRlZiByZWFkX3NlbWFudGljc19maWxlKG5hbWUpOgogICAg
IGV2YWxfbGluZSA9ICIiCi0gICAgZm9yIGxpbmUgaW4gb3BlbihuYW1lLCAncnQnKS5yZWFkbGlu
ZXMoKToKKyAgICBmb3IgbGluZSBpbiBvcGVuKG5hbWUsICJydCIpLnJlYWRsaW5lcygpOgogICAg
ICAgICBpZiBub3QgbGluZS5zdGFydHN3aXRoKCIjIik6CiAgICAgICAgICAgICBldmFsX2xpbmUg
Kz0gbGluZQogICAgICAgICAgICAgaWYgbGluZS5lbmRzd2l0aCgiXFxcbiIpOgpAQCAtMjcxLDI0
ICszMDksMjkgQEAgZGVmIHJlYWRfc2VtYW50aWNzX2ZpbGUobmFtZSk6CiAgICAgICAgICAgICAg
ICAgZXZhbChldmFsX2xpbmUuc3RyaXAoKSkKICAgICAgICAgICAgICAgICBldmFsX2xpbmUgPSAi
IgogCisKIGRlZiByZWFkX2F0dHJpYnNfZmlsZShuYW1lKToKLSAgICBhdHRyaWJyZSA9IHJlLmNv
bXBpbGUocidERUZfQVRUUklCXCgoW0EtWmEtejAtOV9dKyksIChbXixdKiksICcgKwotICAgICAg
ICAgICAgciciKFtBLVphLXowLTlfXC5dKikiLCAiKFtBLVphLXowLTlfXC5dKikiXCknKQotICAg
IGZvciBsaW5lIGluIG9wZW4obmFtZSwgJ3J0JykucmVhZGxpbmVzKCk6CisgICAgYXR0cmlicmUg
PSByZS5jb21waWxlKAorICAgICAgICByIkRFRl9BVFRSSUJcKChbQS1aYS16MC05X10rKSwgKFte
LF0qKSwgIgorICAgICAgICArIHInIihbQS1aYS16MC05X1wuXSopIiwgIihbQS1aYS16MC05X1wu
XSopIlwpJworICAgICkKKyAgICBmb3IgbGluZSBpbiBvcGVuKG5hbWUsICJydCIpLnJlYWRsaW5l
cygpOgogICAgICAgICBpZiBub3QgYXR0cmlicmUubWF0Y2gobGluZSk6CiAgICAgICAgICAgICBj
b250aW51ZQotICAgICAgICAoYXR0cmliX2Jhc2UsZGVzY3IscnJlZyx3cmVnKSA9IGF0dHJpYnJl
LmZpbmRhbGwobGluZSlbMF0KLSAgICAgICAgYXR0cmliX2Jhc2UgPSAnQV8nICsgYXR0cmliX2Jh
c2UKLSAgICAgICAgYXR0cmliaW5mb1thdHRyaWJfYmFzZV0gPSB7J3JyZWcnOnJyZWcsICd3cmVn
Jzp3cmVnLCAnZGVzY3InOmRlc2NyfQorICAgICAgICAoYXR0cmliX2Jhc2UsIGRlc2NyLCBycmVn
LCB3cmVnKSA9IGF0dHJpYnJlLmZpbmRhbGwobGluZSlbMF0KKyAgICAgICAgYXR0cmliX2Jhc2Ug
PSAiQV8iICsgYXR0cmliX2Jhc2UKKyAgICAgICAgYXR0cmliaW5mb1thdHRyaWJfYmFzZV0gPSB7
InJyZWciOiBycmVnLCAid3JlZyI6IHdyZWcsICJkZXNjciI6IGRlc2NyfQorCiAKIGRlZiByZWFk
X292ZXJyaWRlc19maWxlKG5hbWUpOgogICAgIG92ZXJyaWRlcmUgPSByZS5jb21waWxlKCIjZGVm
aW5lIGZHRU5fVENHXyhbQS1aYS16MC05X10rKVwoLioiKQotICAgIGZvciBsaW5lIGluIG9wZW4o
bmFtZSwgJ3J0JykucmVhZGxpbmVzKCk6CisgICAgZm9yIGxpbmUgaW4gb3BlbihuYW1lLCAicnQi
KS5yZWFkbGluZXMoKToKICAgICAgICAgaWYgbm90IG92ZXJyaWRlcmUubWF0Y2gobGluZSk6CiAg
ICAgICAgICAgICBjb250aW51ZQogICAgICAgICB0YWcgPSBvdmVycmlkZXJlLmZpbmRhbGwobGlu
ZSlbMF0KICAgICAgICAgb3ZlcnJpZGVzW3RhZ10gPSBUcnVlCiAKKwogZGVmIHJlYWRfaWRlZl9w
YXJzZXJfZW5hYmxlZF9maWxlKG5hbWUpOgogICAgIGdsb2JhbCBpZGVmX3BhcnNlcl9lbmFibGVk
CiAgICAgd2l0aCBvcGVuKG5hbWUsICJyIikgYXMgaWRlZl9wYXJzZXJfZW5hYmxlZF9maWxlOgot
LSAKMi4yNS4xCgo=

