Return-Path: <qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org>
X-Original-To: lists+qemu-devel@lfdr.de
Delivered-To: lists+qemu-devel@lfdr.de
Received: from lists.gnu.org (lists.gnu.org [209.51.188.17])
	by mail.lfdr.de (Postfix) with ESMTPS id 767ED56AD37
	for <lists+qemu-devel@lfdr.de>; Thu,  7 Jul 2022 23:08:47 +0200 (CEST)
Received: from localhost ([::1]:35140 helo=lists1p.gnu.org)
	by lists.gnu.org with esmtp (Exim 4.90_1)
	(envelope-from <qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org>)
	id 1o9Yju-0003aU-Jk
	for lists+qemu-devel@lfdr.de; Thu, 07 Jul 2022 17:08:46 -0400
Received: from eggs.gnu.org ([2001:470:142:3::10]:50836)
 by lists.gnu.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256)
 (Exim 4.90_1) (envelope-from <tsimpson@qualcomm.com>)
 id 1o9YhS-0007GQ-U7
 for qemu-devel@nongnu.org; Thu, 07 Jul 2022 17:06:14 -0400
Received: from alexa-out.qualcomm.com ([129.46.98.28]:7000)
 by eggs.gnu.org with esmtps (TLS1.2:RSA_AES_256_CBC_SHA1:256)
 (Exim 4.90_1) (envelope-from <tsimpson@qualcomm.com>)
 id 1o9YhP-0002SW-Tk
 for qemu-devel@nongnu.org; Thu, 07 Jul 2022 17:06:14 -0400
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=quicinc.com; i=@quicinc.com; q=dns/txt; s=qcdkim;
 t=1657227972; x=1688763972;
 h=from:to:cc:subject:date:message-id:in-reply-to:
 references:mime-version:content-transfer-encoding;
 bh=FpCRvd3yvVeEvy16EXWqlPY8hmMbBfneUA6YDqQ8pqk=;
 b=xY2gG4bc4ws6QhwvyvGCgCXH1hBcZJSiVNHo7fkFs5fdMabLGxjzMWXP
 EVvd/ay0su/wTkltl20B66ItqQYJbId3Y8DeOJw0syxkoZG3IDm901rHm
 CbGnFgvToYAtJv9N+8zPQUi/5E8RWOEPrFoUbyub1ssgqm8LQVnJ5VRW5 E=;
Received: from ironmsg-lv-alpha.qualcomm.com ([10.47.202.13])
 by alexa-out.qualcomm.com with ESMTP; 07 Jul 2022 14:06:05 -0700
X-QCInternal: smtphost
Received: from hu-tsimpson-lv.qualcomm.com (HELO
 hu-devc-lv-u18-c.qualcomm.com) ([10.47.235.220])
 by ironmsg-lv-alpha.qualcomm.com with ESMTP; 07 Jul 2022 14:06:04 -0700
Received: by hu-devc-lv-u18-c.qualcomm.com (Postfix, from userid 47164)
 id C340D5005BE; Thu,  7 Jul 2022 14:06:04 -0700 (PDT)
From: Taylor Simpson <tsimpson@quicinc.com>
To: qemu-devel@nongnu.org
Cc: tsimpson@quicinc.com, richard.henderson@linaro.org, f4bug@amsat.org,
 ale@rev.ng, anjo@rev.ng, bcain@quicinc.com, mlambert@quicinc.com
Subject: [PATCH 2/2] Hexagon (target/hexagon) fix bug in mem_noshuf load
 exception
Date: Thu,  7 Jul 2022 14:05:46 -0700
Message-Id: <20220707210546.15985-3-tsimpson@quicinc.com>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20220707210546.15985-1-tsimpson@quicinc.com>
References: <20220707210546.15985-1-tsimpson@quicinc.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Received-SPF: pass client-ip=129.46.98.28; envelope-from=tsimpson@qualcomm.com;
 helo=alexa-out.qualcomm.com
X-Spam_score_int: -40
X-Spam_score: -4.1
X-Spam_bar: ----
X-Spam_report: (-4.1 / 5.0 requ) BAYES_00=-1.9, DKIM_SIGNED=0.1,
 DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1, HEADER_FROM_DIFFERENT_DOMAINS=0.249,
 RCVD_IN_DNSWL_MED=-2.3, SPF_HELO_NONE=0.001, SPF_PASS=-0.001,
 T_SCC_BODY_TEXT_LINE=-0.01 autolearn=ham autolearn_force=no
X-Spam_action: no action
X-BeenThere: qemu-devel@nongnu.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: <qemu-devel.nongnu.org>
List-Unsubscribe: <https://lists.nongnu.org/mailman/options/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=unsubscribe>
List-Archive: <https://lists.nongnu.org/archive/html/qemu-devel>
List-Post: <mailto:qemu-devel@nongnu.org>
List-Help: <mailto:qemu-devel-request@nongnu.org?subject=help>
List-Subscribe: <https://lists.nongnu.org/mailman/listinfo/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=subscribe>
Errors-To: qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org
Sender: "Qemu-devel" <qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org>

VGhlIHNlbWFudGljcyBvZiBhIG1lbV9ub3NodWYgcGFja2V0IGFyZSB0aGF0IHRoZSBzdG9yZSBl
ZmZlY3RpdmVseQpoYXBwZW5zIGJlZm9yZSB0aGUgbG9hZC4gIEhvd2V2ZXIsIGluIGNhc2VzIHdo
ZXJlIHRoZSBsb2FkIHJhaXNlcyBhbgpleGNlcHRpb24sIHdlIGNhbm5vdCBzaW1wbHkgZXhlY3V0
ZSB0aGUgc3RvcmUgZmlyc3QuCgpUaGlzIGNoYW5nZSBhZGRzIGEgcHJvYmUgdG8gY2hlY2sgdGhh
dCB0aGUgbG9hZCB3aWxsIG5vdCByYWlzZSBhbgpleGNlcHRpb24gYmVmb3JlIGV4ZWN1dGluZyB0
aGUgc3RvcmUuCgpJZiB0aGUgbG9hZCBpcyBwcmVkaWNhdGVkLCB0aGlzIHJlcXVpcmVzIHNwZWNp
YWwgaGFuZGxpbmcuICBXZSBjaGVjawp0aGUgY29uZGl0aW9uIGJlZm9yZSBwZXJmb3JtaW5nIHRo
ZSBwcm9iZS4gIFNpbmNlLCB3ZSBuZWVkIHRoZSBFQSB0bwpwZXJmb3JtIHRoZSBjaGVjaywgd2Ug
bW92ZSB0aGUgR0VUX0VBIHBvcnRpb24gaW5zaWRlIENIRUNLX05PU0hVRl9QUkVELgoKVGVzdCBj
YXNlIGFkZGVkIGluIHRlc3RzL3RjZy9oZXhhZ29uL21lbV9ub3NodWZfZXhjZXB0aW9uLmMKClN1
Z2dlc3RlZC1ieTogQWxlc3NhbmRybyBEaSBGZWRlcmljbyA8YWxlQHJldi5uZz4KU3VnZ2VzdGVk
LWJ5OiBBbnRvbiBKb2hhbnNzb24gPGFuam9AcmV2Lm5nPgpTaWduZWQtb2ZmLWJ5OiBUYXlsb3Ig
U2ltcHNvbiA8dHNpbXBzb25AcXVpY2luYy5jb20+Ci0tLQogdGFyZ2V0L2hleGFnb24vZ2VuX3Rj
Zy5oICAgICAgICAgICAgICAgICB8ICAxMiArLQogdGFyZ2V0L2hleGFnb24vaGVscGVyLmggICAg
ICAgICAgICAgICAgICB8ICAgMSArCiB0YXJnZXQvaGV4YWdvbi9tYWNyb3MuaCAgICAgICAgICAg
ICAgICAgIHwgIDM3ICsrKystLQogdGFyZ2V0L2hleGFnb24vZ2VucHRyLmMgICAgICAgICAgICAg
ICAgICB8ICAgNyArKwogdGFyZ2V0L2hleGFnb24vb3BfaGVscGVyLmMgICAgICAgICAgICAgICB8
ICAyMyArKystCiB0ZXN0cy90Y2cvaGV4YWdvbi9tZW1fbm9zaHVmX2V4Y2VwdGlvbi5jIHwgMTQ2
ICsrKysrKysrKysrKysrKysrKysrKysrCiB0ZXN0cy90Y2cvaGV4YWdvbi9NYWtlZmlsZS50YXJn
ZXQgICAgICAgIHwgICAxICsKIDcgZmlsZXMgY2hhbmdlZCwgMjA2IGluc2VydGlvbnMoKyksIDIx
IGRlbGV0aW9ucygtKQogY3JlYXRlIG1vZGUgMTAwNjQ0IHRlc3RzL3RjZy9oZXhhZ29uL21lbV9u
b3NodWZfZXhjZXB0aW9uLmMKCmRpZmYgLS1naXQgYS90YXJnZXQvaGV4YWdvbi9nZW5fdGNnLmgg
Yi90YXJnZXQvaGV4YWdvbi9nZW5fdGNnLmgKaW5kZXggYjBiNmIzNjQ0ZS4uNTA2MzRhYzQ1OSAx
MDA2NDQKLS0tIGEvdGFyZ2V0L2hleGFnb24vZ2VuX3RjZy5oCisrKyBiL3RhcmdldC9oZXhhZ29u
L2dlbl90Y2cuaApAQCAtMzM5LDEzICszMzksMTMgQEAKICAgICBkbyB7IFwKICAgICAgICAgVENH
diBMU0IgPSB0Y2dfdGVtcF9sb2NhbF9uZXcoKTsgXAogICAgICAgICBUQ0dMYWJlbCAqbGFiZWwg
PSBnZW5fbmV3X2xhYmVsKCk7IFwKLSAgICAgICAgR0VUX0VBOyBcCisgICAgICAgIHRjZ19nZW5f
bW92aV90bChFQSwgMCk7IFwKICAgICAgICAgUFJFRDsgIFwKKyAgICAgICAgQ0hFQ0tfTk9TSFVG
X1BSRUQoR0VUX0VBLCBTSVpFLCBMU0IpOyBcCiAgICAgICAgIFBSRURfTE9BRF9DQU5DRUwoTFNC
LCBFQSk7IFwKICAgICAgICAgdGNnX2dlbl9tb3ZpX3RsKFJkViwgMCk7IFwKLSAgICAgICAgQ0hF
Q0tfTk9TSFVGOyBcCiAgICAgICAgIHRjZ19nZW5fYnJjb25kaV90bChUQ0dfQ09ORF9FUSwgTFNC
LCAwLCBsYWJlbCk7IFwKLSAgICAgICAgICAgIGZMT0FEKDEsIFNJWkUsIFNJR04sIEVBLCBSZFYp
OyBcCisgICAgICAgIGZMT0FEKDEsIFNJWkUsIFNJR04sIEVBLCBSZFYpOyBcCiAgICAgICAgIGdl
bl9zZXRfbGFiZWwobGFiZWwpOyBcCiAgICAgICAgIHRjZ190ZW1wX2ZyZWUoTFNCKTsgXAogICAg
IH0gd2hpbGUgKDApCkBAIC0zOTksMTMgKzM5OSwxMyBAQAogICAgIGRvIHsgXAogICAgICAgICBU
Q0d2IExTQiA9IHRjZ190ZW1wX2xvY2FsX25ldygpOyBcCiAgICAgICAgIFRDR0xhYmVsICpsYWJl
bCA9IGdlbl9uZXdfbGFiZWwoKTsgXAotICAgICAgICBHRVRfRUE7IFwKKyAgICAgICAgdGNnX2dl
bl9tb3ZpX3RsKEVBLCAwKTsgXAogICAgICAgICBQUkVEOyAgXAorICAgICAgICBDSEVDS19OT1NI
VUZfUFJFRChHRVRfRUEsIDgsIExTQik7IFwKICAgICAgICAgUFJFRF9MT0FEX0NBTkNFTChMU0Is
IEVBKTsgXAogICAgICAgICB0Y2dfZ2VuX21vdmlfaTY0KFJkZFYsIDApOyBcCi0gICAgICAgIENI
RUNLX05PU0hVRjsgXAogICAgICAgICB0Y2dfZ2VuX2JyY29uZGlfdGwoVENHX0NPTkRfRVEsIExT
QiwgMCwgbGFiZWwpOyBcCi0gICAgICAgICAgICBmTE9BRCgxLCA4LCB1LCBFQSwgUmRkVik7IFwK
KyAgICAgICAgZkxPQUQoMSwgOCwgdSwgRUEsIFJkZFYpOyBcCiAgICAgICAgIGdlbl9zZXRfbGFi
ZWwobGFiZWwpOyBcCiAgICAgICAgIHRjZ190ZW1wX2ZyZWUoTFNCKTsgXAogICAgIH0gd2hpbGUg
KDApCmRpZmYgLS1naXQgYS90YXJnZXQvaGV4YWdvbi9oZWxwZXIuaCBiL3RhcmdldC9oZXhhZ29u
L2hlbHBlci5oCmluZGV4IGM4OWFhNGVkNGQuLjM2OGYwYjU3MDggMTAwNjQ0Ci0tLSBhL3Rhcmdl
dC9oZXhhZ29uL2hlbHBlci5oCisrKyBiL3RhcmdldC9oZXhhZ29uL2hlbHBlci5oCkBAIC0xMDQs
NiArMTA0LDcgQEAgREVGX0hFTFBFUl8xKHZ3aGlzdDEyOHEsIHZvaWQsIGVudikKIERFRl9IRUxQ
RVJfMih2d2hpc3QxMjhtLCB2b2lkLCBlbnYsIHMzMikKIERFRl9IRUxQRVJfMih2d2hpc3QxMjhx
bSwgdm9pZCwgZW52LCBzMzIpCiAKK0RFRl9IRUxQRVJfNChwcm9iZV9ub3NodWZfbG9hZCwgdm9p
ZCwgZW52LCBpMzIsIGludCwgaW50KQogREVGX0hFTFBFUl8yKHByb2JlX3BrdF9zY2FsYXJfc3Rv
cmVfczAsIHZvaWQsIGVudiwgaW50KQogREVGX0hFTFBFUl8yKHByb2JlX2h2eF9zdG9yZXMsIHZv
aWQsIGVudiwgaW50KQogREVGX0hFTFBFUl8zKHByb2JlX3BrdF9zY2FsYXJfaHZ4X3N0b3Jlcywg
dm9pZCwgZW52LCBpbnQsIGludCkKZGlmZiAtLWdpdCBhL3RhcmdldC9oZXhhZ29uL21hY3Jvcy5o
IGIvdGFyZ2V0L2hleGFnb24vbWFjcm9zLmgKaW5kZXggYTc4ZTg0ZmFhNC4uOTJlYjhiYmYwNSAx
MDA2NDQKLS0tIGEvdGFyZ2V0L2hleGFnb24vbWFjcm9zLmgKKysrIGIvdGFyZ2V0L2hleGFnb24v
bWFjcm9zLmgKQEAgLTg3LDExICs4NywyOCBAQAogICoKICAqCiAgKiBGb3IgcWVtdSwgd2UgbG9v
ayBmb3IgYSBsb2FkIGluIHNsb3QgMCB3aGVuIHRoZXJlIGlzICBhIHN0b3JlIGluIHNsb3QgMQot
ICogaW4gdGhlIHNhbWUgcGFja2V0LiAgV2hlbiB3ZSBzZWUgdGhpcywgd2UgY2FsbCBhIGhlbHBl
ciB0aGF0IG1lcmdlcyB0aGUKLSAqIGJ5dGVzIGZyb20gdGhlIHN0b3JlIGJ1ZmZlciB3aXRoIHRo
ZSB2YWx1ZSBsb2FkZWQgZnJvbSBtZW1vcnkuCisgKiBpbiB0aGUgc2FtZSBwYWNrZXQuICBXaGVu
IHdlIHNlZSB0aGlzLCB3ZSBjYWxsIGEgaGVscGVyIHRoYXQgcHJvYmVzIHRoZQorICogbG9hZCB0
byBtYWtlIHN1cmUgaXQgZG9lc24ndCBmYXVsdC4gIFRoZW4sIHdlIHByb2Nlc3MgdGhlIHN0b3Jl
IGFoZWFkIG9mCisgKiB0aGUgYWN0dWFsIGxvYWQuCisKICAqLwotI2RlZmluZSBDSEVDS19OT1NI
VUYgXAorI2RlZmluZSBDSEVDS19OT1NIVUYoVkEsIFNJWkUpIFwKICAgICBkbyB7IFwKKyAgICAg
ICAgaWYgKGluc24tPnNsb3QgPT0gMCAmJiBwa3QtPnBrdF9oYXNfc3RvcmVfczEpIHsgXAorICAg
ICAgICAgICAgcHJvYmVfbm9zaHVmX2xvYWQoVkEsIFNJWkUsIGN0eC0+bWVtX2lkeCk7IFwKKyAg
ICAgICAgICAgIHByb2Nlc3Nfc3RvcmUoY3R4LCBwa3QsIDEpOyBcCisgICAgICAgIH0gXAorICAg
IH0gd2hpbGUgKDApCisKKyNkZWZpbmUgQ0hFQ0tfTk9TSFVGX1BSRUQoR0VUX0VBLCBTSVpFLCBQ
UkVEKSBcCisgICAgZG8geyBcCisgICAgICAgIFRDR0xhYmVsICpsYWJlbCA9IGdlbl9uZXdfbGFi
ZWwoKTsgXAorICAgICAgICB0Y2dfZ2VuX2JyY29uZGlfdGwoVENHX0NPTkRfRVEsIFBSRUQsIDAs
IGxhYmVsKTsgXAorICAgICAgICBHRVRfRUE7IFwKKyAgICAgICAgaWYgKGluc24tPnNsb3QgPT0g
MCAmJiBwa3QtPnBrdF9oYXNfc3RvcmVfczEpIHsgXAorICAgICAgICAgICAgcHJvYmVfbm9zaHVm
X2xvYWQoRUEsIFNJWkUsIGN0eC0+bWVtX2lkeCk7IFwKKyAgICAgICAgfSBcCisgICAgICAgIGdl
bl9zZXRfbGFiZWwobGFiZWwpOyBcCiAgICAgICAgIGlmIChpbnNuLT5zbG90ID09IDAgJiYgcGt0
LT5wa3RfaGFzX3N0b3JlX3MxKSB7IFwKICAgICAgICAgICAgIHByb2Nlc3Nfc3RvcmUoY3R4LCBw
a3QsIDEpOyBcCiAgICAgICAgIH0gXApAQCAtOTksMzcgKzExNiwzNyBAQAogCiAjZGVmaW5lIE1F
TV9MT0FEMXMoRFNULCBWQSkgXAogICAgIGRvIHsgXAotICAgICAgICBDSEVDS19OT1NIVUY7IFwK
KyAgICAgICAgQ0hFQ0tfTk9TSFVGKFZBLCAxKTsgXAogICAgICAgICB0Y2dfZ2VuX3FlbXVfbGQ4
cyhEU1QsIFZBLCBjdHgtPm1lbV9pZHgpOyBcCiAgICAgfSB3aGlsZSAoMCkKICNkZWZpbmUgTUVN
X0xPQUQxdShEU1QsIFZBKSBcCiAgICAgZG8geyBcCi0gICAgICAgIENIRUNLX05PU0hVRjsgXAor
ICAgICAgICBDSEVDS19OT1NIVUYoVkEsIDEpOyBcCiAgICAgICAgIHRjZ19nZW5fcWVtdV9sZDh1
KERTVCwgVkEsIGN0eC0+bWVtX2lkeCk7IFwKICAgICB9IHdoaWxlICgwKQogI2RlZmluZSBNRU1f
TE9BRDJzKERTVCwgVkEpIFwKICAgICBkbyB7IFwKLSAgICAgICAgQ0hFQ0tfTk9TSFVGOyBcCisg
ICAgICAgIENIRUNLX05PU0hVRihWQSwgMik7IFwKICAgICAgICAgdGNnX2dlbl9xZW11X2xkMTZz
KERTVCwgVkEsIGN0eC0+bWVtX2lkeCk7IFwKICAgICB9IHdoaWxlICgwKQogI2RlZmluZSBNRU1f
TE9BRDJ1KERTVCwgVkEpIFwKICAgICBkbyB7IFwKLSAgICAgICAgQ0hFQ0tfTk9TSFVGOyBcCisg
ICAgICAgIENIRUNLX05PU0hVRihWQSwgMik7IFwKICAgICAgICAgdGNnX2dlbl9xZW11X2xkMTZ1
KERTVCwgVkEsIGN0eC0+bWVtX2lkeCk7IFwKICAgICB9IHdoaWxlICgwKQogI2RlZmluZSBNRU1f
TE9BRDRzKERTVCwgVkEpIFwKICAgICBkbyB7IFwKLSAgICAgICAgQ0hFQ0tfTk9TSFVGOyBcCisg
ICAgICAgIENIRUNLX05PU0hVRihWQSwgNCk7IFwKICAgICAgICAgdGNnX2dlbl9xZW11X2xkMzJz
KERTVCwgVkEsIGN0eC0+bWVtX2lkeCk7IFwKICAgICB9IHdoaWxlICgwKQogI2RlZmluZSBNRU1f
TE9BRDR1KERTVCwgVkEpIFwKICAgICBkbyB7IFwKLSAgICAgICAgQ0hFQ0tfTk9TSFVGOyBcCisg
ICAgICAgIENIRUNLX05PU0hVRihWQSwgNCk7IFwKICAgICAgICAgdGNnX2dlbl9xZW11X2xkMzJz
KERTVCwgVkEsIGN0eC0+bWVtX2lkeCk7IFwKICAgICB9IHdoaWxlICgwKQogI2RlZmluZSBNRU1f
TE9BRDh1KERTVCwgVkEpIFwKICAgICBkbyB7IFwKLSAgICAgICAgQ0hFQ0tfTk9TSFVGOyBcCisg
ICAgICAgIENIRUNLX05PU0hVRihWQSwgOCk7IFwKICAgICAgICAgdGNnX2dlbl9xZW11X2xkNjQo
RFNULCBWQSwgY3R4LT5tZW1faWR4KTsgXAogICAgIH0gd2hpbGUgKDApCiAKZGlmZiAtLWdpdCBh
L3RhcmdldC9oZXhhZ29uL2dlbnB0ci5jIGIvdGFyZ2V0L2hleGFnb24vZ2VucHRyLmMKaW5kZXgg
Y2Q2YWY0YmNlYi4uOGEzMzRiYTA3YiAxMDA2NDQKLS0tIGEvdGFyZ2V0L2hleGFnb24vZ2VucHRy
LmMKKysrIGIvdGFyZ2V0L2hleGFnb24vZ2VucHRyLmMKQEAgLTYzOCw1ICs2MzgsMTIgQEAgc3Rh
dGljIHZvaWQgdmVjX3RvX3F2ZWMoc2l6ZV90IHNpemUsIGludHB0cl90IGRzdG9mZiwgaW50cHRy
X3Qgc3Jjb2ZmKQogICAgIHRjZ190ZW1wX2ZyZWVfaTY0KG1hc2spOwogfQogCitzdGF0aWMgdm9p
ZCBwcm9iZV9ub3NodWZfbG9hZChUQ0d2IHZhLCBpbnQgcywgaW50IG1pKQoreworICAgIFRDR3Yg
c2l6ZSA9IHRjZ19jb25zdGFudF90bChzKTsKKyAgICBUQ0d2IG1lbV9pZHggPSB0Y2dfY29uc3Rh
bnRfdGwobWkpOworICAgIGdlbl9oZWxwZXJfcHJvYmVfbm9zaHVmX2xvYWQoY3B1X2VudiwgdmEs
IHNpemUsIG1lbV9pZHgpOworfQorCiAjaW5jbHVkZSAidGNnX2Z1bmNzX2dlbmVyYXRlZC5jLmlu
YyIKICNpbmNsdWRlICJ0Y2dfZnVuY190YWJsZV9nZW5lcmF0ZWQuYy5pbmMiCmRpZmYgLS1naXQg
YS90YXJnZXQvaGV4YWdvbi9vcF9oZWxwZXIuYyBiL3RhcmdldC9oZXhhZ29uL29wX2hlbHBlci5j
CmluZGV4IGE1ZWQ4MTljMDQuLjA4NWFmYzMyNzQgMTAwNjQ0Ci0tLSBhL3RhcmdldC9oZXhhZ29u
L29wX2hlbHBlci5jCisrKyBiL3RhcmdldC9oZXhhZ29uL29wX2hlbHBlci5jCkBAIC00NDIsNiAr
NDQyLDE3IEBAIHN0YXRpYyB2b2lkIHByb2JlX3N0b3JlKENQVUhleGFnb25TdGF0ZSAqZW52LCBp
bnQgc2xvdCwgaW50IG1tdV9pZHgpCiAgICAgfQogfQogCisvKgorICogQ2FsbGVkIGZyb20gYSBt
ZW1fbm9zaHVmIHBhY2tldCB0byBtYWtlIHN1cmUgdGhlIGxvYWQgZG9lc24ndAorICogcmFpc2Ug
YW4gZXhjZXB0aW9uCisgKi8KK3ZvaWQgSEVMUEVSKHByb2JlX25vc2h1Zl9sb2FkKShDUFVIZXhh
Z29uU3RhdGUgKmVudiwgdGFyZ2V0X3Vsb25nIHZhLAorICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIGludCBzaXplLCBpbnQgbW11X2lkeCkKK3sKKyAgICB1aW50cHRyX3QgcmV0YWRkciA9
IEdFVFBDKCk7CisgICAgcHJvYmVfcmVhZChlbnYsIHZhLCBzaXplLCBtbXVfaWR4LCByZXRhZGRy
KTsKK30KKwogLyogQ2FsbGVkIGR1cmluZyBwYWNrZXQgY29tbWl0IHdoZW4gdGhlcmUgYXJlIHR3
byBzY2FsYXIgc3RvcmVzICovCiB2b2lkIEhFTFBFUihwcm9iZV9wa3Rfc2NhbGFyX3N0b3JlX3Mw
KShDUFVIZXhhZ29uU3RhdGUgKmVudiwgaW50IG1tdV9pZHgpCiB7CkBAIC01MTQsMTAgKzUyNSwx
MiBAQCB2b2lkIEhFTFBFUihwcm9iZV9wa3Rfc2NhbGFyX2h2eF9zdG9yZXMpKENQVUhleGFnb25T
dGF0ZSAqZW52LCBpbnQgbWFzaywKICAqIElmIHRoZSBsb2FkIGlzIGluIHNsb3QgMCBhbmQgdGhl
cmUgaXMgYSBzdG9yZSBpbiBzbG90MSAodGhhdAogICogd2Fzbid0IGNhbmNlbGxlZCksIHdlIGhh
dmUgdG8gZG8gdGhlIHN0b3JlIGZpcnN0LgogICovCi1zdGF0aWMgdm9pZCBjaGVja19ub3NodWYo
Q1BVSGV4YWdvblN0YXRlICplbnYsIHVpbnQzMl90IHNsb3QpCitzdGF0aWMgdm9pZCBjaGVja19u
b3NodWYoQ1BVSGV4YWdvblN0YXRlICplbnYsIHVpbnQzMl90IHNsb3QsCisgICAgICAgICAgICAg
ICAgICAgICAgICAgdGFyZ2V0X3Vsb25nIHZhZGRyLCBpbnQgc2l6ZSkKIHsKICAgICBpZiAoc2xv
dCA9PSAwICYmIGVudi0+cGt0X2hhc19zdG9yZV9zMSAmJgogICAgICAgICAoKGVudi0+c2xvdF9j
YW5jZWxsZWQgJiAoMSA8PCAxKSkgPT0gMCkpIHsKKyAgICAgICAgSEVMUEVSKHByb2JlX25vc2h1
Zl9sb2FkKShlbnYsIHZhZGRyLCBzaXplLCBNTVVfVVNFUl9JRFgpOwogICAgICAgICBIRUxQRVIo
Y29tbWl0X3N0b3JlKShlbnYsIDEpOwogICAgIH0KIH0KQEAgLTUyNiw3ICs1MzksNyBAQCBzdGF0
aWMgdWludDhfdCBtZW1fbG9hZDEoQ1BVSGV4YWdvblN0YXRlICplbnYsIHVpbnQzMl90IHNsb3Qs
CiAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0X3Vsb25nIHZhZGRyKQogewogICAgIHVp
bnRwdHJfdCByYSA9IEdFVFBDKCk7Ci0gICAgY2hlY2tfbm9zaHVmKGVudiwgc2xvdCk7CisgICAg
Y2hlY2tfbm9zaHVmKGVudiwgc2xvdCwgdmFkZHIsIDEpOwogICAgIHJldHVybiBjcHVfbGR1Yl9k
YXRhX3JhKGVudiwgdmFkZHIsIHJhKTsKIH0KIApAQCAtNTM0LDcgKzU0Nyw3IEBAIHN0YXRpYyB1
aW50MTZfdCBtZW1fbG9hZDIoQ1BVSGV4YWdvblN0YXRlICplbnYsIHVpbnQzMl90IHNsb3QsCiAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldF91bG9uZyB2YWRkcikKIHsKICAgICB1aW50
cHRyX3QgcmEgPSBHRVRQQygpOwotICAgIGNoZWNrX25vc2h1ZihlbnYsIHNsb3QpOworICAgIGNo
ZWNrX25vc2h1ZihlbnYsIHNsb3QsIHZhZGRyLCAyKTsKICAgICByZXR1cm4gY3B1X2xkdXdfZGF0
YV9yYShlbnYsIHZhZGRyLCByYSk7CiB9CiAKQEAgLTU0Miw3ICs1NTUsNyBAQCBzdGF0aWMgdWlu
dDMyX3QgbWVtX2xvYWQ0KENQVUhleGFnb25TdGF0ZSAqZW52LCB1aW50MzJfdCBzbG90LAogICAg
ICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRfdWxvbmcgdmFkZHIpCiB7CiAgICAgdWludHB0
cl90IHJhID0gR0VUUEMoKTsKLSAgICBjaGVja19ub3NodWYoZW52LCBzbG90KTsKKyAgICBjaGVj
a19ub3NodWYoZW52LCBzbG90LCB2YWRkciwgNCk7CiAgICAgcmV0dXJuIGNwdV9sZGxfZGF0YV9y
YShlbnYsIHZhZGRyLCByYSk7CiB9CiAKQEAgLTU1MCw3ICs1NjMsNyBAQCBzdGF0aWMgdWludDY0
X3QgbWVtX2xvYWQ4KENQVUhleGFnb25TdGF0ZSAqZW52LCB1aW50MzJfdCBzbG90LAogICAgICAg
ICAgICAgICAgICAgICAgICAgICB0YXJnZXRfdWxvbmcgdmFkZHIpCiB7CiAgICAgdWludHB0cl90
IHJhID0gR0VUUEMoKTsKLSAgICBjaGVja19ub3NodWYoZW52LCBzbG90KTsKKyAgICBjaGVja19u
b3NodWYoZW52LCBzbG90LCB2YWRkciwgOCk7CiAgICAgcmV0dXJuIGNwdV9sZHFfZGF0YV9yYShl
bnYsIHZhZGRyLCByYSk7CiB9CiAKZGlmZiAtLWdpdCBhL3Rlc3RzL3RjZy9oZXhhZ29uL21lbV9u
b3NodWZfZXhjZXB0aW9uLmMgYi90ZXN0cy90Y2cvaGV4YWdvbi9tZW1fbm9zaHVmX2V4Y2VwdGlv
bi5jCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAuLjA4NjYwZWEzZTEKLS0t
IC9kZXYvbnVsbAorKysgYi90ZXN0cy90Y2cvaGV4YWdvbi9tZW1fbm9zaHVmX2V4Y2VwdGlvbi5j
CkBAIC0wLDAgKzEsMTQ2IEBACisvKgorICogIENvcHlyaWdodChjKSAyMDIyIFF1YWxjb21tIElu
bm92YXRpb24gQ2VudGVyLCBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCisgKgorICogIFRoaXMg
cHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOyB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3Ig
bW9kaWZ5CisgKiAgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMg
TGljZW5zZSBhcyBwdWJsaXNoZWQgYnkKKyAqICB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9u
OyBlaXRoZXIgdmVyc2lvbiAyIG9mIHRoZSBMaWNlbnNlLCBvcgorICogIChhdCB5b3VyIG9wdGlv
bikgYW55IGxhdGVyIHZlcnNpb24uCisgKgorICogIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRl
ZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLAorICogIGJ1dCBXSVRIT1VUIEFO
WSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mCisgKiAgTUVS
Q0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRo
ZQorICogIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuCisgKgor
ICogIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1
YmxpYyBMaWNlbnNlCisgKiAgYWxvbmcgd2l0aCB0aGlzIHByb2dyYW07IGlmIG5vdCwgc2VlIDxo
dHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi4KKyAqLworCisvKgorICogVGVzdCB0aGUgVkxJ
VyBzZW1hbnRpY3Mgb2YgZXhjZXB0aW9ucyB3aXRoIG1lbV9ub3NodWYKKyAqCisgKiBXaGVuIGEg
cGFja2V0IGhhcyB0aGUgOm1lbV9ub3NodWYgYXR0cmlidXRlLCB0aGUgc2VtYW50aWNzIGRpY3Rh
dGUKKyAqIFRoYXQgdGhlIGxvYWQgd2lsbCBnZXQgdGhlIGRhdGEgZnJvbSB0aGUgc3RvcmUgaWYg
dGhlIGFkZHJlc3NlcyBvdmVybGFwLgorICogVG8gYWNjb21wbGlzaCB0aGlzLCB3ZSBwZXJmb3Jt
IHRoZSBzdG9yZSBmaXJzdC4gIEhvd2V2ZXIsIHdlIGhhdmUgdG8KKyAqIGhhbmRsZSB0aGUgY2Fz
ZSB3aGVyZSB0aGUgc3RvcmUgcmFpc2VzIGFuIGV4Y2VwdGlvbi4gIEluIHRoYXQgY2FzZSwgdGhl
CisgKiBzdG9yZSBzaG91bGQgbm90IGFsdGVyIHRoZSBtYWNoaW5lIHN0YXRlLgorICoKKyAqIFdl
IHRlc3QgdGhpcyB3aXRoIGEgbWVtX25vc2h1ZiBwYWNrZXQgd2l0aCBhIHN0b3JlIHRvIGEgZ2xv
YmFsIHZhcmlhYmxlLAorICogInNob3VsZF9ub3RfY2hhbmdlIiBhbmQgYSBsb2FkIGZyb20gTlVM
TC4gIEFmdGVyIHRoZSBTSUdTRUdWIGlzIGNhdWdodCwKKyAqIHdlIGNoZWNrICogdGhhdCB0aGUg
InNob3VsZF9ub3RfY2hhbmdlIiB2YWx1ZSBpcyB0aGUgc2FtZS4KKyAqCisgKiBXZSBhbHNvIGNo
ZWNrIHRoYXQgYSBwcmVkaWNhdGVkIGxvYWQgd2hlcmUgdGhlIHByZWRpY2F0ZSBpcyBmYWxzZSBk
b2Vzbid0CisgKiByYWlzZSBhbiBleGNlcHRpb24gYW5kIGFsbG93cyB0aGUgc3RvcmUgdG8gaGFw
cGVuLgorICovCisKKyNpbmNsdWRlIDxzdGRsaWIuaD4KKyNpbmNsdWRlIDxzdGRpby5oPgorI2lu
Y2x1ZGUgPHVuaXN0ZC5oPgorI2luY2x1ZGUgPHN5cy90eXBlcy5oPgorI2luY2x1ZGUgPGZjbnRs
Lmg+CisjaW5jbHVkZSA8c2V0am1wLmg+CisjaW5jbHVkZSA8c2lnbmFsLmg+CisKK2ludCBlcnI7
CitpbnQgc2Vndl9jYXVnaHQ7CisKKyNkZWZpbmUgU0hPVUxEX05PVF9DSEFOR0VfVkFMICAgICAg
ICA1CitpbnQgc2hvdWxkX25vdF9jaGFuZ2UgPSBTSE9VTERfTk9UX0NIQU5HRV9WQUw7CisKKyNk
ZWZpbmUgT0tfVE9fQ0hBTkdFX1ZBTCAgICAgICAgMTMKK2ludCBva190b19jaGFuZ2UgPSBPS19U
T19DSEFOR0VfVkFMOworCitzdGF0aWMgdm9pZCBfX2NoZWNrKGNvbnN0IGNoYXIgKmZpbGVuYW1l
LCBpbnQgbGluZSwgaW50IHgsIGludCBleHBlY3QpCit7CisgICAgaWYgKHggIT0gZXhwZWN0KSB7
CisgICAgICAgIHByaW50ZigiRVJST1IgJXM6JWQgLSAlZCAhPSAlZFxuIiwKKyAgICAgICAgICAg
ICAgIGZpbGVuYW1lLCBsaW5lLCB4LCBleHBlY3QpOworICAgICAgICBlcnIrKzsKKyAgICB9Cit9
CisKKyNkZWZpbmUgY2hlY2soeCwgZXhwZWN0KSBfX2NoZWNrKF9fRklMRV9fLCBfX0xJTkVfXywg
KHgpLCAoZXhwZWN0KSkKKworc3RhdGljIHZvaWQgX19jaGtfZXJyb3IoY29uc3QgY2hhciAqZmls
ZW5hbWUsIGludCBsaW5lLCBpbnQgcmV0KQoreworICAgIGlmIChyZXQgPCAwKSB7CisgICAgICAg
IHByaW50ZigiRVJST1IgJXM6JWQgLSAlZFxuIiwgZmlsZW5hbWUsIGxpbmUsIHJldCk7CisgICAg
ICAgIGVycisrOworICAgIH0KK30KKworI2RlZmluZSBjaGtfZXJyb3IocmV0KSBfX2Noa19lcnJv
cihfX0ZJTEVfXywgX19MSU5FX18sIChyZXQpKQorCitqbXBfYnVmIGptcF9lbnY7CisKK3N0YXRp
YyB2b2lkIHNpZ19zZWd2KGludCBzaWcsIHNpZ2luZm9fdCAqaW5mbywgdm9pZCAqcHVjKQorewor
ICAgIGNoZWNrKHNpZywgU0lHU0VHVik7CisgICAgc2Vndl9jYXVnaHQgPSAxOworICAgIGxvbmdq
bXAoam1wX2VudiwgMSk7Cit9CisKK2ludCBtYWluKCkKK3sKKyAgICBzdHJ1Y3Qgc2lnYWN0aW9u
IGFjdDsKKyAgICBpbnQgZHVtbXkzMjsKKyAgICBsb25nIGxvbmcgZHVtbXk2NDsKKyAgICB2b2lk
ICpwOworCisgICAgLyogU0lHU0VHViB0ZXN0ICovCisgICAgYWN0LnNhX3NpZ2FjdGlvbiA9IHNp
Z19zZWd2OworICAgIHNpZ2VtcHR5c2V0KCZhY3Quc2FfbWFzayk7CisgICAgYWN0LnNhX2ZsYWdz
ID0gU0FfU0lHSU5GTzsKKyAgICBjaGtfZXJyb3Ioc2lnYWN0aW9uKFNJR1NFR1YsICZhY3QsIE5V
TEwpKTsKKyAgICBpZiAoc2V0am1wKGptcF9lbnYpID09IDApIHsKKyAgICAgICAgYXNtIHZvbGF0
aWxlKCJyMTggPSAjI3Nob3VsZF9ub3RfY2hhbmdlXG5cdCIKKyAgICAgICAgICAgICAgICAgICAg
ICJyMTkgPSAjMFxuXHQiCisgICAgICAgICAgICAgICAgICAgICAie1xuXHQiCisgICAgICAgICAg
ICAgICAgICAgICAiICAgIG1lbXcocjE4KSA9ICM3XG5cdCIKKyAgICAgICAgICAgICAgICAgICAg
ICIgICAgJTAgPSBtZW13KHIxOSlcblx0IgorICAgICAgICAgICAgICAgICAgICAgIn06bWVtX25v
c2h1ZlxuXHQiCisgICAgICAgICAgICAgICAgICAgICAgOiAiPXIiKGR1bW15MzIpIDogOiAicjE4
IiwgInIxOSIsICJtZW1vcnkiKTsKKyAgICB9CisKKyAgICBhY3Quc2FfaGFuZGxlciA9IFNJR19E
Rkw7CisgICAgc2lnZW1wdHlzZXQoJmFjdC5zYV9tYXNrKTsKKyAgICBhY3Quc2FfZmxhZ3MgPSAw
OworICAgIGNoa19lcnJvcihzaWdhY3Rpb24oU0lHU0VHViwgJmFjdCwgTlVMTCkpOworCisgICAg
Y2hlY2soc2Vndl9jYXVnaHQsIDEpOworICAgIGNoZWNrKHNob3VsZF9ub3RfY2hhbmdlLCBTSE9V
TERfTk9UX0NIQU5HRV9WQUwpOworCisgICAgLyoKKyAgICAgKiBDaGVjayB0aGF0IGEgcHJlZGlj
YXRlZCBsb2FkIHdoZXJlIHRoZSBwcmVkaWNhdGUgaXMgZmFsc2UgZG9lc24ndAorICAgICAqIHJh
aXNlIGFuIGV4Y2VwdGlvbiBhbmQgYWxsb3dzIHRoZSBzdG9yZSB0byBoYXBwZW4uCisgICAgICov
CisgICAgYXNtIHZvbGF0aWxlKCJyMTggPSAjI29rX3RvX2NoYW5nZVxuXHQiCisgICAgICAgICAg
ICAgICAgICJyMTkgPSAjMFxuXHQiCisgICAgICAgICAgICAgICAgICJwMCA9IGNtcC5ndChyMCwg
cjApXG5cdCIKKyAgICAgICAgICAgICAgICAgIntcblx0IgorICAgICAgICAgICAgICAgICAiICAg
IG1lbXcocjE4KSA9ICM3XG5cdCIKKyAgICAgICAgICAgICAgICAgIiAgICBpZiAocDApICUwID0g
bWVtdyhyMTkpXG5cdCIKKyAgICAgICAgICAgICAgICAgIn06bWVtX25vc2h1ZlxuXHQiCisgICAg
ICAgICAgICAgICAgICA6ICI9ciIoZHVtbXkzMikgOiA6ICJyMTgiLCAicjE5IiwgInAwIiwgIm1l
bW9yeSIpOworCisgICAgY2hlY2sob2tfdG9fY2hhbmdlLCA3KTsKKworICAgIC8qCisgICAgICog
QWxzbyBjaGVjayB0aGF0IHRoZSBwb3N0LWluY3JlbWVudCBkb2Vzbid0IGhhcHBlbiB3aGVuIHRo
ZQorICAgICAqIHByZWRpY2F0ZSBpcyBmYWxzZS4KKyAgICAgKi8KKyAgICBva190b19jaGFuZ2Ug
PSBPS19UT19DSEFOR0VfVkFMOworICAgIHAgPSBOVUxMOworICAgIGFzbSB2b2xhdGlsZSgicjE4
ID0gIyNva190b19jaGFuZ2Vcblx0IgorICAgICAgICAgICAgICAgICAicDAgPSBjbXAuZ3QocjAs
IHIwKVxuXHQiCisgICAgICAgICAgICAgICAgICJ7XG5cdCIKKyAgICAgICAgICAgICAgICAgIiAg
ICBtZW13KHIxOCkgPSAjOVxuXHQiCisgICAgICAgICAgICAgICAgICIgICAgaWYgKHAwKSAlMSA9
IG1lbWQoJTAgKysgIzgpXG5cdCIKKyAgICAgICAgICAgICAgICAgIn06bWVtX25vc2h1ZlxuXHQi
CisgICAgICAgICAgICAgICAgICA6ICIrciIocCksICI9ciIoZHVtbXk2NCkgOiA6ICJyMTgiLCAi
cDAiLCAibWVtb3J5Iik7CisKKyAgICBjaGVjayhva190b19jaGFuZ2UsIDkpOworICAgIGNoZWNr
KChpbnQpcCwgKGludClOVUxMKTsKKworICAgIHB1dHMoZXJyID8gIkZBSUwiIDogIlBBU1MiKTsK
KyAgICByZXR1cm4gZXJyID8gRVhJVF9GQUlMVVJFIDogRVhJVF9TVUNDRVNTOworfQpkaWZmIC0t
Z2l0IGEvdGVzdHMvdGNnL2hleGFnb24vTWFrZWZpbGUudGFyZ2V0IGIvdGVzdHMvdGNnL2hleGFn
b24vTWFrZWZpbGUudGFyZ2V0CmluZGV4IDIzYjk4NzA1MzQuLjk2YTRkN2E2MTQgMTAwNjQ0Ci0t
LSBhL3Rlc3RzL3RjZy9oZXhhZ29uL01ha2VmaWxlLnRhcmdldAorKysgYi90ZXN0cy90Y2cvaGV4
YWdvbi9NYWtlZmlsZS50YXJnZXQKQEAgLTM1LDYgKzM1LDcgQEAgSEVYX1RFU1RTICs9IHByZWdf
YWxpYXMKIEhFWF9URVNUUyArPSBkdWFsX3N0b3JlcwogSEVYX1RFU1RTICs9IG11bHRpX3Jlc3Vs
dAogSEVYX1RFU1RTICs9IG1lbV9ub3NodWYKK0hFWF9URVNUUyArPSBtZW1fbm9zaHVmX2V4Y2Vw
dGlvbgogSEVYX1RFU1RTICs9IGNpcmMKIEhFWF9URVNUUyArPSBicmV2CiBIRVhfVEVTVFMgKz0g
bG9hZF91bnBhY2sKLS0gCjIuMTcuMQoK

