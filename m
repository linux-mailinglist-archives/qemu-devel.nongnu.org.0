Return-Path: <qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org>
X-Original-To: lists+qemu-devel@lfdr.de
Delivered-To: lists+qemu-devel@lfdr.de
Received: from lists.gnu.org (lists.gnu.org [209.51.188.17])
	by mail.lfdr.de (Postfix) with ESMTPS id 26FC65094C3
	for <lists+qemu-devel@lfdr.de>; Thu, 21 Apr 2022 03:44:23 +0200 (CEST)
Received: from localhost ([::1]:44942 helo=lists1p.gnu.org)
	by lists.gnu.org with esmtp (Exim 4.90_1)
	(envelope-from <qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org>)
	id 1nhLrq-0001Pb-7F
	for lists+qemu-devel@lfdr.de; Wed, 20 Apr 2022 21:44:22 -0400
Received: from eggs.gnu.org ([2001:470:142:3::10]:44558)
 by lists.gnu.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256)
 (Exim 4.90_1) (envelope-from <tsimpson@qualcomm.com>)
 id 1nhLqU-0007rq-Cp
 for qemu-devel@nongnu.org; Wed, 20 Apr 2022 21:42:58 -0400
Received: from alexa-out.qualcomm.com ([129.46.98.28]:13742)
 by eggs.gnu.org with esmtps (TLS1.2:RSA_AES_256_CBC_SHA1:256)
 (Exim 4.90_1) (envelope-from <tsimpson@qualcomm.com>)
 id 1nhLqR-0000lP-MK
 for qemu-devel@nongnu.org; Wed, 20 Apr 2022 21:42:57 -0400
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=quicinc.com; i=@quicinc.com; q=dns/txt; s=qcdkim;
 t=1650505376; x=1682041376;
 h=from:to:cc:subject:date:message-id:in-reply-to:
 references:mime-version:content-transfer-encoding;
 bh=TRPyjRn3aKEaXawyBCyzpQ8WzKjvYEqvXAcMScMmaBw=;
 b=tme6ipAgOu+N6jL2Qq6pnxBsPsA6J1l9KPK6jvYIJRXF15G0PoIspFGX
 VBB4yBnh6WAs+EKwngrkLY5SKNlL/Jo0WMla4kwpOW4EKSbykQ13PsJk+
 QoKg7zBNGzSt8VGwELeqq7n21l4WE58zlE6qrk1UuUrXPHN5TvobdQjkC k=;
Received: from ironmsg09-lv.qualcomm.com ([10.47.202.153])
 by alexa-out.qualcomm.com with ESMTP; 20 Apr 2022 18:42:52 -0700
X-QCInternal: smtphost
Received: from hu-tsimpson-lv.qualcomm.com (HELO
 hu-devc-lv-u18-c.qualcomm.com) ([10.47.235.220])
 by ironmsg09-lv.qualcomm.com with ESMTP; 20 Apr 2022 18:42:52 -0700
Received: by hu-devc-lv-u18-c.qualcomm.com (Postfix, from userid 47164)
 id 460CE500583; Wed, 20 Apr 2022 18:42:52 -0700 (PDT)
From: Taylor Simpson <tsimpson@quicinc.com>
To: qemu-devel@nongnu.org
Subject: [PATCH] Hexagon (target/hexagon) move store size tracking to
 translation
Date: Wed, 20 Apr 2022 18:42:41 -0700
Message-Id: <20220421014243.7834-3-tsimpson@quicinc.com>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20220421014243.7834-1-tsimpson@quicinc.com>
References: <20220421014243.7834-1-tsimpson@quicinc.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Received-SPF: pass client-ip=129.46.98.28; envelope-from=tsimpson@qualcomm.com;
 helo=alexa-out.qualcomm.com
X-Spam_score_int: -17
X-Spam_score: -1.8
X-Spam_bar: -
X-Spam_report: (-1.8 / 5.0 requ) BAYES_00=-1.9, DKIM_SIGNED=0.1,
 DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1, HEADER_FROM_DIFFERENT_DOMAINS=0.249,
 RCVD_IN_DNSWL_NONE=-0.0001, SPF_HELO_NONE=0.001, SPF_PASS=-0.001,
 T_SCC_BODY_TEXT_LINE=-0.01 autolearn=no autolearn_force=no
X-Spam_action: no action
X-BeenThere: qemu-devel@nongnu.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: <qemu-devel.nongnu.org>
List-Unsubscribe: <https://lists.nongnu.org/mailman/options/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=unsubscribe>
List-Archive: <https://lists.nongnu.org/archive/html/qemu-devel>
List-Post: <mailto:qemu-devel@nongnu.org>
List-Help: <mailto:qemu-devel-request@nongnu.org?subject=help>
List-Subscribe: <https://lists.nongnu.org/mailman/listinfo/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=subscribe>
Cc: ale@rev.ng, bcain@quicinc.com, richard.henderson@linaro.org,
 f4bug@amsat.org, tsimpson@quicinc.com, mlambert@quicinc.com
Errors-To: qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org
Sender: "Qemu-devel" <qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org>

VGhlIHN0b3JlIHdpZHRoIGlzIG5lZWRlZCBmb3IgcGFja2V0IGNvbW1pdCwgc28gaXQgaXMgc3Rv
cmVkIGluCmN0eC0+c3RvcmVfd2lkdGguICBDdXJyZW50bHksIGl0IGlzIHNldCB3aGVuIGEgc3Rv
cmUgaGFzIGEgVENHCm92ZXJyaWRlIGluc3RlYWQgb2YgYSBRRU1VIGhlbHBlci4gIEluIHRoZSBR
RU1VIGhlbHBlciBjYXNlLCB0aGUKY3R4LT5zdG9yZV93aWR0aCBpcyBub3Qgc2V0LCB3ZSBpbnZv
a2UgYSBoZWxwZXIgZHVyaW5nIHBhY2tldCBjb21taXQKdGhhdCB1c2VzIHRoZSBydW50aW1lIHN0
b3JlIHdpZHRoLgoKVGhpcyBwYXRjaCBlbnN1cmVzIGN0eC0+c3RvcmVfd2lkdGggaXMgc2V0IGZv
ciBhbGwgc3RvcmUgaW5zdHJ1Y3Rpb25zLApzbyBwZXJmb3JtYW5jZSBpcyBpbXByb3ZlZCBiZWNh
dXNlIHBhY2tldCBjb21taXQgY2FuIGdlbmVyYXRlIHRoZSBwcm9wZXIKVENHIHN0b3JlIHJhdGhl
ciB0aGFuIHRoZSBnZW5lcmljIGhlbHBlci4KCldlIGRvIHRoaXMgYnkKLSBDcmVhdGUgbmV3IGF0
dHJpYnV0ZXMgdG8gaW5kaWNhdGUgdGhlIHN0b3JlIHNpemUKLSBEdXJpbmcgZ2VuX3NlbWFudGlj
cywgY29udmVydCB0aGUgZlNUT1JFIGluc3RhbmNlcyB0byBmU1RPUkU8c2l6ZT4KLSBBc3NpZ24g
dGhlIG5ldyBhdHRyaWJ1dGVzIHRvIHRoZSBuZXcgbWFjcm9zCi0gQWRkIGRlZmluaXRpb25zIGZv
ciB0aGUgbmV3IG1hY3JvcwotIFVzZSB0aGUgYXR0cmlidXRlcyBmcm9tIHRoZSBpbnN0cnVjdGlv
bnMgZHVyaW5nIHRyYW5zbGF0aW9uIHRvCiAgc2V0IGN0eC0+c3RvcmVfd2lkdGgKLSBSZW1vdmUg
c2V0dGluZyBvZiBjdHgtPnN0b3JlX3dpZHRoIGZyb20gZ2VucHRyLmMKClNpZ25lZC1vZmYtYnk6
IFRheWxvciBTaW1wc29uIDx0c2ltcHNvbkBxdWljaW5jLmNvbT4KLS0tCiB0YXJnZXQvaGV4YWdv
bi9tYWNyb3MuaCAgICAgICAgICB8IDE2ICsrKysrKysrKystLS0tCiB0YXJnZXQvaGV4YWdvbi9h
dHRyaWJzX2RlZi5oLmluYyB8ICA0ICsrKysKIHRhcmdldC9oZXhhZ29uL2dlbl9zZW1hbnRpY3Mu
YyAgIHwgMjYgKysrKysrKysrKysrKysrKysrKysrKysKIHRhcmdldC9oZXhhZ29uL2dlbnB0ci5j
ICAgICAgICAgIHwgMzYgKysrKysrKysrKystLS0tLS0tLS0tLS0tLS0tLS0tLS0KIHRhcmdldC9o
ZXhhZ29uL3RyYW5zbGF0ZS5jICAgICAgIHwgMjYgKysrKysrKysrKysrKysrKysrKysrKysKIDUg
ZmlsZXMgY2hhbmdlZCwgODAgaW5zZXJ0aW9ucygrKSwgMjggZGVsZXRpb25zKC0pCgpkaWZmIC0t
Z2l0IGEvdGFyZ2V0L2hleGFnb24vbWFjcm9zLmggYi90YXJnZXQvaGV4YWdvbi9tYWNyb3MuaApp
bmRleCBhNzhlODRmYWE0Li4xZDI2ZjU5ZmVhIDEwMDY0NAotLS0gYS90YXJnZXQvaGV4YWdvbi9t
YWNyb3MuaAorKysgYi90YXJnZXQvaGV4YWdvbi9tYWNyb3MuaApAQCAtMTM5LDcgKzEzOSw3IEBA
CiAgICAgICAgIF9fYnVpbHRpbl9jaG9vc2VfZXhwcihUWVBFX1RDR1YoWCksIFwKICAgICAgICAg
ICAgIGdlbl9zdG9yZTEsICh2b2lkKTApKQogI2RlZmluZSBNRU1fU1RPUkUxKFZBLCBEQVRBLCBT
TE9UKSBcCi0gICAgTUVNX1NUT1JFMV9GVU5DKERBVEEpKGNwdV9lbnYsIFZBLCBEQVRBLCBjdHgs
IFNMT1QpCisgICAgTUVNX1NUT1JFMV9GVU5DKERBVEEpKGNwdV9lbnYsIFZBLCBEQVRBLCBTTE9U
KQogCiAjZGVmaW5lIE1FTV9TVE9SRTJfRlVOQyhYKSBcCiAgICAgX19idWlsdGluX2Nob29zZV9l
eHByKFRZUEVfSU5UKFgpLCBcCkBAIC0xNDcsNyArMTQ3LDcgQEAKICAgICAgICAgX19idWlsdGlu
X2Nob29zZV9leHByKFRZUEVfVENHVihYKSwgXAogICAgICAgICAgICAgZ2VuX3N0b3JlMiwgKHZv
aWQpMCkpCiAjZGVmaW5lIE1FTV9TVE9SRTIoVkEsIERBVEEsIFNMT1QpIFwKLSAgICBNRU1fU1RP
UkUyX0ZVTkMoREFUQSkoY3B1X2VudiwgVkEsIERBVEEsIGN0eCwgU0xPVCkKKyAgICBNRU1fU1RP
UkUyX0ZVTkMoREFUQSkoY3B1X2VudiwgVkEsIERBVEEsIFNMT1QpCiAKICNkZWZpbmUgTUVNX1NU
T1JFNF9GVU5DKFgpIFwKICAgICBfX2J1aWx0aW5fY2hvb3NlX2V4cHIoVFlQRV9JTlQoWCksIFwK
QEAgLTE1NSw3ICsxNTUsNyBAQAogICAgICAgICBfX2J1aWx0aW5fY2hvb3NlX2V4cHIoVFlQRV9U
Q0dWKFgpLCBcCiAgICAgICAgICAgICBnZW5fc3RvcmU0LCAodm9pZCkwKSkKICNkZWZpbmUgTUVN
X1NUT1JFNChWQSwgREFUQSwgU0xPVCkgXAotICAgIE1FTV9TVE9SRTRfRlVOQyhEQVRBKShjcHVf
ZW52LCBWQSwgREFUQSwgY3R4LCBTTE9UKQorICAgIE1FTV9TVE9SRTRfRlVOQyhEQVRBKShjcHVf
ZW52LCBWQSwgREFUQSwgU0xPVCkKIAogI2RlZmluZSBNRU1fU1RPUkU4X0ZVTkMoWCkgXAogICAg
IF9fYnVpbHRpbl9jaG9vc2VfZXhwcihUWVBFX0lOVChYKSwgXApAQCAtMTYzLDcgKzE2Myw3IEBA
CiAgICAgICAgIF9fYnVpbHRpbl9jaG9vc2VfZXhwcihUWVBFX1RDR1ZfSTY0KFgpLCBcCiAgICAg
ICAgICAgICBnZW5fc3RvcmU4LCAodm9pZCkwKSkKICNkZWZpbmUgTUVNX1NUT1JFOChWQSwgREFU
QSwgU0xPVCkgXAotICAgIE1FTV9TVE9SRThfRlVOQyhEQVRBKShjcHVfZW52LCBWQSwgREFUQSwg
Y3R4LCBTTE9UKQorICAgIE1FTV9TVE9SRThfRlVOQyhEQVRBKShjcHVfZW52LCBWQSwgREFUQSwg
U0xPVCkKICNlbHNlCiAjZGVmaW5lIE1FTV9MT0FEMXMoVkEpICgoaW50OF90KW1lbV9sb2FkMShl
bnYsIHNsb3QsIFZBKSkKICNkZWZpbmUgTUVNX0xPQUQxdShWQSkgKCh1aW50OF90KW1lbV9sb2Fk
MShlbnYsIHNsb3QsIFZBKSkKQEAgLTYwMCw4ICs2MDAsMTYgQEAgc3RhdGljIGlubGluZSBUQ0d2
IGdlbl9yZWFkX2lyZWcoVENHdiByZXN1bHQsIFRDR3YgdmFsLCBpbnQgc2hpZnQpCiAKICNpZmRl
ZiBRRU1VX0dFTkVSQVRFCiAjZGVmaW5lIGZTVE9SRShOVU0sIFNJWkUsIEVBLCBTUkMpIE1FTV9T
VE9SRSMjU0laRShFQSwgU1JDLCBpbnNuLT5zbG90KQorI2RlZmluZSBmU1RPUkUxKEVBLCBTUkMp
IE1FTV9TVE9SRTEoRUEsIFNSQywgaW5zbi0+c2xvdCkKKyNkZWZpbmUgZlNUT1JFMihFQSwgU1JD
KSBNRU1fU1RPUkUyKEVBLCBTUkMsIGluc24tPnNsb3QpCisjZGVmaW5lIGZTVE9SRTQoRUEsIFNS
QykgTUVNX1NUT1JFNChFQSwgU1JDLCBpbnNuLT5zbG90KQorI2RlZmluZSBmU1RPUkU4KEVBLCBT
UkMpIE1FTV9TVE9SRTgoRUEsIFNSQywgaW5zbi0+c2xvdCkKICNlbHNlCiAjZGVmaW5lIGZTVE9S
RShOVU0sIFNJWkUsIEVBLCBTUkMpIE1FTV9TVE9SRSMjU0laRShFQSwgU1JDLCBzbG90KQorI2Rl
ZmluZSBmU1RPUkUxKEVBLCBTUkMpIE1FTV9TVE9SRTEoRUEsIFNSQywgc2xvdCkKKyNkZWZpbmUg
ZlNUT1JFMihFQSwgU1JDKSBNRU1fU1RPUkUyKEVBLCBTUkMsIHNsb3QpCisjZGVmaW5lIGZTVE9S
RTQoRUEsIFNSQykgTUVNX1NUT1JFNChFQSwgU1JDLCBzbG90KQorI2RlZmluZSBmU1RPUkU4KEVB
LCBTUkMpIE1FTV9TVE9SRTgoRUEsIFNSQywgc2xvdCkKICNlbmRpZgogCiAjaWZkZWYgUUVNVV9H
RU5FUkFURQpkaWZmIC0tZ2l0IGEvdGFyZ2V0L2hleGFnb24vYXR0cmlic19kZWYuaC5pbmMgYi90
YXJnZXQvaGV4YWdvbi9hdHRyaWJzX2RlZi5oLmluYwppbmRleCBkYzg5MGE1NTdmLi45YzE5ZTA4
ZGQ3IDEwMDY0NAotLS0gYS90YXJnZXQvaGV4YWdvbi9hdHRyaWJzX2RlZi5oLmluYworKysgYi90
YXJnZXQvaGV4YWdvbi9hdHRyaWJzX2RlZi5oLmluYwpAQCAtMzgsNiArMzgsMTAgQEAgREVGX0FU
VFJJQihTVUJJTlNOLCAic3ViLWluc3RydWN0aW9uIiwgIiIsICIiKQogLyogTG9hZCBhbmQgU3Rv
cmUgYXR0cmlidXRlcyAqLwogREVGX0FUVFJJQihMT0FELCAiTG9hZHMgZnJvbSBtZW1vcnkiLCAi
IiwgIiIpCiBERUZfQVRUUklCKFNUT1JFLCAiU3RvcmVzIHRvIG1lbW9yeSIsICIiLCAiIikKK0RF
Rl9BVFRSSUIoU1RPUkVfU0laRTEsICJTdG9yZXMgMSBieXRlIHRvIG1lbW9yeSIsICIiLCAiIikK
K0RFRl9BVFRSSUIoU1RPUkVfU0laRTIsICJTdG9yZXMgMiBieXRlcyB0byBtZW1vcnkiLCAiIiwg
IiIpCitERUZfQVRUUklCKFNUT1JFX1NJWkU0LCAiU3RvcmVzIDQgYnl0ZXMgdG8gbWVtb3J5Iiwg
IiIsICIiKQorREVGX0FUVFJJQihTVE9SRV9TSVpFOCwgIlN0b3JlcyA4IGJ5dGVzIHRvIG1lbW9y
eSIsICIiLCAiIikKIERFRl9BVFRSSUIoTUVNTElLRSwgIk1lbW9yeS1saWtlIGluc3RydWN0aW9u
IiwgIiIsICIiKQogREVGX0FUVFJJQihNRU1MSUtFX1BBQ0tFVF9SVUxFUywgImZvbGxvd3MgTWVt
b3J5LWxpa2UgcGFja2V0IHJ1bGVzIiwgIiIsICIiKQogCmRpZmYgLS1naXQgYS90YXJnZXQvaGV4
YWdvbi9nZW5fc2VtYW50aWNzLmMgYi90YXJnZXQvaGV4YWdvbi9nZW5fc2VtYW50aWNzLmMKaW5k
ZXggNGEyYmRkNzBlOS4uYjRiYmQ2NjAwNiAxMDA2NDQKLS0tIGEvdGFyZ2V0L2hleGFnb24vZ2Vu
X3NlbWFudGljcy5jCisrKyBiL3RhcmdldC9oZXhhZ29uL2dlbl9zZW1hbnRpY3MuYwpAQCAtNzgs
NiArNzgsMTAgQEAgaW50IG1haW4oaW50IGFyZ2MsIGNoYXIgKmFyZ3ZbXSkKICAgICAgICAgICAg
ICAgICAgICAgICAgICAiKVxuIiwgXAogICAgICAgICAgICAgICAgICNUQUcsIFNUUklOR0laRShB
VFRSSUJTKSk7IFwKICAgICB9IHdoaWxlICgwKTsKKworLyogQ2hhbmdlIHRoZSBzdG9yZSBtYWNy
b3Mgc28gd2UgY2FuIHRyYWNrIHRoZSBzaXplIGR1cmluZyB0cmFuc2xhdGlvbiAqLworI2RlZmlu
ZSBmU1RPUkUoTlVNLCBTSVpFLCBFQSwgU1JDKSBmU1RPUkUjI1NJWkUoRUEsIFNSQykKKwogI2lu
Y2x1ZGUgImltcG9ydGVkL2FsbGlkZWZzLmRlZiIKICN1bmRlZiBRNklOU04KICN1bmRlZiBFWFRJ
TlNOCkBAIC0xMDEsNiArMTA1LDI4IEBAIGludCBtYWluKGludCBhcmdjLCBjaGFyICphcmd2W10p
CiAgICAgICAgICAgICAgICAgICAgICAiKVxuIiwgXAogICAgICAgICAgICAgI01OQU1FLCBTVFJJ
TkdJWkUoQkVIKSwgU1RSSU5HSVpFKEFUVFJTKSk7CiAjaW5jbHVkZSAiaW1wb3J0ZWQvbWFjcm9z
LmRlZiIKKworLyogVGhlc2UgbWFjcm9zIGdpdmUgdGhlIHNpemUgb2YgdGhlIHN0b3JlIHVzZWQg
ZHVyaW5nIHRyYW5zbGF0aW9uICovCitERUZfTUFDUk8oZlNUT1JFMSwKKyAgICBRRU1VX09OTFks
CisgICAgKEFfU1RPUkUsIEFfTUVNTElLRSwgQV9TVE9SRV9TSVpFMSkKKykKKworREVGX01BQ1JP
KGZTVE9SRTIsCisgICAgUUVNVV9PTkxZLAorICAgIChBX1NUT1JFLCBBX01FTUxJS0UsIEFfU1RP
UkVfU0laRTIpCispCisKK0RFRl9NQUNSTyhmU1RPUkU0LAorICAgIFFFTVVfT05MWSwKKyAgICAo
QV9TVE9SRSwgQV9NRU1MSUtFLCBBX1NUT1JFX1NJWkU0KQorKQorCitERUZfTUFDUk8oZlNUT1JF
OCwKKyAgICBRRU1VX09OTFksCisgICAgKEFfU1RPUkUsIEFfTUVNTElLRSwgQV9TVE9SRV9TSVpF
OCkKKykKKwogI3VuZGVmIERFRl9NQUNSTwogCiAvKgpkaWZmIC0tZ2l0IGEvdGFyZ2V0L2hleGFn
b24vZ2VucHRyLmMgYi90YXJnZXQvaGV4YWdvbi9nZW5wdHIuYwppbmRleCBjZDZhZjRiY2ViLi40
ZTQxYTk0MjkzIDEwMDY0NAotLS0gYS90YXJnZXQvaGV4YWdvbi9nZW5wdHIuYworKysgYi90YXJn
ZXQvaGV4YWdvbi9nZW5wdHIuYwpAQCAtNDAxLDYyICs0MDEsNTAgQEAgc3RhdGljIGlubGluZSB2
b2lkIGdlbl9zdG9yZTMyKFRDR3YgdmFkZHIsIFRDR3Ygc3JjLCBpbnQgd2lkdGgsIGludCBzbG90
KQogICAgIHRjZ19nZW5fbW92X3RsKGhleF9zdG9yZV92YWwzMltzbG90XSwgc3JjKTsKIH0KIAot
c3RhdGljIGlubGluZSB2b2lkIGdlbl9zdG9yZTEoVENHdl9lbnYgY3B1X2VudiwgVENHdiB2YWRk
ciwgVENHdiBzcmMsCi0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEaXNhc0NvbnRleHQg
KmN0eCwgaW50IHNsb3QpCitzdGF0aWMgaW5saW5lIHZvaWQgZ2VuX3N0b3JlMShUQ0d2X2VudiBj
cHVfZW52LCBUQ0d2IHZhZGRyLCBUQ0d2IHNyYywgaW50IHNsb3QpCiB7CiAgICAgZ2VuX3N0b3Jl
MzIodmFkZHIsIHNyYywgMSwgc2xvdCk7Ci0gICAgY3R4LT5zdG9yZV93aWR0aFtzbG90XSA9IDE7
CiB9CiAKLXN0YXRpYyBpbmxpbmUgdm9pZCBnZW5fc3RvcmUxaShUQ0d2X2VudiBjcHVfZW52LCBU
Q0d2IHZhZGRyLCBpbnQzMl90IHNyYywKLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBE
aXNhc0NvbnRleHQgKmN0eCwgaW50IHNsb3QpCitzdGF0aWMgaW5saW5lIHZvaWQgZ2VuX3N0b3Jl
MWkoVENHdl9lbnYgY3B1X2VudiwgVENHdiB2YWRkciwgaW50MzJfdCBzcmMsIGludCBzbG90KQog
ewogICAgIFRDR3YgdG1wID0gdGNnX2NvbnN0YW50X3RsKHNyYyk7Ci0gICAgZ2VuX3N0b3JlMShj
cHVfZW52LCB2YWRkciwgdG1wLCBjdHgsIHNsb3QpOworICAgIGdlbl9zdG9yZTEoY3B1X2Vudiwg
dmFkZHIsIHRtcCwgc2xvdCk7CiB9CiAKLXN0YXRpYyBpbmxpbmUgdm9pZCBnZW5fc3RvcmUyKFRD
R3ZfZW52IGNwdV9lbnYsIFRDR3YgdmFkZHIsIFRDR3Ygc3JjLAotICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgRGlzYXNDb250ZXh0ICpjdHgsIGludCBzbG90KQorc3RhdGljIGlubGluZSB2
b2lkIGdlbl9zdG9yZTIoVENHdl9lbnYgY3B1X2VudiwgVENHdiB2YWRkciwgVENHdiBzcmMsIGlu
dCBzbG90KQogewogICAgIGdlbl9zdG9yZTMyKHZhZGRyLCBzcmMsIDIsIHNsb3QpOwotICAgIGN0
eC0+c3RvcmVfd2lkdGhbc2xvdF0gPSAyOwogfQogCi1zdGF0aWMgaW5saW5lIHZvaWQgZ2VuX3N0
b3JlMmkoVENHdl9lbnYgY3B1X2VudiwgVENHdiB2YWRkciwgaW50MzJfdCBzcmMsCi0gICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgRGlzYXNDb250ZXh0ICpjdHgsIGludCBzbG90KQorc3Rh
dGljIGlubGluZSB2b2lkIGdlbl9zdG9yZTJpKFRDR3ZfZW52IGNwdV9lbnYsIFRDR3YgdmFkZHIs
IGludDMyX3Qgc3JjLCBpbnQgc2xvdCkKIHsKICAgICBUQ0d2IHRtcCA9IHRjZ19jb25zdGFudF90
bChzcmMpOwotICAgIGdlbl9zdG9yZTIoY3B1X2VudiwgdmFkZHIsIHRtcCwgY3R4LCBzbG90KTsK
KyAgICBnZW5fc3RvcmUyKGNwdV9lbnYsIHZhZGRyLCB0bXAsIHNsb3QpOwogfQogCi1zdGF0aWMg
aW5saW5lIHZvaWQgZ2VuX3N0b3JlNChUQ0d2X2VudiBjcHVfZW52LCBUQ0d2IHZhZGRyLCBUQ0d2
IHNyYywKLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERpc2FzQ29udGV4dCAqY3R4LCBp
bnQgc2xvdCkKK3N0YXRpYyBpbmxpbmUgdm9pZCBnZW5fc3RvcmU0KFRDR3ZfZW52IGNwdV9lbnYs
IFRDR3YgdmFkZHIsIFRDR3Ygc3JjLCBpbnQgc2xvdCkKIHsKICAgICBnZW5fc3RvcmUzMih2YWRk
ciwgc3JjLCA0LCBzbG90KTsKLSAgICBjdHgtPnN0b3JlX3dpZHRoW3Nsb3RdID0gNDsKIH0KIAot
c3RhdGljIGlubGluZSB2b2lkIGdlbl9zdG9yZTRpKFRDR3ZfZW52IGNwdV9lbnYsIFRDR3YgdmFk
ZHIsIGludDMyX3Qgc3JjLAotICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERpc2FzQ29u
dGV4dCAqY3R4LCBpbnQgc2xvdCkKK3N0YXRpYyBpbmxpbmUgdm9pZCBnZW5fc3RvcmU0aShUQ0d2
X2VudiBjcHVfZW52LCBUQ0d2IHZhZGRyLCBpbnQzMl90IHNyYywgaW50IHNsb3QpCiB7CiAgICAg
VENHdiB0bXAgPSB0Y2dfY29uc3RhbnRfdGwoc3JjKTsKLSAgICBnZW5fc3RvcmU0KGNwdV9lbnYs
IHZhZGRyLCB0bXAsIGN0eCwgc2xvdCk7CisgICAgZ2VuX3N0b3JlNChjcHVfZW52LCB2YWRkciwg
dG1wLCBzbG90KTsKIH0KIAotc3RhdGljIGlubGluZSB2b2lkIGdlbl9zdG9yZTgoVENHdl9lbnYg
Y3B1X2VudiwgVENHdiB2YWRkciwgVENHdl9pNjQgc3JjLAotICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgRGlzYXNDb250ZXh0ICpjdHgsIGludCBzbG90KQorc3RhdGljIGlubGluZSB2b2lk
IGdlbl9zdG9yZTgoVENHdl9lbnYgY3B1X2VudiwgVENHdiB2YWRkciwgVENHdl9pNjQgc3JjLCBp
bnQgc2xvdCkKIHsKICAgICB0Y2dfZ2VuX21vdl90bChoZXhfc3RvcmVfYWRkcltzbG90XSwgdmFk
ZHIpOwogICAgIHRjZ19nZW5fbW92aV90bChoZXhfc3RvcmVfd2lkdGhbc2xvdF0sIDgpOwogICAg
IHRjZ19nZW5fbW92X2k2NChoZXhfc3RvcmVfdmFsNjRbc2xvdF0sIHNyYyk7Ci0gICAgY3R4LT5z
dG9yZV93aWR0aFtzbG90XSA9IDg7CiB9CiAKLXN0YXRpYyBpbmxpbmUgdm9pZCBnZW5fc3RvcmU4
aShUQ0d2X2VudiBjcHVfZW52LCBUQ0d2IHZhZGRyLCBpbnQ2NF90IHNyYywKLSAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBEaXNhc0NvbnRleHQgKmN0eCwgaW50IHNsb3QpCitzdGF0aWMg
aW5saW5lIHZvaWQgZ2VuX3N0b3JlOGkoVENHdl9lbnYgY3B1X2VudiwgVENHdiB2YWRkciwgaW50
NjRfdCBzcmMsIGludCBzbG90KQogewogICAgIFRDR3ZfaTY0IHRtcCA9IHRjZ19jb25zdGFudF9p
NjQoc3JjKTsKLSAgICBnZW5fc3RvcmU4KGNwdV9lbnYsIHZhZGRyLCB0bXAsIGN0eCwgc2xvdCk7
CisgICAgZ2VuX3N0b3JlOChjcHVfZW52LCB2YWRkciwgdG1wLCBzbG90KTsKIH0KIAogc3RhdGlj
IFRDR3YgZ2VuXzhiaXRzb2YoVENHdiByZXN1bHQsIFRDR3YgdmFsdWUpCmRpZmYgLS1naXQgYS90
YXJnZXQvaGV4YWdvbi90cmFuc2xhdGUuYyBiL3RhcmdldC9oZXhhZ29uL3RyYW5zbGF0ZS5jCmlu
ZGV4IGI2ZjU0MWVjYjIuLjQzY2VhZmU5OGEgMTAwNjQ0Ci0tLSBhL3RhcmdldC9oZXhhZ29uL3Ry
YW5zbGF0ZS5jCisrKyBiL3RhcmdldC9oZXhhZ29uL3RyYW5zbGF0ZS5jCkBAIC0zMjcsNiArMzI3
LDMxIEBAIHN0YXRpYyB2b2lkIG1hcmtfaW1wbGljaXRfcHJlZF93cml0ZXMoRGlzYXNDb250ZXh0
ICpjdHgsIEluc24gKmluc24pCiAgICAgbWFya19pbXBsaWNpdF9wcmVkX3dyaXRlKGN0eCwgaW5z
biwgQV9JTVBMSUNJVF9XUklURVNfUDMsIDMpOwogfQogCitzdGF0aWMgdm9pZCBtYXJrX3N0b3Jl
X3dpZHRoKERpc2FzQ29udGV4dCAqY3R4LCBJbnNuICppbnNuKQoreworICAgIHVpbnQxNl90IG9w
Y29kZSA9IGluc24tPm9wY29kZTsKKyAgICB1aW50MzJfdCBzbG90ID0gaW5zbi0+c2xvdDsKKwor
ICAgIGlmIChHRVRfQVRUUklCKG9wY29kZSwgQV9TVE9SRSkpIHsKKyAgICAgICAgaWYgKEdFVF9B
VFRSSUIob3Bjb2RlLCBBX1NUT1JFX1NJWkUxKSkgeworICAgICAgICAgICAgY3R4LT5zdG9yZV93
aWR0aFtzbG90XSA9IDE7CisgICAgICAgICAgICByZXR1cm47CisgICAgICAgIH0KKyAgICAgICAg
aWYgKEdFVF9BVFRSSUIob3Bjb2RlLCBBX1NUT1JFX1NJWkUyKSkgeworICAgICAgICAgICAgY3R4
LT5zdG9yZV93aWR0aFtzbG90XSA9IDI7CisgICAgICAgICAgICByZXR1cm47CisgICAgICAgIH0K
KyAgICAgICAgaWYgKEdFVF9BVFRSSUIob3Bjb2RlLCBBX1NUT1JFX1NJWkU0KSkgeworICAgICAg
ICAgICAgY3R4LT5zdG9yZV93aWR0aFtzbG90XSA9IDQ7CisgICAgICAgICAgICByZXR1cm47Cisg
ICAgICAgIH0KKyAgICAgICAgaWYgKEdFVF9BVFRSSUIob3Bjb2RlLCBBX1NUT1JFX1NJWkU4KSkg
eworICAgICAgICAgICAgY3R4LT5zdG9yZV93aWR0aFtzbG90XSA9IDg7CisgICAgICAgICAgICBy
ZXR1cm47CisgICAgICAgIH0KKyAgICB9Cit9CisKIHN0YXRpYyB2b2lkIGdlbl9pbnNuKENQVUhl
eGFnb25TdGF0ZSAqZW52LCBEaXNhc0NvbnRleHQgKmN0eCwKICAgICAgICAgICAgICAgICAgICAg
IEluc24gKmluc24sIFBhY2tldCAqcGt0KQogewpAQCAtMzM0LDYgKzM1OSw3IEBAIHN0YXRpYyB2
b2lkIGdlbl9pbnNuKENQVUhleGFnb25TdGF0ZSAqZW52LCBEaXNhc0NvbnRleHQgKmN0eCwKICAg
ICAgICAgbWFya19pbXBsaWNpdF9yZWdfd3JpdGVzKGN0eCwgaW5zbik7CiAgICAgICAgIGluc24t
PmdlbmVyYXRlKGVudiwgY3R4LCBpbnNuLCBwa3QpOwogICAgICAgICBtYXJrX2ltcGxpY2l0X3By
ZWRfd3JpdGVzKGN0eCwgaW5zbik7CisgICAgICAgIG1hcmtfc3RvcmVfd2lkdGgoY3R4LCBpbnNu
KTsKICAgICB9IGVsc2UgewogICAgICAgICBnZW5fZXhjZXB0aW9uX2VuZF90YihjdHgsIEhFWF9F
WENQX0lOVkFMSURfT1BDT0RFKTsKICAgICB9Ci0tIAoyLjE3LjEKCg==

