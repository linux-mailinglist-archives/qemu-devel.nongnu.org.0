Return-Path: <qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org>
X-Original-To: lists+qemu-devel@lfdr.de
Delivered-To: lists+qemu-devel@lfdr.de
Received: from lists.gnu.org (lists.gnu.org [209.51.188.17])
	by mail.lfdr.de (Postfix) with ESMTPS id 553F66AD52F
	for <lists+qemu-devel@lfdr.de>; Tue,  7 Mar 2023 04:00:07 +0100 (CET)
Received: from localhost ([::1] helo=lists1p.gnu.org)
	by lists.gnu.org with esmtp (Exim 4.90_1)
	(envelope-from <qemu-devel-bounces@nongnu.org>)
	id 1pZNXK-0000T2-G1; Mon, 06 Mar 2023 21:58:46 -0500
Received: from eggs.gnu.org ([2001:470:142:3::10])
 by lists.gnu.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256)
 (Exim 4.90_1) (envelope-from <tsimpson@qualcomm.com>)
 id 1pZNXF-0000Ag-12
 for qemu-devel@nongnu.org; Mon, 06 Mar 2023 21:58:42 -0500
Received: from mx0a-0031df01.pphosted.com ([205.220.168.131])
 by eggs.gnu.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256)
 (Exim 4.90_1) (envelope-from <tsimpson@qualcomm.com>)
 id 1pZNXA-0005nL-1L
 for qemu-devel@nongnu.org; Mon, 06 Mar 2023 21:58:40 -0500
Received: from pps.filterd (m0279865.ppops.net [127.0.0.1])
 by mx0a-0031df01.pphosted.com (8.17.1.19/8.17.1.19) with ESMTP id
 3271YjIU001785; Tue, 7 Mar 2023 02:58:33 GMT
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=quicinc.com;
 h=from : to : cc :
 subject : date : message-id : in-reply-to : references : mime-version :
 content-type : content-transfer-encoding; s=qcppdkim1;
 bh=Ct0Wqb7VGPfFbLLBrCBEZILVOy+Dhw6e7auC0XORs/M=;
 b=MdzptT2/KcWIiGVbeD4EoN8QRCQKnSP576rwG7kEPrwTLvF6MLd8gh2MKGDNvIIUEqaw
 BHauRHENNzvuBBK9WCDUx/UIN747Uh7h4zrdf9v9c7A3q8655IaBfZX+vj/kzze+Aej8
 PuRNQzAVuA1mtWP7O3qeIxhthqs18g7xU1C7Fnw0hd0Je060CKwznNsHbP4ykaxcVGwK
 zvadWtbpCXIEKkYb7tiSS5IqbiWhkfTupYSTqjxM0cKhX4RxyOPBk346sdH4IiL3x4/x
 wQqYcT5jnI1wyW+n8bS6SAgjcAwKVbClo7OZbFCNTr09Wd+RlSc+XkbaHta8Olh2nopy tg== 
Received: from nalasppmta05.qualcomm.com (Global_NAT1.qualcomm.com
 [129.46.96.20])
 by mx0a-0031df01.pphosted.com (PPS) with ESMTPS id 3p419d6p7r-1
 (version=TLSv1.2 cipher=ECDHE-RSA-AES256-GCM-SHA384 bits=256 verify=NOT);
 Tue, 07 Mar 2023 02:58:33 +0000
Received: from pps.filterd (NALASPPMTA05.qualcomm.com [127.0.0.1])
 by NALASPPMTA05.qualcomm.com (8.17.1.5/8.17.1.5) with ESMTP id 3272rk6v017088; 
 Tue, 7 Mar 2023 02:58:32 GMT
Received: from pps.reinject (localhost [127.0.0.1])
 by NALASPPMTA05.qualcomm.com (PPS) with ESMTPS id 3p4ffd3r80-1
 (version=TLSv1.2 cipher=ECDHE-RSA-AES256-GCM-SHA384 bits=256 verify=NOT);
 Tue, 07 Mar 2023 02:58:32 +0000
Received: from NALASPPMTA05.qualcomm.com (NALASPPMTA05.qualcomm.com
 [127.0.0.1])
 by pps.reinject (8.17.1.5/8.17.1.5) with ESMTP id 3272wW0O022246;
 Tue, 7 Mar 2023 02:58:32 GMT
Received: from hu-devc-sd-u20-a-1.qualcomm.com (hu-tsimpson-lv.qualcomm.com
 [10.47.204.221])
 by NALASPPMTA05.qualcomm.com (PPS) with ESMTPS id 3272wV7t022235
 (version=TLSv1.2 cipher=ECDHE-RSA-AES256-GCM-SHA384 bits=256 verify=NOT);
 Tue, 07 Mar 2023 02:58:32 +0000
Received: by hu-devc-sd-u20-a-1.qualcomm.com (Postfix, from userid 47164)
 id E0FA5A83; Mon,  6 Mar 2023 18:58:30 -0800 (PST)
From: Taylor Simpson <tsimpson@quicinc.com>
To: qemu-devel@nongnu.org
Cc: tsimpson@quicinc.com, richard.henderson@linaro.org, philmd@linaro.org,
 ale@rev.ng, anjo@rev.ng, bcain@quicinc.com, quic_mathbern@quicinc.com
Subject: [PATCH v6 13/14] Hexagon (target/hexagon) Reduce manipulation of
 slot_cancelled
Date: Mon,  6 Mar 2023 18:58:27 -0800
Message-Id: <20230307025828.1612809-14-tsimpson@quicinc.com>
X-Mailer: git-send-email 2.25.1
In-Reply-To: <20230307025828.1612809-1-tsimpson@quicinc.com>
References: <20230307025828.1612809-1-tsimpson@quicinc.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
X-QCInternal: smtphost
X-QCInternal: smtphost
X-Proofpoint-Virus-Version: vendor=nai engine=6200 definitions=5800
 signatures=585085
X-Proofpoint-Virus-Version: vendor=nai engine=6200 definitions=5800
 signatures=585085
X-Proofpoint-ORIG-GUID: vkS7VcmpWPamyAYA7eRLAIoVy3NfCTSh
X-Proofpoint-GUID: vkS7VcmpWPamyAYA7eRLAIoVy3NfCTSh
X-Proofpoint-Virus-Version: vendor=baseguard
 engine=ICAP:2.0.219,Aquarius:18.0.942,Hydra:6.0.573,FMLib:17.11.170.22
 definitions=2023-03-06_14,2023-03-06_01,2023-02-09_01
X-Proofpoint-Spam-Details: rule=outbound_notspam policy=outbound score=0
 mlxscore=0 lowpriorityscore=0
 phishscore=0 malwarescore=0 impostorscore=0 priorityscore=1501
 clxscore=1015 suspectscore=0 mlxlogscore=561 adultscore=0 bulkscore=0
 spamscore=0 classifier=spam adjust=0 reason=mlx scancount=1
 engine=8.12.0-2212070000 definitions=main-2303070025
Received-SPF: pass client-ip=205.220.168.131;
 envelope-from=tsimpson@qualcomm.com; helo=mx0a-0031df01.pphosted.com
X-Spam_score_int: -24
X-Spam_score: -2.5
X-Spam_bar: --
X-Spam_report: (-2.5 / 5.0 requ) BAYES_00=-1.9, DKIM_SIGNED=0.1,
 DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1, HEADER_FROM_DIFFERENT_DOMAINS=0.25,
 RCVD_IN_DNSWL_LOW=-0.7, SPF_HELO_NONE=0.001,
 SPF_PASS=-0.001 autolearn=ham autolearn_force=no
X-Spam_action: no action
X-BeenThere: qemu-devel@nongnu.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: <qemu-devel.nongnu.org>
List-Unsubscribe: <https://lists.nongnu.org/mailman/options/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=unsubscribe>
List-Archive: <https://lists.nongnu.org/archive/html/qemu-devel>
List-Post: <mailto:qemu-devel@nongnu.org>
List-Help: <mailto:qemu-devel-request@nongnu.org?subject=help>
List-Subscribe: <https://lists.nongnu.org/mailman/listinfo/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=subscribe>
Errors-To: qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org
Sender: qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org

V2Ugb25seSBuZWVkIHRvIHRyYWNrIHNsb3QgZm9yIHByZWRpY2F0ZWQgc3RvcmVzIGFuZCBwcmVk
aWNhdGVkIEhWWAppbnN0cnVjdGlvbnMuCgpBZGQgYXJndW1lbnRzIHRvIHRoZSBwcm9iZSBoZWxw
ZXIgZnVuY3Rpb25zIHRvIGluZGljYXRlIGlmIHRoZSBzbG90CmlzIHByZWRpY2F0ZWQuCgpIZXJl
IGlzIGEgc2ltcGxlIGV4YW1wbGUgb2YgdGhlIGRpZmZlcmVuY2VzIGluIHRoZSBUQ0cgY29kZSBn
ZW5lcmF0ZWQ6CgpJTjoKMHgwMDQwMDA5NDogIDB4ZjkwMGMxMDIgeyAgICAgICBpZiAoUDApIFIy
ID0gYW5kKFIwLFIxKSB9CgpCRUZPUkUKIC0tLS0gMDA0MDAwOTQKIG1vdl9pMzIgc2xvdF9jYW5j
ZWxsZWQsJDB4MAogbW92X2kzMiBuZXdfcjIscjIKIGFuZF9pMzIgdG1wMCxwMCwkMHgxCiBicmNv
bmRfaTMyIHRtcDAsJDB4MCxlcSwkTDEKIGFuZF9pMzIgdG1wMCxyMCxyMQogbW92X2kzMiBuZXdf
cjIsdG1wMAogYnIgJEwyCiBzZXRfbGFiZWwgJEwxCiBvcl9pMzIgc2xvdF9jYW5jZWxsZWQsc2xv
dF9jYW5jZWxsZWQsJDB4OAogc2V0X2xhYmVsICRMMgogbW92X2kzMiByMixuZXdfcjIKCkFGVEVS
CiAtLS0tIDAwNDAwMDk0CiBtb3ZfaTMyIG5ld19yMixyMgogYW5kX2kzMiB0bXAwLHAwLCQweDEK
IGJyY29uZF9pMzIgdG1wMCwkMHgwLGVxLCRMMQogYW5kX2kzMiB0bXAwLHIwLHIxCiBtb3ZfaTMy
IG5ld19yMix0bXAwCiBiciAkTDIKIHNldF9sYWJlbCAkTDEKIHNldF9sYWJlbCAkTDIKIG1vdl9p
MzIgcjIsbmV3X3IyCgpTaWduZWQtb2ZmLWJ5OiBUYXlsb3IgU2ltcHNvbiA8dHNpbXBzb25AcXVp
Y2luYy5jb20+ClJldmlld2VkLWJ5OiBBbnRvbiBKb2hhbnNzb24gPGFuam9AcmV2Lm5nPgotLS0K
IHRhcmdldC9oZXhhZ29uL21hY3Jvcy5oICAgICAgICAgICAgICAgICAgICAgfCAgMiArLQogdGFy
Z2V0L2hleGFnb24vb3BfaGVscGVyLmggICAgICAgICAgICAgICAgICB8ICAzICstCiB0YXJnZXQv
aGV4YWdvbi90cmFuc2xhdGUuaCAgICAgICAgICAgICAgICAgIHwgMTAgKysrKysKIHRhcmdldC9o
ZXhhZ29uL2lkZWYtcGFyc2VyL3BhcnNlci1oZWxwZXJzLmMgfCAgMSAtCiB0YXJnZXQvaGV4YWdv
bi9vcF9oZWxwZXIuYyAgICAgICAgICAgICAgICAgIHwgMzIgKysrKysrKystLS0tLS0tLQogdGFy
Z2V0L2hleGFnb24vdHJhbnNsYXRlLmMgICAgICAgICAgICAgICAgICB8IDQyICsrKysrKysrKysr
KysrKysrKy0tLQogdGFyZ2V0L2hleGFnb24vaWRlZi1wYXJzZXIvaWRlZi1wYXJzZXIubGV4ICB8
ICA0ICstCiB0YXJnZXQvaGV4YWdvbi9pZGVmLXBhcnNlci9pZGVmLXBhcnNlci55ICAgIHwgIDcg
KystLQogOCBmaWxlcyBjaGFuZ2VkLCA3MSBpbnNlcnRpb25zKCspLCAzMCBkZWxldGlvbnMoLSkK
CmRpZmYgLS1naXQgYS90YXJnZXQvaGV4YWdvbi9tYWNyb3MuaCBiL3RhcmdldC9oZXhhZ29uL21h
Y3Jvcy5oCmluZGV4IDFmYTYwNTdkMjcuLjQ4MmE5Yzc4N2YgMTAwNjQ0Ci0tLSBhL3RhcmdldC9o
ZXhhZ29uL21hY3Jvcy5oCisrKyBiL3RhcmdldC9oZXhhZ29uL21hY3Jvcy5oCkBAIC0yMDUsNyAr
MjA1LDcgQEAgc3RhdGljIGlubGluZSB2b2lkIGdlbl9jYW5jZWwodWludDMyX3Qgc2xvdCkKIAog
I2RlZmluZSBDQU5DRUwgZ2VuX2NhbmNlbChzbG90KTsKICNlbHNlCi0jZGVmaW5lIENBTkNFTCBj
YW5jZWxfc2xvdChlbnYsIHNsb3QpCisjZGVmaW5lIENBTkNFTCBkbyB7IH0gd2hpbGUgKDApCiAj
ZW5kaWYKIAogI2RlZmluZSBMT0FEX0NBTkNFTChFQSkgZG8geyBDQU5DRUw7IH0gd2hpbGUgKDAp
CmRpZmYgLS1naXQgYS90YXJnZXQvaGV4YWdvbi9vcF9oZWxwZXIuaCBiL3RhcmdldC9oZXhhZ29u
L29wX2hlbHBlci5oCmluZGV4IDAyMzQ3ZWRlZTguLjM0YjNhNTM5NzUgMTAwNjQ0Ci0tLSBhL3Rh
cmdldC9oZXhhZ29uL29wX2hlbHBlci5oCisrKyBiL3RhcmdldC9oZXhhZ29uL29wX2hlbHBlci5o
CkBAIC0xLDUgKzEsNSBAQAogLyoKLSAqICBDb3B5cmlnaHQoYykgMjAxOS0yMDIxIFF1YWxjb21t
IElubm92YXRpb24gQ2VudGVyLCBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCisgKiAgQ29weXJp
Z2h0KGMpIDIwMTktMjAyMyBRdWFsY29tbSBJbm5vdmF0aW9uIENlbnRlciwgSW5jLiBBbGwgUmln
aHRzIFJlc2VydmVkLgogICoKICAqICBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTsgeW91
IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeQogICogIGl0IHVuZGVyIHRoZSB0ZXJt
cyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5CkBAIC0x
OSw3ICsxOSw2IEBACiAjZGVmaW5lIEhFWEFHT05fT1BfSEVMUEVSX0gKIAogLyogTWlzYyBmdW5j
dGlvbnMgKi8KLXZvaWQgY2FuY2VsX3Nsb3QoQ1BVSGV4YWdvblN0YXRlICplbnYsIHVpbnQzMl90
IHNsb3QpOwogdm9pZCB3cml0ZV9uZXdfcGMoQ1BVSGV4YWdvblN0YXRlICplbnYsIGJvb2wgcGt0
X2hhc19tdWx0aV9jb2YsIHRhcmdldF91bG9uZyBhZGRyKTsKIAogdWludDhfdCBtZW1fbG9hZDEo
Q1BVSGV4YWdvblN0YXRlICplbnYsIHVpbnQzMl90IHNsb3QsIHRhcmdldF91bG9uZyB2YWRkcik7
CmRpZmYgLS1naXQgYS90YXJnZXQvaGV4YWdvbi90cmFuc2xhdGUuaCBiL3RhcmdldC9oZXhhZ29u
L3RyYW5zbGF0ZS5oCmluZGV4IDc2NWYyYzZhMjIuLjZlNTlhOTBjNDEgMTAwNjQ0Ci0tLSBhL3Rh
cmdldC9oZXhhZ29uL3RyYW5zbGF0ZS5oCisrKyBiL3RhcmdldC9oZXhhZ29uL3RyYW5zbGF0ZS5o
CkBAIC0xNzIsNCArMTcyLDE0IEBAIGV4dGVybiBUQ0d2IGhleF92c3RvcmVfcGVuZGluZ1tWU1RP
UkVTX01BWF07CiAKIGJvb2wgaXNfZ2F0aGVyX3N0b3JlX2luc24oRGlzYXNDb250ZXh0ICpjdHgp
Owogdm9pZCBwcm9jZXNzX3N0b3JlKERpc2FzQ29udGV4dCAqY3R4LCBpbnQgc2xvdF9udW0pOwor
CitGSUVMRChQUk9CRV9QS1RfU0NBTEFSX1NUT1JFX1MwLCBNTVVfSURYLCAgICAgICAwLCAyKQor
RklFTEQoUFJPQkVfUEtUX1NDQUxBUl9TVE9SRV9TMCwgSVNfUFJFRElDQVRFRCwgMiwgMSkKKwor
RklFTEQoUFJPQkVfUEtUX1NDQUxBUl9IVlhfU1RPUkVTLCBIQVNfU1QwLCAgICAgICAgMCwgMSkK
K0ZJRUxEKFBST0JFX1BLVF9TQ0FMQVJfSFZYX1NUT1JFUywgSEFTX1NUMSwgICAgICAgIDEsIDEp
CitGSUVMRChQUk9CRV9QS1RfU0NBTEFSX0hWWF9TVE9SRVMsIEhBU19IVlhfU1RPUkVTLCAyLCAx
KQorRklFTEQoUFJPQkVfUEtUX1NDQUxBUl9IVlhfU1RPUkVTLCBTMF9JU19QUkVELCAgICAgMywg
MSkKK0ZJRUxEKFBST0JFX1BLVF9TQ0FMQVJfSFZYX1NUT1JFUywgUzFfSVNfUFJFRCwgICAgIDQs
IDEpCisKICNlbmRpZgpkaWZmIC0tZ2l0IGEvdGFyZ2V0L2hleGFnb24vaWRlZi1wYXJzZXIvcGFy
c2VyLWhlbHBlcnMuYyBiL3RhcmdldC9oZXhhZ29uL2lkZWYtcGFyc2VyL3BhcnNlci1oZWxwZXJz
LmMKaW5kZXggYmE0ZmMzNzdkMi4uZWY5Y2E4NWU5MCAxMDA2NDQKLS0tIGEvdGFyZ2V0L2hleGFn
b24vaWRlZi1wYXJzZXIvcGFyc2VyLWhlbHBlcnMuYworKysgYi90YXJnZXQvaGV4YWdvbi9pZGVm
LXBhcnNlci9wYXJzZXItaGVscGVycy5jCkBAIC0xNzMyLDcgKzE3MzIsNiBAQCB2b2lkIGdlbl9j
YW5jZWwoQ29udGV4dCAqYywgWVlMVFlQRSAqbG9jcCkKIAogdm9pZCBnZW5fbG9hZF9jYW5jZWwo
Q29udGV4dCAqYywgWVlMVFlQRSAqbG9jcCkKIHsKLSAgICBnZW5fY2FuY2VsKGMsIGxvY3ApOwog
ICAgIE9VVChjLCBsb2NwLCAiaWYgKGluc24tPnNsb3QgPT0gMCAmJiBwa3QtPnBrdF9oYXNfc3Rv
cmVfczEpIHtcbiIpOwogICAgIE9VVChjLCBsb2NwLCAiY3R4LT5zMV9zdG9yZV9wcm9jZXNzZWQg
PSBmYWxzZTtcbiIpOwogICAgIE9VVChjLCBsb2NwLCAicHJvY2Vzc19zdG9yZShjdHgsIDEpO1xu
Iik7CmRpZmYgLS1naXQgYS90YXJnZXQvaGV4YWdvbi9vcF9oZWxwZXIuYyBiL3RhcmdldC9oZXhh
Z29uL29wX2hlbHBlci5jCmluZGV4IDk0MjU5NDFjNjkuLmM5YTE1NjAzMGUgMTAwNjQ0Ci0tLSBh
L3RhcmdldC9oZXhhZ29uL29wX2hlbHBlci5jCisrKyBiL3RhcmdldC9oZXhhZ29uL29wX2hlbHBl
ci5jCkBAIC0zMCw2ICszMCw3IEBACiAjaW5jbHVkZSAibW12ZWMvbW12ZWMuaCIKICNpbmNsdWRl
ICJtbXZlYy9tYWNyb3MuaCIKICNpbmNsdWRlICJvcF9oZWxwZXIuaCIKKyNpbmNsdWRlICJ0cmFu
c2xhdGUuaCIKIAogI2RlZmluZSBTRl9CSUFTICAgICAgICAxMjcKICNkZWZpbmUgU0ZfTUFOVEJJ
VFMgICAgMjMKQEAgLTQxNSw5ICs0MTYsMTAgQEAgaW50MzJfdCBIRUxQRVIodmFjc2hfcHJlZCko
Q1BVSGV4YWdvblN0YXRlICplbnYsCiAgICAgcmV0dXJuIFBlVjsKIH0KIAotc3RhdGljIHZvaWQg
cHJvYmVfc3RvcmUoQ1BVSGV4YWdvblN0YXRlICplbnYsIGludCBzbG90LCBpbnQgbW11X2lkeCkK
K3N0YXRpYyB2b2lkIHByb2JlX3N0b3JlKENQVUhleGFnb25TdGF0ZSAqZW52LCBpbnQgc2xvdCwg
aW50IG1tdV9pZHgsCisgICAgICAgICAgICAgICAgICAgICAgICBib29sIGlzX3ByZWRpY2F0ZWQp
CiB7Ci0gICAgaWYgKCEoZW52LT5zbG90X2NhbmNlbGxlZCAmICgxIDw8IHNsb3QpKSkgeworICAg
IGlmICghaXNfcHJlZGljYXRlZCB8fCAhKGVudi0+c2xvdF9jYW5jZWxsZWQgJiAoMSA8PCBzbG90
KSkpIHsKICAgICAgICAgc2l6ZTF1X3Qgd2lkdGggPSBlbnYtPm1lbV9sb2dfc3RvcmVzW3Nsb3Rd
LndpZHRoOwogICAgICAgICB0YXJnZXRfdWxvbmcgdmEgPSBlbnYtPm1lbV9sb2dfc3RvcmVzW3Ns
b3RdLnZhOwogICAgICAgICB1aW50cHRyX3QgcmEgPSBHRVRQQygpOwpAQCAtNDM3LDkgKzQzOSwx
MiBAQCB2b2lkIEhFTFBFUihwcm9iZV9ub3NodWZfbG9hZCkoQ1BVSGV4YWdvblN0YXRlICplbnYs
IHRhcmdldF91bG9uZyB2YSwKIH0KIAogLyogQ2FsbGVkIGR1cmluZyBwYWNrZXQgY29tbWl0IHdo
ZW4gdGhlcmUgYXJlIHR3byBzY2FsYXIgc3RvcmVzICovCi12b2lkIEhFTFBFUihwcm9iZV9wa3Rf
c2NhbGFyX3N0b3JlX3MwKShDUFVIZXhhZ29uU3RhdGUgKmVudiwgaW50IG1tdV9pZHgpCit2b2lk
IEhFTFBFUihwcm9iZV9wa3Rfc2NhbGFyX3N0b3JlX3MwKShDUFVIZXhhZ29uU3RhdGUgKmVudiwg
aW50IGFyZ3MpCiB7Ci0gICAgcHJvYmVfc3RvcmUoZW52LCAwLCBtbXVfaWR4KTsKKyAgICBpbnQg
bW11X2lkeCA9IEZJRUxEX0VYMzIoYXJncywgUFJPQkVfUEtUX1NDQUxBUl9TVE9SRV9TMCwgTU1V
X0lEWCk7CisgICAgYm9vbCBpc19wcmVkaWNhdGVkID0KKyAgICAgICAgRklFTERfRVgzMihhcmdz
LCBQUk9CRV9QS1RfU0NBTEFSX1NUT1JFX1MwLCBJU19QUkVESUNBVEVEKTsKKyAgICBwcm9iZV9z
dG9yZShlbnYsIDAsIG1tdV9pZHgsIGlzX3ByZWRpY2F0ZWQpOwogfQogCiB2b2lkIEhFTFBFUihw
cm9iZV9odnhfc3RvcmVzKShDUFVIZXhhZ29uU3RhdGUgKmVudiwgaW50IG1tdV9pZHgpCkBAIC00
ODYsMTUgKzQ5MSwxOCBAQCB2b2lkIEhFTFBFUihwcm9iZV9odnhfc3RvcmVzKShDUFVIZXhhZ29u
U3RhdGUgKmVudiwgaW50IG1tdV9pZHgpCiB2b2lkIEhFTFBFUihwcm9iZV9wa3Rfc2NhbGFyX2h2
eF9zdG9yZXMpKENQVUhleGFnb25TdGF0ZSAqZW52LCBpbnQgbWFzaywKICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50IG1tdV9pZHgpCiB7Ci0gICAgYm9vbCBoYXNf
c3QwICAgICAgICA9IChtYXNrID4+IDApICYgMTsKLSAgICBib29sIGhhc19zdDEgICAgICAgID0g
KG1hc2sgPj4gMSkgJiAxOwotICAgIGJvb2wgaGFzX2h2eF9zdG9yZXMgPSAobWFzayA+PiAyKSAm
IDE7CisgICAgYm9vbCBoYXNfc3QwID0gRklFTERfRVgzMihtYXNrLCBQUk9CRV9QS1RfU0NBTEFS
X0hWWF9TVE9SRVMsIEhBU19TVDApOworICAgIGJvb2wgaGFzX3N0MSA9IEZJRUxEX0VYMzIobWFz
aywgUFJPQkVfUEtUX1NDQUxBUl9IVlhfU1RPUkVTLCBIQVNfU1QxKTsKKyAgICBib29sIGhhc19o
dnhfc3RvcmVzID0KKyAgICAgICAgRklFTERfRVgzMihtYXNrLCBQUk9CRV9QS1RfU0NBTEFSX0hW
WF9TVE9SRVMsIEhBU19IVlhfU1RPUkVTKTsKKyAgICBib29sIHMwX2lzX3ByZWQgPSBGSUVMRF9F
WDMyKG1hc2ssIFBST0JFX1BLVF9TQ0FMQVJfSFZYX1NUT1JFUywgUzBfSVNfUFJFRCk7CisgICAg
Ym9vbCBzMV9pc19wcmVkID0gRklFTERfRVgzMihtYXNrLCBQUk9CRV9QS1RfU0NBTEFSX0hWWF9T
VE9SRVMsIFMxX0lTX1BSRUQpOwogCiAgICAgaWYgKGhhc19zdDApIHsKLSAgICAgICAgcHJvYmVf
c3RvcmUoZW52LCAwLCBtbXVfaWR4KTsKKyAgICAgICAgcHJvYmVfc3RvcmUoZW52LCAwLCBtbXVf
aWR4LCBzMF9pc19wcmVkKTsKICAgICB9CiAgICAgaWYgKGhhc19zdDEpIHsKLSAgICAgICAgcHJv
YmVfc3RvcmUoZW52LCAxLCBtbXVfaWR4KTsKKyAgICAgICAgcHJvYmVfc3RvcmUoZW52LCAxLCBt
bXVfaWR4LCBzMV9pc19wcmVkKTsKICAgICB9CiAgICAgaWYgKGhhc19odnhfc3RvcmVzKSB7CiAg
ICAgICAgIEhFTFBFUihwcm9iZV9odnhfc3RvcmVzKShlbnYsIG1tdV9pZHgpOwpAQCAtMTQ0NCwx
MiArMTQ1Miw2IEBAIHZvaWQgSEVMUEVSKHZ3aGlzdDEyOHFtKShDUFVIZXhhZ29uU3RhdGUgKmVu
diwgaW50MzJfdCB1aVYpCiAgICAgfQogfQogCi12b2lkIGNhbmNlbF9zbG90KENQVUhleGFnb25T
dGF0ZSAqZW52LCB1aW50MzJfdCBzbG90KQotewotICAgIEhFWF9ERUJVR19MT0coIlNsb3QgJWQg
Y2FuY2VsbGVkXG4iLCBzbG90KTsKLSAgICBlbnYtPnNsb3RfY2FuY2VsbGVkIHw9ICgxIDw8IHNs
b3QpOwotfQotCiAvKiBUaGVzZSBtYWNyb3MgY2FuIGJlIHJlZmVyZW5jZWQgaW4gdGhlIGdlbmVy
YXRlZCBoZWxwZXIgZnVuY3Rpb25zICovCiAjZGVmaW5lIHdhcm4oLi4uKSAvKiBOb3RoaW5nICov
CiAjZGVmaW5lIGZhdGFsKC4uLikgZ19hc3NlcnRfbm90X3JlYWNoZWQoKTsKZGlmZiAtLWdpdCBh
L3RhcmdldC9oZXhhZ29uL3RyYW5zbGF0ZS5jIGIvdGFyZ2V0L2hleGFnb24vdHJhbnNsYXRlLmMK
aW5kZXggNDkzYmM3NWQyNy4uMWUzYTc2YWVjZSAxMDA2NDQKLS0tIGEvdGFyZ2V0L2hleGFnb24v
dHJhbnNsYXRlLmMKKysrIGIvdGFyZ2V0L2hleGFnb24vdHJhbnNsYXRlLmMKQEAgLTI0OCw3ICsy
NDgsMTYgQEAgc3RhdGljIGJvb2wgY2hlY2tfZm9yX2F0dHJpYihQYWNrZXQgKnBrdCwgaW50IGF0
dHJpYikKIAogc3RhdGljIGJvb2wgbmVlZF9zbG90X2NhbmNlbGxlZChQYWNrZXQgKnBrdCkKIHsK
LSAgICByZXR1cm4gY2hlY2tfZm9yX2F0dHJpYihwa3QsIEFfQ09OREVYRUMpOworICAgIC8qIFdl
IG9ubHkgbmVlZCBzbG90X2NhbmNlbGxlZCBmb3IgY29uZGl0aW9uYWwgc3RvcmUgYW5kIEhWWCBp
bnN0cnVjdGlvbnMgKi8KKyAgICBmb3IgKGludCBpID0gMDsgaSA8IHBrdC0+bnVtX2luc25zOyBp
KyspIHsKKyAgICAgICAgdWludDE2X3Qgb3Bjb2RlID0gcGt0LT5pbnNuW2ldLm9wY29kZTsKKyAg
ICAgICAgaWYgKEdFVF9BVFRSSUIob3Bjb2RlLCBBX0NPTkRFWEVDKSAmJgorICAgICAgICAgICAg
KEdFVF9BVFRSSUIob3Bjb2RlLCBBX1NUT1JFKSB8fAorICAgICAgICAgICAgIEdFVF9BVFRSSUIo
b3Bjb2RlLCBBX0NWSSkpKSB7CisgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKKyAgICAgICAgfQor
ICAgIH0KKyAgICByZXR1cm4gZmFsc2U7CiB9CiAKIHN0YXRpYyBib29sIG5lZWRfcHJlZF93cml0
dGVuKFBhY2tldCAqcGt0KQpAQCAtODQ1LDEzICs4NTQsMjcgQEAgc3RhdGljIHZvaWQgZ2VuX2Nv
bW1pdF9wYWNrZXQoRGlzYXNDb250ZXh0ICpjdHgpCiAgICAgICAgICAgICBUQ0d2IG1hc2tfdGNn
djsKIAogICAgICAgICAgICAgaWYgKGhhc19zdG9yZV9zMCkgewotICAgICAgICAgICAgICAgIG1h
c2sgfD0gKDEgPDwgMCk7CisgICAgICAgICAgICAgICAgbWFzayA9CisgICAgICAgICAgICAgICAg
ICAgIEZJRUxEX0RQMzIobWFzaywgUFJPQkVfUEtUX1NDQUxBUl9IVlhfU1RPUkVTLCBIQVNfU1Qw
LCAxKTsKICAgICAgICAgICAgIH0KICAgICAgICAgICAgIGlmIChoYXNfc3RvcmVfczEpIHsKLSAg
ICAgICAgICAgICAgICBtYXNrIHw9ICgxIDw8IDEpOworICAgICAgICAgICAgICAgIG1hc2sgPQor
ICAgICAgICAgICAgICAgICAgICBGSUVMRF9EUDMyKG1hc2ssIFBST0JFX1BLVF9TQ0FMQVJfSFZY
X1NUT1JFUywgSEFTX1NUMSwgMSk7CiAgICAgICAgICAgICB9CiAgICAgICAgICAgICBpZiAoaGFz
X2h2eF9zdG9yZSkgewotICAgICAgICAgICAgICAgIG1hc2sgfD0gKDEgPDwgMik7CisgICAgICAg
ICAgICAgICAgbWFzayA9CisgICAgICAgICAgICAgICAgICAgIEZJRUxEX0RQMzIobWFzaywgUFJP
QkVfUEtUX1NDQUxBUl9IVlhfU1RPUkVTLAorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IEhBU19IVlhfU1RPUkVTLCAxKTsKKyAgICAgICAgICAgIH0KKyAgICAgICAgICAgIGlmIChoYXNf
c3RvcmVfczAgJiYgc2xvdF9pc19wcmVkaWNhdGVkKHBrdCwgMCkpIHsKKyAgICAgICAgICAgICAg
ICBtYXNrID0KKyAgICAgICAgICAgICAgICAgICAgRklFTERfRFAzMihtYXNrLCBQUk9CRV9QS1Rf
U0NBTEFSX0hWWF9TVE9SRVMsCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUzBfSVNf
UFJFRCwgMSk7CisgICAgICAgICAgICB9CisgICAgICAgICAgICBpZiAoaGFzX3N0b3JlX3MxICYm
IHNsb3RfaXNfcHJlZGljYXRlZChwa3QsIDEpKSB7CisgICAgICAgICAgICAgICAgbWFzayA9Cisg
ICAgICAgICAgICAgICAgICAgIEZJRUxEX0RQMzIobWFzaywgUFJPQkVfUEtUX1NDQUxBUl9IVlhf
U1RPUkVTLAorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFMxX0lTX1BSRUQsIDEpOwog
ICAgICAgICAgICAgfQogICAgICAgICAgICAgbWFza190Y2d2ID0gdGNnX2NvbnN0YW50X3RsKG1h
c2spOwogICAgICAgICAgICAgZ2VuX2hlbHBlcl9wcm9iZV9wa3Rfc2NhbGFyX2h2eF9zdG9yZXMo
Y3B1X2VudiwgbWFza190Y2d2LCBtZW1faWR4KTsKQEAgLTg2MSw4ICs4ODQsMTUgQEAgc3RhdGlj
IHZvaWQgZ2VuX2NvbW1pdF9wYWNrZXQoRGlzYXNDb250ZXh0ICpjdHgpCiAgICAgICAgICAqIHBy
b2Nlc3Nfc3RvcmVfbG9nIHdpbGwgZXhlY3V0ZSB0aGUgc2xvdCAxIHN0b3JlIGZpcnN0LAogICAg
ICAgICAgKiBzbyB3ZSBvbmx5IGhhdmUgdG8gcHJvYmUgdGhlIHN0b3JlIGluIHNsb3QgMAogICAg
ICAgICAgKi8KLSAgICAgICAgVENHdiBtZW1faWR4ID0gdGNnX2NvbnN0YW50X3RsKGN0eC0+bWVt
X2lkeCk7Ci0gICAgICAgIGdlbl9oZWxwZXJfcHJvYmVfcGt0X3NjYWxhcl9zdG9yZV9zMChjcHVf
ZW52LCBtZW1faWR4KTsKKyAgICAgICAgaW50IGFyZ3MgPSAwOworICAgICAgICBhcmdzID0KKyAg
ICAgICAgICAgIEZJRUxEX0RQMzIoYXJncywgUFJPQkVfUEtUX1NDQUxBUl9TVE9SRV9TMCwgTU1V
X0lEWCwgY3R4LT5tZW1faWR4KTsKKyAgICAgICAgaWYgKHNsb3RfaXNfcHJlZGljYXRlZChwa3Qs
IDApKSB7CisgICAgICAgICAgICBhcmdzID0KKyAgICAgICAgICAgICAgICBGSUVMRF9EUDMyKGFy
Z3MsIFBST0JFX1BLVF9TQ0FMQVJfU1RPUkVfUzAsIElTX1BSRURJQ0FURUQsIDEpOworICAgICAg
ICB9CisgICAgICAgIFRDR3YgYXJnc190Y2d2ID0gdGNnX2NvbnN0YW50X3RsKGFyZ3MpOworICAg
ICAgICBnZW5faGVscGVyX3Byb2JlX3BrdF9zY2FsYXJfc3RvcmVfczAoY3B1X2VudiwgYXJnc190
Y2d2KTsKICAgICB9CiAKICAgICBwcm9jZXNzX3N0b3JlX2xvZyhjdHgpOwpkaWZmIC0tZ2l0IGEv
dGFyZ2V0L2hleGFnb24vaWRlZi1wYXJzZXIvaWRlZi1wYXJzZXIubGV4IGIvdGFyZ2V0L2hleGFn
b24vaWRlZi1wYXJzZXIvaWRlZi1wYXJzZXIubGV4CmluZGV4IGZmODdhMDJjM2EuLjExYTMyN2My
NTkgMTAwNjQ0Ci0tLSBhL3RhcmdldC9oZXhhZ29uL2lkZWYtcGFyc2VyL2lkZWYtcGFyc2VyLmxl
eAorKysgYi90YXJnZXQvaGV4YWdvbi9pZGVmLXBhcnNlci9pZGVmLXBhcnNlci5sZXgKQEAgLTUs
NyArNSw3IEBACiAKICV7CiAvKgotICogIENvcHlyaWdodChjKSAyMDE5LTIwMjIgcmV2Lm5nIExh
YnMgU3JsLiBBbGwgUmlnaHRzIFJlc2VydmVkLgorICogIENvcHlyaWdodChjKSAyMDE5LTIwMjMg
cmV2Lm5nIExhYnMgU3JsLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogICoKICAqICBUaGlzIHByb2dy
YW0gaXMgZnJlZSBzb2Z0d2FyZTsgeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlm
eQogICogIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vu
c2UgYXMgcHVibGlzaGVkIGJ5CkBAIC0zMTksNyArMzE5LDcgQEAgU1RSSU5HX0xJVCAgICAgICAg
ICAgICAgIFwiKFxcLnxbXiJcXF0pKlwiCiAiZkdFVF9MUENGRyIgICAgICAgICAgICAgfAogIlVT
Ui5MUENGRyIgICAgICAgICAgICAgIHsgcmV0dXJuIExQQ0ZHOyB9CiAiTE9BRF9DQU5DRUwoRUEp
IiAgICAgICAgeyByZXR1cm4gTE9BRF9DQU5DRUw7IH0KLSJTVE9SRV9DQU5DRUwoRUEpIiAgICAg
ICB8CisiU1RPUkVfQ0FOQ0VMKEVBKSIgICAgICAgeyByZXR1cm4gU1RPUkVfQ0FOQ0VMOyB9CiAi
Q0FOQ0VMIiAgICAgICAgICAgICAgICAgeyByZXR1cm4gQ0FOQ0VMOyB9CiAiTiJ7TE9XRVJfSUR9
Ik4iICAgICAgICAgeyB5eWx2YWwtPnJ2YWx1ZS50eXBlID0gUkVHSVNURVJfQVJHOwogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgeXlsdmFsLT5ydmFsdWUucmVnLnR5cGUgPSBET1RORVc7CmRp
ZmYgLS1naXQgYS90YXJnZXQvaGV4YWdvbi9pZGVmLXBhcnNlci9pZGVmLXBhcnNlci55IGIvdGFy
Z2V0L2hleGFnb24vaWRlZi1wYXJzZXIvaWRlZi1wYXJzZXIueQppbmRleCBjNzg0NzI2ZDQxLi4z
MWVlYjZjZDEyIDEwMDY0NAotLS0gYS90YXJnZXQvaGV4YWdvbi9pZGVmLXBhcnNlci9pZGVmLXBh
cnNlci55CisrKyBiL3RhcmdldC9oZXhhZ29uL2lkZWYtcGFyc2VyL2lkZWYtcGFyc2VyLnkKQEAg
LTEsNiArMSw2IEBACiAlewogLyoKLSAqICBDb3B5cmlnaHQoYykgMjAxOS0yMDIyIHJldi5uZyBM
YWJzIFNybC4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KKyAqICBDb3B5cmlnaHQoYykgMjAxOS0yMDIz
IHJldi5uZyBMYWJzIFNybC4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICAqCiAgKiAgVGhpcyBwcm9n
cmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsCiAg
KiAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2Fy
cmFudHkgb2YKQEAgLTUzLDcgKzUzLDcgQEAKICV0b2tlbiBBQlMgQ1JPVU5EIFJPVU5EIENJUkNB
REQgQ09VTlRPTkVTIElOQyBERUMgQU5EQSBPUkEgWE9SQSBQTFVTUExVUyBBU0wKICV0b2tlbiBB
U1IgTFNSIEVRIE5FUSBMVEUgR1RFIE1JTiBNQVggQU5ETCBGT1IgSUNJUkMgSUYgTVVOIEZTQ1Ig
RkNISyBTWFQKICV0b2tlbiBaWFQgQ09OU1RFWFQgTE9DTlQgQlJFViBTSUdOIExPQUQgU1RPUkUg
UEMgTlBDIExQQ0ZHCi0ldG9rZW4gTE9BRF9DQU5DRUwgQ0FOQ0VMIElERU5USVRZIFBBUlQxIFJP
VEwgSU5TQklUUyBTRVRCSVRTIEVYVFJBTkdFCisldG9rZW4gTE9BRF9DQU5DRUwgU1RPUkVfQ0FO
Q0VMIENBTkNFTCBJREVOVElUWSBQQVJUMSBST1RMIElOU0JJVFMgU0VUQklUUyBFWFRSQU5HRQog
JXRva2VuIENBU1Q0XzhVIEZBSUwgQ0FSUllfRlJPTV9BREQgQUREU0FUNjQgTFNCTkVXCiAldG9r
ZW4gVFlQRV9TSVpFX1QgVFlQRV9JTlQgVFlQRV9TSUdORUQgVFlQRV9VTlNJR05FRCBUWVBFX0xP
TkcKIApAQCAtNDIyLDEwICs0MjIsMTEgQEAgY2FuY2VsX3N0YXRlbWVudCA6IExPQURfQ0FOQ0VM
CiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBnZW5fbG9hZF9j
YW5jZWwoYywgJkAxKTsKICAgICAgICAgICAgICAgICAgICB9Ci0gICAgICAgICAgICAgICAgIHwg
Q0FOQ0VMCisgICAgICAgICAgICAgICAgIHwgU1RPUkVfQ0FOQ0VMCiAgICAgICAgICAgICAgICAg
ICAgewogICAgICAgICAgICAgICAgICAgICAgICBnZW5fY2FuY2VsKGMsICZAMSk7CiAgICAgICAg
ICAgICAgICAgICAgfQorICAgICAgICAgICAgICAgICB8IENBTkNFTAogICAgICAgICAgICAgICAg
ICA7CiAKIGlmX3N0YXRlbWVudCA6IGlmX3N0bXQKLS0gCjIuMjUuMQoK

