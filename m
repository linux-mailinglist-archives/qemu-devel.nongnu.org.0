Return-Path: <qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org>
X-Original-To: lists+qemu-devel@lfdr.de
Delivered-To: lists+qemu-devel@lfdr.de
Received: from lists.gnu.org (lists.gnu.org [209.51.188.17])
	by mail.lfdr.de (Postfix) with ESMTPS id 2AEA86AD6D2
	for <lists+qemu-devel@lfdr.de>; Tue,  7 Mar 2023 06:36:13 +0100 (CET)
Received: from localhost ([::1] helo=lists1p.gnu.org)
	by lists.gnu.org with esmtp (Exim 4.90_1)
	(envelope-from <qemu-devel-bounces@nongnu.org>)
	id 1pZPyi-0006pg-1g; Tue, 07 Mar 2023 00:35:12 -0500
Received: from eggs.gnu.org ([2001:470:142:3::10])
 by lists.gnu.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256)
 (Exim 4.90_1) (envelope-from <tsimpson@qualcomm.com>)
 id 1pZPyO-0006Xo-NN
 for qemu-devel@nongnu.org; Tue, 07 Mar 2023 00:34:53 -0500
Received: from mx0a-0031df01.pphosted.com ([205.220.168.131])
 by eggs.gnu.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256)
 (Exim 4.90_1) (envelope-from <tsimpson@qualcomm.com>)
 id 1pZPyJ-0006ZK-W3
 for qemu-devel@nongnu.org; Tue, 07 Mar 2023 00:34:52 -0500
Received: from pps.filterd (m0279862.ppops.net [127.0.0.1])
 by mx0a-0031df01.pphosted.com (8.17.1.19/8.17.1.19) with ESMTP id
 3274brpv007366; Tue, 7 Mar 2023 05:34:45 GMT
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=quicinc.com;
 h=from : to : cc :
 subject : date : message-id : in-reply-to : references : mime-version :
 content-type : content-transfer-encoding; s=qcppdkim1;
 bh=n6WTtQL9UabiUZaZXv3lbVkniWbBMIisnZyYXy1A02U=;
 b=oao81p0BSDM4CZw8MmEACs7Dx/BmZAMuDN4GL9JiUNYOSaePXQ+CS6loESIcU0vEqbiw
 /wXHDKOCeStuMGwR5C+/fJTlbVn0tQ78b9WCStOemPD7BIFBrOjE0uuW4lmsOhgL4MDX
 b1RDutYZna5EOB3487p4AI5Jpsu850QihPM719ZxcHmAXFqzfaXAo1u3VQzUEP3/JVDD
 +11L5nqGfXqOOzovIdXQReERgK//kAswdBWUyWEGlhgAe9V4qnt26GiVH+TTOTzpng6V
 pYXv4GfALiZOE9OTg/NKbQT7m05AlSuIk+aiG8x9QZ/7k1oD9a1Pykg+8AsY5BHUrp/n /A== 
Received: from nalasppmta03.qualcomm.com (Global_NAT1.qualcomm.com
 [129.46.96.20])
 by mx0a-0031df01.pphosted.com (PPS) with ESMTPS id 3p417epx8u-1
 (version=TLSv1.2 cipher=ECDHE-RSA-AES256-GCM-SHA384 bits=256 verify=NOT);
 Tue, 07 Mar 2023 05:34:45 +0000
Received: from pps.filterd (NALASPPMTA03.qualcomm.com [127.0.0.1])
 by NALASPPMTA03.qualcomm.com (8.17.1.5/8.17.1.5) with ESMTP id 3275YikA020278; 
 Tue, 7 Mar 2023 05:34:44 GMT
Received: from pps.reinject (localhost [127.0.0.1])
 by NALASPPMTA03.qualcomm.com (PPS) with ESMTPS id 3p4fjsvd1t-1
 (version=TLSv1.2 cipher=ECDHE-RSA-AES256-GCM-SHA384 bits=256 verify=NOT);
 Tue, 07 Mar 2023 05:34:44 +0000
Received: from NALASPPMTA03.qualcomm.com (NALASPPMTA03.qualcomm.com
 [127.0.0.1])
 by pps.reinject (8.17.1.5/8.17.1.5) with ESMTP id 3275YixK020263;
 Tue, 7 Mar 2023 05:34:44 GMT
Received: from hu-devc-sd-u20-a-1.qualcomm.com (hu-tsimpson-lv.qualcomm.com
 [10.47.204.221])
 by NALASPPMTA03.qualcomm.com (PPS) with ESMTPS id 3275YhID020245
 (version=TLSv1.2 cipher=ECDHE-RSA-AES256-GCM-SHA384 bits=256 verify=NOT);
 Tue, 07 Mar 2023 05:34:44 +0000
Received: by hu-devc-sd-u20-a-1.qualcomm.com (Postfix, from userid 47164)
 id A9DFFA85; Mon,  6 Mar 2023 21:34:42 -0800 (PST)
From: Taylor Simpson <tsimpson@quicinc.com>
To: qemu-devel@nongnu.org
Cc: tsimpson@quicinc.com, richard.henderson@linaro.org, philmd@linaro.org,
 peter.maydell@linaro.org, bcain@quicinc.com, quic_mathbern@quicinc.com,
 stefanha@redhat.com, ale@rev.ng, anjo@rev.ng
Subject: [PULL 15/17] Hexagon (target/hexagon) Remove
 gen_log_predicated_reg_write[_pair]
Date: Mon,  6 Mar 2023 21:34:36 -0800
Message-Id: <20230307053438.2416629-16-tsimpson@quicinc.com>
X-Mailer: git-send-email 2.25.1
In-Reply-To: <20230307053438.2416629-1-tsimpson@quicinc.com>
References: <20230307053438.2416629-1-tsimpson@quicinc.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
X-QCInternal: smtphost
X-QCInternal: smtphost
X-Proofpoint-Virus-Version: vendor=nai engine=6200 definitions=5800
 signatures=585085
X-Proofpoint-Virus-Version: vendor=nai engine=6200 definitions=5800
 signatures=585085
X-Proofpoint-ORIG-GUID: bJzm7l2_CEIITCYYl_bUTtS3Ol_iwY8N
X-Proofpoint-GUID: bJzm7l2_CEIITCYYl_bUTtS3Ol_iwY8N
X-Proofpoint-Virus-Version: vendor=baseguard
 engine=ICAP:2.0.219,Aquarius:18.0.942,Hydra:6.0.573,FMLib:17.11.170.22
 definitions=2023-03-06_14,2023-03-06_01,2023-02-09_01
X-Proofpoint-Spam-Details: rule=outbound_notspam policy=outbound score=0
 spamscore=0 mlxscore=0
 impostorscore=0 clxscore=1015 suspectscore=0 lowpriorityscore=0
 phishscore=0 adultscore=0 malwarescore=0 priorityscore=1501
 mlxlogscore=662 bulkscore=0 classifier=spam adjust=0 reason=mlx
 scancount=1 engine=8.12.0-2212070000 definitions=main-2303070050
Received-SPF: pass client-ip=205.220.168.131;
 envelope-from=tsimpson@qualcomm.com; helo=mx0a-0031df01.pphosted.com
X-Spam_score_int: -24
X-Spam_score: -2.5
X-Spam_bar: --
X-Spam_report: (-2.5 / 5.0 requ) BAYES_00=-1.9, DKIM_SIGNED=0.1,
 DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1, HEADER_FROM_DIFFERENT_DOMAINS=0.25,
 RCVD_IN_DNSWL_LOW=-0.7, SPF_HELO_NONE=0.001,
 SPF_PASS=-0.001 autolearn=ham autolearn_force=no
X-Spam_action: no action
X-BeenThere: qemu-devel@nongnu.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: <qemu-devel.nongnu.org>
List-Unsubscribe: <https://lists.nongnu.org/mailman/options/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=unsubscribe>
List-Archive: <https://lists.nongnu.org/archive/html/qemu-devel>
List-Post: <mailto:qemu-devel@nongnu.org>
List-Help: <mailto:qemu-devel-request@nongnu.org?subject=help>
List-Subscribe: <https://lists.nongnu.org/mailman/listinfo/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=subscribe>
Errors-To: qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org
Sender: qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org

V2UgYXNzaWduIHRoZSBpbnN0cnVjdGlvbiBkZXN0aW5hdGlvbiByZWdpc3RlciB0byBoZXhfbmV3
X3ZhbHVlW251bV0KaW5zdGVhZCBvZiBhIFRDRyB0ZW1wIHRoYXQgZ2V0cyBjb3BpZWQgYmFjayB0
byBoZXhfbmV3X3ZhbHVlW251bV0uCgpXZSBpbnRyb2R1Y2UgbmV3IGZ1bmN0aW9ucyBnZXRfcmVz
dWx0X2dwcltfcGFpcl0gdG8gZmFjaWxpdGF0ZSBnZXR0aW5nCnRoZSBwcm9wZXIgZGVzdGluYXRp
b24gcmVnaXN0ZXIuCgpTaW5jZSB3ZSBwcmVsb2FkIGhleF9uZXdfdmFsdWUgZm9yIHByZWRpY2F0
ZWQgaW5zdHJ1Y3Rpb25zLCB3ZSBkb24ndApuZWVkIHRoZSBjaGVjayBmb3Igc2xvdF9jYW5jZWxs
ZWQuICBTbywgd2UgY2FsbCBnZW5fbG9nX3JlZ193cml0ZSBpbnN0ZWFkLgoKV2UgdXBkYXRlIHRo
ZSBoZWxwZXIgZnVuY3Rpb24gZ2VuZXJhdGlvbiBhbmQgZ2VuX3RjZy5oIHRvIG1haW50YWluIHRo
ZQpkaXNhYmxlLWhleGFnb24taWRlZi1wYXJzZXIgY29uZmlndXJhdGlvbi4KCkhlcmUgaXMgYSBz
aW1wbGUgZXhhbXBsZSBvZiB0aGUgZGlmZmVyZW5jZXMgaW4gdGhlIFRDRyBjb2RlIGdlbmVyYXRl
ZDoKCklOOgoweDAwNDAwMDk0OiAgMHhmOTAwYzEwMiB7ICAgICAgIGlmIChQMCkgUjIgPSBhbmQo
UjAsUjEpIH0KCkJFRk9SRQogLS0tLSAwMDQwMDA5NAogbW92X2kzMiBzbG90X2NhbmNlbGxlZCwk
MHgwCiBtb3ZfaTMyIG5ld19yMixyMgogbW92X2kzMiBsb2MyLCQweDAKIGFuZF9pMzIgdG1wMCxw
MCwkMHgxCiBicmNvbmRfaTMyIHRtcDAsJDB4MCxlcSwkTDEKIGFuZF9pMzIgdG1wMCxyMCxyMQog
bW92X2kzMiBsb2MyLHRtcDAKIGJyICRMMgogc2V0X2xhYmVsICRMMQogb3JfaTMyIHNsb3RfY2Fu
Y2VsbGVkLHNsb3RfY2FuY2VsbGVkLCQweDgKIHNldF9sYWJlbCAkTDIKIGFuZF9pMzIgdG1wMCxz
bG90X2NhbmNlbGxlZCwkMHg4CiBtb3Zjb25kX2kzMiBuZXdfcjIsdG1wMCwkMHgwLGxvYzIsbmV3
X3IyLGVxCiBtb3ZfaTMyIHIyLG5ld19yMgoKQUZURVIKIC0tLS0gMDA0MDAwOTQKIG1vdl9pMzIg
c2xvdF9jYW5jZWxsZWQsJDB4MAogbW92X2kzMiBuZXdfcjIscjIKIGFuZF9pMzIgdG1wMCxwMCwk
MHgxCiBicmNvbmRfaTMyIHRtcDAsJDB4MCxlcSwkTDEKIGFuZF9pMzIgdG1wMCxyMCxyMQogbW92
X2kzMiBuZXdfcjIsdG1wMAogYnIgJEwyCiBzZXRfbGFiZWwgJEwxCiBvcl9pMzIgc2xvdF9jYW5j
ZWxsZWQsc2xvdF9jYW5jZWxsZWQsJDB4OAogc2V0X2xhYmVsICRMMgogbW92X2kzMiByMixuZXdf
cjIKCldlJ2xsIHJlbW92ZSB0aGUgdW5uZWNlc3NhcnkgbWFuaXB1bGF0aW9uIG9mIHNsb3RfY2Fu
Y2VsbGVkIGluIGEKc3Vic2VxdWVudCBwYXRjaC4KClNpZ25lZC1vZmYtYnk6IFRheWxvciBTaW1w
c29uIDx0c2ltcHNvbkBxdWljaW5jLmNvbT4KUmV2aWV3ZWQtYnk6IEFudG9uIEpvaGFuc3NvbiA8
YW5qb0ByZXYubmc+Ck1lc3NhZ2UtSWQ6IDwyMDIzMDMwNzAyNTgyOC4xNjEyODA5LTEzLXRzaW1w
c29uQHF1aWNpbmMuY29tPgotLS0KIHRhcmdldC9oZXhhZ29uL2dlbl90Y2cuaCAgICAgICAgICAg
ICAgICAgICAgfCAgIDYgKy0KIHRhcmdldC9oZXhhZ29uL21hY3Jvcy5oICAgICAgICAgICAgICAg
ICAgICAgfCAgMTUgLS0tCiB0YXJnZXQvaGV4YWdvbi9nZW5wdHIuYyAgICAgICAgICAgICAgICAg
ICAgIHwgMTIxICsrKysrLS0tLS0tLS0tLS0tLS0tCiB0YXJnZXQvaGV4YWdvbi9pZGVmLXBhcnNl
ci9wYXJzZXItaGVscGVycy5jIHwgICA0ICstCiB0YXJnZXQvaGV4YWdvbi9nZW5faGVscGVyX2Z1
bmNzLnB5ICAgICAgICAgIHwgIDE5ICsrLQogdGFyZ2V0L2hleGFnb24vZ2VuX2hlbHBlcl9wcm90
b3MucHkgICAgICAgICB8ICAxMiArLQogdGFyZ2V0L2hleGFnb24vZ2VuX3RjZ19mdW5jcy5weSAg
ICAgICAgICAgICB8ICA3NiArKysrKysrLS0tLS0KIHRhcmdldC9oZXhhZ29uL2hleF9jb21tb24u
cHkgICAgICAgICAgICAgICAgfCAgIDkgKy0KIDggZmlsZXMgY2hhbmdlZCwgMTEwIGluc2VydGlv
bnMoKyksIDE1MiBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS90YXJnZXQvaGV4YWdvbi9nZW5f
dGNnLmggYi90YXJnZXQvaGV4YWdvbi9nZW5fdGNnLmgKaW5kZXggZTcyNjcyZTE5OC4uYmNmMGNm
NDY2YSAxMDA2NDQKLS0tIGEvdGFyZ2V0L2hleGFnb24vZ2VuX3RjZy5oCisrKyBiL3RhcmdldC9o
ZXhhZ29uL2dlbl90Y2cuaApAQCAtMzMyLDggKzMzMiw2IEBACiAgICAgICAgIHRjZ19nZW5fbW92
aV90bChFQSwgMCk7IFwKICAgICAgICAgUFJFRDsgIFwKICAgICAgICAgQ0hFQ0tfTk9TSFVGX1BS
RUQoR0VUX0VBLCBTSVpFLCBMU0IpOyBcCi0gICAgICAgIFBSRURfTE9BRF9DQU5DRUwoTFNCLCBF
QSk7IFwKLSAgICAgICAgdGNnX2dlbl9tb3ZpX3RsKFJkViwgMCk7IFwKICAgICAgICAgdGNnX2dl
bl9icmNvbmRpX3RsKFRDR19DT05EX0VRLCBMU0IsIDAsIGxhYmVsKTsgXAogICAgICAgICBmTE9B
RCgxLCBTSVpFLCBTSUdOLCBFQSwgUmRWKTsgXAogICAgICAgICBnZW5fc2V0X2xhYmVsKGxhYmVs
KTsgXApAQCAtMzkxLDggKzM4OSw2IEBACiAgICAgICAgIHRjZ19nZW5fbW92aV90bChFQSwgMCk7
IFwKICAgICAgICAgUFJFRDsgIFwKICAgICAgICAgQ0hFQ0tfTk9TSFVGX1BSRUQoR0VUX0VBLCA4
LCBMU0IpOyBcCi0gICAgICAgIFBSRURfTE9BRF9DQU5DRUwoTFNCLCBFQSk7IFwKLSAgICAgICAg
dGNnX2dlbl9tb3ZpX2k2NChSZGRWLCAwKTsgXAogICAgICAgICB0Y2dfZ2VuX2JyY29uZGlfdGwo
VENHX0NPTkRfRVEsIExTQiwgMCwgbGFiZWwpOyBcCiAgICAgICAgIGZMT0FEKDEsIDgsIHUsIEVB
LCBSZGRWKTsgXAogICAgICAgICBnZW5fc2V0X2xhYmVsKGxhYmVsKTsgXApAQCAtNTA0LDcgKzUw
MCw3IEBACiAgKi8KICNkZWZpbmUgZkdFTl9UQ0dfU0wyX3JldHVybihTSE9SVENPREUpIFwKICAg
ICBkbyB7IFwKLSAgICAgICAgVENHdl9pNjQgUmRkViA9IHRjZ190ZW1wX25ld19pNjQoKTsgXAor
ICAgICAgICBUQ0d2X2k2NCBSZGRWID0gZ2V0X3Jlc3VsdF9ncHJfcGFpcihjdHgsIEhFWF9SRUdf
RlApOyBcCiAgICAgICAgIGdlbl9yZXR1cm4oY3R4LCBSZGRWLCBoZXhfZ3ByW0hFWF9SRUdfRlBd
KTsgXAogICAgICAgICBnZW5fbG9nX3JlZ193cml0ZV9wYWlyKEhFWF9SRUdfRlAsIFJkZFYpOyBc
CiAgICAgfSB3aGlsZSAoMCkKZGlmZiAtLWdpdCBhL3RhcmdldC9oZXhhZ29uL21hY3Jvcy5oIGIv
dGFyZ2V0L2hleGFnb24vbWFjcm9zLmgKaW5kZXggNjk3NGVmNmM5ZS4uMWZhNjA1N2QyNyAxMDA2
NDQKLS0tIGEvdGFyZ2V0L2hleGFnb24vbWFjcm9zLmgKKysrIGIvdGFyZ2V0L2hleGFnb24vbWFj
cm9zLmgKQEAgLTIxMCwyMSArMjEwLDYgQEAgc3RhdGljIGlubGluZSB2b2lkIGdlbl9jYW5jZWwo
dWludDMyX3Qgc2xvdCkKIAogI2RlZmluZSBMT0FEX0NBTkNFTChFQSkgZG8geyBDQU5DRUw7IH0g
d2hpbGUgKDApCiAKLSNpZmRlZiBRRU1VX0dFTkVSQVRFCi1zdGF0aWMgaW5saW5lIHZvaWQgZ2Vu
X3ByZWRfY2FuY2VsKFRDR3YgcHJlZCwgdWludDMyX3Qgc2xvdF9udW0pCi0gewotICAgIFRDR3Yg
c2xvdF9tYXNrID0gdGNnX3RlbXBfbmV3KCk7Ci0gICAgVENHdiB0bXAgPSB0Y2dfdGVtcF9uZXco
KTsKLSAgICBUQ0d2IHplcm8gPSB0Y2dfY29uc3RhbnRfdGwoMCk7Ci0gICAgdGNnX2dlbl9vcmlf
dGwoc2xvdF9tYXNrLCBoZXhfc2xvdF9jYW5jZWxsZWQsIDEgPDwgc2xvdF9udW0pOwotICAgIHRj
Z19nZW5fYW5kaV90bCh0bXAsIHByZWQsIDEpOwotICAgIHRjZ19nZW5fbW92Y29uZF90bChUQ0df
Q09ORF9FUSwgaGV4X3Nsb3RfY2FuY2VsbGVkLCB0bXAsIHplcm8sCi0gICAgICAgICAgICAgICAg
ICAgICAgIHNsb3RfbWFzaywgaGV4X3Nsb3RfY2FuY2VsbGVkKTsKLX0KLSNkZWZpbmUgUFJFRF9M
T0FEX0NBTkNFTChQUkVELCBFQSkgXAotICAgIGdlbl9wcmVkX2NhbmNlbChQUkVELCBpbnNuLT5p
c19lbmRsb29wID8gNCA6IGluc24tPnNsb3QpCi0jZW5kaWYKLQogI2RlZmluZSBTVE9SRV9DQU5D
RUwoRUEpIHsgZW52LT5zbG90X2NhbmNlbGxlZCB8PSAoMSA8PCBzbG90KTsgfQogCiAjZGVmaW5l
IGZNQVgoQSwgQikgKCgoQSkgPiAoQikpID8gKEEpIDogKEIpKQpkaWZmIC0tZ2l0IGEvdGFyZ2V0
L2hleGFnb24vZ2VucHRyLmMgYi90YXJnZXQvaGV4YWdvbi9nZW5wdHIuYwppbmRleCA2MWFiOWFm
OWU0Li5kYTVkYmM4M2NmIDEwMDY0NAotLS0gYS90YXJnZXQvaGV4YWdvbi9nZW5wdHIuYworKysg
Yi90YXJnZXQvaGV4YWdvbi9nZW5wdHIuYwpAQCAtNjgsMjYgKzY4LDE3IEBAIHN0YXRpYyBpbmxp
bmUgdm9pZCBnZW5fbWFza2VkX3JlZ193cml0ZShUQ0d2IG5ld192YWwsIFRDR3YgY3VyX3ZhbCwK
ICAgICB9CiB9CiAKLXN0YXRpYyBpbmxpbmUgdm9pZCBnZW5fbG9nX3ByZWRpY2F0ZWRfcmVnX3dy
aXRlKGludCBybnVtLCBUQ0d2IHZhbCwKLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIHVpbnQzMl90IHNsb3QpCitzdGF0aWMgVENHdiBnZXRfcmVzdWx0X2dw
cihEaXNhc0NvbnRleHQgKmN0eCwgaW50IHJudW0pCiB7Ci0gICAgVENHdiB6ZXJvID0gdGNnX2Nv
bnN0YW50X3RsKDApOwotICAgIFRDR3Ygc2xvdF9tYXNrID0gdGNnX3RlbXBfbmV3KCk7CisgICAg
cmV0dXJuIGhleF9uZXdfdmFsdWVbcm51bV07Cit9CiAKLSAgICB0Y2dfZ2VuX2FuZGlfdGwoc2xv
dF9tYXNrLCBoZXhfc2xvdF9jYW5jZWxsZWQsIDEgPDwgc2xvdCk7Ci0gICAgdGNnX2dlbl9tb3Zj
b25kX3RsKFRDR19DT05EX0VRLCBoZXhfbmV3X3ZhbHVlW3JudW1dLCBzbG90X21hc2ssIHplcm8s
Ci0gICAgICAgICAgICAgICAgICAgICAgICAgICB2YWwsIGhleF9uZXdfdmFsdWVbcm51bV0pOwot
ICAgIGlmIChIRVhfREVCVUcpIHsKLSAgICAgICAgLyoKLSAgICAgICAgICogRG8gdGhpcyBzbyBI
RUxQRVIoZGVidWdfY29tbWl0X2VuZCkgd2lsbCBrbm93Ci0gICAgICAgICAqCi0gICAgICAgICAq
IE5vdGUgdGhhdCBzbG90X21hc2sgaW5kaWNhdGVzIHRoZSB2YWx1ZSBpcyBub3Qgd3JpdHRlbgot
ICAgICAgICAgKiAoaS5lLiwgc2xvdCB3YXMgY2FuY2VsbGVkKSwgc28gd2UgY3JlYXRlIGEgdHJ1
ZS9mYWxzZSB2YWx1ZSBiZWZvcmUKLSAgICAgICAgICogb3InaW5nIHdpdGggaGV4X3JlZ193cml0
dGVuW3JudW1dLgotICAgICAgICAgKi8KLSAgICAgICAgdGNnX2dlbl9zZXRjb25kX3RsKFRDR19D
T05EX0VRLCBzbG90X21hc2ssIHNsb3RfbWFzaywgemVybyk7Ci0gICAgICAgIHRjZ19nZW5fb3Jf
dGwoaGV4X3JlZ193cml0dGVuW3JudW1dLCBoZXhfcmVnX3dyaXR0ZW5bcm51bV0sIHNsb3RfbWFz
ayk7Ci0gICAgfQorc3RhdGljIFRDR3ZfaTY0IGdldF9yZXN1bHRfZ3ByX3BhaXIoRGlzYXNDb250
ZXh0ICpjdHgsIGludCBybnVtKQoreworICAgIFRDR3ZfaTY0IHJlc3VsdCA9IHRjZ190ZW1wX25l
d19pNjQoKTsKKyAgICB0Y2dfZ2VuX2NvbmNhdF9pMzJfaTY0KHJlc3VsdCwgaGV4X25ld192YWx1
ZVtybnVtXSwKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGV4X25ld192YWx1
ZVtybnVtICsgMV0pOworICAgIHJldHVybiByZXN1bHQ7CiB9CiAKIHZvaWQgZ2VuX2xvZ19yZWdf
d3JpdGUoaW50IHJudW0sIFRDR3YgdmFsKQpAQCAtMTAyLDM5ICs5Myw2IEBAIHZvaWQgZ2VuX2xv
Z19yZWdfd3JpdGUoaW50IHJudW0sIFRDR3YgdmFsKQogICAgIH0KIH0KIAotc3RhdGljIHZvaWQg
Z2VuX2xvZ19wcmVkaWNhdGVkX3JlZ193cml0ZV9wYWlyKGludCBybnVtLCBUQ0d2X2k2NCB2YWws
Ci0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWludDMyX3Qg
c2xvdCkKLXsKLSAgICBUQ0d2IHZhbDMyID0gdGNnX3RlbXBfbmV3KCk7Ci0gICAgVENHdiB6ZXJv
ID0gdGNnX2NvbnN0YW50X3RsKDApOwotICAgIFRDR3Ygc2xvdF9tYXNrID0gdGNnX3RlbXBfbmV3
KCk7Ci0KLSAgICB0Y2dfZ2VuX2FuZGlfdGwoc2xvdF9tYXNrLCBoZXhfc2xvdF9jYW5jZWxsZWQs
IDEgPDwgc2xvdCk7Ci0gICAgLyogTG93IHdvcmQgKi8KLSAgICB0Y2dfZ2VuX2V4dHJsX2k2NF9p
MzIodmFsMzIsIHZhbCk7Ci0gICAgdGNnX2dlbl9tb3Zjb25kX3RsKFRDR19DT05EX0VRLCBoZXhf
bmV3X3ZhbHVlW3JudW1dLAotICAgICAgICAgICAgICAgICAgICAgICBzbG90X21hc2ssIHplcm8s
Ci0gICAgICAgICAgICAgICAgICAgICAgIHZhbDMyLCBoZXhfbmV3X3ZhbHVlW3JudW1dKTsKLSAg
ICAvKiBIaWdoIHdvcmQgKi8KLSAgICB0Y2dfZ2VuX2V4dHJoX2k2NF9pMzIodmFsMzIsIHZhbCk7
Ci0gICAgdGNnX2dlbl9tb3Zjb25kX3RsKFRDR19DT05EX0VRLCBoZXhfbmV3X3ZhbHVlW3JudW0g
KyAxXSwKLSAgICAgICAgICAgICAgICAgICAgICAgc2xvdF9tYXNrLCB6ZXJvLAotICAgICAgICAg
ICAgICAgICAgICAgICB2YWwzMiwgaGV4X25ld192YWx1ZVtybnVtICsgMV0pOwotICAgIGlmIChI
RVhfREVCVUcpIHsKLSAgICAgICAgLyoKLSAgICAgICAgICogRG8gdGhpcyBzbyBIRUxQRVIoZGVi
dWdfY29tbWl0X2VuZCkgd2lsbCBrbm93Ci0gICAgICAgICAqCi0gICAgICAgICAqIE5vdGUgdGhh
dCBzbG90X21hc2sgaW5kaWNhdGVzIHRoZSB2YWx1ZSBpcyBub3Qgd3JpdHRlbgotICAgICAgICAg
KiAoaS5lLiwgc2xvdCB3YXMgY2FuY2VsbGVkKSwgc28gd2UgY3JlYXRlIGEgdHJ1ZS9mYWxzZSB2
YWx1ZSBiZWZvcmUKLSAgICAgICAgICogb3InaW5nIHdpdGggaGV4X3JlZ193cml0dGVuW3JudW1d
LgotICAgICAgICAgKi8KLSAgICAgICAgdGNnX2dlbl9zZXRjb25kX3RsKFRDR19DT05EX0VRLCBz
bG90X21hc2ssIHNsb3RfbWFzaywgemVybyk7Ci0gICAgICAgIHRjZ19nZW5fb3JfdGwoaGV4X3Jl
Z193cml0dGVuW3JudW1dLCBoZXhfcmVnX3dyaXR0ZW5bcm51bV0sIHNsb3RfbWFzayk7Ci0gICAg
ICAgIHRjZ19nZW5fb3JfdGwoaGV4X3JlZ193cml0dGVuW3JudW0gKyAxXSwgaGV4X3JlZ193cml0
dGVuW3JudW0gKyAxXSwKLSAgICAgICAgICAgICAgICAgICAgICBzbG90X21hc2spOwotICAgIH0K
LX0KLQogc3RhdGljIHZvaWQgZ2VuX2xvZ19yZWdfd3JpdGVfcGFpcihpbnQgcm51bSwgVENHdl9p
NjQgdmFsKQogewogICAgIGNvbnN0IHRhcmdldF91bG9uZyByZWdfbWFza19sb3cgPSByZWdfaW1t
dXRfbWFza3Nbcm51bV07CkBAIC0yOTAsMTEgKzI0OCwxMiBAQCBzdGF0aWMgaW5saW5lIHZvaWQg
Z2VuX3dyaXRlX2N0cmxfcmVnX3BhaXIoRGlzYXNDb250ZXh0ICpjdHgsIGludCByZWdfbnVtLAog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRDR3ZfaTY0IHZhbCkK
IHsKICAgICBpZiAocmVnX251bSA9PSBIRVhfUkVHX1AzXzBfQUxJQVNFRCkgeworICAgICAgICBU
Q0d2IHJlc3VsdCA9IGdldF9yZXN1bHRfZ3ByKGN0eCwgcmVnX251bSArIDEpOwogICAgICAgICBU
Q0d2IHZhbDMyID0gdGNnX3RlbXBfbmV3KCk7CiAgICAgICAgIHRjZ19nZW5fZXh0cmxfaTY0X2kz
Mih2YWwzMiwgdmFsKTsKICAgICAgICAgZ2VuX3dyaXRlX3AzXzAoY3R4LCB2YWwzMik7CiAgICAg
ICAgIHRjZ19nZW5fZXh0cmhfaTY0X2kzMih2YWwzMiwgdmFsKTsKLSAgICAgICAgZ2VuX2xvZ19y
ZWdfd3JpdGUocmVnX251bSArIDEsIHZhbDMyKTsKKyAgICAgICAgdGNnX2dlbl9tb3ZfdGwocmVz
dWx0LCB2YWwzMik7CiAgICAgfSBlbHNlIHsKICAgICAgICAgZ2VuX2xvZ19yZWdfd3JpdGVfcGFp
cihyZWdfbnVtLCB2YWwpOwogICAgICAgICBpZiAocmVnX251bSA9PSBIRVhfUkVHX1FFTVVfUEtU
X0NOVCkgewpAQCAtNjczLDMxICs2MzIsMjggQEAgc3RhdGljIHZvaWQgZ2VuX2p1bXByKERpc2Fz
Q29udGV4dCAqY3R4LCBUQ0d2IG5ld19wYykKIAogc3RhdGljIHZvaWQgZ2VuX2NhbGwoRGlzYXND
b250ZXh0ICpjdHgsIGludCBwY19vZmYpCiB7Ci0gICAgVENHdiBuZXh0X1BDID0KLSAgICAgICAg
dGNnX2NvbnN0YW50X3RsKGN0eC0+cGt0LT5wYyArIGN0eC0+cGt0LT5lbmNvZF9wa3Rfc2l6ZV9p
bl9ieXRlcyk7Ci0gICAgZ2VuX2xvZ19yZWdfd3JpdGUoSEVYX1JFR19MUiwgbmV4dF9QQyk7Cisg
ICAgVENHdiBsciA9IGdldF9yZXN1bHRfZ3ByKGN0eCwgSEVYX1JFR19MUik7CisgICAgdGNnX2dl
bl9tb3ZpX3RsKGxyLCBjdHgtPm5leHRfUEMpOwogICAgIGdlbl93cml0ZV9uZXdfcGNfcGNyZWwo
Y3R4LCBwY19vZmYsIFRDR19DT05EX0FMV0FZUywgTlVMTCk7CiB9CiAKIHN0YXRpYyB2b2lkIGdl
bl9jYWxscihEaXNhc0NvbnRleHQgKmN0eCwgVENHdiBuZXdfcGMpCiB7Ci0gICAgVENHdiBuZXh0
X1BDID0gdGNnX2NvbnN0YW50X3RsKGN0eC0+bmV4dF9QQyk7Ci0gICAgZ2VuX2xvZ19yZWdfd3Jp
dGUoSEVYX1JFR19MUiwgbmV4dF9QQyk7CisgICAgVENHdiBsciA9IGdldF9yZXN1bHRfZ3ByKGN0
eCwgSEVYX1JFR19MUik7CisgICAgdGNnX2dlbl9tb3ZpX3RsKGxyLCBjdHgtPm5leHRfUEMpOwog
ICAgIGdlbl93cml0ZV9uZXdfcGNfYWRkcihjdHgsIG5ld19wYywgVENHX0NPTkRfQUxXQVlTLCBO
VUxMKTsKIH0KIAogc3RhdGljIHZvaWQgZ2VuX2NvbmRfY2FsbChEaXNhc0NvbnRleHQgKmN0eCwg
VENHdiBwcmVkLAogICAgICAgICAgICAgICAgICAgICAgICAgICBUQ0dDb25kIGNvbmQsIGludCBw
Y19vZmYpCiB7Ci0gICAgVENHdiBuZXh0X1BDOworICAgIFRDR3YgbHIgPSBnZXRfcmVzdWx0X2dw
cihjdHgsIEhFWF9SRUdfTFIpOwogICAgIFRDR3YgbHNiID0gdGNnX3RlbXBfbmV3KCk7CiAgICAg
VENHTGFiZWwgKnNraXAgPSBnZW5fbmV3X2xhYmVsKCk7CiAgICAgdGNnX2dlbl9hbmRpX3RsKGxz
YiwgcHJlZCwgMSk7CiAgICAgZ2VuX3dyaXRlX25ld19wY19wY3JlbChjdHgsIHBjX29mZiwgY29u
ZCwgbHNiKTsKICAgICB0Y2dfZ2VuX2JyY29uZGlfdGwoY29uZCwgbHNiLCAwLCBza2lwKTsKLSAg
ICBuZXh0X1BDID0KLSAgICAgICAgdGNnX2NvbnN0YW50X3RsKGN0eC0+cGt0LT5wYyArIGN0eC0+
cGt0LT5lbmNvZF9wa3Rfc2l6ZV9pbl9ieXRlcyk7Ci0gICAgZ2VuX2xvZ19yZWdfd3JpdGUoSEVY
X1JFR19MUiwgbmV4dF9QQyk7CisgICAgdGNnX2dlbl9tb3ZpX3RsKGxyLCBjdHgtPm5leHRfUEMp
OwogICAgIGdlbl9zZXRfbGFiZWwoc2tpcCk7CiB9CiAKQEAgLTcyOCw4ICs2ODQsNyBAQCBzdGF0
aWMgdm9pZCBnZW5fbG9hZF9mcmFtZShEaXNhc0NvbnRleHQgKmN0eCwgVENHdl9pNjQgZnJhbWUs
IFRDR3YgRUEpCiAgICAgdGNnX2dlbl9xZW11X2xkNjQoZnJhbWUsIEVBLCBjdHgtPm1lbV9pZHgp
OwogfQogCi1zdGF0aWMgdm9pZCBnZW5fcmV0dXJuX2Jhc2UoRGlzYXNDb250ZXh0ICpjdHgsIFRD
R3ZfaTY0IGRzdCwgVENHdiBzcmMsCi0gICAgICAgICAgICAgICAgICAgICAgICAgICAgVENHdiBy
MjkpCitzdGF0aWMgdm9pZCBnZW5fcmV0dXJuKERpc2FzQ29udGV4dCAqY3R4LCBUQ0d2X2k2NCBk
c3QsIFRDR3Ygc3JjKQogewogICAgIC8qCiAgICAgICogZnJhbWUgPSAqc3JjCkBAIC03MzksNiAr
Njk0LDcgQEAgc3RhdGljIHZvaWQgZ2VuX3JldHVybl9iYXNlKERpc2FzQ29udGV4dCAqY3R4LCBU
Q0d2X2k2NCBkc3QsIFRDR3Ygc3JjLAogICAgICAqLwogICAgIFRDR3ZfaTY0IGZyYW1lID0gdGNn
X3RlbXBfbmV3X2k2NCgpOwogICAgIFRDR3YgcjMxID0gdGNnX3RlbXBfbmV3KCk7CisgICAgVENH
diByMjkgPSBnZXRfcmVzdWx0X2dwcihjdHgsIEhFWF9SRUdfU1ApOwogCiAgICAgZ2VuX2xvYWRf
ZnJhbWUoY3R4LCBmcmFtZSwgc3JjKTsKICAgICBnZW5fZnJhbWVfdW5zY3JhbWJsZShmcmFtZSk7
CkBAIC03NDgsNDUgKzcwNCwyNSBAQCBzdGF0aWMgdm9pZCBnZW5fcmV0dXJuX2Jhc2UoRGlzYXND
b250ZXh0ICpjdHgsIFRDR3ZfaTY0IGRzdCwgVENHdiBzcmMsCiAgICAgZ2VuX2p1bXByKGN0eCwg
cjMxKTsKIH0KIAotc3RhdGljIHZvaWQgZ2VuX3JldHVybihEaXNhc0NvbnRleHQgKmN0eCwgVENH
dl9pNjQgZHN0LCBUQ0d2IHNyYykKLXsKLSAgICBUQ0d2IHIyOSA9IHRjZ190ZW1wX25ldygpOwot
ICAgIGdlbl9yZXR1cm5fYmFzZShjdHgsIGRzdCwgc3JjLCByMjkpOwotICAgIGdlbl9sb2dfcmVn
X3dyaXRlKEhFWF9SRUdfU1AsIHIyOSk7Ci19Ci0KIC8qIGlmIChwcmVkKSBkc3QgPSBkZWFsbG9j
X3JldHVybihzcmMpOnJhdyAqLwogc3RhdGljIHZvaWQgZ2VuX2NvbmRfcmV0dXJuKERpc2FzQ29u
dGV4dCAqY3R4LCBUQ0d2X2k2NCBkc3QsIFRDR3Ygc3JjLAogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIFRDR3YgcHJlZCwgVENHQ29uZCBjb25kKQogewogICAgIFRDR3YgTFNCID0gdGNnX3Rl
bXBfbmV3KCk7Ci0gICAgVENHdiBtYXNrID0gdGNnX3RlbXBfbmV3KCk7Ci0gICAgVENHdiByMjkg
PSB0Y2dfdGVtcF9uZXcoKTsKICAgICBUQ0dMYWJlbCAqc2tpcCA9IGdlbl9uZXdfbGFiZWwoKTsK
ICAgICB0Y2dfZ2VuX2FuZGlfdGwoTFNCLCBwcmVkLCAxKTsKIAotICAgIC8qIEluaXRpYWxpemUg
dGhlIHJlc3VsdHMgaW4gY2FzZSB0aGUgcHJlZGljYXRlIGlzIGZhbHNlICovCi0gICAgdGNnX2dl
bl9tb3ZpX2k2NChkc3QsIDApOwotICAgIHRjZ19nZW5fbW92aV90bChyMjksIDApOwotCi0gICAg
LyogU2V0IHRoZSBiaXQgaW4gaGV4X3Nsb3RfY2FuY2VsbGVkIGlmIHRoZSBwcmVkaWNhdGUgaXMg
Zmxhc2UgKi8KLSAgICB0Y2dfZ2VuX21vdmlfdGwobWFzaywgMSA8PCBjdHgtPmluc24tPnNsb3Qp
OwotICAgIHRjZ19nZW5fb3JfdGwobWFzaywgaGV4X3Nsb3RfY2FuY2VsbGVkLCBtYXNrKTsKLSAg
ICB0Y2dfZ2VuX21vdmNvbmRfdGwoY29uZCwgaGV4X3Nsb3RfY2FuY2VsbGVkLCBMU0IsIHRjZ19j
b25zdGFudF90bCgwKSwKLSAgICAgICAgICAgICAgICAgICAgICAgbWFzaywgaGV4X3Nsb3RfY2Fu
Y2VsbGVkKTsKLQogICAgIHRjZ19nZW5fYnJjb25kaV90bChjb25kLCBMU0IsIDAsIHNraXApOwot
ICAgIGdlbl9yZXR1cm5fYmFzZShjdHgsIGRzdCwgc3JjLCByMjkpOworICAgIGdlbl9yZXR1cm4o
Y3R4LCBkc3QsIHNyYyk7CiAgICAgZ2VuX3NldF9sYWJlbChza2lwKTsKLSAgICBnZW5fbG9nX3By
ZWRpY2F0ZWRfcmVnX3dyaXRlKEhFWF9SRUdfU1AsIHIyOSwgY3R4LT5pbnNuLT5zbG90KTsKIH0K
IAogLyogc3ViLWluc3RydWN0aW9uIHZlcnNpb24gKG5vIFJkZFYsIHNvIGhhbmRsZSBpdCBtYW51
YWxseSkgKi8KIHN0YXRpYyB2b2lkIGdlbl9jb25kX3JldHVybl9zdWJpbnNuKERpc2FzQ29udGV4
dCAqY3R4LCBUQ0dDb25kIGNvbmQsIFRDR3YgcHJlZCkKIHsKLSAgICBUQ0d2X2k2NCBSZGRWID0g
dGNnX3RlbXBfbmV3X2k2NCgpOworICAgIFRDR3ZfaTY0IFJkZFYgPSBnZXRfcmVzdWx0X2dwcl9w
YWlyKGN0eCwgSEVYX1JFR19GUCk7CiAgICAgZ2VuX2NvbmRfcmV0dXJuKGN0eCwgUmRkViwgaGV4
X2dwcltIRVhfUkVHX0ZQXSwgcHJlZCwgY29uZCk7Ci0gICAgZ2VuX2xvZ19wcmVkaWNhdGVkX3Jl
Z193cml0ZV9wYWlyKEhFWF9SRUdfRlAsIFJkZFYsIGN0eC0+aW5zbi0+c2xvdCk7CisgICAgZ2Vu
X2xvZ19yZWdfd3JpdGVfcGFpcihIRVhfUkVHX0ZQLCBSZGRWKTsKIH0KIAogc3RhdGljIHZvaWQg
Z2VuX2VuZGxvb3AwKERpc2FzQ29udGV4dCAqY3R4KQpAQCAtODM2LDkgKzc3Miw5IEBAIHN0YXRp
YyB2b2lkIGdlbl9lbmRsb29wMChEaXNhc0NvbnRleHQgKmN0eCkKICAgICAgICAgVENHTGFiZWwg
KmxhYmVsMyA9IGdlbl9uZXdfbGFiZWwoKTsKICAgICAgICAgdGNnX2dlbl9icmNvbmRpX3RsKFRD
R19DT05EX0xFVSwgaGV4X2dwcltIRVhfUkVHX0xDMF0sIDEsIGxhYmVsMyk7CiAgICAgICAgIHsK
KyAgICAgICAgICAgIFRDR3YgbGMwID0gZ2V0X3Jlc3VsdF9ncHIoY3R4LCBIRVhfUkVHX0xDMCk7
CiAgICAgICAgICAgICBnZW5fanVtcHIoY3R4LCBoZXhfZ3ByW0hFWF9SRUdfU0EwXSk7Ci0gICAg
ICAgICAgICB0Y2dfZ2VuX3N1YmlfdGwoaGV4X25ld192YWx1ZVtIRVhfUkVHX0xDMF0sCi0gICAg
ICAgICAgICAgICAgICAgICAgICAgICAgaGV4X2dwcltIRVhfUkVHX0xDMF0sIDEpOworICAgICAg
ICAgICAgdGNnX2dlbl9zdWJpX3RsKGxjMCwgaGV4X2dwcltIRVhfUkVHX0xDMF0sIDEpOwogICAg
ICAgICB9CiAgICAgICAgIGdlbl9zZXRfbGFiZWwobGFiZWwzKTsKICAgICB9CkBAIC04NTUsOCAr
NzkxLDkgQEAgc3RhdGljIHZvaWQgZ2VuX2VuZGxvb3AxKERpc2FzQ29udGV4dCAqY3R4KQogICAg
IFRDR0xhYmVsICpsYWJlbCA9IGdlbl9uZXdfbGFiZWwoKTsKICAgICB0Y2dfZ2VuX2JyY29uZGlf
dGwoVENHX0NPTkRfTEVVLCBoZXhfZ3ByW0hFWF9SRUdfTEMxXSwgMSwgbGFiZWwpOwogICAgIHsK
KyAgICAgICAgVENHdiBsYzEgPSBnZXRfcmVzdWx0X2dwcihjdHgsIEhFWF9SRUdfTEMxKTsKICAg
ICAgICAgZ2VuX2p1bXByKGN0eCwgaGV4X2dwcltIRVhfUkVHX1NBMV0pOwotICAgICAgICB0Y2df
Z2VuX3N1YmlfdGwoaGV4X25ld192YWx1ZVtIRVhfUkVHX0xDMV0sIGhleF9ncHJbSEVYX1JFR19M
QzFdLCAxKTsKKyAgICAgICAgdGNnX2dlbl9zdWJpX3RsKGxjMSwgaGV4X2dwcltIRVhfUkVHX0xD
MV0sIDEpOwogICAgIH0KICAgICBnZW5fc2V0X2xhYmVsKGxhYmVsKTsKIH0KQEAgLTkwOSwxNSAr
ODQ2LDE3IEBAIHN0YXRpYyB2b2lkIGdlbl9lbmRsb29wMDEoRGlzYXNDb250ZXh0ICpjdHgpCiAg
ICAgICovCiAgICAgdGNnX2dlbl9icmNvbmRpX3RsKFRDR19DT05EX0xFVSwgaGV4X2dwcltIRVhf
UkVHX0xDMF0sIDEsIGxhYmVsMyk7CiAgICAgeworICAgICAgICBUQ0d2IGxjMCA9IGdldF9yZXN1
bHRfZ3ByKGN0eCwgSEVYX1JFR19MQzApOwogICAgICAgICBnZW5fanVtcHIoY3R4LCBoZXhfZ3By
W0hFWF9SRUdfU0EwXSk7Ci0gICAgICAgIHRjZ19nZW5fc3ViaV90bChoZXhfbmV3X3ZhbHVlW0hF
WF9SRUdfTEMwXSwgaGV4X2dwcltIRVhfUkVHX0xDMF0sIDEpOworICAgICAgICB0Y2dfZ2VuX3N1
YmlfdGwobGMwLCBoZXhfZ3ByW0hFWF9SRUdfTEMwXSwgMSk7CiAgICAgICAgIHRjZ19nZW5fYnIo
ZG9uZSk7CiAgICAgfQogICAgIGdlbl9zZXRfbGFiZWwobGFiZWwzKTsKICAgICB0Y2dfZ2VuX2Jy
Y29uZGlfdGwoVENHX0NPTkRfTEVVLCBoZXhfZ3ByW0hFWF9SRUdfTEMxXSwgMSwgZG9uZSk7CiAg
ICAgeworICAgICAgICBUQ0d2IGxjMSA9IGdldF9yZXN1bHRfZ3ByKGN0eCwgSEVYX1JFR19MQzEp
OwogICAgICAgICBnZW5fanVtcHIoY3R4LCBoZXhfZ3ByW0hFWF9SRUdfU0ExXSk7Ci0gICAgICAg
IHRjZ19nZW5fc3ViaV90bChoZXhfbmV3X3ZhbHVlW0hFWF9SRUdfTEMxXSwgaGV4X2dwcltIRVhf
UkVHX0xDMV0sIDEpOworICAgICAgICB0Y2dfZ2VuX3N1YmlfdGwobGMxLCBoZXhfZ3ByW0hFWF9S
RUdfTEMxXSwgMSk7CiAgICAgfQogICAgIGdlbl9zZXRfbGFiZWwoZG9uZSk7CiB9CmRpZmYgLS1n
aXQgYS90YXJnZXQvaGV4YWdvbi9pZGVmLXBhcnNlci9wYXJzZXItaGVscGVycy5jIGIvdGFyZ2V0
L2hleGFnb24vaWRlZi1wYXJzZXIvcGFyc2VyLWhlbHBlcnMuYwppbmRleCA0ZTBjNjQzY2FlLi45
NzIwZWY0YWQxIDEwMDY0NAotLS0gYS90YXJnZXQvaGV4YWdvbi9pZGVmLXBhcnNlci9wYXJzZXIt
aGVscGVycy5jCisrKyBiL3RhcmdldC9oZXhhZ29uL2lkZWYtcGFyc2VyL3BhcnNlci1oZWxwZXJz
LmMKQEAgLTE2NjgsOSArMTY2OCw3IEBAIHZvaWQgZ2VuX2luc3RfaW5pdF9hcmdzKENvbnRleHQg
KmMsIFlZTFRZUEUgKmxvY3ApCiAgICAgZm9yICh1bnNpZ25lZCBpID0gMDsgaSA8IGMtPmluc3Qu
aW5pdF9saXN0LT5sZW47IGkrKykgewogICAgICAgICBIZXhWYWx1ZSAqdmFsID0gJmdfYXJyYXlf
aW5kZXgoYy0+aW5zdC5pbml0X2xpc3QsIEhleFZhbHVlLCBpKTsKICAgICAgICAgaWYgKHZhbC0+
dHlwZSA9PSBSRUdJU1RFUl9BUkcpIHsKLSAgICAgICAgICAgIGNoYXIgcmVnX2lkWzVdOwotICAg
ICAgICAgICAgcmVnX2NvbXBvc2UoYywgbG9jcCwgJnZhbC0+cmVnLCByZWdfaWQpOwotICAgICAg
ICAgICAgRU1JVF9IRUFEKGMsICJ0Y2dfZ2VuX21vdmlfaSV1KCVzLCAwKTtcbiIsIHZhbC0+Yml0
X3dpZHRoLCByZWdfaWQpOworICAgICAgICAgICAgLyogTm90aGluZyB0byBkbyBoZXJlICovCiAg
ICAgICAgIH0gZWxzZSBpZiAodmFsLT50eXBlID09IFBSRURJQ0FURSkgewogICAgICAgICAgICAg
Y2hhciBzdWZmaXggPSB2YWwtPmlzX2RvdG5ldyA/ICdOJyA6ICdWJzsKICAgICAgICAgICAgIEVN
SVRfSEVBRChjLCAidGNnX2dlbl9tb3ZpX2kldShQJWMlYywgMCk7XG4iLCB2YWwtPmJpdF93aWR0
aCwKZGlmZiAtLWdpdCBhL3RhcmdldC9oZXhhZ29uL2dlbl9oZWxwZXJfZnVuY3MucHkgYi90YXJn
ZXQvaGV4YWdvbi9nZW5faGVscGVyX2Z1bmNzLnB5CmluZGV4IDE5ZTk4ODNmNGMuLjdhMjI0YjY2
ZTYgMTAwNzU1Ci0tLSBhL3RhcmdldC9oZXhhZ29uL2dlbl9oZWxwZXJfZnVuY3MucHkKKysrIGIv
dGFyZ2V0L2hleGFnb24vZ2VuX2hlbHBlcl9mdW5jcy5weQpAQCAtMSw3ICsxLDcgQEAKICMhL3Vz
ci9iaW4vZW52IHB5dGhvbjMKIAogIyMKLSMjICBDb3B5cmlnaHQoYykgMjAxOS0yMDIyIFF1YWxj
b21tIElubm92YXRpb24gQ2VudGVyLCBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCisjIyAgQ29w
eXJpZ2h0KGMpIDIwMTktMjAyMyBRdWFsY29tbSBJbm5vdmF0aW9uIENlbnRlciwgSW5jLiBBbGwg
UmlnaHRzIFJlc2VydmVkLgogIyMKICMjICBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTsg
eW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeQogIyMgIGl0IHVuZGVyIHRoZSB0
ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5CkBA
IC0yMjYsNiArMjI2LDE0IEBAIGRlZiBnZW5faGVscGVyX2Z1bmN0aW9uKGYsIHRhZywgdGFncmVn
cywgdGFnaW1tcyk6CiAgICAgICAgICAgICAgICAgICAgIHByaW50KCJCYWQgcmVnaXN0ZXIgcGFy
c2U6ICIscmVndHlwZSxyZWdpZCx0b3NzLG51bXJlZ3MpCiAgICAgICAgICAgICAgICAgaSArPSAx
CiAKKyAgICAgICAgIyMgRm9yIGNvbmRpdGlvbmFsIGluc3RydWN0aW9ucywgd2UgcGFzcyBpbiB0
aGUgZGVzdGluYXRpb24gcmVnaXN0ZXIKKyAgICAgICAgaWYgJ0FfQ09OREVYRUMnIGluIGhleF9j
b21tb24uYXR0cmliZGljdFt0YWddOgorICAgICAgICAgICAgZm9yIHJlZ3R5cGUsIHJlZ2lkLCB0
b3NzLCBudW1yZWdzIGluIHJlZ3M6CisgICAgICAgICAgICAgICAgaWYgKGhleF9jb21tb24uaXNf
d3JpdGVvbmx5KHJlZ2lkKSBhbmQKKyAgICAgICAgICAgICAgICAgICAgbm90IGhleF9jb21tb24u
aXNfaHZ4X3JlZyhyZWd0eXBlKSk6CisgICAgICAgICAgICAgICAgICAgIGdlbl9oZWxwZXJfYXJn
X29wbihmLCByZWd0eXBlLCByZWdpZCwgaSwgdGFnKQorICAgICAgICAgICAgICAgICAgICBpICs9
IDEKKwogICAgICAgICAjIyBBcmd1bWVudHMgdG8gdGhlIGhlbHBlciBmdW5jdGlvbiBhcmUgdGhl
IHNvdXJjZSByZWdzIGFuZCBpbW1lZGlhdGVzCiAgICAgICAgIGZvciByZWd0eXBlLHJlZ2lkLHRv
c3MsbnVtcmVncyBpbiByZWdzOgogICAgICAgICAgICAgaWYgKGhleF9jb21tb24uaXNfcmVhZChy
ZWdpZCkpOgpAQCAtMjYyLDEwICsyNzAsMTEgQEAgZGVmIGdlbl9oZWxwZXJfZnVuY3Rpb24oZiwg
dGFnLCB0YWdyZWdzLCB0YWdpbW1zKToKICAgICAgICAgaWYgaGV4X2NvbW1vbi5uZWVkX2VhKHRh
Zyk6IGdlbl9kZWNsX2VhKGYpCiAgICAgICAgICMjIERlY2xhcmUgdGhlIHJldHVybiB2YXJpYWJs
ZQogICAgICAgICBpPTAKLSAgICAgICAgZm9yIHJlZ3R5cGUscmVnaWQsdG9zcyxudW1yZWdzIGlu
IHJlZ3M6Ci0gICAgICAgICAgICBpZiAoaGV4X2NvbW1vbi5pc193cml0ZW9ubHkocmVnaWQpKToK
LSAgICAgICAgICAgICAgICBnZW5faGVscGVyX2Rlc3RfZGVjbF9vcG4oZixyZWd0eXBlLHJlZ2lk
LGkpCi0gICAgICAgICAgICBpICs9IDEKKyAgICAgICAgaWYgJ0FfQ09OREVYRUMnIG5vdCBpbiBo
ZXhfY29tbW9uLmF0dHJpYmRpY3RbdGFnXToKKyAgICAgICAgICAgIGZvciByZWd0eXBlLHJlZ2lk
LHRvc3MsbnVtcmVncyBpbiByZWdzOgorICAgICAgICAgICAgICAgIGlmIChoZXhfY29tbW9uLmlz
X3dyaXRlb25seShyZWdpZCkpOgorICAgICAgICAgICAgICAgICAgICBnZW5faGVscGVyX2Rlc3Rf
ZGVjbF9vcG4oZixyZWd0eXBlLHJlZ2lkLGkpCisgICAgICAgICAgICAgICAgaSArPSAxCiAKICAg
ICAgICAgZm9yIHJlZ3R5cGUscmVnaWQsdG9zcyxudW1yZWdzIGluIHJlZ3M6CiAgICAgICAgICAg
ICBpZiAoaGV4X2NvbW1vbi5pc19yZWFkKHJlZ2lkKSk6CmRpZmYgLS1naXQgYS90YXJnZXQvaGV4
YWdvbi9nZW5faGVscGVyX3Byb3Rvcy5weSBiL3RhcmdldC9oZXhhZ29uL2dlbl9oZWxwZXJfcHJv
dG9zLnB5CmluZGV4IDY3NGJmMzcwZmEuLmRkZGRjOWU0ZjAgMTAwNzU1Ci0tLSBhL3RhcmdldC9o
ZXhhZ29uL2dlbl9oZWxwZXJfcHJvdG9zLnB5CisrKyBiL3RhcmdldC9oZXhhZ29uL2dlbl9oZWxw
ZXJfcHJvdG9zLnB5CkBAIC0xLDcgKzEsNyBAQAogIyEvdXNyL2Jpbi9lbnYgcHl0aG9uMwogCiAj
IwotIyMgIENvcHlyaWdodChjKSAyMDE5LTIwMjIgUXVhbGNvbW0gSW5ub3ZhdGlvbiBDZW50ZXIs
IEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KKyMjICBDb3B5cmlnaHQoYykgMjAxOS0yMDIzIFF1
YWxjb21tIElubm92YXRpb24gQ2VudGVyLCBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAjIwog
IyMgIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOyB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBp
dCBhbmQvb3IgbW9kaWZ5CiAjIyAgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJh
bCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnkKQEAgLTg3LDYgKzg3LDcgQEAgZGVmIGdl
bl9oZWxwZXJfcHJvdG90eXBlKGYsIHRhZywgdGFncmVncywgdGFnaW1tcyk6CiAgICAgICAgICAg
ICBpZiBoZXhfY29tbW9uLm5lZWRfc2xvdCh0YWcpOiBkZWZfaGVscGVyX3NpemUgKz0gMQogICAg
ICAgICAgICAgaWYgaGV4X2NvbW1vbi5uZWVkX1BDKHRhZyk6IGRlZl9oZWxwZXJfc2l6ZSArPSAx
CiAgICAgICAgICAgICBpZiBoZXhfY29tbW9uLmhlbHBlcl9uZWVkc19uZXh0X1BDKHRhZyk6IGRl
Zl9oZWxwZXJfc2l6ZSArPSAxCisgICAgICAgICAgICBpZiBoZXhfY29tbW9uLm5lZWRfY29uZGV4
ZWNfcmVnKHRhZywgcmVncyk6IGRlZl9oZWxwZXJfc2l6ZSArPSAxCiAgICAgICAgICAgICBmLndy
aXRlKCdERUZfSEVMUEVSXyVzKCVzJyAlIChkZWZfaGVscGVyX3NpemUsIHRhZykpCiAgICAgICAg
ICAgICAjIyBUaGUgcmV0dXJuIHR5cGUgaXMgdm9pZAogICAgICAgICAgICAgZi53cml0ZSgnLCB2
b2lkJyApCkBAIC05Niw2ICs5Nyw3IEBAIGRlZiBnZW5faGVscGVyX3Byb3RvdHlwZShmLCB0YWcs
IHRhZ3JlZ3MsIHRhZ2ltbXMpOgogICAgICAgICAgICAgaWYgaGV4X2NvbW1vbi5uZWVkX3BhcnQx
KHRhZyk6IGRlZl9oZWxwZXJfc2l6ZSArPSAxCiAgICAgICAgICAgICBpZiBoZXhfY29tbW9uLm5l
ZWRfc2xvdCh0YWcpOiBkZWZfaGVscGVyX3NpemUgKz0gMQogICAgICAgICAgICAgaWYgaGV4X2Nv
bW1vbi5uZWVkX1BDKHRhZyk6IGRlZl9oZWxwZXJfc2l6ZSArPSAxCisgICAgICAgICAgICBpZiBo
ZXhfY29tbW9uLm5lZWRfY29uZGV4ZWNfcmVnKHRhZywgcmVncyk6IGRlZl9oZWxwZXJfc2l6ZSAr
PSAxCiAgICAgICAgICAgICBpZiBoZXhfY29tbW9uLmhlbHBlcl9uZWVkc19uZXh0X1BDKHRhZyk6
IGRlZl9oZWxwZXJfc2l6ZSArPSAxCiAgICAgICAgICAgICBmLndyaXRlKCdERUZfSEVMUEVSXyVz
KCVzJyAlIChkZWZfaGVscGVyX3NpemUsIHRhZykpCiAKQEAgLTEyMSw2ICsxMjMsMTQgQEAgZGVm
IGdlbl9oZWxwZXJfcHJvdG90eXBlKGYsIHRhZywgdGFncmVncywgdGFnaW1tcyk6CiAgICAgICAg
ICAgICAgICAgICAgIGdlbl9kZWZfaGVscGVyX29wbihmLCB0YWcsIHJlZ3R5cGUsIHJlZ2lkLCB0
b3NzLCBudW1yZWdzLCBpKQogICAgICAgICAgICAgICAgICAgICBpICs9IDEKIAorICAgICAgICAj
IyBGb3IgY29uZGl0aW9uYWwgaW5zdHJ1Y3Rpb25zLCB3ZSBwYXNzIGluIHRoZSBkZXN0aW5hdGlv
biByZWdpc3RlcgorICAgICAgICBpZiAnQV9DT05ERVhFQycgaW4gaGV4X2NvbW1vbi5hdHRyaWJk
aWN0W3RhZ106CisgICAgICAgICAgICBmb3IgcmVndHlwZSwgcmVnaWQsIHRvc3MsIG51bXJlZ3Mg
aW4gcmVnczoKKyAgICAgICAgICAgICAgICBpZiAoaGV4X2NvbW1vbi5pc193cml0ZW9ubHkocmVn
aWQpIGFuZAorICAgICAgICAgICAgICAgICAgICBub3QgaGV4X2NvbW1vbi5pc19odnhfcmVnKHJl
Z3R5cGUpKToKKyAgICAgICAgICAgICAgICAgICAgZ2VuX2RlZl9oZWxwZXJfb3BuKGYsIHRhZywg
cmVndHlwZSwgcmVnaWQsIHRvc3MsIG51bXJlZ3MsIGkpCisgICAgICAgICAgICAgICAgICAgIGkg
Kz0gMQorCiAgICAgICAgICMjIEdlbmVyYXRlIHRoZSBxZW11IHR5cGUgZm9yIGVhY2ggaW5wdXQg
b3BlcmFuZCAocmVncyBhbmQgaW1tZWRpYXRlcykKICAgICAgICAgZm9yIHJlZ3R5cGUscmVnaWQs
dG9zcyxudW1yZWdzIGluIHJlZ3M6CiAgICAgICAgICAgICBpZiAoaGV4X2NvbW1vbi5pc19yZWFk
KHJlZ2lkKSk6CmRpZmYgLS1naXQgYS90YXJnZXQvaGV4YWdvbi9nZW5fdGNnX2Z1bmNzLnB5IGIv
dGFyZ2V0L2hleGFnb24vZ2VuX3RjZ19mdW5jcy5weQppbmRleCAyMmJjYjU2OTE3Li45MzM2NTI4
ZTUwIDEwMDc1NQotLS0gYS90YXJnZXQvaGV4YWdvbi9nZW5fdGNnX2Z1bmNzLnB5CisrKyBiL3Rh
cmdldC9oZXhhZ29uL2dlbl90Y2dfZnVuY3MucHkKQEAgLTMwLDIzICszMCwzMyBAQCBkZWYgZ2Vu
X2RlY2xfZWFfdGNnKGYsIHRhZyk6CiAKIGRlZiBnZW5wdHJfZGVjbF9wYWlyX3dyaXRhYmxlKGYs
IHRhZywgcmVndHlwZSwgcmVnaWQsIHJlZ25vKToKICAgICByZWdOPSIlcyVzTiIgJSAocmVndHlw
ZSxyZWdpZCkKLSAgICBmLndyaXRlKCIgICAgVENHdl9pNjQgJXMlc1YgPSB0Y2dfdGVtcF9uZXdf
aTY0KCk7XG4iICUgXAotICAgICAgICAocmVndHlwZSwgcmVnaWQpKQotICAgIGlmIChyZWd0eXBl
ID09ICJDIik6CisgICAgaWYgKHJlZ3R5cGUgPT0gIlIiKToKKyAgICAgICAgZi53cml0ZSgiICAg
IGNvbnN0IGludCAlcyA9IGluc24tPnJlZ25vWyVkXTtcbiIgJSAocmVnTiwgcmVnbm8pKQorICAg
IGVsaWYgKHJlZ3R5cGUgPT0gIkMiKToKICAgICAgICAgZi53cml0ZSgiICAgIGNvbnN0IGludCAl
cyA9IGluc24tPnJlZ25vWyVkXSArIEhFWF9SRUdfU0EwO1xuIiAlIFwKICAgICAgICAgICAgIChy
ZWdOLCByZWdubykpCiAgICAgZWxzZToKLSAgICAgICAgZi53cml0ZSgiICAgIGNvbnN0IGludCAl
cyA9IGluc24tPnJlZ25vWyVkXTtcbiIgJSAocmVnTiwgcmVnbm8pKQorICAgICAgICBwcmludCgi
QmFkIHJlZ2lzdGVyIHBhcnNlOiAiLCByZWd0eXBlLCByZWdpZCkKKyAgICBmLndyaXRlKCIgICAg
VENHdl9pNjQgJXMlc1YgPSBnZXRfcmVzdWx0X2dwcl9wYWlyKGN0eCwgJXMpO1xuIiAlIFwKKyAg
ICAgICAgKHJlZ3R5cGUsIHJlZ2lkLCByZWdOKSkKIAogZGVmIGdlbnB0cl9kZWNsX3dyaXRhYmxl
KGYsIHRhZywgcmVndHlwZSwgcmVnaWQsIHJlZ25vKToKICAgICByZWdOPSIlcyVzTiIgJSAocmVn
dHlwZSxyZWdpZCkKLSAgICBmLndyaXRlKCIgICAgVENHdiAlcyVzViA9IHRjZ190ZW1wX25ldygp
O1xuIiAlIFwKLSAgICAgICAgKHJlZ3R5cGUsIHJlZ2lkKSkKLSAgICBpZiAocmVndHlwZSA9PSAi
QyIpOgorICAgIGlmIChyZWd0eXBlID09ICJSIik6CisgICAgICAgIGYud3JpdGUoIiAgICBjb25z
dCBpbnQgJXMgPSBpbnNuLT5yZWdub1slZF07XG4iICUgKHJlZ04sIHJlZ25vKSkKKyAgICAgICAg
Zi53cml0ZSgiICAgIFRDR3YgJXMlc1YgPSBnZXRfcmVzdWx0X2dwcihjdHgsICVzKTtcbiIgJSBc
CisgICAgICAgICAgICAocmVndHlwZSwgcmVnaWQsIHJlZ04pKQorICAgIGVsaWYgKHJlZ3R5cGUg
PT0gIkMiKToKICAgICAgICAgZi53cml0ZSgiICAgIGNvbnN0IGludCAlcyA9IGluc24tPnJlZ25v
WyVkXSArIEhFWF9SRUdfU0EwO1xuIiAlIFwKICAgICAgICAgICAgIChyZWdOLCByZWdubykpCi0g
ICAgZWxzZToKKyAgICAgICAgZi53cml0ZSgiICAgIFRDR3YgJXMlc1YgPSBnZXRfcmVzdWx0X2dw
cihjdHgsICVzKTtcbiIgJSBcCisgICAgICAgICAgICAocmVndHlwZSwgcmVnaWQsIHJlZ04pKQor
ICAgIGVsaWYgKHJlZ3R5cGUgPT0gIlAiKToKICAgICAgICAgZi53cml0ZSgiICAgIGNvbnN0IGlu
dCAlcyA9IGluc24tPnJlZ25vWyVkXTtcbiIgJSAocmVnTiwgcmVnbm8pKQorICAgICAgICBmLndy
aXRlKCIgICAgVENHdiAlcyVzViA9IHRjZ190ZW1wX25ldygpO1xuIiAlIFwKKyAgICAgICAgICAg
IChyZWd0eXBlLCByZWdpZCkpCisgICAgZWxzZToKKyAgICAgICAgcHJpbnQoIkJhZCByZWdpc3Rl
ciBwYXJzZTogIiwgcmVndHlwZSwgcmVnaWQpCiAKIGRlZiBnZW5wdHJfZGVjbChmLCB0YWcsIHJl
Z3R5cGUsIHJlZ2lkLCByZWdubyk6CiAgICAgcmVnTj0iJXMlc04iICUgKHJlZ3R5cGUscmVnaWQp
CkBAIC0yNDksOCArMjU5LDEyIEBAIGRlZiBnZW5wdHJfc3JjX3JlYWQoZiwgdGFnLCByZWd0eXBl
LCByZWdpZCk6CiAgICAgICAgICAgICBmLndyaXRlKCIgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBoZXhfZ3ByWyVzJXNOICsgMV0pO1xuIiAlIFwKICAgICAgICAgICAgICAgICAocmVn
dHlwZSwgcmVnaWQpKQogICAgICAgICBlbGlmIChyZWdpZCBpbiB7IngiLCAieSJ9KToKLSAgICAg
ICAgICAgIGYud3JpdGUoIiAgICB0Y2dfZ2VuX21vdl90bCglcyVzViwgaGV4X2dwclslcyVzTl0p
O1xuIiAlIFwKLSAgICAgICAgICAgICAgICAocmVndHlwZSxyZWdpZCxyZWd0eXBlLHJlZ2lkKSkK
KyAgICAgICAgICAgICMjIEZvciByZWFkL3dyaXRlIHJlZ2lzdGVycywgd2UgbmVlZCB0byBnZXQg
dGhlIG9yaWdpbmFsIHZhbHVlIGludG8KKyAgICAgICAgICAgICMjIHRoZSByZXN1bHQgVENHdi4g
IEZvciBjb25kaXRpb25hbCBpbnN0cnVjdGlvbnMsIHRoaXMgaXMgZG9uZSBpbgorICAgICAgICAg
ICAgIyMgZ2VuX3N0YXJ0X3BhY2tldC4gIEZvciB1bmNvbmRpdGlvbmFsIGluc3RydWN0aW9ucywg
d2UgZG8gaXQgaGVyZS4KKyAgICAgICAgICAgIGlmICgnQV9DT05ERVhFQycgbm90IGluIGhleF9j
b21tb24uYXR0cmliZGljdFt0YWddKToKKyAgICAgICAgICAgICAgICBmLndyaXRlKCIgICAgdGNn
X2dlbl9tb3ZfdGwoJXMlc1YsIGhleF9ncHJbJXMlc05dKTtcbiIgJSBcCisgICAgICAgICAgICAg
ICAgICAgIChyZWd0eXBlLCByZWdpZCwgcmVndHlwZSwgcmVnaWQpKQogICAgICAgICBlbGlmIChy
ZWdpZCBub3QgaW4geyJzIiwgInQiLCAidSIsICJ2In0pOgogICAgICAgICAgICAgcHJpbnQoIkJh
ZCByZWdpc3RlciBwYXJzZTogIiwgcmVndHlwZSwgcmVnaWQpCiAgICAgZWxpZiAocmVndHlwZSA9
PSAiUCIpOgpAQCAtMzYwLDI1ICszNzQsMTYgQEAgZGVmIGdlbl9oZWxwZXJfY2FsbF9pbW0oZixp
bW1sZXR0KToKICAgICBmLndyaXRlKCIsIHRjZ3ZfJXMiICUgaGV4X2NvbW1vbi5pbW1fbmFtZShp
bW1sZXR0KSkKIAogZGVmIGdlbnB0cl9kc3Rfd3JpdGVfcGFpcihmLCB0YWcsIHJlZ3R5cGUsIHJl
Z2lkKToKLSAgICBpZiAoJ0FfQ09OREVYRUMnIGluIGhleF9jb21tb24uYXR0cmliZGljdFt0YWdd
KToKLSAgICAgICAgZi53cml0ZSgiICAgIGdlbl9sb2dfcHJlZGljYXRlZF9yZWdfd3JpdGVfcGFp
ciglcyVzTiwgJXMlc1YsIGluc24tPnNsb3QpO1xuIiAlIFwKLSAgICAgICAgICAgIChyZWd0eXBl
LCByZWdpZCwgcmVndHlwZSwgcmVnaWQpKQotICAgIGVsc2U6Ci0gICAgICAgIGYud3JpdGUoIiAg
ICBnZW5fbG9nX3JlZ193cml0ZV9wYWlyKCVzJXNOLCAlcyVzVik7XG4iICUgXAotICAgICAgICAg
ICAgKHJlZ3R5cGUsIHJlZ2lkLCByZWd0eXBlLCByZWdpZCkpCisgICAgZi53cml0ZSgiICAgIGdl
bl9sb2dfcmVnX3dyaXRlX3BhaXIoJXMlc04sICVzJXNWKTtcbiIgJSBcCisgICAgICAgIChyZWd0
eXBlLCByZWdpZCwgcmVndHlwZSwgcmVnaWQpKQogCiBkZWYgZ2VucHRyX2RzdF93cml0ZShmLCB0
YWcsIHJlZ3R5cGUsIHJlZ2lkKToKICAgICBpZiAocmVndHlwZSA9PSAiUiIpOgogICAgICAgICBp
ZiAocmVnaWQgaW4geyJkZCIsICJ4eCIsICJ5eSJ9KToKICAgICAgICAgICAgIGdlbnB0cl9kc3Rf
d3JpdGVfcGFpcihmLCB0YWcsIHJlZ3R5cGUsIHJlZ2lkKQogICAgICAgICBlbGlmIChyZWdpZCBp
biB7ImQiLCAiZSIsICJ4IiwgInkifSk6Ci0gICAgICAgICAgICBpZiAoJ0FfQ09OREVYRUMnIGlu
IGhleF9jb21tb24uYXR0cmliZGljdFt0YWddKToKLSAgICAgICAgICAgICAgICBmLndyaXRlKCIg
ICAgZ2VuX2xvZ19wcmVkaWNhdGVkX3JlZ193cml0ZSglcyVzTiwgJXMlc1YsXG4iICUgXAotICAg
ICAgICAgICAgICAgICAgICAocmVndHlwZSwgcmVnaWQsIHJlZ3R5cGUsIHJlZ2lkKSkKLSAgICAg
ICAgICAgICAgICBmLndyaXRlKCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnNu
LT5zbG90KTtcbiIpCi0gICAgICAgICAgICBlbHNlOgotICAgICAgICAgICAgICAgIGYud3JpdGUo
IiAgICBnZW5fbG9nX3JlZ193cml0ZSglcyVzTiwgJXMlc1YpO1xuIiAlIFwKLSAgICAgICAgICAg
ICAgICAgICAgKHJlZ3R5cGUsIHJlZ2lkLCByZWd0eXBlLCByZWdpZCkpCisgICAgICAgICAgICBm
LndyaXRlKCIgICAgZ2VuX2xvZ19yZWdfd3JpdGUoJXMlc04sICVzJXNWKTtcbiIgJSBcCisgICAg
ICAgICAgICAgICAgKHJlZ3R5cGUsIHJlZ2lkLCByZWd0eXBlLCByZWdpZCkpCiAgICAgICAgIGVs
c2U6CiAgICAgICAgICAgICBwcmludCgiQmFkIHJlZ2lzdGVyIHBhcnNlOiAiLCByZWd0eXBlLCBy
ZWdpZCkKICAgICBlbGlmIChyZWd0eXBlID09ICJQIik6CkBAIC00NjIsMTQgKzQ2NywxNSBAQCBk
ZWYgZ2VucHRyX2RzdF93cml0ZV9vcG4oZixyZWd0eXBlLCByZWdpZCwgdGFnKToKICMjICAgICBG
b3IgQTJfYWRkOiBSZDMyPWFkZChSczMyLFJ0MzIpLCB7IFJkVj1Sc1YrUnRWO30KICMjICAgICBX
ZSBwcm9kdWNlOgogIyMgICAgc3RhdGljIHZvaWQgZ2VuZXJhdGVfQTJfYWRkKERpc2FzQ29udGV4
dCAqY3R4KQotIyMgICAgICAgewotIyMgICAgICAgICAgIFRDR3YgUmRWID0gdGNnX3RlbXBfbmV3
KCk7Ci0jIyAgICAgICAgICAgY29uc3QgaW50IFJkTiA9IGluc24tPnJlZ25vWzBdOwotIyMgICAg
ICAgICAgIFRDR3YgUnNWID0gaGV4X2dwcltpbnNuLT5yZWdub1sxXV07Ci0jIyAgICAgICAgICAg
VENHdiBSdFYgPSBoZXhfZ3ByW2luc24tPnJlZ25vWzJdXTsKLSMjICAgICAgICAgICA8R0VOPgot
IyMgICAgICAgICAgIGdlbl9sb2dfcmVnX3dyaXRlKFJkTiwgUmRWKTsKLSMjICAgICAgIH0KKyMj
ICAgIHsKKyMjICAgICAgICBJbnNuICppbnNuIF9fYXR0cmlidXRlX18oKHVudXNlZCkpID0gY3R4
LT5pbnNuOworIyMgICAgICAgIGNvbnN0IGludCBSZE4gPSBpbnNuLT5yZWdub1swXTsKKyMjICAg
ICAgICBUQ0d2IFJkViA9IGdldF9yZXN1bHRfZ3ByKGN0eCwgUmROKTsKKyMjICAgICAgICBUQ0d2
IFJzViA9IGhleF9ncHJbaW5zbi0+cmVnbm9bMV1dOworIyMgICAgICAgIFRDR3YgUnRWID0gaGV4
X2dwcltpbnNuLT5yZWdub1syXV07CisjIyAgICAgICAgPEdFTj4KKyMjICAgICAgICBnZW5fbG9n
X3JlZ193cml0ZShSZE4sIFJkVik7CisjIyAgICB9CiAjIwogIyMgICAgICAgd2hlcmUgPEdFTj4g
ZGVwZW5kcyBvbiBoZXhfY29tbW9uLnNraXBfcWVtdV9oZWxwZXIodGFnKQogIyMgICAgICAgaWYg
aGV4X2NvbW1vbi5za2lwX3FlbXVfaGVscGVyKHRhZykgaXMgVHJ1ZQpAQCAtNTUzLDYgKzU1OSwx
NCBAQCBkZWYgZ2VuX3RjZ19mdW5jKGYsIHRhZywgcmVncywgaW1tcyk6CiAgICAgICAgIGlmIChp
ID4gMCk6IGYud3JpdGUoIiwgIikKICAgICAgICAgZi53cml0ZSgiY3B1X2VudiIpCiAgICAgICAg
IGk9MQorICAgICAgICAjIyBGb3IgY29uZGl0aW9uYWwgaW5zdHJ1Y3Rpb25zLCB3ZSBwYXNzIGlu
IHRoZSBkZXN0aW5hdGlvbiByZWdpc3RlcgorICAgICAgICBpZiAnQV9DT05ERVhFQycgaW4gaGV4
X2NvbW1vbi5hdHRyaWJkaWN0W3RhZ106CisgICAgICAgICAgICBmb3IgcmVndHlwZSwgcmVnaWQs
IHRvc3MsIG51bXJlZ3MgaW4gcmVnczoKKyAgICAgICAgICAgICAgICBpZiAoaGV4X2NvbW1vbi5p
c193cml0ZW9ubHkocmVnaWQpIGFuZAorICAgICAgICAgICAgICAgICAgICBub3QgaGV4X2NvbW1v
bi5pc19odnhfcmVnKHJlZ3R5cGUpKToKKyAgICAgICAgICAgICAgICAgICAgZ2VuX2hlbHBlcl9j
YWxsX29wbihmLCB0YWcsIHJlZ3R5cGUsIHJlZ2lkLCB0b3NzLCBcCisgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgbnVtcmVncywgaSkKKyAgICAgICAgICAgICAgICAgICAg
aSArPSAxCiAgICAgICAgIGZvciByZWd0eXBlLHJlZ2lkLHRvc3MsbnVtcmVncyBpbiByZWdzOgog
ICAgICAgICAgICAgaWYgKGhleF9jb21tb24uaXNfd3JpdHRlbihyZWdpZCkpOgogICAgICAgICAg
ICAgICAgIGlmIChub3QgaGV4X2NvbW1vbi5pc19odnhfcmVnKHJlZ3R5cGUpKToKZGlmZiAtLWdp
dCBhL3RhcmdldC9oZXhhZ29uL2hleF9jb21tb24ucHkgYi90YXJnZXQvaGV4YWdvbi9oZXhfY29t
bW9uLnB5CmluZGV4IDc2ZGEzNjJjMTEuLjAyMDBhNjZjYjYgMTAwNzU1Ci0tLSBhL3RhcmdldC9o
ZXhhZ29uL2hleF9jb21tb24ucHkKKysrIGIvdGFyZ2V0L2hleGFnb24vaGV4X2NvbW1vbi5weQpA
QCAtMSw3ICsxLDcgQEAKICMhL3Vzci9iaW4vZW52IHB5dGhvbjMKIAogIyMKLSMjICBDb3B5cmln
aHQoYykgMjAxOS0yMDIyIFF1YWxjb21tIElubm92YXRpb24gQ2VudGVyLCBJbmMuIEFsbCBSaWdo
dHMgUmVzZXJ2ZWQuCisjIyAgQ29weXJpZ2h0KGMpIDIwMTktMjAyMyBRdWFsY29tbSBJbm5vdmF0
aW9uIENlbnRlciwgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogIyMKICMjICBUaGlzIHByb2dy
YW0gaXMgZnJlZSBzb2Z0d2FyZTsgeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlm
eQogIyMgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vu
c2UgYXMgcHVibGlzaGVkIGJ5CkBAIC0yMzcsNiArMjM3LDEzIEBAIGRlZiBoZWxwZXJfbmVlZHNf
bmV4dF9QQyh0YWcpOgogZGVmIG5lZWRfcGt0X2hhc19tdWx0aV9jb2YodGFnKToKICAgICByZXR1
cm4gJ0FfQ09GJyBpbiBhdHRyaWJkaWN0W3RhZ10KIAorZGVmIG5lZWRfY29uZGV4ZWNfcmVnKHRh
ZywgcmVncyk6CisgICAgaWYgJ0FfQ09OREVYRUMnIGluIGF0dHJpYmRpY3RbdGFnXToKKyAgICAg
ICAgZm9yIHJlZ3R5cGUsIHJlZ2lkLCB0b3NzLCBudW1yZWdzIGluIHJlZ3M6CisgICAgICAgICAg
ICBpZiBpc193cml0ZW9ubHkocmVnaWQpIGFuZCBub3QgaXNfaHZ4X3JlZyhyZWd0eXBlKToKKyAg
ICAgICAgICAgICAgICByZXR1cm4gVHJ1ZQorICAgIHJldHVybiBGYWxzZQorCiBkZWYgc2tpcF9x
ZW11X2hlbHBlcih0YWcpOgogICAgIHJldHVybiB0YWcgaW4gb3ZlcnJpZGVzLmtleXMoKQogCi0t
IAoyLjI1LjEKCg==

