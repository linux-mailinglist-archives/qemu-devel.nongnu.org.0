Return-Path: <qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org>
X-Original-To: lists+qemu-devel@lfdr.de
Delivered-To: lists+qemu-devel@lfdr.de
Received: from lists.gnu.org (lists.gnu.org [209.51.188.17])
	by mail.lfdr.de (Postfix) with ESMTPS id 3263D3F8D6F
	for <lists+qemu-devel@lfdr.de>; Thu, 26 Aug 2021 19:59:59 +0200 (CEST)
Received: from localhost ([::1]:55536 helo=lists1p.gnu.org)
	by lists.gnu.org with esmtp (Exim 4.90_1)
	(envelope-from <qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org>)
	id 1mJJfI-0002w2-7j
	for lists+qemu-devel@lfdr.de; Thu, 26 Aug 2021 13:59:48 -0400
Received: from eggs.gnu.org ([2001:470:142:3::10]:52134)
 by lists.gnu.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256)
 (Exim 4.90_1) (envelope-from <tsimpson@qualcomm.com>)
 id 1mJJIf-0004BD-VL
 for qemu-devel@nongnu.org; Thu, 26 Aug 2021 13:36:25 -0400
Received: from alexa-out-sd-02.qualcomm.com ([199.106.114.39]:2985)
 by eggs.gnu.org with esmtps (TLS1.2:RSA_AES_256_CBC_SHA1:256)
 (Exim 4.90_1) (envelope-from <tsimpson@qualcomm.com>)
 id 1mJJId-0005B0-J0
 for qemu-devel@nongnu.org; Thu, 26 Aug 2021 13:36:25 -0400
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=quicinc.com; i=@quicinc.com; q=dns/txt; s=qcdkim;
 t=1629999383; x=1661535383;
 h=from:to:cc:subject:date:message-id:in-reply-to:
 references:mime-version:content-transfer-encoding;
 bh=jCfkPGUwUk3jUONrlXGM2nGLKKjsRXF+roKQfVgoUAI=;
 b=zcrG7deljJ1lyW8u6XpXNlrdyQyomHulnETXDFAN5INZn+ISxFngFhFs
 gB2EEaIW0bnc34kHmTZ9zTwaifRlAM3eWO+sCUA7MmDuemVOfRevqfX2J
 1vE+1gQNQZzocY5X1WsK/oVfPa8w23KagGiPwR2x0nNrfW7S29Zgr5He+ k=;
Received: from unknown (HELO ironmsg01-sd.qualcomm.com) ([10.53.140.141])
 by alexa-out-sd-02.qualcomm.com with ESMTP; 26 Aug 2021 10:36:15 -0700
X-QCInternal: smtphost
Received: from vu-tsimpson-aus.qualcomm.com (HELO
 vu-tsimpson1-aus.qualcomm.com) ([10.222.150.1])
 by ironmsg01-sd.qualcomm.com with ESMTP; 26 Aug 2021 10:36:14 -0700
Received: by vu-tsimpson1-aus.qualcomm.com (Postfix, from userid 47164)
 id 743B71416; Thu, 26 Aug 2021 12:36:13 -0500 (CDT)
From: Taylor Simpson <tsimpson@quicinc.com>
To: qemu-devel@nongnu.org
Subject: [PATCH v2 11/30] Hexagon HVX (target/hexagon) helper functions
Date: Thu, 26 Aug 2021 12:35:39 -0500
Message-Id: <1629999358-25304-12-git-send-email-tsimpson@quicinc.com>
X-Mailer: git-send-email 2.7.4
In-Reply-To: <1629999358-25304-1-git-send-email-tsimpson@quicinc.com>
References: <1629999358-25304-1-git-send-email-tsimpson@quicinc.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Received-SPF: pass client-ip=199.106.114.39;
 envelope-from=tsimpson@qualcomm.com; helo=alexa-out-sd-02.qualcomm.com
X-Spam_score_int: -40
X-Spam_score: -4.1
X-Spam_bar: ----
X-Spam_report: (-4.1 / 5.0 requ) BAYES_00=-1.9, DKIM_SIGNED=0.1,
 DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1, HEADER_FROM_DIFFERENT_DOMAINS=0.249,
 RCVD_IN_DNSWL_MED=-2.3, SPF_HELO_NONE=0.001,
 SPF_PASS=-0.001 autolearn=ham autolearn_force=no
X-Spam_action: no action
X-BeenThere: qemu-devel@nongnu.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: <qemu-devel.nongnu.org>
List-Unsubscribe: <https://lists.nongnu.org/mailman/options/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=unsubscribe>
List-Archive: <https://lists.nongnu.org/archive/html/qemu-devel>
List-Post: <mailto:qemu-devel@nongnu.org>
List-Help: <mailto:qemu-devel-request@nongnu.org?subject=help>
List-Subscribe: <https://lists.nongnu.org/mailman/listinfo/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=subscribe>
Cc: ale@rev.ng, bcain@quicinc.com, tsimpson@quicinc.com,
 richard.henderson@linaro.org, f4bug@amsat.org
Errors-To: qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org
Sender: "Qemu-devel" <qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org>

Q29tbWl0IHZlY3RvciBzdG9yZXMgKG1hc2tlZCBhbmQgc2NhdHRlci9nYXRoZXIpCkxvZyB2ZWN0
b3IgcmVnaXN0ZXIgd3JpdGVzCkFkZCB0aGUgZXhlY3V0aW9uIGNvdW50ZXJzIHRvIHRoZSBkZWJ1
ZyBsb2cKSGlzdG9ncmFtIGluc3RydWN0aW9ucwoKU2lnbmVkLW9mZi1ieTogVGF5bG9yIFNpbXBz
b24gPHRzaW1wc29uQHF1aWNpbmMuY29tPgotLS0KIHRhcmdldC9oZXhhZ29uL2hlbHBlci5oICAg
IHwgIDEzICsrKwogdGFyZ2V0L2hleGFnb24vb3BfaGVscGVyLmMgfCAyMzUgKysrKysrKysrKysr
KysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKystCiAyIGZpbGVzIGNoYW5nZWQsIDI0NiBp
bnNlcnRpb25zKCspLCAyIGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL3RhcmdldC9oZXhhZ29u
L2hlbHBlci5oIGIvdGFyZ2V0L2hleGFnb24vaGVscGVyLmgKaW5kZXggY2EyMDFmYi4uYzk5YzFj
MSAxMDA2NDQKLS0tIGEvdGFyZ2V0L2hleGFnb24vaGVscGVyLmgKKysrIGIvdGFyZ2V0L2hleGFn
b24vaGVscGVyLmgKQEAgLTIzLDYgKzIzLDcgQEAgREVGX0hFTFBFUl8xKGRlYnVnX3N0YXJ0X3Bh
Y2tldCwgdm9pZCwgZW52KQogREVGX0hFTFBFUl9GTEFHU18zKGRlYnVnX2NoZWNrX3N0b3JlX3dp
ZHRoLCBUQ0dfQ0FMTF9OT19XRywgdm9pZCwgZW52LCBpbnQsIGludCkKIERFRl9IRUxQRVJfRkxB
R1NfMyhkZWJ1Z19jb21taXRfZW5kLCBUQ0dfQ0FMTF9OT19XRywgdm9pZCwgZW52LCBpbnQsIGlu
dCkKIERFRl9IRUxQRVJfMihjb21taXRfc3RvcmUsIHZvaWQsIGVudiwgaW50KQorREVGX0hFTFBF
Ul8xKGNvbW1pdF9odnhfc3RvcmVzLCB2b2lkLCBlbnYpCiBERUZfSEVMUEVSX0ZMQUdTXzQoZmNp
cmNhZGQsIFRDR19DQUxMX05PX1JXR19TRSwgczMyLCBzMzIsIHMzMiwgczMyLCBzMzIpCiBERUZf
SEVMUEVSX0ZMQUdTXzEoZmJyZXYsIFRDR19DQUxMX05PX1JXR19TRSwgaTMyLCBpMzIpCiBERUZf
SEVMUEVSXzMoc2ZyZWNpcGEsIGk2NCwgZW52LCBmMzIsIGYzMikKQEAgLTg5LDMgKzkwLDE1IEBA
IERFRl9IRUxQRVJfNChzZmZtc19saWIsIGYzMiwgZW52LCBmMzIsIGYzMiwgZjMyKQogCiBERUZf
SEVMUEVSXzMoZGZtcHlmaXgsIGY2NCwgZW52LCBmNjQsIGY2NCkKIERFRl9IRUxQRVJfNChkZm1w
eWhoLCBmNjQsIGVudiwgZjY0LCBmNjQsIGY2NCkKKworLyogSGlzdG9ncmFtIGluc3RydWN0aW9u
cyAqLworREVGX0hFTFBFUl8xKHZoaXN0LCB2b2lkLCBlbnYpCitERUZfSEVMUEVSXzEodmhpc3Rx
LCB2b2lkLCBlbnYpCitERUZfSEVMUEVSXzEodndoaXN0MjU2LCB2b2lkLCBlbnYpCitERUZfSEVM
UEVSXzEodndoaXN0MjU2cSwgdm9pZCwgZW52KQorREVGX0hFTFBFUl8xKHZ3aGlzdDI1Nl9zYXQs
IHZvaWQsIGVudikKK0RFRl9IRUxQRVJfMSh2d2hpc3QyNTZxX3NhdCwgdm9pZCwgZW52KQorREVG
X0hFTFBFUl8xKHZ3aGlzdDEyOCwgdm9pZCwgZW52KQorREVGX0hFTFBFUl8xKHZ3aGlzdDEyOHEs
IHZvaWQsIGVudikKK0RFRl9IRUxQRVJfMih2d2hpc3QxMjhtLCB2b2lkLCBlbnYsIHMzMikKK0RF
Rl9IRUxQRVJfMih2d2hpc3QxMjhxbSwgdm9pZCwgZW52LCBzMzIpCmRpZmYgLS1naXQgYS90YXJn
ZXQvaGV4YWdvbi9vcF9oZWxwZXIuYyBiL3RhcmdldC9oZXhhZ29uL29wX2hlbHBlci5jCmluZGV4
IDYxZDVjZGUuLjMyMTk3NjUgMTAwNjQ0Ci0tLSBhL3RhcmdldC9oZXhhZ29uL29wX2hlbHBlci5j
CisrKyBiL3RhcmdldC9oZXhhZ29uL29wX2hlbHBlci5jCkBAIC0yNyw2ICsyNyw4IEBACiAjaW5j
bHVkZSAiYXJjaC5oIgogI2luY2x1ZGUgImhleF9hcmNoX3R5cGVzLmgiCiAjaW5jbHVkZSAiZm1h
X2VtdS5oIgorI2luY2x1ZGUgIm1tdmVjL21tdmVjLmgiCisjaW5jbHVkZSAibW12ZWMvbWFjcm9z
LmgiCiAKICNkZWZpbmUgU0ZfQklBUyAgICAgICAgMTI3CiAjZGVmaW5lIFNGX01BTlRCSVRTICAg
IDIzCkBAIC0xNjQsNiArMTY2LDUyIEBAIHZvaWQgSEVMUEVSKGNvbW1pdF9zdG9yZSkoQ1BVSGV4
YWdvblN0YXRlICplbnYsIGludCBzbG90X251bSkKICAgICB9CiB9CiAKK3ZvaWQgSEVMUEVSKGNv
bW1pdF9odnhfc3RvcmVzKShDUFVIZXhhZ29uU3RhdGUgKmVudikKK3sKKyAgICB1aW50cHRyX3Qg
cmEgPSBHRVRQQygpOworICAgIGludCBpOworCisgICAgLyogTm9ybWFsIChwb3NzaWJseSBtYXNr
ZWQpIHZlY3RvciBzdG9yZSAqLworICAgIGZvciAoaSA9IDA7IGkgPCBWU1RPUkVTX01BWDsgaSsr
KSB7CisgICAgICAgIGlmIChlbnYtPnZzdG9yZV9wZW5kaW5nW2ldKSB7CisgICAgICAgICAgICBl
bnYtPnZzdG9yZV9wZW5kaW5nW2ldID0gMDsKKyAgICAgICAgICAgIHRhcmdldF91bG9uZyB2YSA9
IGVudi0+dnN0b3JlW2ldLnZhOworICAgICAgICAgICAgaW50IHNpemUgPSBlbnYtPnZzdG9yZVtp
XS5zaXplOworICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBzaXplOyBqKyspIHsKKyAg
ICAgICAgICAgICAgICBpZiAodGVzdF9iaXQoaiwgZW52LT52c3RvcmVbaV0ubWFzaykpIHsKKyAg
ICAgICAgICAgICAgICAgICAgY3B1X3N0Yl9kYXRhX3JhKGVudiwgdmEgKyBqLCBlbnYtPnZzdG9y
ZVtpXS5kYXRhLnViW2pdLCByYSk7CisgICAgICAgICAgICAgICAgfQorICAgICAgICAgICAgfQor
ICAgICAgICB9CisgICAgfQorCisgICAgLyogU2NhdHRlciBzdG9yZSAqLworICAgIGlmIChlbnYt
PnZ0Y21fcGVuZGluZykgeworICAgICAgICBlbnYtPnZ0Y21fcGVuZGluZyA9IGZhbHNlOworICAg
ICAgICBpZiAoZW52LT52dGNtX2xvZy5vcCkgeworICAgICAgICAgICAgLyogTmVlZCB0byBwZXJm
b3JtIHRoZSBzY2F0dGVyIHJlYWQvbW9kaWZ5L3dyaXRlIGF0IGNvbW1pdCB0aW1lICovCisgICAg
ICAgICAgICBpZiAoZW52LT52dGNtX2xvZy5vcF9zaXplID09IDIpIHsKKyAgICAgICAgICAgICAg
ICBTQ0FUVEVSX09QX1dSSVRFX1RPX01FTSh1aW50MTZfdCk7CisgICAgICAgICAgICB9IGVsc2Ug
aWYgKGVudi0+dnRjbV9sb2cub3Bfc2l6ZSA9PSA0KSB7CisgICAgICAgICAgICAgICAgLyogV29y
ZCBTY2F0dGVyICs9ICovCisgICAgICAgICAgICAgICAgU0NBVFRFUl9PUF9XUklURV9UT19NRU0o
dWludDMyX3QpOworICAgICAgICAgICAgfSBlbHNlIHsKKyAgICAgICAgICAgICAgICBnX2Fzc2Vy
dF9ub3RfcmVhY2hlZCgpOworICAgICAgICAgICAgfQorICAgICAgICB9IGVsc2UgeworICAgICAg
ICAgICAgZm9yIChpID0gMDsgaSA8IGVudi0+dnRjbV9sb2cuc2l6ZTsgaSsrKSB7CisgICAgICAg
ICAgICAgICAgaWYgKHRlc3RfYml0KGksIGVudi0+dnRjbV9sb2cubWFzaykpIHsKKyAgICAgICAg
ICAgICAgICAgICAgY3B1X3N0Yl9kYXRhX3JhKGVudiwgZW52LT52dGNtX2xvZy52YVtpXSwKKyAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudi0+dnRjbV9sb2cuZGF0YS51Yltp
XSwgcmEpOworICAgICAgICAgICAgICAgICAgICBjbGVhcl9iaXQoaSwgZW52LT52dGNtX2xvZy5t
YXNrKTsKKyAgICAgICAgICAgICAgICAgICAgZW52LT52dGNtX2xvZy5kYXRhLnViW2ldID0gMDsK
KyAgICAgICAgICAgICAgICB9CisKKyAgICAgICAgICAgIH0KKyAgICAgICAgfQorICAgIH0KK30K
Kwogc3RhdGljIHZvaWQgcHJpbnRfc3RvcmUoQ1BVSGV4YWdvblN0YXRlICplbnYsIGludCBzbG90
KQogewogICAgIGlmICghKGVudi0+c2xvdF9jYW5jZWxsZWQgJiAoMSA8PCBzbG90KSkpIHsKQEAg
LTI0Miw5ICsyOTAsMTAgQEAgdm9pZCBIRUxQRVIoZGVidWdfY29tbWl0X2VuZCkoQ1BVSGV4YWdv
blN0YXRlICplbnYsIGludCBoYXNfc3QwLCBpbnQgaGFzX3N0MSkKICAgICBIRVhfREVCVUdfTE9H
KCJOZXh0IFBDID0gIiBUQVJHRVRfRk1UX2x4ICJcbiIsIGVudi0+bmV4dF9QQyk7CiAgICAgSEVY
X0RFQlVHX0xPRygiRXhlYyBjb3VudGVyczogcGt0ID0gIiBUQVJHRVRfRk1UX2x4CiAgICAgICAg
ICAgICAgICAgICAiLCBpbnNuID0gIiBUQVJHRVRfRk1UX2x4Ci0gICAgICAgICAgICAgICAgICAi
XG4iLAorICAgICAgICAgICAgICAgICAgIiwgaHZ4ID0gIiBUQVJHRVRfRk1UX2x4ICJcbiIsCiAg
ICAgICAgICAgICAgICAgICBlbnYtPmdwcltIRVhfUkVHX1FFTVVfUEtUX0NOVF0sCi0gICAgICAg
ICAgICAgICAgICBlbnYtPmdwcltIRVhfUkVHX1FFTVVfSU5TTl9DTlRdKTsKKyAgICAgICAgICAg
ICAgICAgIGVudi0+Z3ByW0hFWF9SRUdfUUVNVV9JTlNOX0NOVF0sCisgICAgICAgICAgICAgICAg
ICBlbnYtPmdwcltIRVhfUkVHX1FFTVVfSFZYX0NOVF0pOwogCiB9CiAKQEAgLTExNjUsNiArMTIx
NCwxODggQEAgZmxvYXQ2NCBIRUxQRVIoZGZtcHloaCkoQ1BVSGV4YWdvblN0YXRlICplbnYsIGZs
b2F0NjQgUnh4ViwKICAgICByZXR1cm4gUnh4VjsKIH0KIAorLyogSGlzdG9ncmFtIGluc3RydWN0
aW9ucyAqLworCitzdGF0aWMgaW5saW5lIE1NVmVjdG9yIHZoaXN0X2lucHV0KENQVUhleGFnb25T
dGF0ZSAqZW52KQoreworICAgIC8qCisgICAgICogVGhlcmUgaXNuJ3QgYSAxLTEgbWFwcGluZyBv
ZiByZWdpc3RlciBudW1iZXJzIGZvciB0bXBfVlJlZ3MKKyAgICAgKiBUaGV5IGFyZSBhbGxvY2F0
ZWQgb24gYW4gYXMtbmVlZGVkIGJhc2lzIGR1cmluZyB0cmFuc2xhdGlvbi4KKyAgICAgKgorICAg
ICAqIFRoZSBydWxlcyBmb3IgaGlzdG9ncmFtIGluc3RydWN0aW9ucyBhcmUgdGhhdCB0aGVyZSBj
YW4gb25seQorICAgICAqIGJlIG9uZSB0bXAgcmVnaXN0ZXIgYXNzaWduZWQgaW4gdGhlIHBhY2tl
dC4KKyAgICAgKiBTbywgd2UgY2hlY2sgdGhhdCB0aGVyZSBpcyBvbmx5IG9uZSBiaXQgaW4gdGhl
IG1hc2ssIGFuZAorICAgICAqIHRoaXMgbWVhbnMgdGhlIHRtcCB3ZSBuZWVkIHdpbGwgYmUgYXQg
aW5kZXggMC4KKyAgICAgKi8KKyAgICBWUmVnTWFzayB2c2VsID0gZW52LT5WUmVnc191cGRhdGVk
X3RtcDsKKyAgICBnX2Fzc2VydChjdHBvcDMyKHZzZWwpID09IDEpOworICAgIGVudi0+VlJlZ3Nf
dXBkYXRlZF90bXAgPSAwOworICAgIHJldHVybiBlbnYtPnRtcF9WUmVnc1swXTsKK30KKwordm9p
ZCBIRUxQRVIodmhpc3QpKENQVUhleGFnb25TdGF0ZSAqZW52KQoreworICAgIE1NVmVjdG9yIGlu
cHV0ID0gdmhpc3RfaW5wdXQoZW52KTsKKworICAgIGZvciAoaW50IGxhbmUgPSAwOyBsYW5lIDwg
ODsgbGFuZSsrKSB7CisgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgc2l6ZW9mKE1NVmVjdG9y
KSAvIDg7ICsraSkgeworICAgICAgICAgICAgdW5zaWduZWQgY2hhciB2YWx1ZSA9IGlucHV0LnVi
WyhzaXplb2YoTU1WZWN0b3IpIC8gOCkgKiBsYW5lICsgaV07CisgICAgICAgICAgICB1bnNpZ25l
ZCBjaGFyIHJlZ25vID0gdmFsdWUgPj4gMzsKKyAgICAgICAgICAgIHVuc2lnbmVkIGNoYXIgZWxl
bWVudCA9IHZhbHVlICYgNzsKKworICAgICAgICAgICAgZW52LT5WUmVnc1tyZWdub10udWhbKHNp
emVvZihNTVZlY3RvcikgLyAxNikgKiBsYW5lICsgZWxlbWVudF0rKzsKKyAgICAgICAgfQorICAg
IH0KK30KKwordm9pZCBIRUxQRVIodmhpc3RxKShDUFVIZXhhZ29uU3RhdGUgKmVudikKK3sKKyAg
ICBNTVZlY3RvciBpbnB1dCA9IHZoaXN0X2lucHV0KGVudik7CisKKyAgICBmb3IgKGludCBsYW5l
ID0gMDsgbGFuZSA8IDg7IGxhbmUrKykgeworICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHNp
emVvZihNTVZlY3RvcikgLyA4OyArK2kpIHsKKyAgICAgICAgICAgIHVuc2lnbmVkIGNoYXIgdmFs
dWUgPSBpbnB1dC51Ylsoc2l6ZW9mKE1NVmVjdG9yKSAvIDgpICogbGFuZSArIGldOworICAgICAg
ICAgICAgdW5zaWduZWQgY2hhciByZWdubyA9IHZhbHVlID4+IDM7CisgICAgICAgICAgICB1bnNp
Z25lZCBjaGFyIGVsZW1lbnQgPSB2YWx1ZSAmIDc7CisKKyAgICAgICAgICAgIGlmIChmR0VUUUJJ
VChlbnYtPnF0bXAsIHNpemVvZihNTVZlY3RvcikgLyA4ICogbGFuZSArIGkpKSB7CisgICAgICAg
ICAgICAgICAgZW52LT5WUmVnc1tyZWdub10udWhbCisgICAgICAgICAgICAgICAgICAgIChzaXpl
b2YoTU1WZWN0b3IpIC8gMTYpICogbGFuZSArIGVsZW1lbnRdKys7CisgICAgICAgICAgICB9Cisg
ICAgICAgIH0KKyAgICB9Cit9CisKK3ZvaWQgSEVMUEVSKHZ3aGlzdDI1NikoQ1BVSGV4YWdvblN0
YXRlICplbnYpCit7CisgICAgTU1WZWN0b3IgaW5wdXQgPSB2aGlzdF9pbnB1dChlbnYpOworCisg
ICAgZm9yIChpbnQgaSA9IDA7IGkgPCAoc2l6ZW9mKE1NVmVjdG9yKSAvIDIpOyBpKyspIHsKKyAg
ICAgICAgdW5zaWduZWQgaW50IGJ1Y2tldCA9IGZHRVRVQllURSgwLCBpbnB1dC5oW2ldKTsKKyAg
ICAgICAgdW5zaWduZWQgaW50IHdlaWdodCA9IGZHRVRVQllURSgxLCBpbnB1dC5oW2ldKTsKKyAg
ICAgICAgdW5zaWduZWQgaW50IHZpbmRleCA9IChidWNrZXQgPj4gMykgJiAweDFGOworICAgICAg
ICB1bnNpZ25lZCBpbnQgZWxpbmRleCA9ICgoaSA+PiAwKSAmICh+NykpIHwgKChidWNrZXQgPj4g
MCkgJiA3KTsKKworICAgICAgICBlbnYtPlZSZWdzW3ZpbmRleF0udWhbZWxpbmRleF0gPQorICAg
ICAgICAgICAgZW52LT5WUmVnc1t2aW5kZXhdLnVoW2VsaW5kZXhdICsgd2VpZ2h0OworICAgIH0K
K30KKwordm9pZCBIRUxQRVIodndoaXN0MjU2cSkoQ1BVSGV4YWdvblN0YXRlICplbnYpCit7Cisg
ICAgTU1WZWN0b3IgaW5wdXQgPSB2aGlzdF9pbnB1dChlbnYpOworCisgICAgZm9yIChpbnQgaSA9
IDA7IGkgPCAoc2l6ZW9mKE1NVmVjdG9yKSAvIDIpOyBpKyspIHsKKyAgICAgICAgdW5zaWduZWQg
aW50IGJ1Y2tldCA9IGZHRVRVQllURSgwLCBpbnB1dC5oW2ldKTsKKyAgICAgICAgdW5zaWduZWQg
aW50IHdlaWdodCA9IGZHRVRVQllURSgxLCBpbnB1dC5oW2ldKTsKKyAgICAgICAgdW5zaWduZWQg
aW50IHZpbmRleCA9IChidWNrZXQgPj4gMykgJiAweDFGOworICAgICAgICB1bnNpZ25lZCBpbnQg
ZWxpbmRleCA9ICgoaSA+PiAwKSAmICh+NykpIHwgKChidWNrZXQgPj4gMCkgJiA3KTsKKworICAg
ICAgICBpZiAoZkdFVFFCSVQoZW52LT5xdG1wLCAyICogaSkpIHsKKyAgICAgICAgICAgIGVudi0+
VlJlZ3NbdmluZGV4XS51aFtlbGluZGV4XSA9CisgICAgICAgICAgICAgICAgZW52LT5WUmVnc1t2
aW5kZXhdLnVoW2VsaW5kZXhdICsgd2VpZ2h0OworICAgICAgICB9CisgICAgfQorfQorCit2b2lk
IEhFTFBFUih2d2hpc3QyNTZfc2F0KShDUFVIZXhhZ29uU3RhdGUgKmVudikKK3sKKyAgICBNTVZl
Y3RvciBpbnB1dCA9IHZoaXN0X2lucHV0KGVudik7CisKKyAgICBmb3IgKGludCBpID0gMDsgaSA8
IChzaXplb2YoTU1WZWN0b3IpIC8gMik7IGkrKykgeworICAgICAgICB1bnNpZ25lZCBpbnQgYnVj
a2V0ID0gZkdFVFVCWVRFKDAsIGlucHV0LmhbaV0pOworICAgICAgICB1bnNpZ25lZCBpbnQgd2Vp
Z2h0ID0gZkdFVFVCWVRFKDEsIGlucHV0LmhbaV0pOworICAgICAgICB1bnNpZ25lZCBpbnQgdmlu
ZGV4ID0gKGJ1Y2tldCA+PiAzKSAmIDB4MUY7CisgICAgICAgIHVuc2lnbmVkIGludCBlbGluZGV4
ID0gKChpID4+IDApICYgKH43KSkgfCAoKGJ1Y2tldCA+PiAwKSAmIDcpOworCisgICAgICAgIGVu
di0+VlJlZ3NbdmluZGV4XS51aFtlbGluZGV4XSA9CisgICAgICAgICAgICBmVlNBVFVIKGVudi0+
VlJlZ3NbdmluZGV4XS51aFtlbGluZGV4XSArIHdlaWdodCk7CisgICAgfQorfQorCit2b2lkIEhF
TFBFUih2d2hpc3QyNTZxX3NhdCkoQ1BVSGV4YWdvblN0YXRlICplbnYpCit7CisgICAgTU1WZWN0
b3IgaW5wdXQgPSB2aGlzdF9pbnB1dChlbnYpOworCisgICAgZm9yIChpbnQgaSA9IDA7IGkgPCAo
c2l6ZW9mKE1NVmVjdG9yKSAvIDIpOyBpKyspIHsKKyAgICAgICAgdW5zaWduZWQgaW50IGJ1Y2tl
dCA9IGZHRVRVQllURSgwLCBpbnB1dC5oW2ldKTsKKyAgICAgICAgdW5zaWduZWQgaW50IHdlaWdo
dCA9IGZHRVRVQllURSgxLCBpbnB1dC5oW2ldKTsKKyAgICAgICAgdW5zaWduZWQgaW50IHZpbmRl
eCA9IChidWNrZXQgPj4gMykgJiAweDFGOworICAgICAgICB1bnNpZ25lZCBpbnQgZWxpbmRleCA9
ICgoaSA+PiAwKSAmICh+NykpIHwgKChidWNrZXQgPj4gMCkgJiA3KTsKKworICAgICAgICBpZiAo
ZkdFVFFCSVQoZW52LT5xdG1wLCAyICogaSkpIHsKKyAgICAgICAgICAgIGVudi0+VlJlZ3Nbdmlu
ZGV4XS51aFtlbGluZGV4XSA9CisgICAgICAgICAgICAgICAgZlZTQVRVSChlbnYtPlZSZWdzW3Zp
bmRleF0udWhbZWxpbmRleF0gKyB3ZWlnaHQpOworICAgICAgICB9CisgICAgfQorfQorCit2b2lk
IEhFTFBFUih2d2hpc3QxMjgpKENQVUhleGFnb25TdGF0ZSAqZW52KQoreworICAgIE1NVmVjdG9y
IGlucHV0ID0gdmhpc3RfaW5wdXQoZW52KTsKKworICAgIGZvciAoaW50IGkgPSAwOyBpIDwgKHNp
emVvZihNTVZlY3RvcikgLyAyKTsgaSsrKSB7CisgICAgICAgIHVuc2lnbmVkIGludCBidWNrZXQg
PSBmR0VUVUJZVEUoMCwgaW5wdXQuaFtpXSk7CisgICAgICAgIHVuc2lnbmVkIGludCB3ZWlnaHQg
PSBmR0VUVUJZVEUoMSwgaW5wdXQuaFtpXSk7CisgICAgICAgIHVuc2lnbmVkIGludCB2aW5kZXgg
PSAoYnVja2V0ID4+IDMpICYgMHgxRjsKKyAgICAgICAgdW5zaWduZWQgaW50IGVsaW5kZXggPSAo
KGkgPj4gMSkgJiAofjMpKSB8ICgoYnVja2V0ID4+IDEpICYgMyk7CisKKyAgICAgICAgZW52LT5W
UmVnc1t2aW5kZXhdLnV3W2VsaW5kZXhdID0KKyAgICAgICAgICAgIGVudi0+VlJlZ3NbdmluZGV4
XS51d1tlbGluZGV4XSArIHdlaWdodDsKKyAgICB9Cit9CisKK3ZvaWQgSEVMUEVSKHZ3aGlzdDEy
OHEpKENQVUhleGFnb25TdGF0ZSAqZW52KQoreworICAgIE1NVmVjdG9yIGlucHV0ID0gdmhpc3Rf
aW5wdXQoZW52KTsKKworICAgIGZvciAoaW50IGkgPSAwOyBpIDwgKHNpemVvZihNTVZlY3Rvcikg
LyAyKTsgaSsrKSB7CisgICAgICAgIHVuc2lnbmVkIGludCBidWNrZXQgPSBmR0VUVUJZVEUoMCwg
aW5wdXQuaFtpXSk7CisgICAgICAgIHVuc2lnbmVkIGludCB3ZWlnaHQgPSBmR0VUVUJZVEUoMSwg
aW5wdXQuaFtpXSk7CisgICAgICAgIHVuc2lnbmVkIGludCB2aW5kZXggPSAoYnVja2V0ID4+IDMp
ICYgMHgxRjsKKyAgICAgICAgdW5zaWduZWQgaW50IGVsaW5kZXggPSAoKGkgPj4gMSkgJiAofjMp
KSB8ICgoYnVja2V0ID4+IDEpICYgMyk7CisKKyAgICAgICAgaWYgKGZHRVRRQklUKGVudi0+cXRt
cCwgMiAqIGkpKSB7CisgICAgICAgICAgICBlbnYtPlZSZWdzW3ZpbmRleF0udXdbZWxpbmRleF0g
PQorICAgICAgICAgICAgICAgIGVudi0+VlJlZ3NbdmluZGV4XS51d1tlbGluZGV4XSArIHdlaWdo
dDsKKyAgICAgICAgfQorICAgIH0KK30KKwordm9pZCBIRUxQRVIodndoaXN0MTI4bSkoQ1BVSGV4
YWdvblN0YXRlICplbnYsIGludDMyX3QgdWlWKQoreworICAgIE1NVmVjdG9yIGlucHV0ID0gdmhp
c3RfaW5wdXQoZW52KTsKKworICAgIGZvciAoaW50IGkgPSAwOyBpIDwgKHNpemVvZihNTVZlY3Rv
cikgLyAyKTsgaSsrKSB7CisgICAgICAgIHVuc2lnbmVkIGludCBidWNrZXQgPSBmR0VUVUJZVEUo
MCwgaW5wdXQuaFtpXSk7CisgICAgICAgIHVuc2lnbmVkIGludCB3ZWlnaHQgPSBmR0VUVUJZVEUo
MSwgaW5wdXQuaFtpXSk7CisgICAgICAgIHVuc2lnbmVkIGludCB2aW5kZXggPSAoYnVja2V0ID4+
IDMpICYgMHgxRjsKKyAgICAgICAgdW5zaWduZWQgaW50IGVsaW5kZXggPSAoKGkgPj4gMSkgJiAo
fjMpKSB8ICgoYnVja2V0ID4+IDEpICYgMyk7CisKKyAgICAgICAgaWYgKChidWNrZXQgJiAxKSA9
PSB1aVYpIHsKKyAgICAgICAgICAgIGVudi0+VlJlZ3NbdmluZGV4XS51d1tlbGluZGV4XSA9Cisg
ICAgICAgICAgICAgICAgZW52LT5WUmVnc1t2aW5kZXhdLnV3W2VsaW5kZXhdICsgd2VpZ2h0Owor
ICAgICAgICB9CisgICAgfQorfQorCit2b2lkIEhFTFBFUih2d2hpc3QxMjhxbSkoQ1BVSGV4YWdv
blN0YXRlICplbnYsIGludDMyX3QgdWlWKQoreworICAgIE1NVmVjdG9yIGlucHV0ID0gdmhpc3Rf
aW5wdXQoZW52KTsKKworICAgIGZvciAoaW50IGkgPSAwOyBpIDwgKHNpemVvZihNTVZlY3Rvcikg
LyAyKTsgaSsrKSB7CisgICAgICAgIHVuc2lnbmVkIGludCBidWNrZXQgPSBmR0VUVUJZVEUoMCwg
aW5wdXQuaFtpXSk7CisgICAgICAgIHVuc2lnbmVkIGludCB3ZWlnaHQgPSBmR0VUVUJZVEUoMSwg
aW5wdXQuaFtpXSk7CisgICAgICAgIHVuc2lnbmVkIGludCB2aW5kZXggPSAoYnVja2V0ID4+IDMp
ICYgMHgxRjsKKyAgICAgICAgdW5zaWduZWQgaW50IGVsaW5kZXggPSAoKGkgPj4gMSkgJiAofjMp
KSB8ICgoYnVja2V0ID4+IDEpICYgMyk7CisKKyAgICAgICAgaWYgKCgoYnVja2V0ICYgMSkgPT0g
dWlWKSAmJiBmR0VUUUJJVChlbnYtPnF0bXAsIDIgKiBpKSkgeworICAgICAgICAgICAgZW52LT5W
UmVnc1t2aW5kZXhdLnV3W2VsaW5kZXhdID0KKyAgICAgICAgICAgICAgICBlbnYtPlZSZWdzW3Zp
bmRleF0udXdbZWxpbmRleF0gKyB3ZWlnaHQ7CisgICAgICAgIH0KKyAgICB9Cit9CisKIHN0YXRp
YyB2b2lkIGNhbmNlbF9zbG90KENQVUhleGFnb25TdGF0ZSAqZW52LCB1aW50MzJfdCBzbG90KQog
ewogICAgIEhFWF9ERUJVR19MT0coIlNsb3QgJWQgY2FuY2VsbGVkXG4iLCBzbG90KTsKLS0gCjIu
Ny40Cgo=

