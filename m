Return-Path: <qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org>
X-Original-To: lists+qemu-devel@lfdr.de
Delivered-To: lists+qemu-devel@lfdr.de
Received: from lists.gnu.org (lists.gnu.org [209.51.188.17])
	by mail.lfdr.de (Postfix) with ESMTPS id 81EED3A2F79
	for <lists+qemu-devel@lfdr.de>; Thu, 10 Jun 2021 17:38:44 +0200 (CEST)
Received: from localhost ([::1]:34368 helo=lists1p.gnu.org)
	by lists.gnu.org with esmtp (Exim 4.90_1)
	(envelope-from <qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org>)
	id 1lrMlX-0001C2-Ka
	for lists+qemu-devel@lfdr.de; Thu, 10 Jun 2021 11:38:43 -0400
Received: from eggs.gnu.org ([2001:470:142:3::10]:56066)
 by lists.gnu.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256)
 (Exim 4.90_1) (envelope-from <LIZHAOXIN1@kingsoft.com>)
 id 1lrMii-0004Vt-BK
 for qemu-devel@nongnu.org; Thu, 10 Jun 2021 11:35:48 -0400
Received: from mail.kingsoft.com ([114.255.44.145]:43820)
 by eggs.gnu.org with esmtp (Exim 4.90_1)
 (envelope-from <LIZHAOXIN1@kingsoft.com>) id 1lrMif-0007yF-5A
 for qemu-devel@nongnu.org; Thu, 10 Jun 2021 11:35:48 -0400
X-AuditID: 0a580157-8cdff700000015d4-b6-60c2314d2839
Received: from mail.kingsoft.com (localhost [10.88.1.79])
 (using TLS with cipher ECDHE-RSA-AES128-GCM-SHA256 (128/128 bits))
 (Client did not present a certificate)
 by mail.kingsoft.com (SMG-1-NODE-87) with SMTP id DE.36.05588.D4132C06;
 Thu, 10 Jun 2021 23:35:41 +0800 (HKT)
Received: from KSbjmail3.kingsoft.cn (10.88.1.78) by KSBJMAIL4.kingsoft.cn
 (10.88.1.79) with Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256) id 15.1.2176.14; Thu, 10 Jun
 2021 23:35:41 +0800
Received: from KSbjmail3.kingsoft.cn ([fe80::a143:8393:3ff1:cd3]) by
 KSBJMAIL3.kingsoft.cn ([fe80::a143:8393:3ff1:cd3%10]) with mapi id
 15.01.2176.014; Thu, 10 Jun 2021 23:35:41 +0800
From: =?gb2312?B?TElaSEFPWElOMSBbwO7V1fbOXQ==?= <LIZHAOXIN1@kingsoft.com>
To: "Dr. David Alan Gilbert" <dgilbert@redhat.com>,
 =?gb2312?B?RGFuaWVsIFAuIEJlcnJhbmeopg==?= <berrange@redhat.com>
Subject: =?gb2312?B?u9i4tDogW1BBVENIXSBtaWdyYXRpb24vcmRtYTogVXNlIGh1Z2UgcGFnZSBy?=
 =?gb2312?Q?egister_VM_memory?=
Thread-Topic: [PATCH] migration/rdma: Use huge page register VM memory
Thread-Index: AddbpN+kEXe4Oe1WQuqS3KFy+fOdUf//f+eAgAAL8QD/+rmfIA==
Date: Thu, 10 Jun 2021 15:35:40 +0000
Message-ID: <0916045c71684f57b4fbe35ea876e991@kingsoft.com>
References: <51819991cecb42f6a619768bc61d0bfd@kingsoft.com>
 <YL4qh35GquFrbSfq@redhat.com> <YL40jJgKFQBnq3Us@work-vm>
In-Reply-To: <YL40jJgKFQBnq3Us@work-vm>
Accept-Language: zh-CN, en-US
Content-Language: zh-CN
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [10.88.1.106]
Content-Type: text/plain; charset="gb2312"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Brightmail-Tracker: H4sIAAAAAAAAA+NgFvrKLMWRmVeSWpSXmKPExsXCFcHor+treCjBoG+ilMWbN2uYLHq33WO3
 ON67g8XizpY+JgcWjyfXNjN5vN93lS2AKYrLJiU1J7MstUjfLoErY/LHrUwFv0wr1m29xdbA
 eMKki5GTQ0LARGLJ3pXsXYxcHEIC05kkOj88Z4VwXjBK/D77ggnC2c0o0dP0gxmkhU3AU+LT
 qjNsILaIQKnE+YsnwYqYBd4xSRz6+wksISxQLLGibQ8rRJGbxK/VnSxdjBxAtpNE0ycmkDCL
 gKrEvjXNYDavgLXE67mHwOYLCZRJ7Fg8kxHE5hRQl7g15yWYzSggKzHt0X2wemYBcYm502ax
 QrwgILFkz3lmCFtU4uXjf6wgqyQE5CVWfxSGKNeSmNfwG6pVUWJK90N2iLWCEidnPmGZwCg2
 C8nUWUhaZiFpmYWkZQEjyypGluLcdMNNjJCYCd/BOK/po94hRiYOxkOMEhzMSiK8OWqHEoR4
 UxIrq1KL8uOLSnNSiw8xSnOwKInzfs45mCAkkJ5YkpqdmlqQWgSTZeLglGpgkgqV1exNk1z/
 4Fujcv7+f98jj8o8m/Tk1uQHnf1buJ778H1w21qSfNjhblENu7bbC2s392/nVmsr7DRovulg
 VGJs1h6/snh+5yGj44afD4j3yCtypbwJmL+p9eHBmuRP564b73umu+LhvXI1HrWJuX8FxC59
 yQrX1Pxp4K7kEX7Q6MGRrmurZd3ev/+swRDBu2ee59Vfa5YHaYjdF8icFnbu1Ky4SQenPpE5
 nLEyw+yrx8rp1vmv/2ipH166L1S4jdmBXUiFm+Oi21xHPb6H96X/7+G/43z/yk9d1od6+VLV
 Cfuifu5ve3Vm5SLj9K+/NWttj5r84r3/a067pIMU//pfWQuU2lXuKwvM3/ogWomlOCPRUIu5
 qDgRAMldpWoIAwAA
Received-SPF: pass client-ip=114.255.44.145;
 envelope-from=LIZHAOXIN1@kingsoft.com; helo=mail.kingsoft.com
X-Spam_score_int: 38
X-Spam_score: 3.8
X-Spam_bar: +++
X-Spam_report: (3.8 / 5.0 requ) BAYES_00=-1.9, CHARSET_FARAWAY_HEADER=3.2,
 MIME_CHARSET_FARAWAY=2.45, SPF_HELO_NONE=0.001,
 SPF_PASS=-0.001 autolearn=ham autolearn_force=no
X-Spam_action: no action
X-BeenThere: qemu-devel@nongnu.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: <qemu-devel.nongnu.org>
List-Unsubscribe: <https://lists.nongnu.org/mailman/options/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=unsubscribe>
List-Archive: <https://lists.nongnu.org/archive/html/qemu-devel>
List-Post: <mailto:qemu-devel@nongnu.org>
List-Help: <mailto:qemu-devel-request@nongnu.org?subject=help>
List-Subscribe: <https://lists.nongnu.org/mailman/listinfo/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=subscribe>
Cc: =?gb2312?B?c3VuaGFvMiBby+/qu10=?= <sunhao2@kingsoft.com>,
 =?gb2312?B?WUFOR0ZFTkcxIFvR7rflXQ==?= <YANGFENG1@kingsoft.com>,
 "quintela@redhat.com" <quintela@redhat.com>,
 =?gb2312?B?REVOR0xJTldFTiBbtcvB1s7EXQ==?= <DENGLINWEN@kingsoft.com>,
 "qemu-devel@nongnu.org" <qemu-devel@nongnu.org>,
 =?gb2312?B?TElaSEFPWElOMSBbwO7V1fbOXQ==?= <LIZHAOXIN1@kingsoft.com>
Errors-To: qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org
Sender: "Qemu-devel" <qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org>

WWVzLCBXaGVuIEkgY29uZmlndXJlZCB0d28gTlVNQXMgZm9yIHRoZSBWTSwgdGhlIG5hbWUgb2Yg
dGhlIG1lbW9yeSANCmlzICdyYW0tbm9kZSonLCBhbmQgb3RoZXIgYXJjaGl0ZWN0dXJlcyBoYWQg
ZGlmZmVyZW50IG5hbWVzLg0KQXMgeW91IHN1Z2dlc3RlZCwgSSB1c2UgcWVtdV9yYW1fcGFnZXNp
emUoKSBhbmQgcWVtdV9yZWFsX2hvc3RfcGFnZV9zaXplIA0KdG8gZGV0ZXJtaW5lIHdoaWNoIFJh
bWJsb2NrcyB1c2UgaHVnZSBwYWdlLg0KSSB3aWxsIHNlbmQgdGhlIHBhdGNoIHNlY29uZCB2ZXJz
aW9uIGxhdGVyLg0KDQp3aGVuIHRoZXJlJ3MgYSBtaXggb2YgZGlmZmVyZW50IGh1Z2UgcGFnZSBz
aXplcywgdGhlcmUgaXMgbm8gZGlmZmVyZW5jZSBpbiB0aGVpciANCmJlaGF2aW9yLCByZWdpc3Rl
ciBvciBwaW4gYXJlIGp1c3QgdG8gcHJldmVudCB0aGUgbWVtb3J5IGZyb20gYmVpbmcgc3dhcHBl
ZCBvdXQuIA0KSHVnZSBwYWdlIGl0c2VsZiB3aWxsIG5vdCBiZSBzd2FwcGVkIG91dKOsc28gaHVn
ZSBwYWdlIG5vIG5lZWQgZGVyZWdpc3RlciBvciB1bnBpbi4NCg0KVGhlIGxpYnZpcnQgeG1sIG9m
IG15IFZNIGlzIA0KLi4uDQo8bWVtb3J5QmFja2luZz4NCiAgICA8aHVnZXBhZ2VzPg0KICAgICAg
PHBhZ2Ugc2l6ZT0nMjA0OCcgdW5pdD0nS2lCJyBub2Rlc2V0PScwJy8+DQogICAgICA8cGFnZSBz
aXplPScxMDQ4NTc2JyB1bml0PSdLaUInIG5vZGVzZXQ9JzEnLz4NCiAgICA8L2h1Z2VwYWdlcz4N
CiAgPC9tZW1vcnlCYWNraW5nPg0KLi4uDQo8bnVtYT4NCiAgICAgIDxjZWxsIGlkPScwJyBjcHVz
PScwLTcnIG1lbW9yeT0nMzE0NTcyODAnIHVuaXQ9J0tpQicgbWVtQWNjZXNzPSdzaGFyZWQnLz4N
CiAgICAgIDxjZWxsIGlkPScxJyBjcHVzPSc4LTE1JyBtZW1vcnk9JzIwOTcxNTInIHVuaXQ9J0tp
QicgbWVtQWNjZXNzPSdzaGFyZWQnLz4NCjwvbnVtYT4NCi4uLg0KDQpBZnRlciB0ZXN0aW5nLCB0
aGUgUkRNQSBsaXZlIG1pZ3JhdGlvbiBpcyBub3JtYWwsIGFuZCB0aGUgZG93bnRpbWUgaXMgc2ln
bmlmaWNhbnRseSByZWR1Y2VkLg0KDQotLS0tLdPKvP7Urbz+LS0tLS0NCreivP7IyzogRHIuIERh
dmlkIEFsYW4gR2lsYmVydCA8ZGdpbGJlcnRAcmVkaGF0LmNvbT4gDQq3osvNyrG85DogMjAyMcTq
NtTCN8jVIDIzOjAwDQrK1bz+yMs6IERhbmllbCBQLiBCZXJyYW5nqKYgPGJlcnJhbmdlQHJlZGhh
dC5jb20+DQqzrcvNOiBMSVpIQU9YSU4xIFvA7tXV9s5dIDxMSVpIQU9YSU4xQGtpbmdzb2Z0LmNv
bT47IHFlbXUtZGV2ZWxAbm9uZ251Lm9yZzsgcXVpbnRlbGFAcmVkaGF0LmNvbTsgc3VuaGFvMiBb
y+/qu10gPHN1bmhhbzJAa2luZ3NvZnQuY29tPjsgREVOR0xJTldFTiBbtcvB1s7EXSA8REVOR0xJ
TldFTkBraW5nc29mdC5jb20+OyBZQU5HRkVORzEgW9Hut+VdIDxZQU5HRkVORzFAa2luZ3NvZnQu
Y29tPg0K1vfM4jogUmU6IFtQQVRDSF0gbWlncmF0aW9uL3JkbWE6IFVzZSBodWdlIHBhZ2UgcmVn
aXN0ZXIgVk0gbWVtb3J5DQoNCiogRGFuaWVsIFAuIEJlcnJhbmeopiAoYmVycmFuZ2VAcmVkaGF0
LmNvbSkgd3JvdGU6DQo+IE9uIE1vbiwgSnVuIDA3LCAyMDIxIGF0IDAxOjU3OjAyUE0gKzAwMDAs
IExJWkhBT1hJTjEgW8Du1dX2zl0gd3JvdGU6DQo+ID4gV2hlbiB1c2luZyBsaWJ2aXJ0IGZvciBS
RE1BIGxpdmUgbWlncmF0aW9uLCBpZiB0aGUgVk0gbWVtb3J5IGlzIHRvbyANCj4gPiBsYXJnZSwg
aXQgd2lsbCB0YWtlIGEgbG90IG9mIHRpbWUgdG8gZGVyZWdpc3RlciB0aGUgVk0gYXQgdGhlIHNv
dXJjZSANCj4gPiBzaWRlLCByZXN1bHRpbmcgaW4gYSBsb25nIGRvd250aW1lIChWTSA2NEcsIGRl
cmVnaXN0ZXIgdm0gdGltZSBpcyBhYm91dCA0MDBtcykuDQo+ID4gICAgIA0KPiA+IEFsdGhvdWdo
IHRoZSBWTSdzIG1lbW9yeSB1c2VzIDJNIGh1Z2UgcGFnZXMsIHRoZSBNTE5YIGRyaXZlciBzdGls
bCANCj4gPiB1c2VzIDRLIHBhZ2VzIGZvciBwaW4gbWVtb3J5LCBhcyB3ZWxsIGFzIGZvciB1bnBp
bi4gU28gd2UgdXNlIGh1Z2UgDQo+ID4gcGFnZXMgdG8gc2tpcCB0aGUgcHJvY2VzcyBvZiBwaW4g
bWVtb3J5IGFuZCB1bnBpbiBtZW1vcnkgdG8gcmVkdWNlIGRvd250aW1lLg0KPiA+ICAgIA0KPiA+
IFRoZSB0ZXN0IGVudmlyb25tZW50Og0KPiA+IGtlcm5lbDogbGludXgtNS4xMg0KPiA+IE1MTlg6
IENvbm5lY3RYLTQgTFgNCj4gPiBsaWJ2aXJ0IGNvbW1hbmQ6DQo+ID4gdmlyc2ggbWlncmF0ZSAt
LWxpdmUgLS1wMnAgLS1wZXJzaXN0ZW50IC0tY29weS1zdG9yYWdlLWluYyANCj4gPiAtLWxpc3Rl
bi1hZGRyZXNzIFwNCj4gPiAwLjAuMC4wIC0tcmRtYS1waW4tYWxsIC0tbWlncmF0ZXVyaSByZG1h
Oi8vMTkyLjE2OC4wLjIgW1ZNXSANCj4gPiBxZW11K3RjcDovLzE5Mi4xNjguMC4yL3N5c3RlbQ0K
PiA+ICAgICANCj4gPiBTaWduZWQtb2ZmLWJ5OiBsaXpoYW94aW4gPGxpemhhb3hpbjFAa2luZ3Nv
ZnQuY29tPg0KPiA+IA0KPiA+IGRpZmYgLS1naXQgYS9taWdyYXRpb24vcmRtYS5jIGIvbWlncmF0
aW9uL3JkbWEuYyBpbmRleCANCj4gPiAxY2RiNDU2MWYzLi45ODIzNDQ5Mjk3IDEwMDY0NA0KPiA+
IC0tLSBhL21pZ3JhdGlvbi9yZG1hLmMNCj4gPiArKysgYi9taWdyYXRpb24vcmRtYS5jDQo+ID4g
QEAgLTExMjMsMTMgKzExMjMsMjYgQEAgc3RhdGljIGludCBxZW11X3JkbWFfcmVnX3dob2xlX3Jh
bV9ibG9ja3MoUkRNQUNvbnRleHQgKnJkbWEpDQo+ID4gICAgICBSRE1BTG9jYWxCbG9ja3MgKmxv
Y2FsID0gJnJkbWEtPmxvY2FsX3JhbV9ibG9ja3M7DQo+ID4gIA0KPiA+ICAgICAgZm9yIChpID0g
MDsgaSA8IGxvY2FsLT5uYl9ibG9ja3M7IGkrKykgew0KPiA+IC0gICAgICAgIGxvY2FsLT5ibG9j
a1tpXS5tciA9DQo+ID4gLSAgICAgICAgICAgIGlidl9yZWdfbXIocmRtYS0+cGQsDQo+ID4gLSAg
ICAgICAgICAgICAgICAgICAgbG9jYWwtPmJsb2NrW2ldLmxvY2FsX2hvc3RfYWRkciwNCj4gPiAt
ICAgICAgICAgICAgICAgICAgICBsb2NhbC0+YmxvY2tbaV0ubGVuZ3RoLA0KPiA+IC0gICAgICAg
ICAgICAgICAgICAgIElCVl9BQ0NFU1NfTE9DQUxfV1JJVEUgfA0KPiA+IC0gICAgICAgICAgICAg
ICAgICAgIElCVl9BQ0NFU1NfUkVNT1RFX1dSSVRFDQo+ID4gLSAgICAgICAgICAgICAgICAgICAg
KTsNCj4gPiArICAgICAgICBpZiAoc3RyY21wKGxvY2FsLT5ibG9ja1tpXS5ibG9ja19uYW1lLCJw
Yy5yYW0iKSA9PSAwKSB7DQo+IA0KPiAncGMucmFtJyBpcyBhbiB4ODYgYXJjaGl0ZWN0dXJlIHNw
ZWNpZmljIG5hbWUsIHNvIHRoaXMgd2lsbCBzdGlsbCANCj4gbGVhdmUgYSBwcm9ibGVtIG9uIG90
aGVyIGFyY2hpdGVjdHVyZXMgSSBhc3N1bWUuDQoNClllcywgYW5kIGFsc28gYnJlYWsgZXZlbiBv
biBQQyB3aGVuIHVzaW5nIE5VTUEuDQpJIHRoaW5rIHRoZSB0aGluZyB0byBkbyBoZXJlIGlzIHRv
IGNhbGwgcWVtdV9yYW1fcGFnZXNpemUgb24gdGhlIFJBTUJsb2NrOyANCg0KICBpZiAocWVtdV9y
YW1fcGFnZXNpemUoUkFNQmxvY2suLi4uKSAhPSBxZW11X3JlYWxfaG9zdF9wYWdlX3NpemUpDQog
ICAgIGl0J3MgYSBodWdlIHBhZ2UNCg0KSSBndWVzcyBpdCdzIHByb2JhYmx5IGJlc3QgdG8gZG8g
dGhhdCBpbiBxZW11X3JkbWFfaW5pdF9vbmVfYmxvY2sgb3Igc29tZXRoaW5nPw0KDQpJIHdvbmRl
ciBob3cgdGhhdCBhbGwgd29ya3Mgd2hlbiB0aGVyZSdzIGEgbWl4IG9mIGRpZmZlcmVudCBodWdl
IHBhZ2Ugc2l6ZXM/DQoNCkRhdmUNCg0KPiA+ICsgICAgICAgICAgICBsb2NhbC0+YmxvY2tbaV0u
bXIgPQ0KPiA+ICsgICAgICAgICAgICAgICAgaWJ2X3JlZ19tcihyZG1hLT5wZCwNCj4gPiArICAg
ICAgICAgICAgICAgICAgICAgICAgbG9jYWwtPmJsb2NrW2ldLmxvY2FsX2hvc3RfYWRkciwNCj4g
PiArICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwtPmJsb2NrW2ldLmxlbmd0aCwNCj4gPiAr
ICAgICAgICAgICAgICAgICAgICAgICAgSUJWX0FDQ0VTU19MT0NBTF9XUklURSB8DQo+ID4gKyAg
ICAgICAgICAgICAgICAgICAgICAgIElCVl9BQ0NFU1NfUkVNT1RFX1dSSVRFIHwNCj4gPiArICAg
ICAgICAgICAgICAgICAgICAgICAgSUJWX0FDQ0VTU19PTl9ERU1BTkQgfA0KPiA+ICsgICAgICAg
ICAgICAgICAgICAgICAgICBJQlZfQUNDRVNTX0hVR0VUTEINCj4gPiArICAgICAgICAgICAgICAg
ICAgICAgICAgKTsNCj4gPiArICAgICAgICB9IGVsc2Ugew0KPiA+ICsgICAgICAgICAgICBsb2Nh
bC0+YmxvY2tbaV0ubXIgPQ0KPiA+ICsgICAgICAgICAgICAgICAgaWJ2X3JlZ19tcihyZG1hLT5w
ZCwNCj4gPiArICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwtPmJsb2NrW2ldLmxvY2FsX2hv
c3RfYWRkciwNCj4gPiArICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwtPmJsb2NrW2ldLmxl
bmd0aCwNCj4gPiArICAgICAgICAgICAgICAgICAgICAgICAgSUJWX0FDQ0VTU19MT0NBTF9XUklU
RSB8DQo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgIElCVl9BQ0NFU1NfUkVNT1RFX1dSSVRF
DQo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICk7DQo+ID4gKyAgICAgICAgfQ0KPiA+ICsN
Cj4gPiAgICAgICAgICBpZiAoIWxvY2FsLT5ibG9ja1tpXS5tcikgew0KPiA+ICAgICAgICAgICAg
ICBwZXJyb3IoIkZhaWxlZCB0byByZWdpc3RlciBsb2NhbCBkZXN0IHJhbSBibG9jayFcbiIpOw0K
PiA+ICAgICAgICAgICAgICBicmVhazsNCj4gDQo+IFJlZ2FyZHMsDQo+IERhbmllbA0KPiAtLQ0K
PiB8OiBodHRwczovL2JlcnJhbmdlLmNvbSAgICAgIC1vLSAgICBodHRwczovL3d3dy5mbGlja3Iu
Y29tL3Bob3Rvcy9kYmVycmFuZ2UgOnwNCj4gfDogaHR0cHM6Ly9saWJ2aXJ0Lm9yZyAgICAgICAg
IC1vLSAgICAgICAgICAgIGh0dHBzOi8vZnN0b3AxMzguYmVycmFuZ2UuY29tIDp8DQo+IHw6IGh0
dHBzOi8vZW50YW5nbGUtcGhvdG8ub3JnICAgIC1vLSAgICBodHRwczovL3d3dy5pbnN0YWdyYW0u
Y29tL2RiZXJyYW5nZSA6fA0KLS0NCkRyLiBEYXZpZCBBbGFuIEdpbGJlcnQgLyBkZ2lsYmVydEBy
ZWRoYXQuY29tIC8gTWFuY2hlc3RlciwgVUsNCg0K

