Return-Path: <qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org>
X-Original-To: lists+qemu-devel@lfdr.de
Delivered-To: lists+qemu-devel@lfdr.de
Received: from lists.gnu.org (lists.gnu.org [209.51.188.17])
	by mail.lfdr.de (Postfix) with ESMTPS id E561A6F0EA8
	for <lists+qemu-devel@lfdr.de>; Fri, 28 Apr 2023 01:02:14 +0200 (CEST)
Received: from localhost ([::1] helo=lists1p.gnu.org)
	by lists.gnu.org with esmtp (Exim 4.90_1)
	(envelope-from <qemu-devel-bounces@nongnu.org>)
	id 1psAbT-0001pB-0T; Thu, 27 Apr 2023 19:00:43 -0400
Received: from eggs.gnu.org ([2001:470:142:3::10])
 by lists.gnu.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256)
 (Exim 4.90_1) (envelope-from <tsimpson@qualcomm.com>)
 id 1psAbQ-0001oG-GT
 for qemu-devel@nongnu.org; Thu, 27 Apr 2023 19:00:41 -0400
Received: from mx0b-0031df01.pphosted.com ([205.220.180.131])
 by eggs.gnu.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256)
 (Exim 4.90_1) (envelope-from <tsimpson@qualcomm.com>)
 id 1psAbF-0001LV-Av
 for qemu-devel@nongnu.org; Thu, 27 Apr 2023 19:00:40 -0400
Received: from pps.filterd (m0279873.ppops.net [127.0.0.1])
 by mx0a-0031df01.pphosted.com (8.17.1.19/8.17.1.19) with ESMTP id
 33RMhTFl016247; Thu, 27 Apr 2023 23:00:17 GMT
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=quicinc.com;
 h=from : to : cc :
 subject : date : message-id : in-reply-to : references : mime-version :
 content-type : content-transfer-encoding; s=qcppdkim1;
 bh=9XX6TiXoJumrRGqlvjpAoDdiuWrpnP24kE9XB9M82P8=;
 b=QyrmXDsIVAppZxw7QnTgiQ96WZCSslhIA9RdFVwGViDNZTziq6xXMrdcmBLJXl7WuOIK
 xe7fRY2+nzjShiM3tjOxEkwVfRKKnLkKYaolKTBtWFYyLwMGiyzcsGg70iNAzOVqP08/
 2AL60aeXPzD9Pb2lk2yqXX/b4L2+LrBceErh8ivyc4Xn2cY6xcBHpWrJPl2wYCRI1XGD
 yhtAHXikj3UiT4Z0BpL3zvbZ0OKHc4W8J+FeQu5lWHlv9jBo0Da6y5/ab6VqzIU8fXLX
 F5wCtgx48JXiKcvdJoD8q7XWc8JUhhKHzLl743QeUaD/682yUHENMlikVD40QSV8MR4P /A== 
Received: from nalasppmta03.qualcomm.com (Global_NAT1.qualcomm.com
 [129.46.96.20])
 by mx0a-0031df01.pphosted.com (PPS) with ESMTPS id 3q7q9ahpqa-1
 (version=TLSv1.2 cipher=ECDHE-RSA-AES256-GCM-SHA384 bits=256 verify=NOT);
 Thu, 27 Apr 2023 23:00:16 +0000
Received: from pps.filterd (NALASPPMTA03.qualcomm.com [127.0.0.1])
 by NALASPPMTA03.qualcomm.com (8.17.1.5/8.17.1.5) with ESMTP id 33RMwLAT031318; 
 Thu, 27 Apr 2023 23:00:15 GMT
Received: from pps.reinject (localhost [127.0.0.1])
 by NALASPPMTA03.qualcomm.com (PPS) with ESMTPS id 3q80d2rg1t-1
 (version=TLSv1.2 cipher=ECDHE-RSA-AES256-GCM-SHA384 bits=256 verify=NOT);
 Thu, 27 Apr 2023 23:00:15 +0000
Received: from NALASPPMTA03.qualcomm.com (NALASPPMTA03.qualcomm.com
 [127.0.0.1])
 by pps.reinject (8.17.1.5/8.17.1.5) with ESMTP id 33RN0Fcd000908;
 Thu, 27 Apr 2023 23:00:15 GMT
Received: from hu-devc-sd-u20-a-1.qualcomm.com (hu-tsimpson-lv.qualcomm.com
 [10.47.204.221])
 by NALASPPMTA03.qualcomm.com (PPS) with ESMTPS id 33RN0E0K000887
 (version=TLSv1.2 cipher=ECDHE-RSA-AES256-GCM-SHA384 bits=256 verify=NOT);
 Thu, 27 Apr 2023 23:00:15 +0000
Received: by hu-devc-sd-u20-a-1.qualcomm.com (Postfix, from userid 47164)
 id CEF476AF; Thu, 27 Apr 2023 16:00:13 -0700 (PDT)
From: Taylor Simpson <tsimpson@quicinc.com>
To: qemu-devel@nongnu.org
Cc: tsimpson@quicinc.com, richard.henderson@linaro.org, philmd@linaro.org,
 ale@rev.ng, anjo@rev.ng, bcain@quicinc.com, quic_mathbern@quicinc.com
Subject: [PATCH v2 11/21] Hexagon (target/hexagon) Short-circuit packet
 register writes
Date: Thu, 27 Apr 2023 16:00:02 -0700
Message-Id: <20230427230012.3800327-12-tsimpson@quicinc.com>
X-Mailer: git-send-email 2.25.1
In-Reply-To: <20230427230012.3800327-1-tsimpson@quicinc.com>
References: <20230427230012.3800327-1-tsimpson@quicinc.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
X-QCInternal: smtphost
X-QCInternal: smtphost
X-Proofpoint-Virus-Version: vendor=nai engine=6200 definitions=5800
 signatures=585085
X-Proofpoint-Virus-Version: vendor=nai engine=6200 definitions=5800
 signatures=585085
X-Proofpoint-GUID: mu19skGaK1XFPSuWM3maHiUWDLm02-Ab
X-Proofpoint-ORIG-GUID: mu19skGaK1XFPSuWM3maHiUWDLm02-Ab
X-Proofpoint-Virus-Version: vendor=baseguard
 engine=ICAP:2.0.254,Aquarius:18.0.942,Hydra:6.0.573,FMLib:17.11.170.22
 definitions=2023-04-27_09,2023-04-27_01,2023-02-09_01
X-Proofpoint-Spam-Details: rule=outbound_notspam policy=outbound score=0
 impostorscore=0 adultscore=0
 mlxscore=0 clxscore=1015 priorityscore=1501 mlxlogscore=629
 lowpriorityscore=0 bulkscore=0 malwarescore=0 spamscore=0 suspectscore=0
 phishscore=0 classifier=spam adjust=0 reason=mlx scancount=1
 engine=8.12.0-2303200000 definitions=main-2304270202
Received-SPF: pass client-ip=205.220.180.131;
 envelope-from=tsimpson@qualcomm.com; helo=mx0b-0031df01.pphosted.com
X-Spam_score_int: -16
X-Spam_score: -1.7
X-Spam_bar: -
X-Spam_report: (-1.7 / 5.0 requ) BAYES_00=-1.9, DKIM_SIGNED=0.1,
 DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1, HEADER_FROM_DIFFERENT_DOMAINS=0.25,
 SPF_HELO_NONE=0.001, T_SCC_BODY_TEXT_LINE=-0.01,
 T_SPF_TEMPERROR=0.01 autolearn=no autolearn_force=no
X-Spam_action: no action
X-BeenThere: qemu-devel@nongnu.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: <qemu-devel.nongnu.org>
List-Unsubscribe: <https://lists.nongnu.org/mailman/options/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=unsubscribe>
List-Archive: <https://lists.nongnu.org/archive/html/qemu-devel>
List-Post: <mailto:qemu-devel@nongnu.org>
List-Help: <mailto:qemu-devel-request@nongnu.org?subject=help>
List-Subscribe: <https://lists.nongnu.org/mailman/listinfo/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=subscribe>
Errors-To: qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org
Sender: qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org

SW4gY2VydGFpbiBjYXNlcywgd2UgY2FuIGF2b2lkIHRoZSBvdmVyaGVhZCBvZiB3cml0aW5nIHRv
IGhleF9uZXdfdmFsdWUKYW5kIHdyaXRlIGRpcmVjdGx5IHRvIGhleF9ncHIuICBXZSBhZGQgbmVl
ZF9jb21taXQgZmllbGQgdG8gRGlzYXNDb250ZXh0CmluZGljYXRpbmcgaWYgdGhlIGVuZC1vZi1w
YWNrZXQgY29tbWl0IGlzIG5lZWRlZC4gIElmIGl0IGlzIG5vdCBuZWVkZWQsCmdldF9yZXN1bHRf
Z3ByKCkgYW5kIGdldF9yZXN1bHRfZ3ByX3BhaXIoKSBjYW4gcmV0dXJuIGhleF9ncHIuCgpXZSBw
YXNzIHRoZSBjdHgtPm5lZWRfY29tbWl0IHRvIGhlbHBlcnMgd2hlbiBuZWVkZWQuCgpGaW5hbGx5
LCB3ZSBjYW4gZWFybHktZXhpdCBmcm9tIGdlbl9yZWdfd3JpdGVzIGR1cmluZyBwYWNrZXQgY29t
bWl0LgoKVGhlcmUgYXJlIGEgZmV3IGluc3RydWN0aW9ucyB3aG9zZSBzZW1hbnRpY3Mgd3JpdGUg
dG8gdGhlIHJlc3VsdCBiZWZvcmUKcmVhZGluZyBhbGwgdGhlIGlucHV0cy4gIFRoZXJlZm9yZSwg
dGhlIGlkZWYtcGFyc2VyIGdlbmVyYXRlZCBjb2RlIGlzCmluY29tcGF0aWJsZSB3aXRoIHNob3J0
LWNpcmN1aXQuICBXZSB0ZWxsIGlkZWYtcGFyc2VyIHRvIHNraXAgdGhlbS4KCkZvciBkZWJ1Z2dp
bmcgcHVycG9zZXMsIHdlIGFkZCBhIGNwdSBwcm9wZXJ0eSB0byB0dXJuIG9mZiBzaG9ydC1jaXJj
dWl0LgpXaGVuIHRoZSBzaG9ydC1jaXJjdWl0IHByb3BlcnR5IGlzIGZhbHNlLCB3ZSBza2lwIHRo
ZSBhbmFseXNpcyBhbmQgZm9yY2UKdGhlIGVuZC1vZi1wYWNrZXQgY29tbWl0LgoKSGVyZSdzIGEg
c2ltcGxlIGV4YW1wbGUgb2YgdGhlIFRDRyBnZW5lcmF0ZWQgZm9yCjB4MDA0MDAwYjQ6ICAweDc4
MDBjMDIwIHsgICAgICAgUjAgPSAjMHgxIH0KCkJFRk9SRToKIC0tLS0gMDA0MDAwYjQKIG1vdmlf
aTMyIG5ld19yMCwkMHgxCiBtb3ZfaTMyIHIwLG5ld19yMAoKQUZURVI6CiAtLS0tIDAwNDAwMGI0
CiBtb3ZpX2kzMiByMCwkMHgxCgpUaGlzIHBhdGNoIHJlaW50cm9kdWNlcyBhIHVzZSBvZiBjaGVj
a19mb3JfYXR0cmliLCBzbyB3ZSByZW1vdmUgdGhlCkdfR05VQ19VTlVTRUQgYWRkZWQgZWFybGll
ciBpbiB0aGlzIHNlcmllcy4KClNpZ25lZC1vZmYtYnk6IFRheWxvciBTaW1wc29uIDx0c2ltcHNv
bkBxdWljaW5jLmNvbT4KUmV2aWV3ZWQtYnk6IFJpY2hhcmQgSGVuZGVyc29uIDxyaWNoYXJkLmhl
bmRlcnNvbkBsaW5hcm8ub3JnPgotLS0KIHRhcmdldC9oZXhhZ29uL2NwdS5oICAgICAgICAgICAg
ICAgICAgICB8ICAxICsKIHRhcmdldC9oZXhhZ29uL2dlbl90Y2cuaCAgICAgICAgICAgICAgICB8
ICAzICstCiB0YXJnZXQvaGV4YWdvbi9nZW5wdHIuaCAgICAgICAgICAgICAgICAgfCAgMiArCiB0
YXJnZXQvaGV4YWdvbi9oZWxwZXIuaCAgICAgICAgICAgICAgICAgfCAgMiArLQogdGFyZ2V0L2hl
eGFnb24vbWFjcm9zLmggICAgICAgICAgICAgICAgIHwgMTMgKysrKy0KIHRhcmdldC9oZXhhZ29u
L3RyYW5zbGF0ZS5oICAgICAgICAgICAgICB8ICAyICsKIHRhcmdldC9oZXhhZ29uL2FyY2guYyAg
ICAgICAgICAgICAgICAgICB8ICAzICstCiB0YXJnZXQvaGV4YWdvbi9jcHUuYyAgICAgICAgICAg
ICAgICAgICAgfCAgNSArLQogdGFyZ2V0L2hleGFnb24vZ2VucHRyLmMgICAgICAgICAgICAgICAg
IHwgMzAgKysrKy0tLS0tLS0KIHRhcmdldC9oZXhhZ29uL29wX2hlbHBlci5jICAgICAgICAgICAg
ICB8ICA1ICstCiB0YXJnZXQvaGV4YWdvbi90cmFuc2xhdGUuYyAgICAgICAgICAgICAgfCA2NyAr
KysrKysrKysrKysrKysrKysrKysrKystCiB0YXJnZXQvaGV4YWdvbi9nZW5faGVscGVyX2Z1bmNz
LnB5ICAgICAgfCAgMiArCiB0YXJnZXQvaGV4YWdvbi9nZW5faGVscGVyX3Byb3Rvcy5weSAgICAg
fCAxMCArKystCiB0YXJnZXQvaGV4YWdvbi9nZW5faWRlZl9wYXJzZXJfZnVuY3MucHkgfCAgNyAr
KysKIHRhcmdldC9oZXhhZ29uL2dlbl90Y2dfZnVuY3MucHkgICAgICAgICB8ICA1ICsrCiB0YXJn
ZXQvaGV4YWdvbi9oZXhfY29tbW9uLnB5ICAgICAgICAgICAgfCAgMyArKwogMTYgZmlsZXMgY2hh
bmdlZCwgMTI5IGluc2VydGlvbnMoKyksIDMxIGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL3Rh
cmdldC9oZXhhZ29uL2NwdS5oIGIvdGFyZ2V0L2hleGFnb24vY3B1LmgKaW5kZXggODFiNjYzZWNm
Yi4uOTI1MjA1NWEzOCAxMDA2NDQKLS0tIGEvdGFyZ2V0L2hleGFnb24vY3B1LmgKKysrIGIvdGFy
Z2V0L2hleGFnb24vY3B1LmgKQEAgLTE0Niw2ICsxNDYsNyBAQCBzdHJ1Y3QgQXJjaENQVSB7CiAK
ICAgICBib29sIGxsZGJfY29tcGF0OwogICAgIHRhcmdldF91bG9uZyBsbGRiX3N0YWNrX2FkanVz
dDsKKyAgICBib29sIHNob3J0X2NpcmN1aXQ7CiB9OwogCiAjaW5jbHVkZSAiY3B1X2JpdHMuaCIK
ZGlmZiAtLWdpdCBhL3RhcmdldC9oZXhhZ29uL2dlbl90Y2cuaCBiL3RhcmdldC9oZXhhZ29uL2dl
bl90Y2cuaAppbmRleCAyYjJhNjE3NWE1Li4xZjdlNTM1MzAwIDEwMDY0NAotLS0gYS90YXJnZXQv
aGV4YWdvbi9nZW5fdGNnLmgKKysrIGIvdGFyZ2V0L2hleGFnb24vZ2VuX3RjZy5oCkBAIC01OTIs
NyArNTkyLDggQEAKICNkZWZpbmUgZkdFTl9UQ0dfQTVfQUNTKFNIT1JUQ09ERSkgXAogICAgIGRv
IHsgXAogICAgICAgICBnZW5faGVscGVyX3ZhY3NoX3ByZWQoUGVWLCBjcHVfZW52LCBSeHhWLCBS
c3NWLCBSdHRWKTsgXAotICAgICAgICBnZW5faGVscGVyX3ZhY3NoX3ZhbChSeHhWLCBjcHVfZW52
LCBSeHhWLCBSc3NWLCBSdHRWKTsgXAorICAgICAgICBnZW5faGVscGVyX3ZhY3NoX3ZhbChSeHhW
LCBjcHVfZW52LCBSeHhWLCBSc3NWLCBSdHRWLCBcCisgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIHRjZ19jb25zdGFudF90bChjdHgtPm5lZWRfY29tbWl0KSk7IFwKICAgICB9IHdoaWxlICgw
KQogCiAjZGVmaW5lIGZHRU5fVENHX1MyX2NhYmFjZGVjYmluKFNIT1JUQ09ERSkgXApkaWZmIC0t
Z2l0IGEvdGFyZ2V0L2hleGFnb24vZ2VucHRyLmggYi90YXJnZXQvaGV4YWdvbi9nZW5wdHIuaApp
bmRleCA3NWQwZmMyNjJkLi40MjA4NjdmOTM0IDEwMDY0NAotLS0gYS90YXJnZXQvaGV4YWdvbi9n
ZW5wdHIuaAorKysgYi90YXJnZXQvaGV4YWdvbi9nZW5wdHIuaApAQCAtNTgsNCArNTgsNiBAQCB2
b2lkIGdlbl9zZXRfaGFsZihpbnQgTiwgVENHdiByZXN1bHQsIFRDR3Ygc3JjKTsKIHZvaWQgZ2Vu
X3NldF9oYWxmX2k2NChpbnQgTiwgVENHdl9pNjQgcmVzdWx0LCBUQ0d2IHNyYyk7CiB2b2lkIHBy
b2JlX25vc2h1Zl9sb2FkKFRDR3YgdmEsIGludCBzLCBpbnQgbWkpOwogCitleHRlcm4gY29uc3Qg
dGFyZ2V0X3Vsb25nIHJlZ19pbW11dF9tYXNrc1tUT1RBTF9QRVJfVEhSRUFEX1JFR1NdOworCiAj
ZW5kaWYKZGlmZiAtLWdpdCBhL3RhcmdldC9oZXhhZ29uL2hlbHBlci5oIGIvdGFyZ2V0L2hleGFn
b24vaGVscGVyLmgKaW5kZXggNzM4NDllM2Q0OS4uNGI3NTBkMDM1MSAxMDA2NDQKLS0tIGEvdGFy
Z2V0L2hleGFnb24vaGVscGVyLmgKKysrIGIvdGFyZ2V0L2hleGFnb24vaGVscGVyLmgKQEAgLTI5
LDcgKzI5LDcgQEAgREVGX0hFTFBFUl9GTEFHU180KGZjaXJjYWRkLCBUQ0dfQ0FMTF9OT19SV0df
U0UsIHMzMiwgczMyLCBzMzIsIHMzMiwgczMyKQogREVGX0hFTFBFUl9GTEFHU18xKGZicmV2LCBU
Q0dfQ0FMTF9OT19SV0dfU0UsIGkzMiwgaTMyKQogREVGX0hFTFBFUl8zKHNmcmVjaXBhLCBpNjQs
IGVudiwgZjMyLCBmMzIpCiBERUZfSEVMUEVSXzIoc2ZpbnZzcXJ0YSwgaTY0LCBlbnYsIGYzMikK
LURFRl9IRUxQRVJfNCh2YWNzaF92YWwsIHM2NCwgZW52LCBzNjQsIHM2NCwgczY0KQorREVGX0hF
TFBFUl81KHZhY3NoX3ZhbCwgczY0LCBlbnYsIHM2NCwgczY0LCBzNjQsIGkzMikKIERFRl9IRUxQ
RVJfRkxBR1NfNCh2YWNzaF9wcmVkLCBUQ0dfQ0FMTF9OT19SV0dfU0UsIHMzMiwgZW52LCBzNjQs
IHM2NCwgczY0KQogREVGX0hFTFBFUl9GTEFHU18yKGNhYmFjZGVjYmluX3ZhbCwgVENHX0NBTExf
Tk9fUldHX1NFLCBzNjQsIHM2NCwgczY0KQogREVGX0hFTFBFUl9GTEFHU18yKGNhYmFjZGVjYmlu
X3ByZWQsIFRDR19DQUxMX05PX1JXR19TRSwgczMyLCBzNjQsIHM2NCkKZGlmZiAtLWdpdCBhL3Rh
cmdldC9oZXhhZ29uL21hY3Jvcy5oIGIvdGFyZ2V0L2hleGFnb24vbWFjcm9zLmgKaW5kZXggMTZl
NzJlZDBkNS4uYTY4NDQ2YTM2NyAxMDA2NDQKLS0tIGEvdGFyZ2V0L2hleGFnb24vbWFjcm9zLmgK
KysrIGIvdGFyZ2V0L2hleGFnb24vbWFjcm9zLmgKQEAgLTQ0LDggKzQ0LDE3IEBACiAgICAgICAg
ICAgICAgICAgICAgcmVnX2ZpZWxkX2luZm9bRklFTERdLm9mZnNldCkKIAogI2RlZmluZSBTRVRf
VVNSX0ZJRUxEKEZJRUxELCBWQUwpIFwKLSAgICBmSU5TRVJUX0JJVFMoZW52LT5uZXdfdmFsdWVb
SEVYX1JFR19VU1JdLCByZWdfZmllbGRfaW5mb1tGSUVMRF0ud2lkdGgsIFwKLSAgICAgICAgICAg
ICAgICAgcmVnX2ZpZWxkX2luZm9bRklFTERdLm9mZnNldCwgKFZBTCkpCisgICAgZG8geyBcCisg
ICAgICAgIGlmIChwa3RfbmVlZF9jb21taXQpIHsgXAorICAgICAgICAgICAgZklOU0VSVF9CSVRT
KGVudi0+bmV3X3ZhbHVlW0hFWF9SRUdfVVNSXSwgXAorICAgICAgICAgICAgICAgICAgICAgICAg
cmVnX2ZpZWxkX2luZm9bRklFTERdLndpZHRoLCBcCisgICAgICAgICAgICAgICAgICAgICAgICBy
ZWdfZmllbGRfaW5mb1tGSUVMRF0ub2Zmc2V0LCAoVkFMKSk7IFwKKyAgICAgICAgfSBlbHNlIHsg
XAorICAgICAgICAgICAgZklOU0VSVF9CSVRTKGVudi0+Z3ByW0hFWF9SRUdfVVNSXSwgXAorICAg
ICAgICAgICAgICAgICAgICAgICAgcmVnX2ZpZWxkX2luZm9bRklFTERdLndpZHRoLCBcCisgICAg
ICAgICAgICAgICAgICAgICAgICByZWdfZmllbGRfaW5mb1tGSUVMRF0ub2Zmc2V0LCAoVkFMKSk7
IFwKKyAgICAgICAgfSBcCisgICAgfSB3aGlsZSAoMCkKICNlbmRpZgogCiAjaWZkZWYgUUVNVV9H
RU5FUkFURQpkaWZmIC0tZ2l0IGEvdGFyZ2V0L2hleGFnb24vdHJhbnNsYXRlLmggYi90YXJnZXQv
aGV4YWdvbi90cmFuc2xhdGUuaAppbmRleCBmNzIyMjg4NTlmLi4zZjZmZDM0NTJjIDEwMDY0NAot
LS0gYS90YXJnZXQvaGV4YWdvbi90cmFuc2xhdGUuaAorKysgYi90YXJnZXQvaGV4YWdvbi90cmFu
c2xhdGUuaApAQCAtNjIsMTAgKzYyLDEyIEBAIHR5cGVkZWYgc3RydWN0IERpc2FzQ29udGV4dCB7
CiAgICAgaW50IHFyZWdfbG9nX2lkeDsKICAgICBERUNMQVJFX0JJVE1BUChxcmVnc19yZWFkLCBO
VU1fUVJFR1MpOwogICAgIGJvb2wgcHJlX2NvbW1pdDsKKyAgICBib29sIG5lZWRfY29tbWl0Owog
ICAgIFRDR0NvbmQgYnJhbmNoX2NvbmQ7CiAgICAgdGFyZ2V0X3Vsb25nIGJyYW5jaF9kZXN0Owog
ICAgIGJvb2wgaXNfdGlnaHRfbG9vcDsKICAgICBib29sIG5lZWRfcGt0X2hhc19zdG9yZV9zMTsK
KyAgICBib29sIHNob3J0X2NpcmN1aXQ7CiB9IERpc2FzQ29udGV4dDsKIAogc3RhdGljIGlubGlu
ZSB2b2lkIGN0eF9sb2dfcHJlZF93cml0ZShEaXNhc0NvbnRleHQgKmN0eCwgaW50IHBudW0pCmRp
ZmYgLS1naXQgYS90YXJnZXQvaGV4YWdvbi9hcmNoLmMgYi90YXJnZXQvaGV4YWdvbi9hcmNoLmMK
aW5kZXggZGE3OWI0MWM0ZC4uZDA1M2Q2ODQ4NyAxMDA2NDQKLS0tIGEvdGFyZ2V0L2hleGFnb24v
YXJjaC5jCisrKyBiL3RhcmdldC9oZXhhZ29uL2FyY2guYwpAQCAtMSw1ICsxLDUgQEAKIC8qCi0g
KiAgQ29weXJpZ2h0KGMpIDIwMTktMjAyMiBRdWFsY29tbSBJbm5vdmF0aW9uIENlbnRlciwgSW5j
LiBBbGwgUmlnaHRzIFJlc2VydmVkLgorICogIENvcHlyaWdodChjKSAyMDE5LTIwMjMgUXVhbGNv
bW0gSW5ub3ZhdGlvbiBDZW50ZXIsIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICAqCiAgKiAg
VGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFu
ZC9vciBtb2RpZnkKICAqICBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1
YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieQpAQCAtMjI0LDYgKzIyNCw3IEBAIHZvaWQgYXJj
aF9mcG9wX3N0YXJ0KENQVUhleGFnb25TdGF0ZSAqZW52KQogCiB2b2lkIGFyY2hfZnBvcF9lbmQo
Q1BVSGV4YWdvblN0YXRlICplbnYpCiB7CisgICAgY29uc3QgYm9vbCBwa3RfbmVlZF9jb21taXQg
PSB0cnVlOwogICAgIGludCBmbGFncyA9IGdldF9mbG9hdF9leGNlcHRpb25fZmxhZ3MoJmVudi0+
ZnBfc3RhdHVzKTsKICAgICBpZiAoZmxhZ3MgIT0gMCkgewogICAgICAgICBTT0ZURkxPQVRfVEVT
VF9GTEFHKGZsb2F0X2ZsYWdfaW5leGFjdCwgRlBJTlBGLCBGUElOUEUpOwpkaWZmIC0tZ2l0IGEv
dGFyZ2V0L2hleGFnb24vY3B1LmMgYi90YXJnZXQvaGV4YWdvbi9jcHUuYwppbmRleCBhYjQwY2Zj
MjgzLi40YWRmOTBkY2ZhIDEwMDY0NAotLS0gYS90YXJnZXQvaGV4YWdvbi9jcHUuYworKysgYi90
YXJnZXQvaGV4YWdvbi9jcHUuYwpAQCAtMSw1ICsxLDUgQEAKIC8qCi0gKiAgQ29weXJpZ2h0KGMp
IDIwMTktMjAyMSBRdWFsY29tbSBJbm5vdmF0aW9uIENlbnRlciwgSW5jLiBBbGwgUmlnaHRzIFJl
c2VydmVkLgorICogIENvcHlyaWdodChjKSAyMDE5LTIwMjMgUXVhbGNvbW0gSW5ub3ZhdGlvbiBD
ZW50ZXIsIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICAqCiAgKiAgVGhpcyBwcm9ncmFtIGlz
IGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnkKICAq
ICBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFz
IHB1Ymxpc2hlZCBieQpAQCAtNTIsNiArNTIsOCBAQCBzdGF0aWMgUHJvcGVydHkgaGV4YWdvbl9s
bGRiX2NvbXBhdF9wcm9wZXJ0eSA9CiBzdGF0aWMgUHJvcGVydHkgaGV4YWdvbl9sbGRiX3N0YWNr
X2FkanVzdF9wcm9wZXJ0eSA9CiAgICAgREVGSU5FX1BST1BfVU5TSUdORUQoImxsZGItc3RhY2st
YWRqdXN0IiwgSGV4YWdvbkNQVSwgbGxkYl9zdGFja19hZGp1c3QsCiAgICAgICAgICAgICAgICAg
ICAgICAgICAgMCwgcWRldl9wcm9wX3VpbnQzMiwgdGFyZ2V0X3Vsb25nKTsKK3N0YXRpYyBQcm9w
ZXJ0eSBoZXhhZ29uX3Nob3J0X2NpcmN1aXRfcHJvcGVydHkgPQorICAgIERFRklORV9QUk9QX0JP
T0woInNob3J0LWNpcmN1aXQiLCBIZXhhZ29uQ1BVLCBzaG9ydF9jaXJjdWl0LCB0cnVlKTsKIAog
Y29uc3QgY2hhciAqIGNvbnN0IGhleGFnb25fcmVnbmFtZXNbVE9UQUxfUEVSX1RIUkVBRF9SRUdT
XSA9IHsKICAgICJyMCIsICJyMSIsICAicjIiLCAgInIzIiwgICJyNCIsICAgInI1IiwgICJyNiIs
ICAicjciLApAQCAtMzI4LDYgKzMzMCw3IEBAIHN0YXRpYyB2b2lkIGhleGFnb25fY3B1X2luaXQo
T2JqZWN0ICpvYmopCiAgICAgY3B1X3NldF9jcHVzdGF0ZV9wb2ludGVycyhjcHUpOwogICAgIHFk
ZXZfcHJvcGVydHlfYWRkX3N0YXRpYyhERVZJQ0Uob2JqKSwgJmhleGFnb25fbGxkYl9jb21wYXRf
cHJvcGVydHkpOwogICAgIHFkZXZfcHJvcGVydHlfYWRkX3N0YXRpYyhERVZJQ0Uob2JqKSwgJmhl
eGFnb25fbGxkYl9zdGFja19hZGp1c3RfcHJvcGVydHkpOworICAgIHFkZXZfcHJvcGVydHlfYWRk
X3N0YXRpYyhERVZJQ0Uob2JqKSwgJmhleGFnb25fc2hvcnRfY2lyY3VpdF9wcm9wZXJ0eSk7CiB9
CiAKICNpbmNsdWRlICJody9jb3JlL3RjZy1jcHUtb3BzLmgiCmRpZmYgLS1naXQgYS90YXJnZXQv
aGV4YWdvbi9nZW5wdHIuYyBiL3RhcmdldC9oZXhhZ29uL2dlbnB0ci5jCmluZGV4IGFmZjlmZmUz
N2IuLjVhMGY2YjUxOTUgMTAwNjQ0Ci0tLSBhL3RhcmdldC9oZXhhZ29uL2dlbnB0ci5jCisrKyBi
L3RhcmdldC9oZXhhZ29uL2dlbnB0ci5jCkBAIC00NSw3ICs0NSw3IEBAIFRDR3YgZ2VuX3JlYWRf
cHJlZyhUQ0d2IHByZWQsIHVpbnQ4X3QgbnVtKQogCiAjZGVmaW5lIElNTVVUQUJMRSAofjApCiAK
LXN0YXRpYyBjb25zdCB0YXJnZXRfdWxvbmcgcmVnX2ltbXV0X21hc2tzW1RPVEFMX1BFUl9USFJF
QURfUkVHU10gPSB7Citjb25zdCB0YXJnZXRfdWxvbmcgcmVnX2ltbXV0X21hc2tzW1RPVEFMX1BF
Ul9USFJFQURfUkVHU10gPSB7CiAgICAgW0hFWF9SRUdfVVNSXSA9IDB4YzEzMDAwYzAsCiAgICAg
W0hFWF9SRUdfUENdID0gSU1NVVRBQkxFLAogICAgIFtIRVhfUkVHX0dQXSA9IDB4M2YsCkBAIC03
MCwxNCArNzAsMTggQEAgc3RhdGljIGlubGluZSB2b2lkIGdlbl9tYXNrZWRfcmVnX3dyaXRlKFRD
R3YgbmV3X3ZhbCwgVENHdiBjdXJfdmFsLAogCiBzdGF0aWMgVENHdiBnZXRfcmVzdWx0X2dwcihE
aXNhc0NvbnRleHQgKmN0eCwgaW50IHJudW0pCiB7Ci0gICAgcmV0dXJuIGhleF9uZXdfdmFsdWVb
cm51bV07CisgICAgaWYgKGN0eC0+bmVlZF9jb21taXQpIHsKKyAgICAgICAgcmV0dXJuIGhleF9u
ZXdfdmFsdWVbcm51bV07CisgICAgfSBlbHNlIHsKKyAgICAgICAgcmV0dXJuIGhleF9ncHJbcm51
bV07CisgICAgfQogfQogCiBzdGF0aWMgVENHdl9pNjQgZ2V0X3Jlc3VsdF9ncHJfcGFpcihEaXNh
c0NvbnRleHQgKmN0eCwgaW50IHJudW0pCiB7CiAgICAgVENHdl9pNjQgcmVzdWx0ID0gdGNnX3Rl
bXBfbmV3X2k2NCgpOwotICAgIHRjZ19nZW5fY29uY2F0X2kzMl9pNjQocmVzdWx0LCBoZXhfbmV3
X3ZhbHVlW3JudW1dLAotICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZXhfbmV3
X3ZhbHVlW3JudW0gKyAxXSk7CisgICAgdGNnX2dlbl9jb25jYXRfaTMyX2k2NChyZXN1bHQsIGdl
dF9yZXN1bHRfZ3ByKGN0eCwgcm51bSksCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIGdldF9yZXN1bHRfZ3ByKGN0eCwgcm51bSArIDEpKTsKICAgICByZXR1cm4gcmVzdWx0Owog
fQogCkBAIC04Niw3ICs5MCw3IEBAIHZvaWQgZ2VuX2xvZ19yZWdfd3JpdGUoRGlzYXNDb250ZXh0
ICpjdHgsIGludCBybnVtLCBUQ0d2IHZhbCkKICAgICBjb25zdCB0YXJnZXRfdWxvbmcgcmVnX21h
c2sgPSByZWdfaW1tdXRfbWFza3Nbcm51bV07CiAKICAgICBnZW5fbWFza2VkX3JlZ193cml0ZSh2
YWwsIGhleF9ncHJbcm51bV0sIHJlZ19tYXNrKTsKLSAgICB0Y2dfZ2VuX21vdl90bChoZXhfbmV3
X3ZhbHVlW3JudW1dLCB2YWwpOworICAgIHRjZ19nZW5fbW92X3RsKGdldF9yZXN1bHRfZ3ByKGN0
eCwgcm51bSksIHZhbCk7CiAgICAgaWYgKEhFWF9ERUJVRykgewogICAgICAgICAvKiBEbyB0aGlz
IHNvIEhFTFBFUihkZWJ1Z19jb21taXRfZW5kKSB3aWxsIGtub3cgKi8KICAgICAgICAgdGNnX2dl
bl9tb3ZpX3RsKGhleF9yZWdfd3JpdHRlbltybnVtXSwgMSk7CkBAIC05NSwyNyArOTksMTUgQEAg
dm9pZCBnZW5fbG9nX3JlZ193cml0ZShEaXNhc0NvbnRleHQgKmN0eCwgaW50IHJudW0sIFRDR3Yg
dmFsKQogCiBzdGF0aWMgdm9pZCBnZW5fbG9nX3JlZ193cml0ZV9wYWlyKERpc2FzQ29udGV4dCAq
Y3R4LCBpbnQgcm51bSwgVENHdl9pNjQgdmFsKQogewotICAgIGNvbnN0IHRhcmdldF91bG9uZyBy
ZWdfbWFza19sb3cgPSByZWdfaW1tdXRfbWFza3Nbcm51bV07Ci0gICAgY29uc3QgdGFyZ2V0X3Vs
b25nIHJlZ19tYXNrX2hpZ2ggPSByZWdfaW1tdXRfbWFza3Nbcm51bSArIDFdOwogICAgIFRDR3Yg
dmFsMzIgPSB0Y2dfdGVtcF9uZXcoKTsKIAogICAgIC8qIExvdyB3b3JkICovCiAgICAgdGNnX2dl
bl9leHRybF9pNjRfaTMyKHZhbDMyLCB2YWwpOwotICAgIGdlbl9tYXNrZWRfcmVnX3dyaXRlKHZh
bDMyLCBoZXhfZ3ByW3JudW1dLCByZWdfbWFza19sb3cpOwotICAgIHRjZ19nZW5fbW92X3RsKGhl
eF9uZXdfdmFsdWVbcm51bV0sIHZhbDMyKTsKLSAgICBpZiAoSEVYX0RFQlVHKSB7Ci0gICAgICAg
IC8qIERvIHRoaXMgc28gSEVMUEVSKGRlYnVnX2NvbW1pdF9lbmQpIHdpbGwga25vdyAqLwotICAg
ICAgICB0Y2dfZ2VuX21vdmlfdGwoaGV4X3JlZ193cml0dGVuW3JudW1dLCAxKTsKLSAgICB9Cisg
ICAgZ2VuX2xvZ19yZWdfd3JpdGUoY3R4LCBybnVtLCB2YWwzMik7CiAKICAgICAvKiBIaWdoIHdv
cmQgKi8KICAgICB0Y2dfZ2VuX2V4dHJoX2k2NF9pMzIodmFsMzIsIHZhbCk7Ci0gICAgZ2VuX21h
c2tlZF9yZWdfd3JpdGUodmFsMzIsIGhleF9ncHJbcm51bSArIDFdLCByZWdfbWFza19oaWdoKTsK
LSAgICB0Y2dfZ2VuX21vdl90bChoZXhfbmV3X3ZhbHVlW3JudW0gKyAxXSwgdmFsMzIpOwotICAg
IGlmIChIRVhfREVCVUcpIHsKLSAgICAgICAgLyogRG8gdGhpcyBzbyBIRUxQRVIoZGVidWdfY29t
bWl0X2VuZCkgd2lsbCBrbm93ICovCi0gICAgICAgIHRjZ19nZW5fbW92aV90bChoZXhfcmVnX3dy
aXR0ZW5bcm51bSArIDFdLCAxKTsKLSAgICB9CisgICAgZ2VuX2xvZ19yZWdfd3JpdGUoY3R4LCBy
bnVtICsgMSwgdmFsMzIpOwogfQogCiB2b2lkIGdlbl9sb2dfcHJlZF93cml0ZShEaXNhc0NvbnRl
eHQgKmN0eCwgaW50IHBudW0sIFRDR3YgdmFsKQpkaWZmIC0tZ2l0IGEvdGFyZ2V0L2hleGFnb24v
b3BfaGVscGVyLmMgYi90YXJnZXQvaGV4YWdvbi9vcF9oZWxwZXIuYwppbmRleCA0NmNjYzU5MTA2
Li5mYzVjMzBhMTQxIDEwMDY0NAotLS0gYS90YXJnZXQvaGV4YWdvbi9vcF9oZWxwZXIuYworKysg
Yi90YXJnZXQvaGV4YWdvbi9vcF9oZWxwZXIuYwpAQCAtMjIwLDcgKzIyMCw3IEBAIHZvaWQgSEVM
UEVSKGRlYnVnX2NvbW1pdF9lbmQpKENQVUhleGFnb25TdGF0ZSAqZW52LCBpbnQgaGFzX3N0MCwg
aW50IGhhc19zdDEpCiAgICAgICAgICAgICAgICAgcmVnX3ByaW50ZWQgPSB0cnVlOwogICAgICAg
ICAgICAgfQogICAgICAgICAgICAgSEVYX0RFQlVHX0xPRygiXHRyJWQgPSAiIFRBUkdFVF9GTVRf
bGQgIiAoMHgiIFRBUkdFVF9GTVRfbHggIilcbiIsCi0gICAgICAgICAgICAgICAgICAgICAgICAg
IGksIGVudi0+bmV3X3ZhbHVlW2ldLCBlbnYtPm5ld192YWx1ZVtpXSk7CisgICAgICAgICAgICAg
ICAgICAgICAgICAgIGksIGVudi0+Z3ByW2ldLCBlbnYtPmdwcltpXSk7CiAgICAgICAgIH0KICAg
ICB9CiAKQEAgLTM1Miw3ICszNTIsOCBAQCB1aW50NjRfdCBIRUxQRVIoc2ZpbnZzcXJ0YSkoQ1BV
SGV4YWdvblN0YXRlICplbnYsIGZsb2F0MzIgUnNWKQogfQogCiBpbnQ2NF90IEhFTFBFUih2YWNz
aF92YWwpKENQVUhleGFnb25TdGF0ZSAqZW52LAotICAgICAgICAgICAgICAgICAgICAgICAgICAg
aW50NjRfdCBSeHhWLCBpbnQ2NF90IFJzc1YsIGludDY0X3QgUnR0VikKKyAgICAgICAgICAgICAg
ICAgICAgICAgICAgIGludDY0X3QgUnh4ViwgaW50NjRfdCBSc3NWLCBpbnQ2NF90IFJ0dFYsCisg
ICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50MzJfdCBwa3RfbmVlZF9jb21taXQpCiB7CiAg
ICAgZm9yIChpbnQgaSA9IDA7IGkgPCA0OyBpKyspIHsKICAgICAgICAgaW50IHh2ID0gc2V4dHJh
Y3Q2NChSeHhWLCBpICogMTYsIDE2KTsKZGlmZiAtLWdpdCBhL3RhcmdldC9oZXhhZ29uL3RyYW5z
bGF0ZS5jIGIvdGFyZ2V0L2hleGFnb24vdHJhbnNsYXRlLmMKaW5kZXggMDIzZmM5YmUxZS4uNWJk
NzFiZGNhZiAxMDA2NDQKLS0tIGEvdGFyZ2V0L2hleGFnb24vdHJhbnNsYXRlLmMKKysrIGIvdGFy
Z2V0L2hleGFnb24vdHJhbnNsYXRlLmMKQEAgLTI3LDYgKzI3LDcgQEAKICNpbmNsdWRlICJpbnNu
LmgiCiAjaW5jbHVkZSAiZGVjb2RlLmgiCiAjaW5jbHVkZSAidHJhbnNsYXRlLmgiCisjaW5jbHVk
ZSAiZ2VucHRyLmgiCiAjaW5jbHVkZSAicHJpbnRpbnNuLmgiCiAKICNpbmNsdWRlICJhbmFseXpl
X2Z1bmNzX2dlbmVyYXRlZC5jLmluYyIKQEAgLTIzOSw3ICsyNDAsNyBAQCBzdGF0aWMgaW50IHJl
YWRfcGFja2V0X3dvcmRzKENQVUhleGFnb25TdGF0ZSAqZW52LCBEaXNhc0NvbnRleHQgKmN0eCwK
ICAgICByZXR1cm4gbndvcmRzOwogfQogCi1zdGF0aWMgR19HTlVDX1VOVVNFRCBib29sIGNoZWNr
X2Zvcl9hdHRyaWIoUGFja2V0ICpwa3QsIGludCBhdHRyaWIpCitzdGF0aWMgYm9vbCBjaGVja19m
b3JfYXR0cmliKFBhY2tldCAqcGt0LCBpbnQgYXR0cmliKQogewogICAgIGZvciAoaW50IGkgPSAw
OyBpIDwgcGt0LT5udW1faW5zbnM7IGkrKykgewogICAgICAgICBpZiAoR0VUX0FUVFJJQihwa3Qt
Pmluc25baV0ub3Bjb2RlLCBhdHRyaWIpKSB7CkBAIC0zMzYsNiArMzM3LDU4IEBAIHN0YXRpYyB2
b2lkIG1hcmtfaW1wbGljaXRfcHJlZF93cml0ZXMoRGlzYXNDb250ZXh0ICpjdHgpCiAgICAgbWFy
a19pbXBsaWNpdF9wcmVkX3dyaXRlKGN0eCwgQV9JTVBMSUNJVF9XUklURVNfUDMsIDMpOwogfQog
CitzdGF0aWMgYm9vbCBwa3RfcmFpc2VzX2V4Y2VwdGlvbihQYWNrZXQgKnBrdCkKK3sKKyAgICBp
ZiAoY2hlY2tfZm9yX2F0dHJpYihwa3QsIEFfTE9BRCkgfHwKKyAgICAgICAgY2hlY2tfZm9yX2F0
dHJpYihwa3QsIEFfU1RPUkUpKSB7CisgICAgICAgIHJldHVybiB0cnVlOworICAgIH0KKyAgICBy
ZXR1cm4gZmFsc2U7Cit9CisKK3N0YXRpYyBib29sIG5lZWRfY29tbWl0KERpc2FzQ29udGV4dCAq
Y3R4KQoreworICAgIFBhY2tldCAqcGt0ID0gY3R4LT5wa3Q7CisKKyAgICAvKgorICAgICAqIElm
IHRoZSBzaG9ydC1jaXJjdWl0IHByb3BlcnR5IGlzIHNldCB0byBmYWxzZSwgd2UnbGwgYWx3YXlz
IGRvIHRoZSBjb21taXQKKyAgICAgKi8KKyAgICBpZiAoIWN0eC0+c2hvcnRfY2lyY3VpdCkgewor
ICAgICAgICByZXR1cm4gdHJ1ZTsKKyAgICB9CisKKyAgICBpZiAocGt0X3JhaXNlc19leGNlcHRp
b24ocGt0KSkgeworICAgICAgICByZXR1cm4gdHJ1ZTsKKyAgICB9CisKKyAgICAvKiBSZWdpc3Rl
cnMgd2l0aCBpbW11dGFiaWxpdHkgZmxhZ3MgcmVxdWlyZSBuZXdfdmFsdWUgKi8KKyAgICBmb3Ig
KGludCBpID0gMDsgaSA8IGN0eC0+cmVnX2xvZ19pZHg7IGkrKykgeworICAgICAgICBpbnQgcm51
bSA9IGN0eC0+cmVnX2xvZ1tpXTsKKyAgICAgICAgaWYgKHJlZ19pbW11dF9tYXNrc1tybnVtXSkg
eworICAgICAgICAgICAgcmV0dXJuIHRydWU7CisgICAgICAgIH0KKyAgICB9CisKKyAgICAvKiBG
bG9hdGluZyBwb2ludCBpbnN0cnVjdGlvbnMgYXJlIGhhcmQtY29kZWQgdG8gdXNlIG5ld192YWx1
ZSAqLworICAgIGlmIChjaGVja19mb3JfYXR0cmliKHBrdCwgQV9GUE9QKSkgeworICAgICAgICBy
ZXR1cm4gdHJ1ZTsKKyAgICB9CisKKyAgICBpZiAocGt0LT5udW1faW5zbnMgPT0gMSkgeworICAg
ICAgICByZXR1cm4gZmFsc2U7CisgICAgfQorCisgICAgLyogQ2hlY2sgZm9yIG92ZXJsYXAgYmV0
d2VlbiByZWdpc3RlciByZWFkcyBhbmQgd3JpdGVzICovCisgICAgZm9yIChpbnQgaSA9IDA7IGkg
PCBjdHgtPnJlZ19sb2dfaWR4OyBpKyspIHsKKyAgICAgICAgaW50IHJudW0gPSBjdHgtPnJlZ19s
b2dbaV07CisgICAgICAgIGlmICh0ZXN0X2JpdChybnVtLCBjdHgtPnJlZ3NfcmVhZCkpIHsKKyAg
ICAgICAgICAgIHJldHVybiB0cnVlOworICAgICAgICB9CisgICAgfQorCisgICAgcmV0dXJuIGZh
bHNlOworfQorCiBzdGF0aWMgdm9pZCBtYXJrX2ltcGxpY2l0X3ByZWRfcmVhZChEaXNhc0NvbnRl
eHQgKmN0eCwgaW50IGF0dHJpYiwgaW50IHBudW0pCiB7CiAgICAgaWYgKEdFVF9BVFRSSUIoY3R4
LT5pbnNuLT5vcGNvZGUsIGF0dHJpYikpIHsKQEAgLTM2NSw2ICs0MTgsOCBAQCBzdGF0aWMgdm9p
ZCBhbmFseXplX3BhY2tldChEaXNhc0NvbnRleHQgKmN0eCkKICAgICAgICAgbWFya19pbXBsaWNp
dF9wcmVkX3dyaXRlcyhjdHgpOwogICAgICAgICBtYXJrX2ltcGxpY2l0X3ByZWRfcmVhZHMoY3R4
KTsKICAgICB9CisKKyAgICBjdHgtPm5lZWRfY29tbWl0ID0gbmVlZF9jb21taXQoY3R4KTsKIH0K
IAogc3RhdGljIHZvaWQgZ2VuX3N0YXJ0X3BhY2tldChEaXNhc0NvbnRleHQgKmN0eCkKQEAgLTQz
NCw3ICs0ODksOCBAQCBzdGF0aWMgdm9pZCBnZW5fc3RhcnRfcGFja2V0KERpc2FzQ29udGV4dCAq
Y3R4KQogICAgIH0KIAogICAgIC8qIFByZWxvYWQgdGhlIHByZWRpY2F0ZWQgcmVnaXN0ZXJzIGlu
dG8gaGV4X25ld192YWx1ZVtpXSAqLwotICAgIGlmICghYml0bWFwX2VtcHR5KGN0eC0+cHJlZGlj
YXRlZF9yZWdzLCBUT1RBTF9QRVJfVEhSRUFEX1JFR1MpKSB7CisgICAgaWYgKGN0eC0+bmVlZF9j
b21taXQgJiYKKyAgICAgICAgIWJpdG1hcF9lbXB0eShjdHgtPnByZWRpY2F0ZWRfcmVncywgVE9U
QUxfUEVSX1RIUkVBRF9SRUdTKSkgewogICAgICAgICBpbnQgaSA9IGZpbmRfZmlyc3RfYml0KGN0
eC0+cHJlZGljYXRlZF9yZWdzLCBUT1RBTF9QRVJfVEhSRUFEX1JFR1MpOwogICAgICAgICB3aGls
ZSAoaSA8IFRPVEFMX1BFUl9USFJFQURfUkVHUykgewogICAgICAgICAgICAgdGNnX2dlbl9tb3Zf
dGwoaGV4X25ld192YWx1ZVtpXSwgaGV4X2dwcltpXSk7CkBAIC01NDEsNiArNTk3LDExIEBAIHN0
YXRpYyB2b2lkIGdlbl9yZWdfd3JpdGVzKERpc2FzQ29udGV4dCAqY3R4KQogewogICAgIGludCBp
OwogCisgICAgLyogRWFybHkgZXhpdCBpZiBub3QgbmVlZGVkICovCisgICAgaWYgKCFjdHgtPm5l
ZWRfY29tbWl0KSB7CisgICAgICAgIHJldHVybjsKKyAgICB9CisKICAgICBmb3IgKGkgPSAwOyBp
IDwgY3R4LT5yZWdfbG9nX2lkeDsgaSsrKSB7CiAgICAgICAgIGludCByZWdfbnVtID0gY3R4LT5y
ZWdfbG9nW2ldOwogCkBAIC05MTksNiArOTgwLDcgQEAgc3RhdGljIHZvaWQgaGV4YWdvbl90cl9p
bml0X2Rpc2FzX2NvbnRleHQoRGlzYXNDb250ZXh0QmFzZSAqZGNiYXNlLAogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ1BVU3RhdGUgKmNzKQogewogICAgIERpc2Fz
Q29udGV4dCAqY3R4ID0gY29udGFpbmVyX29mKGRjYmFzZSwgRGlzYXNDb250ZXh0LCBiYXNlKTsK
KyAgICBIZXhhZ29uQ1BVICpoZXhfY3B1ID0gZW52X2FyY2hjcHUoY3MtPmVudl9wdHIpOwogICAg
IHVpbnQzMl90IGhleF9mbGFncyA9IGRjYmFzZS0+dGItPmZsYWdzOwogCiAgICAgY3R4LT5tZW1f
aWR4ID0gTU1VX1VTRVJfSURYOwpAQCAtOTI3LDYgKzk4OSw3IEBAIHN0YXRpYyB2b2lkIGhleGFn
b25fdHJfaW5pdF9kaXNhc19jb250ZXh0KERpc2FzQ29udGV4dEJhc2UgKmRjYmFzZSwKICAgICBj
dHgtPm51bV9odnhfaW5zbnMgPSAwOwogICAgIGN0eC0+YnJhbmNoX2NvbmQgPSBUQ0dfQ09ORF9O
RVZFUjsKICAgICBjdHgtPmlzX3RpZ2h0X2xvb3AgPSBGSUVMRF9FWDMyKGhleF9mbGFncywgVEJf
RkxBR1MsIElTX1RJR0hUX0xPT1ApOworICAgIGN0eC0+c2hvcnRfY2lyY3VpdCA9IGhleF9jcHUt
PnNob3J0X2NpcmN1aXQ7CiB9CiAKIHN0YXRpYyB2b2lkIGhleGFnb25fdHJfdGJfc3RhcnQoRGlz
YXNDb250ZXh0QmFzZSAqZGIsIENQVVN0YXRlICpjcHUpCmRpZmYgLS1naXQgYS90YXJnZXQvaGV4
YWdvbi9nZW5faGVscGVyX2Z1bmNzLnB5IGIvdGFyZ2V0L2hleGFnb24vZ2VuX2hlbHBlcl9mdW5j
cy5weQppbmRleCBjNzNkNzkyNTgwLi5lMjU5ZWEzZDAzIDEwMDc1NQotLS0gYS90YXJnZXQvaGV4
YWdvbi9nZW5faGVscGVyX2Z1bmNzLnB5CisrKyBiL3RhcmdldC9oZXhhZ29uL2dlbl9oZWxwZXJf
ZnVuY3MucHkKQEAgLTI4Nyw2ICsyODcsOCBAQCBkZWYgZ2VuX2hlbHBlcl9mdW5jdGlvbihmLCB0
YWcsIHRhZ3JlZ3MsIHRhZ2ltbXMpOgogCiAgICAgICAgIGlmIGhleF9jb21tb24ubmVlZF9wa3Rf
aGFzX211bHRpX2NvZih0YWcpOgogICAgICAgICAgICAgZi53cml0ZSgiLCB1aW50MzJfdCBwa3Rf
aGFzX211bHRpX2NvZiIpCisgICAgICAgIGlmIChoZXhfY29tbW9uLm5lZWRfcGt0X25lZWRfY29t
bWl0KHRhZykpOgorICAgICAgICAgICAgZi53cml0ZSgiLCB1aW50MzJfdCBwa3RfbmVlZF9jb21t
aXQiKQogCiAgICAgICAgIGlmIGhleF9jb21tb24ubmVlZF9QQyh0YWcpOgogICAgICAgICAgICAg
aWYgaSA+IDA6CmRpZmYgLS1naXQgYS90YXJnZXQvaGV4YWdvbi9nZW5faGVscGVyX3Byb3Rvcy5w
eSBiL3RhcmdldC9oZXhhZ29uL2dlbl9oZWxwZXJfcHJvdG9zLnB5CmluZGV4IDE4N2NkNmUwNGUu
LmM1ZWNiODUyOTQgMTAwNzU1Ci0tLSBhL3RhcmdldC9oZXhhZ29uL2dlbl9oZWxwZXJfcHJvdG9z
LnB5CisrKyBiL3RhcmdldC9oZXhhZ29uL2dlbl9oZWxwZXJfcHJvdG9zLnB5CkBAIC04Niw2ICs4
Niw4IEBAIGRlZiBnZW5faGVscGVyX3Byb3RvdHlwZShmLCB0YWcsIHRhZ3JlZ3MsIHRhZ2ltbXMp
OgogICAgICAgICAgICAgZGVmX2hlbHBlcl9zaXplID0gbGVuKHJlZ3MpICsgbGVuKGltbXMpICsg
bnVtc2NhbGFycmVhZHdyaXRlICsgMQogICAgICAgICAgICAgaWYgaGV4X2NvbW1vbi5uZWVkX3Br
dF9oYXNfbXVsdGlfY29mKHRhZyk6CiAgICAgICAgICAgICAgICAgZGVmX2hlbHBlcl9zaXplICs9
IDEKKyAgICAgICAgICAgIGlmIGhleF9jb21tb24ubmVlZF9wa3RfbmVlZF9jb21taXQodGFnKToK
KyAgICAgICAgICAgICAgICBkZWZfaGVscGVyX3NpemUgKz0gMQogICAgICAgICAgICAgaWYgaGV4
X2NvbW1vbi5uZWVkX3BhcnQxKHRhZyk6CiAgICAgICAgICAgICAgICAgZGVmX2hlbHBlcl9zaXpl
ICs9IDEKICAgICAgICAgICAgIGlmIGhleF9jb21tb24ubmVlZF9zbG90KHRhZyk6CkBAIC0xMDMs
NiArMTA1LDggQEAgZGVmIGdlbl9oZWxwZXJfcHJvdG90eXBlKGYsIHRhZywgdGFncmVncywgdGFn
aW1tcyk6CiAgICAgICAgICAgICBkZWZfaGVscGVyX3NpemUgPSBsZW4ocmVncykgKyBsZW4oaW1t
cykgKyBudW1zY2FsYXJyZWFkd3JpdGUKICAgICAgICAgICAgIGlmIGhleF9jb21tb24ubmVlZF9w
a3RfaGFzX211bHRpX2NvZih0YWcpOgogICAgICAgICAgICAgICAgIGRlZl9oZWxwZXJfc2l6ZSAr
PSAxCisgICAgICAgICAgICBpZiBoZXhfY29tbW9uLm5lZWRfcGt0X25lZWRfY29tbWl0KHRhZyk6
CisgICAgICAgICAgICAgICAgZGVmX2hlbHBlcl9zaXplICs9IDEKICAgICAgICAgICAgIGlmIGhl
eF9jb21tb24ubmVlZF9wYXJ0MSh0YWcpOgogICAgICAgICAgICAgICAgIGRlZl9oZWxwZXJfc2l6
ZSArPSAxCiAgICAgICAgICAgICBpZiBoZXhfY29tbW9uLm5lZWRfc2xvdCh0YWcpOgpAQCAtMTU2
LDEwICsxNjAsMTIgQEAgZGVmIGdlbl9oZWxwZXJfcHJvdG90eXBlKGYsIHRhZywgdGFncmVncywg
dGFnaW1tcyk6CiAgICAgICAgIGZvciBpbW1sZXR0LCBiaXRzLCBpbW1zaGlmdCBpbiBpbW1zOgog
ICAgICAgICAgICAgZi53cml0ZSgiLCBzMzIiKQogCi0gICAgICAgICMjIEFkZCB0aGUgYXJndW1l
bnRzIGZvciB0aGUgaW5zdHJ1Y3Rpb24gcGt0X2hhc19tdWx0aV9jb2YsIHNsb3QgYW5kCi0gICAg
ICAgICMjIHBhcnQxIChpZiBuZWVkZWQpCisgICAgICAgICMjIEFkZCB0aGUgYXJndW1lbnRzIGZv
ciB0aGUgaW5zdHJ1Y3Rpb24gcGt0X2hhc19tdWx0aV9jb2YsCisgICAgICAgICMjIHBrdF9uZWVk
c19jb21taXQsIFBDLCBuZXh0X1BDLCBzbG90LCBhbmQgcGFydDEgKGlmIG5lZWRlZCkKICAgICAg
ICAgaWYgaGV4X2NvbW1vbi5uZWVkX3BrdF9oYXNfbXVsdGlfY29mKHRhZyk6CiAgICAgICAgICAg
ICBmLndyaXRlKCIsIGkzMiIpCisgICAgICAgIGlmIGhleF9jb21tb24ubmVlZF9wa3RfbmVlZF9j
b21taXQodGFnKToKKyAgICAgICAgICAgIGYud3JpdGUoJywgaTMyJykKICAgICAgICAgaWYgaGV4
X2NvbW1vbi5uZWVkX1BDKHRhZyk6CiAgICAgICAgICAgICBmLndyaXRlKCIsIGkzMiIpCiAgICAg
ICAgIGlmIGhleF9jb21tb24uaGVscGVyX25lZWRzX25leHRfUEModGFnKToKZGlmZiAtLWdpdCBh
L3RhcmdldC9oZXhhZ29uL2dlbl9pZGVmX3BhcnNlcl9mdW5jcy5weSBiL3RhcmdldC9oZXhhZ29u
L2dlbl9pZGVmX3BhcnNlcl9mdW5jcy5weQppbmRleCBhZmU2OGJkYjZmLi5iN2YyZGYwZjM2IDEw
MDY0NAotLS0gYS90YXJnZXQvaGV4YWdvbi9nZW5faWRlZl9wYXJzZXJfZnVuY3MucHkKKysrIGIv
dGFyZ2V0L2hleGFnb24vZ2VuX2lkZWZfcGFyc2VyX2Z1bmNzLnB5CkBAIC0xMDksNiArMTA5LDEz
IEBAIGRlZiBtYWluKCk6CiAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgIGlm
ICJBX0NPRiIgaW4gaGV4X2NvbW1vbi5hdHRyaWJkaWN0W3RhZ106CiAgICAgICAgICAgICAgICAg
Y29udGludWUKKyAgICAgICAgICAgICMjIFNraXAgaW5zdHJ1Y3Rpb25zIHRoYXQgYXJlIGluY29t
cGF0aWJsZSB3aXRoIHNob3J0LWNpcmN1aXQKKyAgICAgICAgICAgICMjIHBhY2tldCByZWdpc3Rl
ciB3cml0ZXMKKyAgICAgICAgICAgIGlmICggdGFnID09ICdTMl9pbnNlcnQnIG9yCisgICAgICAg
ICAgICAgICAgIHRhZyA9PSAnUzJfaW5zZXJ0X3JwJyBvcgorICAgICAgICAgICAgICAgICB0YWcg
PT0gJ1MyX2Fzcl9yX3N2d190cnVuJyBvcgorICAgICAgICAgICAgICAgICB0YWcgPT0gJ0EyX3N3
aXonICk6CisgICAgICAgICAgICAgICAgY29udGludWUKIAogICAgICAgICAgICAgcmVncyA9IHRh
Z3JlZ3NbdGFnXQogICAgICAgICAgICAgaW1tcyA9IHRhZ2ltbXNbdGFnXQpkaWZmIC0tZ2l0IGEv
dGFyZ2V0L2hleGFnb24vZ2VuX3RjZ19mdW5jcy5weSBiL3RhcmdldC9oZXhhZ29uL2dlbl90Y2df
ZnVuY3MucHkKaW5kZXggZDljY2JlNjNmNi4uMGU0NWQ0MzY4NSAxMDA3NTUKLS0tIGEvdGFyZ2V0
L2hleGFnb24vZ2VuX3RjZ19mdW5jcy5weQorKysgYi90YXJnZXQvaGV4YWdvbi9nZW5fdGNnX2Z1
bmNzLnB5CkBAIC01NTAsNiArNTUwLDkgQEAgZGVmIGdlbl90Y2dfZnVuYyhmLCB0YWcsIHJlZ3Ms
IGltbXMpOgogICAgICAgICBpZiBoZXhfY29tbW9uLm5lZWRfcGt0X2hhc19tdWx0aV9jb2YodGFn
KToKICAgICAgICAgICAgIGYud3JpdGUoIiAgICBUQ0d2IHBrdF9oYXNfbXVsdGlfY29mID0gIikK
ICAgICAgICAgICAgIGYud3JpdGUoInRjZ19jb25zdGFudF90bChjdHgtPnBrdC0+cGt0X2hhc19t
dWx0aV9jb2YpO1xuIikKKyAgICAgICAgaWYgaGV4X2NvbW1vbi5uZWVkX3BrdF9uZWVkX2NvbW1p
dCh0YWcpOgorICAgICAgICAgICAgZi53cml0ZSgiICAgIFRDR3YgcGt0X25lZWRfY29tbWl0ID0g
IikKKyAgICAgICAgICAgIGYud3JpdGUoInRjZ19jb25zdGFudF90bChjdHgtPm5lZWRfY29tbWl0
KTtcbiIpCiAgICAgICAgIGlmIGhleF9jb21tb24ubmVlZF9wYXJ0MSh0YWcpOgogICAgICAgICAg
ICAgZi53cml0ZSgiICAgIFRDR3YgcGFydDEgPSB0Y2dfY29uc3RhbnRfdGwoaW5zbi0+cGFydDEp
O1xuIikKICAgICAgICAgaWYgaGV4X2NvbW1vbi5uZWVkX3Nsb3QodGFnKToKQEAgLTU5Niw2ICs1
OTksOCBAQCBkZWYgZ2VuX3RjZ19mdW5jKGYsIHRhZywgcmVncywgaW1tcyk6CiAKICAgICAgICAg
aWYgaGV4X2NvbW1vbi5uZWVkX3BrdF9oYXNfbXVsdGlfY29mKHRhZyk6CiAgICAgICAgICAgICBm
LndyaXRlKCIsIHBrdF9oYXNfbXVsdGlfY29mIikKKyAgICAgICAgaWYgaGV4X2NvbW1vbi5uZWVk
X3BrdF9uZWVkX2NvbW1pdCh0YWcpOgorICAgICAgICAgICAgZi53cml0ZSgiLCBwa3RfbmVlZF9j
b21taXQiKQogICAgICAgICBpZiBoZXhfY29tbW9uLm5lZWRfUEModGFnKToKICAgICAgICAgICAg
IGYud3JpdGUoIiwgUEMiKQogICAgICAgICBpZiBoZXhfY29tbW9uLmhlbHBlcl9uZWVkc19uZXh0
X1BDKHRhZyk6CmRpZmYgLS1naXQgYS90YXJnZXQvaGV4YWdvbi9oZXhfY29tbW9uLnB5IGIvdGFy
Z2V0L2hleGFnb24vaGV4X2NvbW1vbi5weQppbmRleCAyMzJjNmUyYzIwLi4yOWMwNTA4ZjY2IDEw
MDc1NQotLS0gYS90YXJnZXQvaGV4YWdvbi9oZXhfY29tbW9uLnB5CisrKyBiL3RhcmdldC9oZXhh
Z29uL2hleF9jb21tb24ucHkKQEAgLTI3Niw2ICsyNzYsOSBAQCBkZWYgbmVlZF9wa3RfaGFzX211
bHRpX2NvZih0YWcpOgogICAgIHJldHVybiAiQV9DT0YiIGluIGF0dHJpYmRpY3RbdGFnXQogCiAK
K2RlZiBuZWVkX3BrdF9uZWVkX2NvbW1pdCh0YWcpOgorICAgIHJldHVybiAnQV9JTVBMSUNJVF9X
UklURVNfVVNSJyBpbiBhdHRyaWJkaWN0W3RhZ10KKwogZGVmIG5lZWRfY29uZGV4ZWNfcmVnKHRh
ZywgcmVncyk6CiAgICAgaWYgIkFfQ09OREVYRUMiIGluIGF0dHJpYmRpY3RbdGFnXToKICAgICAg
ICAgZm9yIHJlZ3R5cGUsIHJlZ2lkLCB0b3NzLCBudW1yZWdzIGluIHJlZ3M6Ci0tIAoyLjI1LjEK
Cg==

